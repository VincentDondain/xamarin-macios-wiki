#Kernel.framework

``` diff
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/Availability.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/Availability.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/Availability.h	2016-01-15 05:38:03.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/Availability.h	2016-05-11 14:53:19.000000000 +0200
@@ -133,41 +133,45 @@
 #define __MAC_10_11_2       101102
 #define __MAC_10_11_3       101103
 #define __MAC_10_11_4       101104
+#define __MAC_10_12         101200
 /* __MAC_NA is not defined to a value but is uses as a token by macros to indicate that the API is unavailable */
 
-#define __IPHONE_2_0     20000
-#define __IPHONE_2_1     20100
-#define __IPHONE_2_2     20200
-#define __IPHONE_3_0     30000
-#define __IPHONE_3_1     30100
-#define __IPHONE_3_2     30200
-#define __IPHONE_4_0     40000
-#define __IPHONE_4_1     40100
-#define __IPHONE_4_2     40200
-#define __IPHONE_4_3     40300
-#define __IPHONE_5_0     50000
-#define __IPHONE_5_1     50100
-#define __IPHONE_6_0     60000
-#define __IPHONE_6_1     60100
-#define __IPHONE_7_0     70000
-#define __IPHONE_7_1     70100
-#define __IPHONE_8_0     80000
-#define __IPHONE_8_1     80100
-#define __IPHONE_8_2     80200
-#define __IPHONE_8_3     80300
-#define __IPHONE_8_4     80400
-#define __IPHONE_9_0     90000
-#define __IPHONE_9_1     90100
-#define __IPHONE_9_2     90200
-#define __IPHONE_9_3     90300
+#define __IPHONE_2_0      20000
+#define __IPHONE_2_1      20100
+#define __IPHONE_2_2      20200
+#define __IPHONE_3_0      30000
+#define __IPHONE_3_1      30100
+#define __IPHONE_3_2      30200
+#define __IPHONE_4_0      40000
+#define __IPHONE_4_1      40100
+#define __IPHONE_4_2      40200
+#define __IPHONE_4_3      40300
+#define __IPHONE_5_0      50000
+#define __IPHONE_5_1      50100
+#define __IPHONE_6_0      60000
+#define __IPHONE_6_1      60100
+#define __IPHONE_7_0      70000
+#define __IPHONE_7_1      70100
+#define __IPHONE_8_0      80000
+#define __IPHONE_8_1      80100
+#define __IPHONE_8_2      80200
+#define __IPHONE_8_3      80300
+#define __IPHONE_8_4      80400
+#define __IPHONE_9_0      90000
+#define __IPHONE_9_1      90100
+#define __IPHONE_9_2      90200
+#define __IPHONE_9_3      90300
+#define __IPHONE_10_0    100000
 /* __IPHONE_NA is not defined to a value but is uses as a token by macros to indicate that the API is unavailable */
 
-#define __TVOS_9_0       90000
-#define __TVOS_9_1       90100
-#define __TVOS_9_2       90200
-
-#define __WATCHOS_1_0    10000
-#define __WATCHOS_2_0    20000
+#define __TVOS_9_0        90000
+#define __TVOS_9_1        90100
+#define __TVOS_9_2        90200
+#define __TVOS_10_0      100000
+
+#define __WATCHOS_1_0     10000
+#define __WATCHOS_2_0     20000
+#define __WATCHOS_3_0     30000
 
 #include <AvailabilityInternal.h>
 
@@ -196,6 +200,9 @@
   #if __has_feature(attribute_availability_with_message)
     #define __OS_AVAILABILITY(_target, _availability)            __attribute__((availability(_target,_availability)))
     #define __OS_AVAILABILITY_MSG(_target, _availability, _msg)  __attribute__((availability(_target,_availability,message=_msg)))
+  #elif __has_feature(attribute_availability)
+    #define __OS_AVAILABILITY(_target, _availability)            __attribute__((availability(_target,_availability)))
+    #define __OS_AVAILABILITY_MSG(_target, _availability, _msg)  __attribute__((availability(_target,_availability)))
   #else
     #define __OS_AVAILABILITY(_target, _availability)
     #define __OS_AVAILABILITY_MSG(_target, _availability, _msg)
@@ -327,4 +334,21 @@
 #endif
 
 
+/* for use marking APIs unavailable for swift */
+#if defined(__has_feature)
+  #if __has_feature(attribute_availability_swift)
+    #define __SWIFT_UNAVAILABLE                   __OS_AVAILABILITY(swift,unavailable)
+    #define __SWIFT_UNAVAILABLE_MSG(_msg)         __OS_AVAILABILITY_MSG(swift,unavailable,_msg)
+  #endif
+#endif
+
+#ifndef __SWIFT_UNAVAILABLE
+  #define __SWIFT_UNAVAILABLE
+#endif
+
+#ifndef __SWIFT_UNAVAILABLE_MSG
+  #define __SWIFT_UNAVAILABLE_MSG(_msg)
+#endif
+
+
 #endif /* __AVAILABILITY__ */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/AvailabilityInternal.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/AvailabilityInternal.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/AvailabilityInternal.h	2016-01-15 05:37:58.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/AvailabilityInternal.h	2016-05-11 14:53:08.000000000 +0200
@@ -43,7 +43,7 @@
     #ifdef __ENVIRONMENT_TV_OS_VERSION_MIN_REQUIRED__
         /* compiler sets __ENVIRONMENT_TV_OS_VERSION_MIN_REQUIRED__ when -mtvos-version-min is used */
         #define __TV_OS_VERSION_MIN_REQUIRED __ENVIRONMENT_TV_OS_VERSION_MIN_REQUIRED__
-        #define __TV_OS_VERSION_MAX_ALLOWED __IPHONE_9_0
+        #define __TV_OS_VERSION_MAX_ALLOWED __TVOS_10_0 
         /* for compatibility with existing code.  New code should use platform specific checks */
         #define __IPHONE_OS_VERSION_MIN_REQUIRED 90000
     #endif
@@ -53,7 +53,7 @@
     #ifdef __ENVIRONMENT_WATCH_OS_VERSION_MIN_REQUIRED__
         /* compiler sets __ENVIRONMENT_WATCH_OS_VERSION_MIN_REQUIRED__ when -mwatchos-version-min is used */
         #define __WATCH_OS_VERSION_MIN_REQUIRED __ENVIRONMENT_WATCH_OS_VERSION_MIN_REQUIRED__
-        #define __WATCH_OS_VERSION_MAX_ALLOWED 20000
+        #define __WATCH_OS_VERSION_MAX_ALLOWED 30000
         /* for compatibility with existing code.  New code should use platform specific checks */
         #define __IPHONE_OS_VERSION_MIN_REQUIRED 90000
     #endif
@@ -80,7 +80,7 @@
 #ifdef __IPHONE_OS_VERSION_MIN_REQUIRED
     /* make sure a default max version is set */
     #ifndef __IPHONE_OS_VERSION_MAX_ALLOWED
-        #define __IPHONE_OS_VERSION_MAX_ALLOWED     __IPHONE_9_3
+        #define __IPHONE_OS_VERSION_MAX_ALLOWED     __IPHONE_10_0
     #endif
     /* make sure a valid min is set */
     #if __IPHONE_OS_VERSION_MIN_REQUIRED < __IPHONE_2_0
@@ -242,6 +242,12 @@
             #else
                     #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_9_3_MSG(_msg)    __attribute__((availability(ios,introduced=2.0,deprecated=9.3)))
             #endif
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_10_0    __attribute__((availability(ios,introduced=2.0,deprecated=10.0)))
+            #if __has_feature(attribute_availability_with_message)
+                    #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_10_0_MSG(_msg)    __attribute__((availability(ios,introduced=2.0,deprecated=10.0,message=_msg)))
+            #else
+                    #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_10_0_MSG(_msg)    __attribute__((availability(ios,introduced=2.0,deprecated=10.0)))
+            #endif
             #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_NA               __attribute__((availability(ios,introduced=2.0)))
             #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_NA_MSG(_msg)     __attribute__((availability(ios,introduced=2.0)))
             #define __AVAILABILITY_INTERNAL__IPHONE_2_1                    __attribute__((availability(ios,introduced=2.1)))
@@ -389,6 +395,12 @@
             #else
                     #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_9_3_MSG(_msg)    __attribute__((availability(ios,introduced=2.1,deprecated=9.3)))
             #endif
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_10_0    __attribute__((availability(ios,introduced=2.1,deprecated=10.0)))
+            #if __has_feature(attribute_availability_with_message)
+                    #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_10_0_MSG(_msg)    __attribute__((availability(ios,introduced=2.1,deprecated=10.0,message=_msg)))
+            #else
+                    #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_10_0_MSG(_msg)    __attribute__((availability(ios,introduced=2.1,deprecated=10.0)))
+            #endif
             #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_NA               __attribute__((availability(ios,introduced=2.1)))
             #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_NA_MSG(_msg)     __attribute__((availability(ios,introduced=2.1)))
             #define __AVAILABILITY_INTERNAL__IPHONE_2_2                    __attribute__((availability(ios,introduced=2.2)))
@@ -530,6 +542,12 @@
             #else
                     #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_9_3_MSG(_msg)    __attribute__((availability(ios,introduced=2.2,deprecated=9.3)))
             #endif
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_10_0    __attribute__((availability(ios,introduced=2.2,deprecated=10.0)))
+            #if __has_feature(attribute_availability_with_message)
+                    #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_10_0_MSG(_msg)    __attribute__((availability(ios,introduced=2.2,deprecated=10.0,message=_msg)))
+            #else
+                    #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_10_0_MSG(_msg)    __attribute__((availability(ios,introduced=2.2,deprecated=10.0)))
+            #endif
             #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_NA               __attribute__((availability(ios,introduced=2.2)))
             #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_NA_MSG(_msg)     __attribute__((availability(ios,introduced=2.2)))
             #define __AVAILABILITY_INTERNAL__IPHONE_3_0                    __attribute__((availability(ios,introduced=3.0)))
@@ -665,6 +683,12 @@
             #else
                     #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_9_3_MSG(_msg)    __attribute__((availability(ios,introduced=3.0,deprecated=9.3)))
             #endif
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_10_0    __attribute__((availability(ios,introduced=3.0,deprecated=10.0)))
+            #if __has_feature(attribute_availability_with_message)
+                    #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_10_0_MSG(_msg)    __attribute__((availability(ios,introduced=3.0,deprecated=10.0,message=_msg)))
+            #else
+                    #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_10_0_MSG(_msg)    __attribute__((availability(ios,introduced=3.0,deprecated=10.0)))
+            #endif
             #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_NA               __attribute__((availability(ios,introduced=3.0)))
             #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_NA_MSG(_msg)     __attribute__((availability(ios,introduced=3.0)))
             #define __AVAILABILITY_INTERNAL__IPHONE_3_1                    __attribute__((availability(ios,introduced=3.1)))
@@ -794,6 +818,12 @@
             #else
                     #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_9_3_MSG(_msg)    __attribute__((availability(ios,introduced=3.1,deprecated=9.3)))
             #endif
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_10_0    __attribute__((availability(ios,introduced=3.1,deprecated=10.0)))
+            #if __has_feature(attribute_availability_with_message)
+                    #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_10_0_MSG(_msg)    __attribute__((availability(ios,introduced=3.1,deprecated=10.0,message=_msg)))
+            #else
+                    #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_10_0_MSG(_msg)    __attribute__((availability(ios,introduced=3.1,deprecated=10.0)))
+            #endif
             #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_NA               __attribute__((availability(ios,introduced=3.1)))
             #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_NA_MSG(_msg)     __attribute__((availability(ios,introduced=3.1)))
             #define __AVAILABILITY_INTERNAL__IPHONE_3_2                    __attribute__((availability(ios,introduced=3.2)))
@@ -917,6 +947,12 @@
             #else
                     #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_9_3_MSG(_msg)    __attribute__((availability(ios,introduced=3.2,deprecated=9.3)))
             #endif
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_10_0    __attribute__((availability(ios,introduced=3.2,deprecated=10.0)))
+            #if __has_feature(attribute_availability_with_message)
+                    #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_10_0_MSG(_msg)    __attribute__((availability(ios,introduced=3.2,deprecated=10.0,message=_msg)))
+            #else
+                    #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_10_0_MSG(_msg)    __attribute__((availability(ios,introduced=3.2,deprecated=10.0)))
+            #endif
             #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_NA               __attribute__((availability(ios,introduced=3.2)))
             #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_NA_MSG(_msg)     __attribute__((availability(ios,introduced=3.2)))
             #define __AVAILABILITY_INTERNAL__IPHONE_4_0                    __attribute__((availability(ios,introduced=4.0)))
@@ -1034,6 +1070,12 @@
             #else
                     #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_9_3_MSG(_msg)    __attribute__((availability(ios,introduced=4.0,deprecated=9.3)))
             #endif
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_10_0    __attribute__((availability(ios,introduced=4.0,deprecated=10.0)))
+            #if __has_feature(attribute_availability_with_message)
+                    #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_10_0_MSG(_msg)    __attribute__((availability(ios,introduced=4.0,deprecated=10.0,message=_msg)))
+            #else
+                    #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_10_0_MSG(_msg)    __attribute__((availability(ios,introduced=4.0,deprecated=10.0)))
+            #endif
             #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_NA               __attribute__((availability(ios,introduced=4.0)))
             #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_NA_MSG(_msg)     __attribute__((availability(ios,introduced=4.0)))
             #define __AVAILABILITY_INTERNAL__IPHONE_4_1                    __attribute__((availability(ios,introduced=4.1)))
@@ -1145,6 +1187,12 @@
             #else
                     #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_9_3_MSG(_msg)    __attribute__((availability(ios,introduced=4.1,deprecated=9.3)))
             #endif
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_10_0    __attribute__((availability(ios,introduced=4.1,deprecated=10.0)))
+            #if __has_feature(attribute_availability_with_message)
+                    #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_10_0_MSG(_msg)    __attribute__((availability(ios,introduced=4.1,deprecated=10.0,message=_msg)))
+            #else
+                    #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_10_0_MSG(_msg)    __attribute__((availability(ios,introduced=4.1,deprecated=10.0)))
+            #endif
             #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_NA               __attribute__((availability(ios,introduced=4.1)))
             #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_NA_MSG(_msg)     __attribute__((availability(ios,introduced=4.1)))
             #define __AVAILABILITY_INTERNAL__IPHONE_4_2                    __attribute__((availability(ios,introduced=4.2)))
@@ -1250,6 +1298,12 @@
             #else
                     #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_9_3_MSG(_msg)    __attribute__((availability(ios,introduced=4.2,deprecated=9.3)))
             #endif
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_10_0    __attribute__((availability(ios,introduced=4.2,deprecated=10.0)))
+            #if __has_feature(attribute_availability_with_message)
+                    #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_10_0_MSG(_msg)    __attribute__((availability(ios,introduced=4.2,deprecated=10.0,message=_msg)))
+            #else
+                    #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_10_0_MSG(_msg)    __attribute__((availability(ios,introduced=4.2,deprecated=10.0)))
+            #endif
             #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_NA               __attribute__((availability(ios,introduced=4.2)))
             #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_NA_MSG(_msg)     __attribute__((availability(ios,introduced=4.2)))
             #define __AVAILABILITY_INTERNAL__IPHONE_4_3                    __attribute__((availability(ios,introduced=4.3)))
@@ -1349,6 +1403,12 @@
             #else
                     #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_9_3_MSG(_msg)    __attribute__((availability(ios,introduced=4.3,deprecated=9.3)))
             #endif
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_10_0    __attribute__((availability(ios,introduced=4.3,deprecated=10.0)))
+            #if __has_feature(attribute_availability_with_message)
+                    #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_10_0_MSG(_msg)    __attribute__((availability(ios,introduced=4.3,deprecated=10.0,message=_msg)))
+            #else
+                    #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_10_0_MSG(_msg)    __attribute__((availability(ios,introduced=4.3,deprecated=10.0)))
+            #endif
             #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_NA               __attribute__((availability(ios,introduced=4.3)))
             #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_NA_MSG(_msg)     __attribute__((availability(ios,introduced=4.3)))
             #define __AVAILABILITY_INTERNAL__IPHONE_5_0                    __attribute__((availability(ios,introduced=5.0)))
@@ -1442,6 +1502,12 @@
             #else
                     #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_9_3_MSG(_msg)    __attribute__((availability(ios,introduced=5.0,deprecated=9.3)))
             #endif
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_10_0    __attribute__((availability(ios,introduced=5.0,deprecated=10.0)))
+            #if __has_feature(attribute_availability_with_message)
+                    #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_10_0_MSG(_msg)    __attribute__((availability(ios,introduced=5.0,deprecated=10.0,message=_msg)))
+            #else
+                    #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_10_0_MSG(_msg)    __attribute__((availability(ios,introduced=5.0,deprecated=10.0)))
+            #endif
             #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_NA               __attribute__((availability(ios,introduced=5.0)))
             #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_NA_MSG(_msg)     __attribute__((availability(ios,introduced=5.0)))
             #define __AVAILABILITY_INTERNAL__IPHONE_5_1                    __attribute__((availability(ios,introduced=5.1)))
@@ -1529,6 +1595,12 @@
             #else
                     #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_9_3_MSG(_msg)    __attribute__((availability(ios,introduced=5.1,deprecated=9.3)))
             #endif
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_10_0    __attribute__((availability(ios,introduced=5.1,deprecated=10.0)))
+            #if __has_feature(attribute_availability_with_message)
+                    #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_10_0_MSG(_msg)    __attribute__((availability(ios,introduced=5.1,deprecated=10.0,message=_msg)))
+            #else
+                    #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_10_0_MSG(_msg)    __attribute__((availability(ios,introduced=5.1,deprecated=10.0)))
+            #endif
             #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_NA               __attribute__((availability(ios,introduced=5.1)))
             #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_NA_MSG(_msg)     __attribute__((availability(ios,introduced=5.1)))
             #define __AVAILABILITY_INTERNAL__IPHONE_6_0                    __attribute__((availability(ios,introduced=6.0)))
@@ -1610,6 +1682,12 @@
             #else
                     #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_9_3_MSG(_msg)    __attribute__((availability(ios,introduced=6.0,deprecated=9.3)))
             #endif
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_10_0    __attribute__((availability(ios,introduced=6.0,deprecated=10.0)))
+            #if __has_feature(attribute_availability_with_message)
+                    #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_10_0_MSG(_msg)    __attribute__((availability(ios,introduced=6.0,deprecated=10.0,message=_msg)))
+            #else
+                    #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_10_0_MSG(_msg)    __attribute__((availability(ios,introduced=6.0,deprecated=10.0)))
+            #endif
             #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_NA               __attribute__((availability(ios,introduced=6.0)))
             #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_NA_MSG(_msg)     __attribute__((availability(ios,introduced=6.0)))
             #define __AVAILABILITY_INTERNAL__IPHONE_6_1                    __attribute__((availability(ios,introduced=6.1)))
@@ -1685,6 +1763,12 @@
             #else
                     #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_9_3_MSG(_msg)    __attribute__((availability(ios,introduced=6.1,deprecated=9.3)))
             #endif
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_10_0    __attribute__((availability(ios,introduced=6.1,deprecated=10.0)))
+            #if __has_feature(attribute_availability_with_message)
+                    #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_10_0_MSG(_msg)    __attribute__((availability(ios,introduced=6.1,deprecated=10.0,message=_msg)))
+            #else
+                    #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_10_0_MSG(_msg)    __attribute__((availability(ios,introduced=6.1,deprecated=10.0)))
+            #endif
             #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_NA               __attribute__((availability(ios,introduced=6.1)))
             #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_NA_MSG(_msg)     __attribute__((availability(ios,introduced=6.1)))
             #define __AVAILABILITY_INTERNAL__IPHONE_7_0                    __attribute__((availability(ios,introduced=7.0)))
@@ -1754,6 +1838,12 @@
             #else
                     #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_9_3_MSG(_msg)    __attribute__((availability(ios,introduced=7.0,deprecated=9.3)))
             #endif
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_10_0    __attribute__((availability(ios,introduced=7.0,deprecated=10.0)))
+            #if __has_feature(attribute_availability_with_message)
+                    #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_10_0_MSG(_msg)    __attribute__((availability(ios,introduced=7.0,deprecated=10.0,message=_msg)))
+            #else
+                    #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_10_0_MSG(_msg)    __attribute__((availability(ios,introduced=7.0,deprecated=10.0)))
+            #endif
             #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_NA               __attribute__((availability(ios,introduced=7.0)))
             #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_NA_MSG(_msg)     __attribute__((availability(ios,introduced=7.0)))
             #define __AVAILABILITY_INTERNAL__IPHONE_7_1                    __attribute__((availability(ios,introduced=7.1)))
@@ -1817,6 +1907,12 @@
             #else
                     #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_9_3_MSG(_msg)    __attribute__((availability(ios,introduced=7.1,deprecated=9.3)))
             #endif
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_10_0    __attribute__((availability(ios,introduced=7.1,deprecated=10.0)))
+            #if __has_feature(attribute_availability_with_message)
+                    #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_10_0_MSG(_msg)    __attribute__((availability(ios,introduced=7.1,deprecated=10.0,message=_msg)))
+            #else
+                    #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_10_0_MSG(_msg)    __attribute__((availability(ios,introduced=7.1,deprecated=10.0)))
+            #endif
             #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_NA               __attribute__((availability(ios,introduced=7.1)))
             #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_NA_MSG(_msg)     __attribute__((availability(ios,introduced=7.1)))
             #define __AVAILABILITY_INTERNAL__IPHONE_8_0                    __attribute__((availability(ios,introduced=8.0)))
@@ -1874,6 +1970,12 @@
             #else
                     #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_9_3_MSG(_msg)    __attribute__((availability(ios,introduced=8.0,deprecated=9.3)))
             #endif
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_10_0    __attribute__((availability(ios,introduced=8.0,deprecated=10.0)))
+            #if __has_feature(attribute_availability_with_message)
+                    #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_10_0_MSG(_msg)    __attribute__((availability(ios,introduced=8.0,deprecated=10.0,message=_msg)))
+            #else
+                    #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_10_0_MSG(_msg)    __attribute__((availability(ios,introduced=8.0,deprecated=10.0)))
+            #endif
             #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_NA               __attribute__((availability(ios,introduced=8.0)))
             #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_NA_MSG(_msg)     __attribute__((availability(ios,introduced=8.0)))
             #define __AVAILABILITY_INTERNAL__IPHONE_8_1                    __attribute__((availability(ios,introduced=8.1)))
@@ -1925,6 +2027,12 @@
             #else
                     #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_9_3_MSG(_msg)    __attribute__((availability(ios,introduced=8.1,deprecated=9.3)))
             #endif
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_10_0    __attribute__((availability(ios,introduced=8.1,deprecated=10.0)))
+            #if __has_feature(attribute_availability_with_message)
+                    #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_10_0_MSG(_msg)    __attribute__((availability(ios,introduced=8.1,deprecated=10.0,message=_msg)))
+            #else
+                    #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_10_0_MSG(_msg)    __attribute__((availability(ios,introduced=8.1,deprecated=10.0)))
+            #endif
             #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_NA               __attribute__((availability(ios,introduced=8.1)))
             #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_NA_MSG(_msg)     __attribute__((availability(ios,introduced=8.1)))
             #define __AVAILABILITY_INTERNAL__IPHONE_8_2                    __attribute__((availability(ios,introduced=8.2)))
@@ -1970,6 +2078,12 @@
             #else
                     #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_9_3_MSG(_msg)    __attribute__((availability(ios,introduced=8.2,deprecated=9.3)))
             #endif
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_10_0    __attribute__((availability(ios,introduced=8.2,deprecated=10.0)))
+            #if __has_feature(attribute_availability_with_message)
+                    #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_10_0_MSG(_msg)    __attribute__((availability(ios,introduced=8.2,deprecated=10.0,message=_msg)))
+            #else
+                    #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_10_0_MSG(_msg)    __attribute__((availability(ios,introduced=8.2,deprecated=10.0)))
+            #endif
             #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_NA               __attribute__((availability(ios,introduced=8.2)))
             #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_NA_MSG(_msg)     __attribute__((availability(ios,introduced=8.2)))
             #define __AVAILABILITY_INTERNAL__IPHONE_8_3                    __attribute__((availability(ios,introduced=8.3)))
@@ -2009,6 +2123,12 @@
             #else
                     #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_9_3_MSG(_msg)    __attribute__((availability(ios,introduced=8.3,deprecated=9.3)))
             #endif
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_10_0    __attribute__((availability(ios,introduced=8.3,deprecated=10.0)))
+            #if __has_feature(attribute_availability_with_message)
+                    #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_10_0_MSG(_msg)    __attribute__((availability(ios,introduced=8.3,deprecated=10.0,message=_msg)))
+            #else
+                    #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_10_0_MSG(_msg)    __attribute__((availability(ios,introduced=8.3,deprecated=10.0)))
+            #endif
             #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_NA               __attribute__((availability(ios,introduced=8.3)))
             #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_NA_MSG(_msg)     __attribute__((availability(ios,introduced=8.3)))
             #define __AVAILABILITY_INTERNAL__IPHONE_8_4                    __attribute__((availability(ios,introduced=8.4)))
@@ -2042,6 +2162,12 @@
             #else
                     #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_9_3_MSG(_msg)    __attribute__((availability(ios,introduced=8.4,deprecated=9.3)))
             #endif
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_10_0    __attribute__((availability(ios,introduced=8.4,deprecated=10.0)))
+            #if __has_feature(attribute_availability_with_message)
+                    #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_10_0_MSG(_msg)    __attribute__((availability(ios,introduced=8.4,deprecated=10.0,message=_msg)))
+            #else
+                    #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_10_0_MSG(_msg)    __attribute__((availability(ios,introduced=8.4,deprecated=10.0)))
+            #endif
             #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_NA               __attribute__((availability(ios,introduced=8.4)))
             #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_NA_MSG(_msg)     __attribute__((availability(ios,introduced=8.4)))
             #define __AVAILABILITY_INTERNAL__IPHONE_9_0                    __attribute__((availability(ios,introduced=9.0)))
@@ -2069,6 +2195,12 @@
             #else
                     #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_9_3_MSG(_msg)    __attribute__((availability(ios,introduced=9.0,deprecated=9.3)))
             #endif
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_10_0    __attribute__((availability(ios,introduced=9.0,deprecated=10.0)))
+            #if __has_feature(attribute_availability_with_message)
+                    #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_10_0_MSG(_msg)    __attribute__((availability(ios,introduced=9.0,deprecated=10.0,message=_msg)))
+            #else
+                    #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_10_0_MSG(_msg)    __attribute__((availability(ios,introduced=9.0,deprecated=10.0)))
+            #endif
             #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_NA               __attribute__((availability(ios,introduced=9.0)))
             #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_NA_MSG(_msg)     __attribute__((availability(ios,introduced=9.0)))
             #define __AVAILABILITY_INTERNAL__IPHONE_9_1                    __attribute__((availability(ios,introduced=9.1)))
@@ -2090,6 +2222,12 @@
             #else
                     #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_9_3_MSG(_msg)    __attribute__((availability(ios,introduced=9.1,deprecated=9.3)))
             #endif
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_10_0    __attribute__((availability(ios,introduced=9.1,deprecated=10.0)))
+            #if __has_feature(attribute_availability_with_message)
+                    #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_10_0_MSG(_msg)    __attribute__((availability(ios,introduced=9.1,deprecated=10.0,message=_msg)))
+            #else
+                    #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_10_0_MSG(_msg)    __attribute__((availability(ios,introduced=9.1,deprecated=10.0)))
+            #endif
             #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_NA               __attribute__((availability(ios,introduced=9.1)))
             #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_NA_MSG(_msg)     __attribute__((availability(ios,introduced=9.1)))
             #define __AVAILABILITY_INTERNAL__IPHONE_9_2                    __attribute__((availability(ios,introduced=9.2)))
@@ -2105,6 +2243,12 @@
             #else
                     #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_9_3_MSG(_msg)    __attribute__((availability(ios,introduced=9.2,deprecated=9.3)))
             #endif
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_10_0    __attribute__((availability(ios,introduced=9.2,deprecated=10.0)))
+            #if __has_feature(attribute_availability_with_message)
+                    #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_10_0_MSG(_msg)    __attribute__((availability(ios,introduced=9.2,deprecated=10.0,message=_msg)))
+            #else
+                    #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_10_0_MSG(_msg)    __attribute__((availability(ios,introduced=9.2,deprecated=10.0)))
+            #endif
             #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_NA               __attribute__((availability(ios,introduced=9.2)))
             #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_NA_MSG(_msg)     __attribute__((availability(ios,introduced=9.2)))
             #define __AVAILABILITY_INTERNAL__IPHONE_9_3                    __attribute__((availability(ios,introduced=9.3)))
@@ -2114,8 +2258,23 @@
             #else
                     #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_9_3_MSG(_msg)    __attribute__((availability(ios,introduced=9.3,deprecated=9.3)))
             #endif
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_10_0    __attribute__((availability(ios,introduced=9.3,deprecated=10.0)))
+            #if __has_feature(attribute_availability_with_message)
+                    #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_10_0_MSG(_msg)    __attribute__((availability(ios,introduced=9.3,deprecated=10.0,message=_msg)))
+            #else
+                    #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_10_0_MSG(_msg)    __attribute__((availability(ios,introduced=9.3,deprecated=10.0)))
+            #endif
             #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_NA               __attribute__((availability(ios,introduced=9.3)))
             #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_NA_MSG(_msg)     __attribute__((availability(ios,introduced=9.3)))
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0                    __attribute__((availability(ios,introduced=10.0)))
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_10_0    __attribute__((availability(ios,introduced=10.0,deprecated=10.0)))
+            #if __has_feature(attribute_availability_with_message)
+                    #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_10_0_MSG(_msg)    __attribute__((availability(ios,introduced=10.0,deprecated=10.0,message=_msg)))
+            #else
+                    #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_10_0_MSG(_msg)    __attribute__((availability(ios,introduced=10.0,deprecated=10.0)))
+            #endif
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_NA               __attribute__((availability(ios,introduced=10.0)))
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_NA_MSG(_msg)     __attribute__((availability(ios,introduced=10.0)))
             #define __AVAILABILITY_INTERNAL__IPHONE_NA                               __attribute__((availability(ios,unavailable)))
             #define __AVAILABILITY_INTERNAL__IPHONE_NA_DEP__IPHONE_NA                __attribute__((availability(ios,unavailable)))
             #define __AVAILABILITY_INTERNAL__IPHONE_NA_DEP__IPHONE_NA_MSG(_msg)      __attribute__((availability(ios,unavailable)))
@@ -13771,6 +13930,1395 @@
             #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_9_3              __AVAILABILITY_INTERNAL_DEPRECATED
             #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_9_3_MSG(_msg)    __AVAILABILITY_INTERNAL_DEPRECATED_MSG(_msg)
         #endif
+        /* set up old style internal macros (up to 10.0) */
+        #if __IPHONE_OS_VERSION_MAX_ALLOWED < __IPHONE_10_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0                      __AVAILABILITY_INTERNAL_UNAVAILABLE
+        #elif __IPHONE_OS_VERSION_MIN_REQUIRED < __IPHONE_10_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0                      __AVAILABILITY_INTERNAL_WEAK_IMPORT
+        #else
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0                      __AVAILABILITY_INTERNAL_REGULAR
+        #endif
+        #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_NA           __AVAILABILITY_INTERNAL__IPHONE_10_0
+        #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_NA_MSG(_msg) __AVAILABILITY_INTERNAL__IPHONE_10_0
+        #if __IPHONE_OS_VERSION_MIN_REQUIRED < __IPHONE_2_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_2_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_2_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_2_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_2_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_2_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_2_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_2_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_2_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_2_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_2_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_2_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_2_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_2_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_2_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_2_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_2_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_2_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_2_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_2_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_2_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_2_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_2_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_2_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_2_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_2_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_2_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_2_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_2_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_2_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_2_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_2_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_2_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_2_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_2_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_2_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_2_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_2_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_2_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_2_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_2_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_2_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_2_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_2_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_2_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_2_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_2_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_2_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_2_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_2_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_2_1
+        #elif __IPHONE_OS_VERSION_MIN_REQUIRED < __IPHONE_2_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_2_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_2_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_2_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_2_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_2_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_2_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_2_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_2_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_2_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_2_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_2_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_2_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_2_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_2_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_2_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_2_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_2_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_2_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_2_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_2_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_2_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_2_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_2_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_2_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_2_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_2_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_2_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_2_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_2_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_2_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_2_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_2_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_2_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_2_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_2_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_2_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_2_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_2_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_2_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_2_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_2_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_2_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_2_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_2_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_2_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_2_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_2_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_2_2
+        #elif __IPHONE_OS_VERSION_MIN_REQUIRED < __IPHONE_3_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_0
+        #elif __IPHONE_OS_VERSION_MIN_REQUIRED < __IPHONE_3_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_1
+        #elif __IPHONE_OS_VERSION_MIN_REQUIRED < __IPHONE_3_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_3_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_3_2
+        #elif __IPHONE_OS_VERSION_MIN_REQUIRED < __IPHONE_4_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_0
+        #elif __IPHONE_OS_VERSION_MIN_REQUIRED < __IPHONE_4_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_1
+        #elif __IPHONE_OS_VERSION_MIN_REQUIRED < __IPHONE_4_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_2
+        #elif __IPHONE_OS_VERSION_MIN_REQUIRED < __IPHONE_4_3
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_3
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_3
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_3
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_3
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_3
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_3
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_3
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_3
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_3
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_3
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_3
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_3
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_3
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_3
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_3
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_3
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_3
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_3
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_3
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_3
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_3
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_3
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_3
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_3
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_3
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_3
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_3
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_3
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_3
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_3
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_3
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_3
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_4_3
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_4_3
+        #elif __IPHONE_OS_VERSION_MIN_REQUIRED < __IPHONE_5_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_5_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_5_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_5_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_5_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_5_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_5_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_5_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_5_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_5_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_5_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_5_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_5_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_5_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_5_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_5_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_5_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_5_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_5_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_5_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_5_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_5_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_5_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_5_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_5_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_5_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_5_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_5_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_5_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_5_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_5_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_5_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_5_0
+        #elif __IPHONE_OS_VERSION_MIN_REQUIRED < __IPHONE_5_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_5_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_5_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_5_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_5_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_5_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_5_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_5_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_5_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_5_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_5_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_5_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_5_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_5_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_5_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_5_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_5_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_5_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_5_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_5_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_5_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_5_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_5_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_5_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_5_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_5_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_5_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_5_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_5_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_5_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_5_1
+        #elif __IPHONE_OS_VERSION_MIN_REQUIRED < __IPHONE_6_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_6_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_6_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_6_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_6_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_6_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_6_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_6_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_6_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_6_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_6_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_6_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_6_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_6_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_6_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_6_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_6_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_6_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_6_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_6_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_6_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_6_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_6_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_6_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_6_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_6_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_6_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_6_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_6_0
+        #elif __IPHONE_OS_VERSION_MIN_REQUIRED < __IPHONE_6_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_6_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_6_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_6_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_6_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_6_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_6_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_6_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_6_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_6_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_6_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_6_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_6_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_6_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_6_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_6_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_6_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_6_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_6_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_6_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_6_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_6_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_6_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_6_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_6_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_6_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_6_1
+        #elif __IPHONE_OS_VERSION_MIN_REQUIRED < __IPHONE_7_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_7_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_7_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_7_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_7_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_7_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_7_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_7_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_7_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_7_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_7_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_7_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_7_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_7_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_7_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_7_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_7_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_7_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_7_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_7_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_7_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_7_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_7_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_7_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_7_0
+        #elif __IPHONE_OS_VERSION_MIN_REQUIRED < __IPHONE_7_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_7_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_7_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_7_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_7_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_7_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_7_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_7_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_7_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_7_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_7_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_7_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_7_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_7_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_7_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_7_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_7_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_7_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_7_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_7_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_7_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_7_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_7_1
+        #elif __IPHONE_OS_VERSION_MIN_REQUIRED < __IPHONE_8_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_8_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_8_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_8_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_8_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_8_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_8_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_8_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_8_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_8_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_8_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_8_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_8_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_8_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_8_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_8_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_8_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_8_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_8_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_8_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_8_0
+        #elif __IPHONE_OS_VERSION_MIN_REQUIRED < __IPHONE_8_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_8_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_8_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_8_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_8_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_8_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_8_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_8_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_8_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_8_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_8_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_8_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_8_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_8_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_8_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_8_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_8_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_8_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_8_1
+        #elif __IPHONE_OS_VERSION_MIN_REQUIRED < __IPHONE_8_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_8_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_8_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_8_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_8_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_8_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_8_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_8_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_8_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_8_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_8_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_8_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_8_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_8_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_8_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_8_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_8_2
+        #elif __IPHONE_OS_VERSION_MIN_REQUIRED < __IPHONE_8_3
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_8_3
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_8_3
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_8_3
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_8_3
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_8_3
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_8_3
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_8_3
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_8_3
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_8_3
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_8_3
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_8_3
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_8_3
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_8_3
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_8_3
+        #elif __IPHONE_OS_VERSION_MIN_REQUIRED < __IPHONE_8_4
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_8_4
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_8_4
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_8_4
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_8_4
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_8_4
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_8_4
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_8_4
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_8_4
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_8_4
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_8_4
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_8_4
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_8_4
+        #elif __IPHONE_OS_VERSION_MIN_REQUIRED < __IPHONE_9_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_9_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_9_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_9_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_9_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_9_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_9_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_9_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_9_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_9_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_9_0
+        #elif __IPHONE_OS_VERSION_MIN_REQUIRED < __IPHONE_9_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_9_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_9_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_9_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_9_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_9_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_9_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_9_1
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_9_1
+        #elif __IPHONE_OS_VERSION_MIN_REQUIRED < __IPHONE_9_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_9_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_9_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_9_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_9_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_9_2
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_9_2
+        #elif __IPHONE_OS_VERSION_MIN_REQUIRED < __IPHONE_9_3
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_9_3
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_9_3
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_9_3
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_9_3
+        #elif __IPHONE_OS_VERSION_MIN_REQUIRED < __IPHONE_10_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_REGULAR
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL__IPHONE_10_0
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL__IPHONE_10_0
+        #else
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_DEPRECATED
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_DEPRECATED_MSG(_msg)
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_DEPRECATED
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_DEPRECATED_MSG(_msg)
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_DEPRECATED
+            #define __AVAILABILITY_INTERNAL__IPHONE_2_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_DEPRECATED_MSG(_msg)
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_DEPRECATED
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_DEPRECATED_MSG(_msg)
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_DEPRECATED
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_DEPRECATED_MSG(_msg)
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_DEPRECATED
+            #define __AVAILABILITY_INTERNAL__IPHONE_3_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_DEPRECATED_MSG(_msg)
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_DEPRECATED
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_DEPRECATED_MSG(_msg)
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_DEPRECATED
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_DEPRECATED_MSG(_msg)
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_DEPRECATED
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_DEPRECATED_MSG(_msg)
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_DEPRECATED
+            #define __AVAILABILITY_INTERNAL__IPHONE_4_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_DEPRECATED_MSG(_msg)
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_DEPRECATED
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_DEPRECATED_MSG(_msg)
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_DEPRECATED
+            #define __AVAILABILITY_INTERNAL__IPHONE_5_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_DEPRECATED_MSG(_msg)
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_DEPRECATED
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_DEPRECATED_MSG(_msg)
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_DEPRECATED
+            #define __AVAILABILITY_INTERNAL__IPHONE_6_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_DEPRECATED_MSG(_msg)
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_DEPRECATED
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_DEPRECATED_MSG(_msg)
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_DEPRECATED
+            #define __AVAILABILITY_INTERNAL__IPHONE_7_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_DEPRECATED_MSG(_msg)
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_DEPRECATED
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_DEPRECATED_MSG(_msg)
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_DEPRECATED
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_DEPRECATED_MSG(_msg)
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_DEPRECATED
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_DEPRECATED_MSG(_msg)
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_DEPRECATED
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_DEPRECATED_MSG(_msg)
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_DEPRECATED
+            #define __AVAILABILITY_INTERNAL__IPHONE_8_4_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_DEPRECATED_MSG(_msg)
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_DEPRECATED
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_DEPRECATED_MSG(_msg)
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_DEPRECATED
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_1_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_DEPRECATED_MSG(_msg)
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_DEPRECATED
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_2_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_DEPRECATED_MSG(_msg)
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_DEPRECATED
+            #define __AVAILABILITY_INTERNAL__IPHONE_9_3_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_DEPRECATED_MSG(_msg)
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_10_0              __AVAILABILITY_INTERNAL_DEPRECATED
+            #define __AVAILABILITY_INTERNAL__IPHONE_10_0_DEP__IPHONE_10_0_MSG(_msg)    __AVAILABILITY_INTERNAL_DEPRECATED_MSG(_msg)
+        #endif
         /* set up internal macros (n/a) */
         #define __AVAILABILITY_INTERNAL__IPHONE_NA                               __AVAILABILITY_INTERNAL_UNAVAILABLE
         #define __AVAILABILITY_INTERNAL__IPHONE_NA_DEP__IPHONE_NA                __AVAILABILITY_INTERNAL_UNAVAILABLE
@@ -13782,7 +15330,7 @@
     #define __MAC_OS_X_VERSION_MIN_REQUIRED __ENVIRONMENT_MAC_OS_X_VERSION_MIN_REQUIRED__
     /* make sure a default max version is set */
     #ifndef __MAC_OS_X_VERSION_MAX_ALLOWED
-        #define __MAC_OS_X_VERSION_MAX_ALLOWED __MAC_10_11_4
+        #define __MAC_OS_X_VERSION_MAX_ALLOWED __MAC_10_12
     #endif
 
     #if defined(__has_attribute) && defined(__has_feature)
@@ -13891,6 +15439,12 @@
             #else
                 #define __AVAILABILITY_INTERNAL__MAC_10_0_DEP__MAC_10_11_4_MSG(_msg)    __attribute__((availability(macosx,introduced=10.0,deprecated=10.11.4)))
             #endif
+            #define __AVAILABILITY_INTERNAL__MAC_10_0_DEP__MAC_10_12    __attribute__((availability(macosx,introduced=10.0,deprecated=10.12)))
+            #if __has_feature(attribute_availability_with_message)
+                #define __AVAILABILITY_INTERNAL__MAC_10_0_DEP__MAC_10_12_MSG(_msg)    __attribute__((availability(macosx,introduced=10.0,deprecated=10.12,message=_msg)))
+            #else
+                #define __AVAILABILITY_INTERNAL__MAC_10_0_DEP__MAC_10_12_MSG(_msg)    __attribute__((availability(macosx,introduced=10.0,deprecated=10.12)))
+            #endif
             #define __AVAILABILITY_INTERNAL__MAC_10_0_DEP__MAC_NA_MSG(_msg)      __attribute__((availability(macosx,introduced=10.0)))
             #define __AVAILABILITY_INTERNAL__MAC_10_0_DEP__MAC_NA                __attribute__((availability(macosx,introduced=10.0)))
             #define __AVAILABILITY_INTERNAL__MAC_10_1                  __attribute__((availability(macosx,introduced=10.1)))
@@ -13990,6 +15544,12 @@
             #else
                 #define __AVAILABILITY_INTERNAL__MAC_10_1_DEP__MAC_10_11_4_MSG(_msg)    __attribute__((availability(macosx,introduced=10.1,deprecated=10.11.4)))
             #endif
+            #define __AVAILABILITY_INTERNAL__MAC_10_1_DEP__MAC_10_12    __attribute__((availability(macosx,introduced=10.1,deprecated=10.12)))
+            #if __has_feature(attribute_availability_with_message)
+                #define __AVAILABILITY_INTERNAL__MAC_10_1_DEP__MAC_10_12_MSG(_msg)    __attribute__((availability(macosx,introduced=10.1,deprecated=10.12,message=_msg)))
+            #else
+                #define __AVAILABILITY_INTERNAL__MAC_10_1_DEP__MAC_10_12_MSG(_msg)    __attribute__((availability(macosx,introduced=10.1,deprecated=10.12)))
+            #endif
             #define __AVAILABILITY_INTERNAL__MAC_10_1_DEP__MAC_NA_MSG(_msg)      __attribute__((availability(macosx,introduced=10.1)))
             #define __AVAILABILITY_INTERNAL__MAC_10_1_DEP__MAC_NA                __attribute__((availability(macosx,introduced=10.1)))
             #define __AVAILABILITY_INTERNAL__MAC_10_2                  __attribute__((availability(macosx,introduced=10.2)))
@@ -14083,6 +15643,12 @@
             #else
                 #define __AVAILABILITY_INTERNAL__MAC_10_2_DEP__MAC_10_11_4_MSG(_msg)    __attribute__((availability(macosx,introduced=10.2,deprecated=10.11.4)))
             #endif
+            #define __AVAILABILITY_INTERNAL__MAC_10_2_DEP__MAC_10_12    __attribute__((availability(macosx,introduced=10.2,deprecated=10.12)))
+            #if __has_feature(attribute_availability_with_message)
+                #define __AVAILABILITY_INTERNAL__MAC_10_2_DEP__MAC_10_12_MSG(_msg)    __attribute__((availability(macosx,introduced=10.2,deprecated=10.12,message=_msg)))
+            #else
+                #define __AVAILABILITY_INTERNAL__MAC_10_2_DEP__MAC_10_12_MSG(_msg)    __attribute__((availability(macosx,introduced=10.2,deprecated=10.12)))
+            #endif
             #define __AVAILABILITY_INTERNAL__MAC_10_2_DEP__MAC_NA_MSG(_msg)      __attribute__((availability(macosx,introduced=10.2)))
             #define __AVAILABILITY_INTERNAL__MAC_10_2_DEP__MAC_NA                __attribute__((availability(macosx,introduced=10.2)))
             #define __AVAILABILITY_INTERNAL__MAC_10_3                  __attribute__((availability(macosx,introduced=10.3)))
@@ -14170,6 +15736,12 @@
             #else
                 #define __AVAILABILITY_INTERNAL__MAC_10_3_DEP__MAC_10_11_4_MSG(_msg)    __attribute__((availability(macosx,introduced=10.3,deprecated=10.11.4)))
             #endif
+            #define __AVAILABILITY_INTERNAL__MAC_10_3_DEP__MAC_10_12    __attribute__((availability(macosx,introduced=10.3,deprecated=10.12)))
+            #if __has_feature(attribute_availability_with_message)
+                #define __AVAILABILITY_INTERNAL__MAC_10_3_DEP__MAC_10_12_MSG(_msg)    __attribute__((availability(macosx,introduced=10.3,deprecated=10.12,message=_msg)))
+            #else
+                #define __AVAILABILITY_INTERNAL__MAC_10_3_DEP__MAC_10_12_MSG(_msg)    __attribute__((availability(macosx,introduced=10.3,deprecated=10.12)))
+            #endif
             #define __AVAILABILITY_INTERNAL__MAC_10_3_DEP__MAC_NA_MSG(_msg)      __attribute__((availability(macosx,introduced=10.3)))
             #define __AVAILABILITY_INTERNAL__MAC_10_3_DEP__MAC_NA                __attribute__((availability(macosx,introduced=10.3)))
             #define __AVAILABILITY_INTERNAL__MAC_10_4                  __attribute__((availability(macosx,introduced=10.4)))
@@ -14251,6 +15823,12 @@
             #else
                 #define __AVAILABILITY_INTERNAL__MAC_10_4_DEP__MAC_10_11_4_MSG(_msg)    __attribute__((availability(macosx,introduced=10.4,deprecated=10.11.4)))
             #endif
+            #define __AVAILABILITY_INTERNAL__MAC_10_4_DEP__MAC_10_12    __attribute__((availability(macosx,introduced=10.4,deprecated=10.12)))
+            #if __has_feature(attribute_availability_with_message)
+                #define __AVAILABILITY_INTERNAL__MAC_10_4_DEP__MAC_10_12_MSG(_msg)    __attribute__((availability(macosx,introduced=10.4,deprecated=10.12,message=_msg)))
+            #else
+                #define __AVAILABILITY_INTERNAL__MAC_10_4_DEP__MAC_10_12_MSG(_msg)    __attribute__((availability(macosx,introduced=10.4,deprecated=10.12)))
+            #endif
             #define __AVAILABILITY_INTERNAL__MAC_10_4_DEP__MAC_NA_MSG(_msg)      __attribute__((availability(macosx,introduced=10.4)))
             #define __AVAILABILITY_INTERNAL__MAC_10_4_DEP__MAC_NA                __attribute__((availability(macosx,introduced=10.4)))
             #define __AVAILABILITY_INTERNAL__MAC_10_5                  __attribute__((availability(macosx,introduced=10.5)))
@@ -14326,6 +15904,12 @@
             #else
                 #define __AVAILABILITY_INTERNAL__MAC_10_5_DEP__MAC_10_11_4_MSG(_msg)    __attribute__((availability(macosx,introduced=10.5,deprecated=10.11.4)))
             #endif
+            #define __AVAILABILITY_INTERNAL__MAC_10_5_DEP__MAC_10_12    __attribute__((availability(macosx,introduced=10.5,deprecated=10.12)))
+            #if __has_feature(attribute_availability_with_message)
+                #define __AVAILABILITY_INTERNAL__MAC_10_5_DEP__MAC_10_12_MSG(_msg)    __attribute__((availability(macosx,introduced=10.5,deprecated=10.12,message=_msg)))
+            #else
+                #define __AVAILABILITY_INTERNAL__MAC_10_5_DEP__MAC_10_12_MSG(_msg)    __attribute__((availability(macosx,introduced=10.5,deprecated=10.12)))
+            #endif
             #define __AVAILABILITY_INTERNAL__MAC_10_5_DEP__MAC_NA_MSG(_msg)      __attribute__((availability(macosx,introduced=10.5)))
             #define __AVAILABILITY_INTERNAL__MAC_10_5_DEP__MAC_NA                __attribute__((availability(macosx,introduced=10.5)))
             #define __AVAILABILITY_INTERNAL__MAC_10_6                  __attribute__((availability(macosx,introduced=10.6)))
@@ -14395,6 +15979,12 @@
             #else
                 #define __AVAILABILITY_INTERNAL__MAC_10_6_DEP__MAC_10_11_4_MSG(_msg)    __attribute__((availability(macosx,introduced=10.6,deprecated=10.11.4)))
             #endif
+            #define __AVAILABILITY_INTERNAL__MAC_10_6_DEP__MAC_10_12    __attribute__((availability(macosx,introduced=10.6,deprecated=10.12)))
+            #if __has_feature(attribute_availability_with_message)
+                #define __AVAILABILITY_INTERNAL__MAC_10_6_DEP__MAC_10_12_MSG(_msg)    __attribute__((availability(macosx,introduced=10.6,deprecated=10.12,message=_msg)))
+            #else
+                #define __AVAILABILITY_INTERNAL__MAC_10_6_DEP__MAC_10_12_MSG(_msg)    __attribute__((availability(macosx,introduced=10.6,deprecated=10.12)))
+            #endif
             #define __AVAILABILITY_INTERNAL__MAC_10_6_DEP__MAC_NA_MSG(_msg)      __attribute__((availability(macosx,introduced=10.6)))
             #define __AVAILABILITY_INTERNAL__MAC_10_6_DEP__MAC_NA                __attribute__((availability(macosx,introduced=10.6)))
             #define __AVAILABILITY_INTERNAL__MAC_10_7                  __attribute__((availability(macosx,introduced=10.7)))
@@ -14458,6 +16048,12 @@
             #else
                 #define __AVAILABILITY_INTERNAL__MAC_10_7_DEP__MAC_10_11_4_MSG(_msg)    __attribute__((availability(macosx,introduced=10.7,deprecated=10.11.4)))
             #endif
+            #define __AVAILABILITY_INTERNAL__MAC_10_7_DEP__MAC_10_12    __attribute__((availability(macosx,introduced=10.7,deprecated=10.12)))
+            #if __has_feature(attribute_availability_with_message)
+                #define __AVAILABILITY_INTERNAL__MAC_10_7_DEP__MAC_10_12_MSG(_msg)    __attribute__((availability(macosx,introduced=10.7,deprecated=10.12,message=_msg)))
+            #else
+                #define __AVAILABILITY_INTERNAL__MAC_10_7_DEP__MAC_10_12_MSG(_msg)    __attribute__((availability(macosx,introduced=10.7,deprecated=10.12)))
+            #endif
             #define __AVAILABILITY_INTERNAL__MAC_10_7_DEP__MAC_NA_MSG(_msg)      __attribute__((availability(macosx,introduced=10.7)))
             #define __AVAILABILITY_INTERNAL__MAC_10_7_DEP__MAC_NA                __attribute__((availability(macosx,introduced=10.7)))
             #define __AVAILABILITY_INTERNAL__MAC_10_8                  __attribute__((availability(macosx,introduced=10.8)))
@@ -14515,6 +16111,12 @@
             #else
                 #define __AVAILABILITY_INTERNAL__MAC_10_8_DEP__MAC_10_11_4_MSG(_msg)    __attribute__((availability(macosx,introduced=10.8,deprecated=10.11.4)))
             #endif
+            #define __AVAILABILITY_INTERNAL__MAC_10_8_DEP__MAC_10_12    __attribute__((availability(macosx,introduced=10.8,deprecated=10.12)))
+            #if __has_feature(attribute_availability_with_message)
+                #define __AVAILABILITY_INTERNAL__MAC_10_8_DEP__MAC_10_12_MSG(_msg)    __attribute__((availability(macosx,introduced=10.8,deprecated=10.12,message=_msg)))
+            #else
+                #define __AVAILABILITY_INTERNAL__MAC_10_8_DEP__MAC_10_12_MSG(_msg)    __attribute__((availability(macosx,introduced=10.8,deprecated=10.12)))
+            #endif
             #define __AVAILABILITY_INTERNAL__MAC_10_8_DEP__MAC_NA_MSG(_msg)      __attribute__((availability(macosx,introduced=10.8)))
             #define __AVAILABILITY_INTERNAL__MAC_10_8_DEP__MAC_NA                __attribute__((availability(macosx,introduced=10.8)))
             #define __AVAILABILITY_INTERNAL__MAC_10_9                  __attribute__((availability(macosx,introduced=10.9)))
@@ -14566,6 +16168,12 @@
             #else
                 #define __AVAILABILITY_INTERNAL__MAC_10_9_DEP__MAC_10_11_4_MSG(_msg)    __attribute__((availability(macosx,introduced=10.9,deprecated=10.11.4)))
             #endif
+            #define __AVAILABILITY_INTERNAL__MAC_10_9_DEP__MAC_10_12    __attribute__((availability(macosx,introduced=10.9,deprecated=10.12)))
+            #if __has_feature(attribute_availability_with_message)
+                #define __AVAILABILITY_INTERNAL__MAC_10_9_DEP__MAC_10_12_MSG(_msg)    __attribute__((availability(macosx,introduced=10.9,deprecated=10.12,message=_msg)))
+            #else
+                #define __AVAILABILITY_INTERNAL__MAC_10_9_DEP__MAC_10_12_MSG(_msg)    __attribute__((availability(macosx,introduced=10.9,deprecated=10.12)))
+            #endif
             #define __AVAILABILITY_INTERNAL__MAC_10_9_DEP__MAC_NA_MSG(_msg)      __attribute__((availability(macosx,introduced=10.9)))
             #define __AVAILABILITY_INTERNAL__MAC_10_9_DEP__MAC_NA                __attribute__((availability(macosx,introduced=10.9)))
             #define __AVAILABILITY_INTERNAL__MAC_10_10                  __attribute__((availability(macosx,introduced=10.10)))
@@ -14611,6 +16219,12 @@
             #else
                 #define __AVAILABILITY_INTERNAL__MAC_10_10_DEP__MAC_10_11_4_MSG(_msg)    __attribute__((availability(macosx,introduced=10.10,deprecated=10.11.4)))
             #endif
+            #define __AVAILABILITY_INTERNAL__MAC_10_10_DEP__MAC_10_12    __attribute__((availability(macosx,introduced=10.10,deprecated=10.12)))
+            #if __has_feature(attribute_availability_with_message)
+                #define __AVAILABILITY_INTERNAL__MAC_10_10_DEP__MAC_10_12_MSG(_msg)    __attribute__((availability(macosx,introduced=10.10,deprecated=10.12,message=_msg)))
+            #else
+                #define __AVAILABILITY_INTERNAL__MAC_10_10_DEP__MAC_10_12_MSG(_msg)    __attribute__((availability(macosx,introduced=10.10,deprecated=10.12)))
+            #endif
             #define __AVAILABILITY_INTERNAL__MAC_10_10_DEP__MAC_NA_MSG(_msg)      __attribute__((availability(macosx,introduced=10.10)))
             #define __AVAILABILITY_INTERNAL__MAC_10_10_DEP__MAC_NA                __attribute__((availability(macosx,introduced=10.10)))
             #define __AVAILABILITY_INTERNAL__MAC_10_10_2                  __attribute__((availability(macosx,introduced=10.10.2)))
@@ -14650,6 +16264,12 @@
             #else
                 #define __AVAILABILITY_INTERNAL__MAC_10_10_2_DEP__MAC_10_11_4_MSG(_msg)    __attribute__((availability(macosx,introduced=10.10.2,deprecated=10.11.4)))
             #endif
+            #define __AVAILABILITY_INTERNAL__MAC_10_10_2_DEP__MAC_10_12    __attribute__((availability(macosx,introduced=10.10.2,deprecated=10.12)))
+            #if __has_feature(attribute_availability_with_message)
+                #define __AVAILABILITY_INTERNAL__MAC_10_10_2_DEP__MAC_10_12_MSG(_msg)    __attribute__((availability(macosx,introduced=10.10.2,deprecated=10.12,message=_msg)))
+            #else
+                #define __AVAILABILITY_INTERNAL__MAC_10_10_2_DEP__MAC_10_12_MSG(_msg)    __attribute__((availability(macosx,introduced=10.10.2,deprecated=10.12)))
+            #endif
             #define __AVAILABILITY_INTERNAL__MAC_10_10_2_DEP__MAC_NA_MSG(_msg)      __attribute__((availability(macosx,introduced=10.10.2)))
             #define __AVAILABILITY_INTERNAL__MAC_10_10_2_DEP__MAC_NA                __attribute__((availability(macosx,introduced=10.10.2)))
             #define __AVAILABILITY_INTERNAL__MAC_10_10_3                  __attribute__((availability(macosx,introduced=10.10.3)))
@@ -14683,6 +16303,12 @@
             #else
                 #define __AVAILABILITY_INTERNAL__MAC_10_10_3_DEP__MAC_10_11_4_MSG(_msg)    __attribute__((availability(macosx,introduced=10.10.3,deprecated=10.11.4)))
             #endif
+            #define __AVAILABILITY_INTERNAL__MAC_10_10_3_DEP__MAC_10_12    __attribute__((availability(macosx,introduced=10.10.3,deprecated=10.12)))
+            #if __has_feature(attribute_availability_with_message)
+                #define __AVAILABILITY_INTERNAL__MAC_10_10_3_DEP__MAC_10_12_MSG(_msg)    __attribute__((availability(macosx,introduced=10.10.3,deprecated=10.12,message=_msg)))
+            #else
+                #define __AVAILABILITY_INTERNAL__MAC_10_10_3_DEP__MAC_10_12_MSG(_msg)    __attribute__((availability(macosx,introduced=10.10.3,deprecated=10.12)))
+            #endif
             #define __AVAILABILITY_INTERNAL__MAC_10_10_3_DEP__MAC_NA_MSG(_msg)      __attribute__((availability(macosx,introduced=10.10.3)))
             #define __AVAILABILITY_INTERNAL__MAC_10_10_3_DEP__MAC_NA                __attribute__((availability(macosx,introduced=10.10.3)))
             #define __AVAILABILITY_INTERNAL__MAC_10_11                  __attribute__((availability(macosx,introduced=10.11)))
@@ -14710,6 +16336,12 @@
             #else
                 #define __AVAILABILITY_INTERNAL__MAC_10_11_DEP__MAC_10_11_4_MSG(_msg)    __attribute__((availability(macosx,introduced=10.11,deprecated=10.11.4)))
             #endif
+            #define __AVAILABILITY_INTERNAL__MAC_10_11_DEP__MAC_10_12    __attribute__((availability(macosx,introduced=10.11,deprecated=10.12)))
+            #if __has_feature(attribute_availability_with_message)
+                #define __AVAILABILITY_INTERNAL__MAC_10_11_DEP__MAC_10_12_MSG(_msg)    __attribute__((availability(macosx,introduced=10.11,deprecated=10.12,message=_msg)))
+            #else
+                #define __AVAILABILITY_INTERNAL__MAC_10_11_DEP__MAC_10_12_MSG(_msg)    __attribute__((availability(macosx,introduced=10.11,deprecated=10.12)))
+            #endif
             #define __AVAILABILITY_INTERNAL__MAC_10_11_DEP__MAC_NA_MSG(_msg)      __attribute__((availability(macosx,introduced=10.11)))
             #define __AVAILABILITY_INTERNAL__MAC_10_11_DEP__MAC_NA                __attribute__((availability(macosx,introduced=10.11)))
             #define __AVAILABILITY_INTERNAL__MAC_10_11_2                  __attribute__((availability(macosx,introduced=10.11.2)))
@@ -14731,6 +16363,12 @@
             #else
                 #define __AVAILABILITY_INTERNAL__MAC_10_11_2_DEP__MAC_10_11_4_MSG(_msg)    __attribute__((availability(macosx,introduced=10.11.2,deprecated=10.11.4)))
             #endif
+            #define __AVAILABILITY_INTERNAL__MAC_10_11_2_DEP__MAC_10_12    __attribute__((availability(macosx,introduced=10.11.2,deprecated=10.12)))
+            #if __has_feature(attribute_availability_with_message)
+                #define __AVAILABILITY_INTERNAL__MAC_10_11_2_DEP__MAC_10_12_MSG(_msg)    __attribute__((availability(macosx,introduced=10.11.2,deprecated=10.12,message=_msg)))
+            #else
+                #define __AVAILABILITY_INTERNAL__MAC_10_11_2_DEP__MAC_10_12_MSG(_msg)    __attribute__((availability(macosx,introduced=10.11.2,deprecated=10.12)))
+            #endif
             #define __AVAILABILITY_INTERNAL__MAC_10_11_2_DEP__MAC_NA_MSG(_msg)      __attribute__((availability(macosx,introduced=10.11.2)))
             #define __AVAILABILITY_INTERNAL__MAC_10_11_2_DEP__MAC_NA                __attribute__((availability(macosx,introduced=10.11.2)))
             #define __AVAILABILITY_INTERNAL__MAC_10_11_3                  __attribute__((availability(macosx,introduced=10.11.3)))
@@ -14746,6 +16384,12 @@
             #else
                 #define __AVAILABILITY_INTERNAL__MAC_10_11_3_DEP__MAC_10_11_4_MSG(_msg)    __attribute__((availability(macosx,introduced=10.11.3,deprecated=10.11.4)))
             #endif
+            #define __AVAILABILITY_INTERNAL__MAC_10_11_3_DEP__MAC_10_12    __attribute__((availability(macosx,introduced=10.11.3,deprecated=10.12)))
+            #if __has_feature(attribute_availability_with_message)
+                #define __AVAILABILITY_INTERNAL__MAC_10_11_3_DEP__MAC_10_12_MSG(_msg)    __attribute__((availability(macosx,introduced=10.11.3,deprecated=10.12,message=_msg)))
+            #else
+                #define __AVAILABILITY_INTERNAL__MAC_10_11_3_DEP__MAC_10_12_MSG(_msg)    __attribute__((availability(macosx,introduced=10.11.3,deprecated=10.12)))
+            #endif
             #define __AVAILABILITY_INTERNAL__MAC_10_11_3_DEP__MAC_NA_MSG(_msg)      __attribute__((availability(macosx,introduced=10.11.3)))
             #define __AVAILABILITY_INTERNAL__MAC_10_11_3_DEP__MAC_NA                __attribute__((availability(macosx,introduced=10.11.3)))
             #define __AVAILABILITY_INTERNAL__MAC_10_11_4                  __attribute__((availability(macosx,introduced=10.11.4)))
@@ -14755,8 +16399,23 @@
             #else
                 #define __AVAILABILITY_INTERNAL__MAC_10_11_4_DEP__MAC_10_11_4_MSG(_msg)    __attribute__((availability(macosx,introduced=10.11.4,deprecated=10.11.4)))
             #endif
+            #define __AVAILABILITY_INTERNAL__MAC_10_11_4_DEP__MAC_10_12    __attribute__((availability(macosx,introduced=10.11.4,deprecated=10.12)))
+            #if __has_feature(attribute_availability_with_message)
+                #define __AVAILABILITY_INTERNAL__MAC_10_11_4_DEP__MAC_10_12_MSG(_msg)    __attribute__((availability(macosx,introduced=10.11.4,deprecated=10.12,message=_msg)))
+            #else
+                #define __AVAILABILITY_INTERNAL__MAC_10_11_4_DEP__MAC_10_12_MSG(_msg)    __attribute__((availability(macosx,introduced=10.11.4,deprecated=10.12)))
+            #endif
             #define __AVAILABILITY_INTERNAL__MAC_10_11_4_DEP__MAC_NA_MSG(_msg)      __attribute__((availability(macosx,introduced=10.11.4)))
             #define __AVAILABILITY_INTERNAL__MAC_10_11_4_DEP__MAC_NA                __attribute__((availability(macosx,introduced=10.11.4)))
+            #define __AVAILABILITY_INTERNAL__MAC_10_12                  __attribute__((availability(macosx,introduced=10.12)))
+            #define __AVAILABILITY_INTERNAL__MAC_10_12_DEP__MAC_10_12    __attribute__((availability(macosx,introduced=10.12,deprecated=10.12)))
+            #if __has_feature(attribute_availability_with_message)
+                #define __AVAILABILITY_INTERNAL__MAC_10_12_DEP__MAC_10_12_MSG(_msg)    __attribute__((availability(macosx,introduced=10.12,deprecated=10.12,message=_msg)))
+            #else
+                #define __AVAILABILITY_INTERNAL__MAC_10_12_DEP__MAC_10_12_MSG(_msg)    __attribute__((availability(macosx,introduced=10.12,deprecated=10.12)))
+            #endif
+            #define __AVAILABILITY_INTERNAL__MAC_10_12_DEP__MAC_NA_MSG(_msg)      __attribute__((availability(macosx,introduced=10.12)))
+            #define __AVAILABILITY_INTERNAL__MAC_10_12_DEP__MAC_NA                __attribute__((availability(macosx,introduced=10.12)))
             #define __AVAILABILITY_INTERNAL__MAC_NA                        __attribute__((availability(macosx,unavailable)))
             #define __AVAILABILITY_INTERNAL__MAC_NA_DEP__MAC_NA            __attribute__((availability(macosx,unavailable)))
             #define __AVAILABILITY_INTERNAL__MAC_NA_DEP__MAC_NA_MSG(_msg)  __attribute__((availability(macosx,unavailable)))
@@ -14765,6 +16424,13 @@
 
     #ifndef __AVAILABILITY_INTERNAL__MAC_10_0
         /* use old style attributes */
+        #if __MAC_OS_X_VERSION_MAX_ALLOWED < __MAC_10_12
+            #define __AVAILABILITY_INTERNAL__MAC_10_12        __AVAILABILITY_INTERNAL_UNAVAILABLE
+        #elif __MAC_OS_X_VERSION_MIN_REQUIRED < __MAC_10_12
+            #define __AVAILABILITY_INTERNAL__MAC_10_12        __AVAILABILITY_INTERNAL_WEAK_IMPORT
+        #else
+            #define __AVAILABILITY_INTERNAL__MAC_10_12        __AVAILABILITY_INTERNAL_REGULAR
+        #endif
         #if __MAC_OS_X_VERSION_MAX_ALLOWED < __MAC_10_11_4
             #define __AVAILABILITY_INTERNAL__MAC_10_11_4        __AVAILABILITY_INTERNAL_UNAVAILABLE
         #elif __MAC_OS_X_VERSION_MIN_REQUIRED < __MAC_10_11_4
@@ -15541,6 +17207,81 @@
             #define __AVAILABILITY_INTERNAL__MAC_10_11_4_DEP__MAC_10_11_4              __AVAILABILITY_INTERNAL__MAC_10_11_4
             #define __AVAILABILITY_INTERNAL__MAC_10_11_4_DEP__MAC_10_11_4_MSG(_msg)    __AVAILABILITY_INTERNAL__MAC_10_11_4
         #endif
+        #if __MAC_OS_X_VERSION_MIN_REQUIRED >= __MAC_10_12
+            #define __AVAILABILITY_INTERNAL__MAC_10_0_DEP__MAC_10_12              __AVAILABILITY_INTERNAL_DEPRECATED
+            #define __AVAILABILITY_INTERNAL__MAC_10_0_DEP__MAC_10_12_MSG(_msg)    __AVAILABILITY_INTERNAL_DEPRECATED_MSG(_msg)
+            #define __AVAILABILITY_INTERNAL__MAC_10_1_DEP__MAC_10_12              __AVAILABILITY_INTERNAL_DEPRECATED
+            #define __AVAILABILITY_INTERNAL__MAC_10_1_DEP__MAC_10_12_MSG(_msg)    __AVAILABILITY_INTERNAL_DEPRECATED_MSG(_msg)
+            #define __AVAILABILITY_INTERNAL__MAC_10_2_DEP__MAC_10_12              __AVAILABILITY_INTERNAL_DEPRECATED
+            #define __AVAILABILITY_INTERNAL__MAC_10_2_DEP__MAC_10_12_MSG(_msg)    __AVAILABILITY_INTERNAL_DEPRECATED_MSG(_msg)
+            #define __AVAILABILITY_INTERNAL__MAC_10_3_DEP__MAC_10_12              __AVAILABILITY_INTERNAL_DEPRECATED
+            #define __AVAILABILITY_INTERNAL__MAC_10_3_DEP__MAC_10_12_MSG(_msg)    __AVAILABILITY_INTERNAL_DEPRECATED_MSG(_msg)
+            #define __AVAILABILITY_INTERNAL__MAC_10_4_DEP__MAC_10_12              __AVAILABILITY_INTERNAL_DEPRECATED
+            #define __AVAILABILITY_INTERNAL__MAC_10_4_DEP__MAC_10_12_MSG(_msg)    __AVAILABILITY_INTERNAL_DEPRECATED_MSG(_msg)
+            #define __AVAILABILITY_INTERNAL__MAC_10_5_DEP__MAC_10_12              __AVAILABILITY_INTERNAL_DEPRECATED
+            #define __AVAILABILITY_INTERNAL__MAC_10_5_DEP__MAC_10_12_MSG(_msg)    __AVAILABILITY_INTERNAL_DEPRECATED_MSG(_msg)
+            #define __AVAILABILITY_INTERNAL__MAC_10_6_DEP__MAC_10_12              __AVAILABILITY_INTERNAL_DEPRECATED
+            #define __AVAILABILITY_INTERNAL__MAC_10_6_DEP__MAC_10_12_MSG(_msg)    __AVAILABILITY_INTERNAL_DEPRECATED_MSG(_msg)
+            #define __AVAILABILITY_INTERNAL__MAC_10_7_DEP__MAC_10_12              __AVAILABILITY_INTERNAL_DEPRECATED
+            #define __AVAILABILITY_INTERNAL__MAC_10_7_DEP__MAC_10_12_MSG(_msg)    __AVAILABILITY_INTERNAL_DEPRECATED_MSG(_msg)
+            #define __AVAILABILITY_INTERNAL__MAC_10_8_DEP__MAC_10_12              __AVAILABILITY_INTERNAL_DEPRECATED
+            #define __AVAILABILITY_INTERNAL__MAC_10_8_DEP__MAC_10_12_MSG(_msg)    __AVAILABILITY_INTERNAL_DEPRECATED_MSG(_msg)
+            #define __AVAILABILITY_INTERNAL__MAC_10_9_DEP__MAC_10_12              __AVAILABILITY_INTERNAL_DEPRECATED
+            #define __AVAILABILITY_INTERNAL__MAC_10_9_DEP__MAC_10_12_MSG(_msg)    __AVAILABILITY_INTERNAL_DEPRECATED_MSG(_msg)
+            #define __AVAILABILITY_INTERNAL__MAC_10_10_DEP__MAC_10_12              __AVAILABILITY_INTERNAL_DEPRECATED
+            #define __AVAILABILITY_INTERNAL__MAC_10_10_DEP__MAC_10_12_MSG(_msg)    __AVAILABILITY_INTERNAL_DEPRECATED_MSG(_msg)
+            #define __AVAILABILITY_INTERNAL__MAC_10_10_2_DEP__MAC_10_12              __AVAILABILITY_INTERNAL_DEPRECATED
+            #define __AVAILABILITY_INTERNAL__MAC_10_10_2_DEP__MAC_10_12_MSG(_msg)    __AVAILABILITY_INTERNAL_DEPRECATED_MSG(_msg)
+            #define __AVAILABILITY_INTERNAL__MAC_10_10_3_DEP__MAC_10_12              __AVAILABILITY_INTERNAL_DEPRECATED
+            #define __AVAILABILITY_INTERNAL__MAC_10_10_3_DEP__MAC_10_12_MSG(_msg)    __AVAILABILITY_INTERNAL_DEPRECATED_MSG(_msg)
+            #define __AVAILABILITY_INTERNAL__MAC_10_11_DEP__MAC_10_12              __AVAILABILITY_INTERNAL_DEPRECATED
+            #define __AVAILABILITY_INTERNAL__MAC_10_11_DEP__MAC_10_12_MSG(_msg)    __AVAILABILITY_INTERNAL_DEPRECATED_MSG(_msg)
+            #define __AVAILABILITY_INTERNAL__MAC_10_11_2_DEP__MAC_10_12              __AVAILABILITY_INTERNAL_DEPRECATED
+            #define __AVAILABILITY_INTERNAL__MAC_10_11_2_DEP__MAC_10_12_MSG(_msg)    __AVAILABILITY_INTERNAL_DEPRECATED_MSG(_msg)
+            #define __AVAILABILITY_INTERNAL__MAC_10_11_3_DEP__MAC_10_12              __AVAILABILITY_INTERNAL_DEPRECATED
+            #define __AVAILABILITY_INTERNAL__MAC_10_11_3_DEP__MAC_10_12_MSG(_msg)    __AVAILABILITY_INTERNAL_DEPRECATED_MSG(_msg)
+            #define __AVAILABILITY_INTERNAL__MAC_10_11_4_DEP__MAC_10_12              __AVAILABILITY_INTERNAL_DEPRECATED
+            #define __AVAILABILITY_INTERNAL__MAC_10_11_4_DEP__MAC_10_12_MSG(_msg)    __AVAILABILITY_INTERNAL_DEPRECATED_MSG(_msg)
+            #define __AVAILABILITY_INTERNAL__MAC_10_12_DEP__MAC_10_12              __AVAILABILITY_INTERNAL_DEPRECATED
+            #define __AVAILABILITY_INTERNAL__MAC_10_12_DEP__MAC_10_12_MSG(_msg)    __AVAILABILITY_INTERNAL_DEPRECATED_MSG(_msg)
+        #else
+            #define __AVAILABILITY_INTERNAL__MAC_10_0_DEP__MAC_10_12              __AVAILABILITY_INTERNAL__MAC_10_0
+            #define __AVAILABILITY_INTERNAL__MAC_10_0_DEP__MAC_10_12_MSG(_msg)    __AVAILABILITY_INTERNAL__MAC_10_0
+            #define __AVAILABILITY_INTERNAL__MAC_10_1_DEP__MAC_10_12              __AVAILABILITY_INTERNAL__MAC_10_1
+            #define __AVAILABILITY_INTERNAL__MAC_10_1_DEP__MAC_10_12_MSG(_msg)    __AVAILABILITY_INTERNAL__MAC_10_1
+            #define __AVAILABILITY_INTERNAL__MAC_10_2_DEP__MAC_10_12              __AVAILABILITY_INTERNAL__MAC_10_2
+            #define __AVAILABILITY_INTERNAL__MAC_10_2_DEP__MAC_10_12_MSG(_msg)    __AVAILABILITY_INTERNAL__MAC_10_2
+            #define __AVAILABILITY_INTERNAL__MAC_10_3_DEP__MAC_10_12              __AVAILABILITY_INTERNAL__MAC_10_3
+            #define __AVAILABILITY_INTERNAL__MAC_10_3_DEP__MAC_10_12_MSG(_msg)    __AVAILABILITY_INTERNAL__MAC_10_3
+            #define __AVAILABILITY_INTERNAL__MAC_10_4_DEP__MAC_10_12              __AVAILABILITY_INTERNAL__MAC_10_4
+            #define __AVAILABILITY_INTERNAL__MAC_10_4_DEP__MAC_10_12_MSG(_msg)    __AVAILABILITY_INTERNAL__MAC_10_4
+            #define __AVAILABILITY_INTERNAL__MAC_10_5_DEP__MAC_10_12              __AVAILABILITY_INTERNAL__MAC_10_5
+            #define __AVAILABILITY_INTERNAL__MAC_10_5_DEP__MAC_10_12_MSG(_msg)    __AVAILABILITY_INTERNAL__MAC_10_5
+            #define __AVAILABILITY_INTERNAL__MAC_10_6_DEP__MAC_10_12              __AVAILABILITY_INTERNAL__MAC_10_6
+            #define __AVAILABILITY_INTERNAL__MAC_10_6_DEP__MAC_10_12_MSG(_msg)    __AVAILABILITY_INTERNAL__MAC_10_6
+            #define __AVAILABILITY_INTERNAL__MAC_10_7_DEP__MAC_10_12              __AVAILABILITY_INTERNAL__MAC_10_7
+            #define __AVAILABILITY_INTERNAL__MAC_10_7_DEP__MAC_10_12_MSG(_msg)    __AVAILABILITY_INTERNAL__MAC_10_7
+            #define __AVAILABILITY_INTERNAL__MAC_10_8_DEP__MAC_10_12              __AVAILABILITY_INTERNAL__MAC_10_8
+            #define __AVAILABILITY_INTERNAL__MAC_10_8_DEP__MAC_10_12_MSG(_msg)    __AVAILABILITY_INTERNAL__MAC_10_8
+            #define __AVAILABILITY_INTERNAL__MAC_10_9_DEP__MAC_10_12              __AVAILABILITY_INTERNAL__MAC_10_9
+            #define __AVAILABILITY_INTERNAL__MAC_10_9_DEP__MAC_10_12_MSG(_msg)    __AVAILABILITY_INTERNAL__MAC_10_9
+            #define __AVAILABILITY_INTERNAL__MAC_10_10_DEP__MAC_10_12              __AVAILABILITY_INTERNAL__MAC_10_10
+            #define __AVAILABILITY_INTERNAL__MAC_10_10_DEP__MAC_10_12_MSG(_msg)    __AVAILABILITY_INTERNAL__MAC_10_10
+            #define __AVAILABILITY_INTERNAL__MAC_10_10_2_DEP__MAC_10_12              __AVAILABILITY_INTERNAL__MAC_10_10_2
+            #define __AVAILABILITY_INTERNAL__MAC_10_10_2_DEP__MAC_10_12_MSG(_msg)    __AVAILABILITY_INTERNAL__MAC_10_10_2
+            #define __AVAILABILITY_INTERNAL__MAC_10_10_3_DEP__MAC_10_12              __AVAILABILITY_INTERNAL__MAC_10_10_3
+            #define __AVAILABILITY_INTERNAL__MAC_10_10_3_DEP__MAC_10_12_MSG(_msg)    __AVAILABILITY_INTERNAL__MAC_10_10_3
+            #define __AVAILABILITY_INTERNAL__MAC_10_11_DEP__MAC_10_12              __AVAILABILITY_INTERNAL__MAC_10_11
+            #define __AVAILABILITY_INTERNAL__MAC_10_11_DEP__MAC_10_12_MSG(_msg)    __AVAILABILITY_INTERNAL__MAC_10_11
+            #define __AVAILABILITY_INTERNAL__MAC_10_11_2_DEP__MAC_10_12              __AVAILABILITY_INTERNAL__MAC_10_11_2
+            #define __AVAILABILITY_INTERNAL__MAC_10_11_2_DEP__MAC_10_12_MSG(_msg)    __AVAILABILITY_INTERNAL__MAC_10_11_2
+            #define __AVAILABILITY_INTERNAL__MAC_10_11_3_DEP__MAC_10_12              __AVAILABILITY_INTERNAL__MAC_10_11_3
+            #define __AVAILABILITY_INTERNAL__MAC_10_11_3_DEP__MAC_10_12_MSG(_msg)    __AVAILABILITY_INTERNAL__MAC_10_11_3
+            #define __AVAILABILITY_INTERNAL__MAC_10_11_4_DEP__MAC_10_12              __AVAILABILITY_INTERNAL__MAC_10_11_4
+            #define __AVAILABILITY_INTERNAL__MAC_10_11_4_DEP__MAC_10_12_MSG(_msg)    __AVAILABILITY_INTERNAL__MAC_10_11_4
+            #define __AVAILABILITY_INTERNAL__MAC_10_12_DEP__MAC_10_12              __AVAILABILITY_INTERNAL__MAC_10_12
+            #define __AVAILABILITY_INTERNAL__MAC_10_12_DEP__MAC_10_12_MSG(_msg)    __AVAILABILITY_INTERNAL__MAC_10_12
+        #endif
         #define __AVAILABILITY_INTERNAL__MAC_10_0_DEP__MAC_NA             __AVAILABILITY_INTERNAL__MAC_10_0
         #define __AVAILABILITY_INTERNAL__MAC_10_0_DEP__MAC_NA_MSG(_msg)   __AVAILABILITY_INTERNAL__MAC_10_0
         #define __AVAILABILITY_INTERNAL__MAC_10_1_DEP__MAC_NA             __AVAILABILITY_INTERNAL__MAC_10_1
@@ -15575,6 +17316,8 @@
         #define __AVAILABILITY_INTERNAL__MAC_10_11_3_DEP__MAC_NA_MSG(_msg)   __AVAILABILITY_INTERNAL__MAC_10_11_3
         #define __AVAILABILITY_INTERNAL__MAC_10_11_4_DEP__MAC_NA             __AVAILABILITY_INTERNAL__MAC_10_11_4
         #define __AVAILABILITY_INTERNAL__MAC_10_11_4_DEP__MAC_NA_MSG(_msg)   __AVAILABILITY_INTERNAL__MAC_10_11_4
+        #define __AVAILABILITY_INTERNAL__MAC_10_12_DEP__MAC_NA             __AVAILABILITY_INTERNAL__MAC_10_12
+        #define __AVAILABILITY_INTERNAL__MAC_10_12_DEP__MAC_NA_MSG(_msg)   __AVAILABILITY_INTERNAL__MAC_10_12
         #define __AVAILABILITY_INTERNAL__MAC_NA_DEP__MAC_NA               __AVAILABILITY_INTERNAL_UNAVAILABLE
         #define __AVAILABILITY_INTERNAL__MAC_NA_DEP__MAC_NA_MSG(_msg)     __AVAILABILITY_INTERNAL_UNAVAILABLE
     #endif
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/AvailabilityMacros.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/AvailabilityMacros.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/AvailabilityMacros.h	2016-01-15 05:37:58.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/AvailabilityMacros.h	2016-05-11 14:53:08.000000000 +0200
@@ -24,7 +24,7 @@
 /*
      File:       AvailabilityMacros.h
  
-     More Info:  See TechNote 2064
+     More Info:  See the SDK Compatibility Guide
 
      Contains:   Autoconfiguration of AVAILABLE_ macros for Mac OS X
 
@@ -106,6 +106,7 @@
 #define MAC_OS_X_VERSION_10_11_2    101102
 #define MAC_OS_X_VERSION_10_11_3    101103
 #define MAC_OS_X_VERSION_10_11_4    101104
+#define MAC_OS_X_VERSION_10_12      101200
 
 /* 
  * If min OS not specified, assume 10.4 for intel
@@ -129,13 +130,13 @@
 #endif
 
 /*
- * if max OS not specified, assume larger of (10.11.4, min)
+ * if max OS not specified, assume larger of (10.12, min)
  */
 #ifndef MAC_OS_X_VERSION_MAX_ALLOWED
-    #if MAC_OS_X_VERSION_MIN_REQUIRED > MAC_OS_X_VERSION_10_11_4
+    #if MAC_OS_X_VERSION_MIN_REQUIRED > MAC_OS_X_VERSION_10_12
         #define MAC_OS_X_VERSION_MAX_ALLOWED MAC_OS_X_VERSION_MIN_REQUIRED
     #else
-        #define MAC_OS_X_VERSION_MAX_ALLOWED MAC_OS_X_VERSION_10_11_4
+        #define MAC_OS_X_VERSION_MAX_ALLOWED MAC_OS_X_VERSION_10_12
     #endif
 #endif
 
@@ -2820,6 +2821,287 @@
 #endif
 
 
+/*
+ * AVAILABLE_MAC_OS_X_VERSION_10_12_AND_LATER
+ * 
+ * Used on declarations introduced in Mac OS X 10.12 
+ */
+#if __AVAILABILITY_MACROS_USES_AVAILABILITY
+    #define AVAILABLE_MAC_OS_X_VERSION_10_12_AND_LATER     __OSX_AVAILABLE_STARTING(__MAC_10_12, __IPHONE_NA)
+#elif MAC_OS_X_VERSION_MAX_ALLOWED < MAC_OS_X_VERSION_10_12
+    #define AVAILABLE_MAC_OS_X_VERSION_10_12_AND_LATER     UNAVAILABLE_ATTRIBUTE
+#elif MAC_OS_X_VERSION_MIN_REQUIRED < MAC_OS_X_VERSION_10_12
+    #define AVAILABLE_MAC_OS_X_VERSION_10_12_AND_LATER     WEAK_IMPORT_ATTRIBUTE
+#else
+    #define AVAILABLE_MAC_OS_X_VERSION_10_12_AND_LATER
+#endif
+
+/*
+ * AVAILABLE_MAC_OS_X_VERSION_10_12_AND_LATER_BUT_DEPRECATED
+ *
+ * Used on declarations introduced in Mac OS X 10.12,
+ * and deprecated in Mac OS X 10.12
+ */
+#if __AVAILABILITY_MACROS_USES_AVAILABILITY
+    #define AVAILABLE_MAC_OS_X_VERSION_10_12_AND_LATER_BUT_DEPRECATED     __OSX_AVAILABLE_BUT_DEPRECATED(__MAC_10_12, __MAC_10_12, __IPHONE_NA, __IPHONE_NA)
+#elif MAC_OS_X_VERSION_MIN_REQUIRED >= MAC_OS_X_VERSION_10_12
+    #define AVAILABLE_MAC_OS_X_VERSION_10_12_AND_LATER_BUT_DEPRECATED    DEPRECATED_ATTRIBUTE
+#else
+    #define AVAILABLE_MAC_OS_X_VERSION_10_12_AND_LATER_BUT_DEPRECATED    AVAILABLE_MAC_OS_X_VERSION_10_12_AND_LATER
+#endif
+
+/*
+ * AVAILABLE_MAC_OS_X_VERSION_10_0_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12
+ *
+ * Used on declarations introduced in Mac OS X 10.0,
+ * but later deprecated in Mac OS X 10.12
+ */
+#if __AVAILABILITY_MACROS_USES_AVAILABILITY
+    #define AVAILABLE_MAC_OS_X_VERSION_10_0_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12    __OSX_AVAILABLE_BUT_DEPRECATED(__MAC_10_0, __MAC_10_12, __IPHONE_NA, __IPHONE_NA)
+#elif MAC_OS_X_VERSION_MIN_REQUIRED >= MAC_OS_X_VERSION_10_12
+    #define AVAILABLE_MAC_OS_X_VERSION_10_0_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12    DEPRECATED_ATTRIBUTE
+#else
+    #define AVAILABLE_MAC_OS_X_VERSION_10_0_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12    AVAILABLE_MAC_OS_X_VERSION_10_0_AND_LATER
+#endif
+
+/*
+ * AVAILABLE_MAC_OS_X_VERSION_10_1_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12
+ *
+ * Used on declarations introduced in Mac OS X 10.1,
+ * but later deprecated in Mac OS X 10.12
+ */
+#if __AVAILABILITY_MACROS_USES_AVAILABILITY
+    #define AVAILABLE_MAC_OS_X_VERSION_10_1_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12    __OSX_AVAILABLE_BUT_DEPRECATED(__MAC_10_1, __MAC_10_12, __IPHONE_NA, __IPHONE_NA)
+#elif MAC_OS_X_VERSION_MIN_REQUIRED >= MAC_OS_X_VERSION_10_12
+    #define AVAILABLE_MAC_OS_X_VERSION_10_1_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12    DEPRECATED_ATTRIBUTE
+#else
+    #define AVAILABLE_MAC_OS_X_VERSION_10_1_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12    AVAILABLE_MAC_OS_X_VERSION_10_1_AND_LATER
+#endif
+
+/*
+ * AVAILABLE_MAC_OS_X_VERSION_10_2_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12
+ *
+ * Used on declarations introduced in Mac OS X 10.2,
+ * but later deprecated in Mac OS X 10.12
+ */
+#if __AVAILABILITY_MACROS_USES_AVAILABILITY
+    #define AVAILABLE_MAC_OS_X_VERSION_10_2_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12    __OSX_AVAILABLE_BUT_DEPRECATED(__MAC_10_2, __MAC_10_12, __IPHONE_NA, __IPHONE_NA)
+#elif MAC_OS_X_VERSION_MIN_REQUIRED >= MAC_OS_X_VERSION_10_12
+    #define AVAILABLE_MAC_OS_X_VERSION_10_2_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12    DEPRECATED_ATTRIBUTE
+#else
+    #define AVAILABLE_MAC_OS_X_VERSION_10_2_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12    AVAILABLE_MAC_OS_X_VERSION_10_2_AND_LATER
+#endif
+
+/*
+ * AVAILABLE_MAC_OS_X_VERSION_10_3_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12
+ *
+ * Used on declarations introduced in Mac OS X 10.3,
+ * but later deprecated in Mac OS X 10.12
+ */
+#if __AVAILABILITY_MACROS_USES_AVAILABILITY
+    #define AVAILABLE_MAC_OS_X_VERSION_10_3_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12    __OSX_AVAILABLE_BUT_DEPRECATED(__MAC_10_3, __MAC_10_12, __IPHONE_NA, __IPHONE_NA)
+#elif MAC_OS_X_VERSION_MIN_REQUIRED >= MAC_OS_X_VERSION_10_12
+    #define AVAILABLE_MAC_OS_X_VERSION_10_3_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12    DEPRECATED_ATTRIBUTE
+#else
+    #define AVAILABLE_MAC_OS_X_VERSION_10_3_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12    AVAILABLE_MAC_OS_X_VERSION_10_3_AND_LATER
+#endif
+
+/*
+ * AVAILABLE_MAC_OS_X_VERSION_10_4_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12
+ *
+ * Used on declarations introduced in Mac OS X 10.4,
+ * but later deprecated in Mac OS X 10.12
+ */
+#if __AVAILABILITY_MACROS_USES_AVAILABILITY
+    #define AVAILABLE_MAC_OS_X_VERSION_10_4_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12    __OSX_AVAILABLE_BUT_DEPRECATED(__MAC_10_4, __MAC_10_12, __IPHONE_NA, __IPHONE_NA)
+#elif MAC_OS_X_VERSION_MIN_REQUIRED >= MAC_OS_X_VERSION_10_12
+    #define AVAILABLE_MAC_OS_X_VERSION_10_4_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12    DEPRECATED_ATTRIBUTE
+#else
+    #define AVAILABLE_MAC_OS_X_VERSION_10_4_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12    AVAILABLE_MAC_OS_X_VERSION_10_4_AND_LATER
+#endif
+
+/*
+ * AVAILABLE_MAC_OS_X_VERSION_10_5_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12
+ *
+ * Used on declarations introduced in Mac OS X 10.5,
+ * but later deprecated in Mac OS X 10.12
+ */
+#if __AVAILABILITY_MACROS_USES_AVAILABILITY
+    #define AVAILABLE_MAC_OS_X_VERSION_10_5_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12    __OSX_AVAILABLE_BUT_DEPRECATED(__MAC_10_5, __MAC_10_12, __IPHONE_NA, __IPHONE_NA)
+#elif MAC_OS_X_VERSION_MIN_REQUIRED >= MAC_OS_X_VERSION_10_12
+    #define AVAILABLE_MAC_OS_X_VERSION_10_5_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12    DEPRECATED_ATTRIBUTE
+#else
+    #define AVAILABLE_MAC_OS_X_VERSION_10_5_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12    AVAILABLE_MAC_OS_X_VERSION_10_5_AND_LATER
+#endif
+
+/*
+ * AVAILABLE_MAC_OS_X_VERSION_10_6_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12
+ *
+ * Used on declarations introduced in Mac OS X 10.6,
+ * but later deprecated in Mac OS X 10.12
+ */
+#if __AVAILABILITY_MACROS_USES_AVAILABILITY
+    #define AVAILABLE_MAC_OS_X_VERSION_10_6_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12    __OSX_AVAILABLE_BUT_DEPRECATED(__MAC_10_6, __MAC_10_12, __IPHONE_NA, __IPHONE_NA)
+#elif MAC_OS_X_VERSION_MIN_REQUIRED >= MAC_OS_X_VERSION_10_12
+    #define AVAILABLE_MAC_OS_X_VERSION_10_6_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12    DEPRECATED_ATTRIBUTE
+#else
+    #define AVAILABLE_MAC_OS_X_VERSION_10_6_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12    AVAILABLE_MAC_OS_X_VERSION_10_6_AND_LATER
+#endif
+
+/*
+ * AVAILABLE_MAC_OS_X_VERSION_10_7_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12
+ *
+ * Used on declarations introduced in Mac OS X 10.7,
+ * but later deprecated in Mac OS X 10.12
+ */
+#if __AVAILABILITY_MACROS_USES_AVAILABILITY
+    #define AVAILABLE_MAC_OS_X_VERSION_10_7_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12    __OSX_AVAILABLE_BUT_DEPRECATED(__MAC_10_7, __MAC_10_12, __IPHONE_NA, __IPHONE_NA)
+#elif MAC_OS_X_VERSION_MIN_REQUIRED >= MAC_OS_X_VERSION_10_12
+    #define AVAILABLE_MAC_OS_X_VERSION_10_7_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12    DEPRECATED_ATTRIBUTE
+#else
+    #define AVAILABLE_MAC_OS_X_VERSION_10_7_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12    AVAILABLE_MAC_OS_X_VERSION_10_7_AND_LATER
+#endif
+
+/*
+ * AVAILABLE_MAC_OS_X_VERSION_10_8_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12
+ *
+ * Used on declarations introduced in Mac OS X 10.8,
+ * but later deprecated in Mac OS X 10.12
+ */
+#if __AVAILABILITY_MACROS_USES_AVAILABILITY
+    #define AVAILABLE_MAC_OS_X_VERSION_10_8_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12    __OSX_AVAILABLE_BUT_DEPRECATED(__MAC_10_8, __MAC_10_12, __IPHONE_NA, __IPHONE_NA)
+#elif MAC_OS_X_VERSION_MIN_REQUIRED >= MAC_OS_X_VERSION_10_12
+    #define AVAILABLE_MAC_OS_X_VERSION_10_8_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12    DEPRECATED_ATTRIBUTE
+#else
+    #define AVAILABLE_MAC_OS_X_VERSION_10_8_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12    AVAILABLE_MAC_OS_X_VERSION_10_8_AND_LATER
+#endif
+
+/*
+ * AVAILABLE_MAC_OS_X_VERSION_10_9_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12
+ *
+ * Used on declarations introduced in Mac OS X 10.9,
+ * but later deprecated in Mac OS X 10.12
+ */
+#if __AVAILABILITY_MACROS_USES_AVAILABILITY
+    #define AVAILABLE_MAC_OS_X_VERSION_10_9_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12    __OSX_AVAILABLE_BUT_DEPRECATED(__MAC_10_9, __MAC_10_12, __IPHONE_NA, __IPHONE_NA)
+#elif MAC_OS_X_VERSION_MIN_REQUIRED >= MAC_OS_X_VERSION_10_12
+    #define AVAILABLE_MAC_OS_X_VERSION_10_9_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12    DEPRECATED_ATTRIBUTE
+#else
+    #define AVAILABLE_MAC_OS_X_VERSION_10_9_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12    AVAILABLE_MAC_OS_X_VERSION_10_9_AND_LATER
+#endif
+
+/*
+ * AVAILABLE_MAC_OS_X_VERSION_10_10_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12
+ *
+ * Used on declarations introduced in Mac OS X 10.10,
+ * but later deprecated in Mac OS X 10.12
+ */
+#if __AVAILABILITY_MACROS_USES_AVAILABILITY
+    #define AVAILABLE_MAC_OS_X_VERSION_10_10_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12    __OSX_AVAILABLE_BUT_DEPRECATED(__MAC_10_10, __MAC_10_12, __IPHONE_NA, __IPHONE_NA)
+#elif MAC_OS_X_VERSION_MIN_REQUIRED >= MAC_OS_X_VERSION_10_12
+    #define AVAILABLE_MAC_OS_X_VERSION_10_10_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12    DEPRECATED_ATTRIBUTE
+#else
+    #define AVAILABLE_MAC_OS_X_VERSION_10_10_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12    AVAILABLE_MAC_OS_X_VERSION_10_10_AND_LATER
+#endif
+
+/*
+ * AVAILABLE_MAC_OS_X_VERSION_10_10_2_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12
+ *
+ * Used on declarations introduced in Mac OS X 10.10.2,
+ * but later deprecated in Mac OS X 10.12
+ */
+#if __AVAILABILITY_MACROS_USES_AVAILABILITY
+    #define AVAILABLE_MAC_OS_X_VERSION_10_10_2_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12    __OSX_AVAILABLE_BUT_DEPRECATED(__MAC_10_10_2, __MAC_10_12, __IPHONE_NA, __IPHONE_NA)
+#elif MAC_OS_X_VERSION_MIN_REQUIRED >= MAC_OS_X_VERSION_10_12
+    #define AVAILABLE_MAC_OS_X_VERSION_10_10_2_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12    DEPRECATED_ATTRIBUTE
+#else
+    #define AVAILABLE_MAC_OS_X_VERSION_10_10_2_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12    AVAILABLE_MAC_OS_X_VERSION_10_10_2_AND_LATER
+#endif
+
+/*
+ * AVAILABLE_MAC_OS_X_VERSION_10_10_3_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12
+ *
+ * Used on declarations introduced in Mac OS X 10.10.3,
+ * but later deprecated in Mac OS X 10.12
+ */
+#if __AVAILABILITY_MACROS_USES_AVAILABILITY
+    #define AVAILABLE_MAC_OS_X_VERSION_10_10_3_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12    __OSX_AVAILABLE_BUT_DEPRECATED(__MAC_10_10_3, __MAC_10_12, __IPHONE_NA, __IPHONE_NA)
+#elif MAC_OS_X_VERSION_MIN_REQUIRED >= MAC_OS_X_VERSION_10_12
+    #define AVAILABLE_MAC_OS_X_VERSION_10_10_3_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12    DEPRECATED_ATTRIBUTE
+#else
+    #define AVAILABLE_MAC_OS_X_VERSION_10_10_3_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12    AVAILABLE_MAC_OS_X_VERSION_10_10_3_AND_LATER
+#endif
+
+/*
+ * AVAILABLE_MAC_OS_X_VERSION_10_11_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12
+ *
+ * Used on declarations introduced in Mac OS X 10.11,
+ * but later deprecated in Mac OS X 10.12
+ */
+#if __AVAILABILITY_MACROS_USES_AVAILABILITY
+    #define AVAILABLE_MAC_OS_X_VERSION_10_11_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12    __OSX_AVAILABLE_BUT_DEPRECATED(__MAC_10_11, __MAC_10_12, __IPHONE_NA, __IPHONE_NA)
+#elif MAC_OS_X_VERSION_MIN_REQUIRED >= MAC_OS_X_VERSION_10_12
+    #define AVAILABLE_MAC_OS_X_VERSION_10_11_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12    DEPRECATED_ATTRIBUTE
+#else
+    #define AVAILABLE_MAC_OS_X_VERSION_10_11_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12    AVAILABLE_MAC_OS_X_VERSION_10_11_AND_LATER
+#endif
+
+/*
+ * AVAILABLE_MAC_OS_X_VERSION_10_11_2_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12
+ *
+ * Used on declarations introduced in Mac OS X 10.11.2,
+ * but later deprecated in Mac OS X 10.12
+ */
+#if __AVAILABILITY_MACROS_USES_AVAILABILITY
+    #define AVAILABLE_MAC_OS_X_VERSION_10_11_2_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12    __OSX_AVAILABLE_BUT_DEPRECATED(__MAC_10_11_2, __MAC_10_12, __IPHONE_NA, __IPHONE_NA)
+#elif MAC_OS_X_VERSION_MIN_REQUIRED >= MAC_OS_X_VERSION_10_12
+    #define AVAILABLE_MAC_OS_X_VERSION_10_11_2_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12    DEPRECATED_ATTRIBUTE
+#else
+    #define AVAILABLE_MAC_OS_X_VERSION_10_11_2_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12    AVAILABLE_MAC_OS_X_VERSION_10_11_2_AND_LATER
+#endif
+
+/*
+ * AVAILABLE_MAC_OS_X_VERSION_10_11_3_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12
+ *
+ * Used on declarations introduced in Mac OS X 10.11.3,
+ * but later deprecated in Mac OS X 10.12
+ */
+#if __AVAILABILITY_MACROS_USES_AVAILABILITY
+    #define AVAILABLE_MAC_OS_X_VERSION_10_11_3_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12    __OSX_AVAILABLE_BUT_DEPRECATED(__MAC_10_11_3, __MAC_10_12, __IPHONE_NA, __IPHONE_NA)
+#elif MAC_OS_X_VERSION_MIN_REQUIRED >= MAC_OS_X_VERSION_10_12
+    #define AVAILABLE_MAC_OS_X_VERSION_10_11_3_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12    DEPRECATED_ATTRIBUTE
+#else
+    #define AVAILABLE_MAC_OS_X_VERSION_10_11_3_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12    AVAILABLE_MAC_OS_X_VERSION_10_11_3_AND_LATER
+#endif
+
+/*
+ * AVAILABLE_MAC_OS_X_VERSION_10_11_4_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12
+ *
+ * Used on declarations introduced in Mac OS X 10.11.4,
+ * but later deprecated in Mac OS X 10.12
+ */
+#if __AVAILABILITY_MACROS_USES_AVAILABILITY
+    #define AVAILABLE_MAC_OS_X_VERSION_10_11_4_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12    __OSX_AVAILABLE_BUT_DEPRECATED(__MAC_10_11_4, __MAC_10_12, __IPHONE_NA, __IPHONE_NA)
+#elif MAC_OS_X_VERSION_MIN_REQUIRED >= MAC_OS_X_VERSION_10_12
+    #define AVAILABLE_MAC_OS_X_VERSION_10_11_4_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12    DEPRECATED_ATTRIBUTE
+#else
+    #define AVAILABLE_MAC_OS_X_VERSION_10_11_4_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_12    AVAILABLE_MAC_OS_X_VERSION_10_11_4_AND_LATER
+#endif
+
+/*
+ * DEPRECATED_IN_MAC_OS_X_VERSION_10_12_AND_LATER
+ *
+ * Used on types deprecated in Mac OS X 10.12
+ */
+#if __AVAILABILITY_MACROS_USES_AVAILABILITY
+    #define DEPRECATED_IN_MAC_OS_X_VERSION_10_12_AND_LATER    __OSX_AVAILABLE_BUT_DEPRECATED(__MAC_10_0, __MAC_10_12, __IPHONE_NA, __IPHONE_NA)
+#elif MAC_OS_X_VERSION_MIN_REQUIRED >= MAC_OS_X_VERSION_10_12
+    #define DEPRECATED_IN_MAC_OS_X_VERSION_10_12_AND_LATER    DEPRECATED_ATTRIBUTE
+#else
+    #define DEPRECATED_IN_MAC_OS_X_VERSION_10_12_AND_LATER
+#endif
+
+
 
 
 #endif  /* __AVAILABILITYMACROS__ */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOBSD.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOBSD.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOBSD.h	2015-08-27 01:55:14.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOBSD.h	2016-06-03 22:55:05.000000000 +0200
@@ -32,6 +32,7 @@
  * bsd-related registry properties
  */
 
+#define kIOBSDKey      "IOBSD"     // (BSD subsystem resource)
 #define kIOBSDNameKey  "BSD Name"  // (an OSString)
 #define kIOBSDNamesKey "BSD Names" // (an OSDictionary of OSString's, for links)
 #define kIOBSDMajorKey "BSD Major" // (an OSNumber)
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOBufferMemoryDescriptor.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOBufferMemoryDescriptor.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOBufferMemoryDescriptor.h	2015-08-27 01:55:14.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOBufferMemoryDescriptor.h	2016-06-03 22:55:05.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 1998-2000 Apple Computer, Inc. All rights reserved.
+ * Copyright (c) 1998-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  * 
@@ -43,6 +43,7 @@
 					| kIOMemoryThreadSafe
 					| kIOMemoryClearEncrypt
 					| kIOMemoryMapperNone
+					| kIOMemoryUseReserve
 };
 
 #define _IOBUFFERMEMORYDESCRIPTOR_INTASKWITHOPTIONS_		1
@@ -175,7 +176,7 @@
     kIOMapCopybackCache - allocate memory with copyback cache setting. <br>		
     kIOMapWriteCombineCache - allocate memory with writecombined cache setting.
     @param capacity The number of bytes to allocate.
-    @param mask The buffer will be allocated with pages such that physical addresses will only have bits set present in physicalMask. For example, pass 0x00000000FFFFFFFFULL for a buffer to be accessed by hardware that has 32 address bits.
+    @param physicalMask The buffer will be allocated with pages such that physical addresses will only have bits set present in physicalMask. For example, pass 0x00000000FFFFFFFFULL for a buffer to be accessed by hardware that has 32 address bits.
     @result Returns an instance of class IOBufferMemoryDescriptor to be released by the caller, which will free the memory desriptor and associated buffer. */
 
     static IOBufferMemoryDescriptor * inTaskWithPhysicalMask(
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOCatalogue.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOCatalogue.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOCatalogue.h	2015-08-27 01:55:14.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOCatalogue.h	2016-06-03 22:55:05.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 1998-2012 Apple Inc. All rights reserved.
+ * Copyright (c) 1998-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  * 
@@ -86,7 +86,7 @@
     /*!
         @function findDrivers
         @abstract This is the primary entry point for IOService.
-        @param service
+        @param service The service
         @param generationCount  Returns a reference to the generation count of the database. The generation count increases only when personalities are added to the database *and* IOService matching has been initiated.
         @result Returns an ordered set of driver personalities ranked on probe-scores.  The ordered set must be released by the receiver.
     */
@@ -105,7 +105,7 @@
         @function addDrivers
         @abstract Adds an array of driver personalities to the database.
         @param array Array of driver personalities to be added to the database.
-        @param doNubMatchng Start matching process after personalities have been added.
+        @param doNubMatching Start matching process after personalities have been added.
         @result Returns true if driver personality was added to the database successfully. Failure is due to a memory allocation failure.
     */
     bool addDrivers( OSArray * array, bool doNubMatching = true );
@@ -114,7 +114,7 @@
         @function removeDrivers
         @abstract Remove driver personalities from the database based on matching information provided.
         @param matching  A dictionary whose keys and values are used for matching personalities in the database.  For example, a matching dictionary containing a 'IOProviderClass' key with the value 'IOPCIDevice' will remove all personalities which have the key 'IOProviderClass' equal to 'IOPCIDevice'.
-        @param doNubMatchng Start matching process after personalities have been removed.  Matching criteria is based on IOProviderClass of those personalities which were removed.  This is to allow drivers which haven't been matched to match against NUB's which were blocked by the previous personalities. 
+        @param doNubMatching Start matching process after personalities have been removed.  Matching criteria is based on IOProviderClass of those personalities which were removed.  This is to allow drivers which haven't been matched to match against NUB's which were blocked by the previous personalities. 
         @result Returns true if personality was removed successfully. Failure is due to a memory allocation failure.
     */
     bool removeDrivers( OSDictionary * matching, bool doNubMatching = true );
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOCommandGate.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOCommandGate.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOCommandGate.h	2015-08-27 01:55:14.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOCommandGate.h	2016-06-03 22:55:06.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 1998-2009 Apple Inc. All rights reserved.
+ * Copyright (c) 1998-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  * 
@@ -195,7 +195,7 @@
 /*! @function commandWakeup
     @abstract Wakeup one or more threads that are asleep on an event.
     @param event Pointer to an address.
-    @param onlyOneThread true to only wake up at most one thread, false otherwise. */
+    @param oneThread true to only wake up at most one thread, false otherwise. */
     virtual void commandWakeup(void *event, bool oneThread = false);
 
 /*! @function disable
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOCommandPool.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOCommandPool.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOCommandPool.h	2015-08-27 01:55:14.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOCommandPool.h	2016-06-03 22:55:06.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2000 Apple Computer, Inc. All rights reserved.
+ * Copyright (c) 2000-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  * 
@@ -118,7 +118,7 @@
      * @abstract Primary initializer for an IOCommandPool object.
      * @discussion Primary initializer for an IOCommandPool.
      * Should probably use IOCommandPool::withWorkLoop() as it is easier to use.
-     * @param inWorkLoop
+     * @param workLoop
      * The workloop that this command pool should synchronize with.
      * @result Returns true if command pool was successfully initialized.
      */
@@ -176,7 +176,7 @@
      * @discussion
      * The returnCommand method is used to place an object of type IOCommand
      * into the pool, whether it be the first time, or the 1000th time.
-     * @param commmand
+     * @param command
      * The command to place in the pool.
      */
     
@@ -189,10 +189,10 @@
      * @discussion
      * The gatedGetCommand method is used to serialize the extraction of a 
      * command from the pool behind a command gate, runAction-ed by getCommand.
-     * @param vCommand
+     * @param command
      * A pointer to a pointer to an IOCommand object where the returned
      * command will be stored.
-     * @param vBlock
+     * @param blockForCommand
      * A bool that indicates whether to block the request until a command
      * becomes available.
      * @result
@@ -207,7 +207,7 @@
      * @discussion
      * The gatedReturnCommand method is used to serialize the return of a 
      * command to the pool behind a command gate, runAction-ed by returnCommand.
-     * @param vCommand
+     * @param command
      * A pointer to the IOCommand object to be returned to the pool.
      * @result
      * Always returns kIOReturnSuccess if the vCommand argument is valid.
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IODMACommand.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IODMACommand.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IODMACommand.h	2015-08-27 01:55:14.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IODMACommand.h	2016-06-03 22:55:07.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2005 Apple Computer, Inc. All rights reserved.
+ * Copyright (c) 2005-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  * 
@@ -33,6 +33,19 @@
 class IOMapper;
 class IOBufferMemoryDescriptor;
 
+enum 
+{
+    kIODMAMapOptionMapped       = 0x00000000,
+    kIODMAMapOptionBypassed     = 0x00000001,
+    kIODMAMapOptionNonCoherent  = 0x00000002,
+    kIODMAMapOptionUnmapped     = 0x00000003,
+    kIODMAMapOptionTypeMask     = 0x0000000f,
+
+    kIODMAMapOptionNoCacheStore = 0x00000010,	// Memory in descriptor 
+    kIODMAMapOptionOnChip       = 0x00000020,	// Indicates DMA is on South Bridge
+    kIODMAMapOptionIterateOnly  = 0x00000040	// DMACommand will be used as a cursor only
+};
+
 /**************************** class IODMACommand ***************************/
 
 /*!
@@ -47,20 +60,6 @@
     The IODMACommand can be used in a 'weak-linked' manner.  To do this you must avoid using any static member functions.  Use the, much slower but safe, weakWithSpecification function.  On success a dma command instance will be returned.  This instance can then be used to clone as many commands as is needed.  Remember deriving from this class can not be done weakly, that is no weak subclassing!
 */
 
-
-enum 
-{
-    kIODMAMapOptionMapped       = 0x00000000,
-    kIODMAMapOptionBypassed     = 0x00000001,
-    kIODMAMapOptionNonCoherent  = 0x00000002,
-    kIODMAMapOptionUnmapped     = 0x00000003,
-    kIODMAMapOptionTypeMask     = 0x0000000f,
-
-    kIODMAMapOptionNoCacheStore = 0x00000010,	// Memory in descriptor 
-    kIODMAMapOptionOnChip       = 0x00000020,	// Indicates DMA is on South Bridge
-    kIODMAMapOptionIterateOnly  = 0x00000040	// DMACommand will be used as a cursor only
-};
-
 class IODMACommand : public IOCommand
 {
     OSDeclareDefaultStructors(IODMACommand);
@@ -342,7 +341,7 @@
 /*! @function complete
     @abstract Complete processing of DMA mappings after an I/O transfer is finished.
     @discussion This method should not be called unless a prepare was previously issued; the prepare() and complete() must occur in pairs, before and after an I/O transfer
-    @param invalidCache Invalidate the caches for the memory descriptor.  Defaults to true for kNonCoherent and is ignored by the other types.
+    @param invalidateCache Invalidate the caches for the memory descriptor.  Defaults to true for kNonCoherent and is ignored by the other types.
     @param synchronize Copy any buffered data back to the target IOMemoryDescriptor.  Defaults to true, if synchronize() is being used to explicitly copy data, passing false may avoid an unneeded copy.
     @result kIOReturnNotReady if not prepared, kIOReturnSuccess otherwise. */
 
@@ -402,7 +401,7 @@
     inline IOReturn gen32IOVMSegments(UInt64   *offset,
 				      Segment32 *segments,
 				      UInt32     *numSegments)
-    { return genIOVMSegments(offset, segments, numSegments); };
+    { return genIOVMSegments(offset, segments, numSegments); }
 
 /*! @function gen64IOVMSegments
     @abstract Helper function for a type checked call to genIOVMSegments(qv), for use with an IODMACommand set up with the output function kIODMACommandOutputHost64, kIODMACommandOutputBig64, or kIODMACommandOutputLittle64. If the output function of the IODMACommand is not a 64 bit function, results will be incorrect.
@@ -410,7 +409,7 @@
     inline IOReturn gen64IOVMSegments(UInt64    *offset,
 				      Segment64 *segments,
 				      UInt32    *numSegments)
-    { return genIOVMSegments(offset, segments, numSegments); };
+    { return genIOVMSegments(offset, segments, numSegments); }
 
     IOReturn
     genIOVMSegments(SegmentFunction segmentFunction,
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IODeviceMemory.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IODeviceMemory.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IODeviceMemory.h	2015-08-27 01:55:15.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IODeviceMemory.h	2016-06-03 22:55:07.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 1998-2000 Apple Computer, Inc. All rights reserved.
+ * Copyright (c) 1998-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  * 
@@ -73,8 +73,8 @@
 /*! @function withRange
     @abstract Constructs an IODeviceMemory instance, describing one physical range.
     @discussion This method creates an IODeviceMemory instance for one physical range passed as a physical address and length. It just calls IOMemoryDescriptor::withPhysicalAddress.
-    @param address The physical address of the first byte in the memory.
-    @param withLength The length of memory.
+    @param start The physical address of the first byte in the memory.
+    @param length The length of memory.
     @result Returns the created IODeviceMemory on success, to be released by the caller, or zero on failure. */
 
     static IODeviceMemory *	withRange( 
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOFilterInterruptEventSource.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOFilterInterruptEventSource.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOFilterInterruptEventSource.h	2015-08-27 01:55:15.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOFilterInterruptEventSource.h	2016-06-03 22:55:08.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 1998-2000 Apple Computer, Inc. All rights reserved.
+ * Copyright (c) 1998-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  * 
@@ -60,7 +60,7 @@
     @param owner Pointer to the owning/client instance.
     @param sender Where is the interrupt comming from.
     @result false if this interrupt can be ignored. */
-    typedef bool (*Filter)(OSObject *, IOFilterInterruptEventSource *);
+    typedef bool (*Filter)(OSObject *owner, IOFilterInterruptEventSource *sender);
 
 /*! @defined IOFilterInterruptAction
     @discussion Backward compatibilty define for the old non-class scoped type definition.  See $link IOFilterInterruptSource::Filter */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOInterruptEventSource.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOInterruptEventSource.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOInterruptEventSource.h	2015-08-27 01:55:16.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOInterruptEventSource.h	2016-06-03 22:55:09.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 1998-2014 Apple Computer, Inc. All rights reserved.
+ * Copyright (c) 1998-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  * 
@@ -68,7 +68,7 @@
     @param owner Pointer to client instance.
     @param sender Pointer to generation interrupt event source.
     @param count Number of interrupts seen before delivery. */
-    typedef void (*Action)(OSObject *, IOInterruptEventSource *, int count);
+    typedef void (*Action)(OSObject *owner, IOInterruptEventSource *sender, int count);
 
 /*! @defined IOInterruptEventAction
     @discussion Backward compatibilty define for the old non-class scoped type definition.  See $link IOInterruptEventSource::Action */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOKernelReportStructs.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOKernelReportStructs.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOKernelReportStructs.h	2015-08-27 01:55:16.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOKernelReportStructs.h	2016-06-03 22:55:09.000000000 +0200
@@ -240,6 +240,12 @@
                                                 kIOReportScaleBytes)
 #define kIOReportUnit_KiB       __IOR_MAKEUNIT(kIOReportQuantityData,  \
                                                kIOReportScaleKiBytes)
+#define kIOReportUnit_MiB       __IOR_MAKEUNIT(kIOReportQuantityData,  \
+                                               kIOReportScaleMiBytes)
+#define kIOReportUnit_GiB       __IOR_MAKEUNIT(kIOReportQuantityData,  \
+                                               kIOReportScaleGiBytes)
+#define kIOReportUnit_TiB       __IOR_MAKEUNIT(kIOReportQuantityData,  \
+                                               kIOReportScaleTiBytes)
 
 #define kIOReportUnitEvents     __IOR_MAKEUNIT(kIOReportQuantityEventCount,  \
                                                kIOReportScaleUnity)
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOKitDebug.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOKitDebug.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOKitDebug.h	2015-08-27 01:55:16.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOKitDebug.h	2016-06-03 22:55:10.000000000 +0200
@@ -154,9 +154,12 @@
 
 struct IOTrackingCallSiteInfo
 {
-    uint32_t      count;
-    size_t        size[2];
-    uintptr_t     bt[kIOTrackingCallSiteBTs];
+    uint32_t          count;
+    pid_t             addressPID;
+    mach_vm_address_t address;
+    mach_vm_size_t    size[2];
+    pid_t             btPID;
+    mach_vm_address_t bt[2][kIOTrackingCallSiteBTs];
 };
 
 #define kIOMallocTrackingName	"IOMalloc"
@@ -187,11 +190,35 @@
 #endif
 };
 
+struct IOTrackingUser
+{
+    queue_chain_t link;
+    pid_t         btPID;
+    uint8_t       user32;
+    uint8_t       userCount;
+    uintptr_t     bt[kIOTrackingCallSiteBTs];
+    uintptr_t     btUser[kIOTrackingCallSiteBTs];
+};
+
+enum
+{
+    kIOTrackingQueueTypeDefaultOn = 0x00000001,
+    kIOTrackingQueueTypeAlloc     = 0x00000002,
+    kIOTrackingQueueTypeMap       = 0x00000004,
+    kIOTrackingQueueTypeUser      = 0x00000008,
+};
+
+
 void              IOTrackingInit(void);
-IOTrackingQueue * IOTrackingQueueAlloc(const char * name, size_t allocSize, size_t minCaptureSize, bool isAlloc);
+IOTrackingQueue * IOTrackingQueueAlloc(const char * name, uintptr_t btEntry,
+					size_t allocSize, size_t minCaptureSize,
+					uint32_t type, uint32_t numSiteQs);
 void              IOTrackingQueueFree(IOTrackingQueue * head);
 void              IOTrackingAdd(IOTrackingQueue * head, IOTracking * mem, size_t size, bool address);
 void              IOTrackingRemove(IOTrackingQueue * head, IOTracking * mem, size_t size);
+void              IOTrackingAddUser(IOTrackingQueue * queue, IOTrackingUser * mem, vm_size_t size);
+void              IOTrackingRemoveUser(IOTrackingQueue * head, IOTrackingUser * tracking);
+
 void              IOTrackingAlloc(IOTrackingQueue * head, uintptr_t address, size_t size);
 void              IOTrackingFree(IOTrackingQueue * head, uintptr_t address, size_t size);
 void              IOTrackingReset(IOTrackingQueue * head);
@@ -214,7 +241,7 @@
 enum
 {
     kIOTrackingGetTracking       = 0x00000001,
-    kIOTrackingPrintTracking     = 0x00000002,
+    kIOTrackingGetMappings       = 0x00000002,
     kIOTrackingResetTracking     = 0x00000003,
     kIOTrackingStartCapture      = 0x00000004,
     kIOTrackingStopCapture       = 0x00000005,
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOKitKeys.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOKitKeys.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOKitKeys.h	2015-08-27 01:55:16.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOKitKeys.h	2016-06-03 22:55:03.000000000 +0200
@@ -55,6 +55,8 @@
 
 // registry ID number
 #define kIORegistryEntryIDKey		"IORegistryEntryID"
+// property name to get array of property names
+#define kIORegistryEntryPropertyKeysKey "IORegistryEntryPropertyKeys"
 
 // IOService class name
 #define kIOServiceClass			"IOService"
@@ -71,10 +73,12 @@
 #define kIOProviderClassKey		"IOProviderClass"
 #define kIONameMatchKey			"IONameMatch"
 #define kIOPropertyMatchKey		"IOPropertyMatch"
+#define kIOPropertyExistsMatchKey	"IOPropertyExistsMatch"
 #define kIOPathMatchKey			"IOPathMatch"
 #define kIOLocationMatchKey		"IOLocationMatch"
 #define kIOParentMatchKey		"IOParentMatch"
 #define kIOResourceMatchKey		"IOResourceMatch"
+#define kIOResourceMatchedKey		"IOResourceMatched"
 #define kIOMatchedServiceCountKey	"IOMatchedServiceCountMatch"
 
 #define kIONameMatchedKey		"IONameMatched"
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOLib.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOLib.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOLib.h	2015-08-27 01:55:16.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOLib.h	2016-06-03 22:55:10.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 1998-2011 Apple Computer, Inc. All rights reserved.
+ * Copyright (c) 1998-2016 Apple Computer, Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  * 
@@ -287,7 +287,7 @@
 /*! @function IOPause
     @abstract Spin delay for a number of nanoseconds.
     @discussion This function spins to delay for at least the number of specified nanoseconds. Since the CPU is busy spinning no time is made available to other processes; this method of delay should be used only for short periods.
-    @param microseconds The integer number of nanoseconds to spin wait. */
+    @param nanoseconds The integer number of nanoseconds to spin wait. */
 
 void IOPause(unsigned nanoseconds);
 
@@ -295,7 +295,7 @@
     @abstract Log a message to console in text mode, and /var/log/system.log.
     @discussion This function allows a driver to log diagnostic information to the screen during verbose boots, and to a log file found at /var/log/system.log. IOLog should not be called from interrupt context.
     @param format A printf() style format string (see printf(3) documentation).
-    @param other arguments described by the format string. */
+    */
 
 void IOLog(const char *format, ...)
 __attribute__((format(printf, 1, 2)));
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOMapper.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOMapper.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOMapper.h	2015-08-27 01:55:16.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOMapper.h	2016-06-03 22:55:10.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 1998-2003 Apple Computer, Inc. All rights reserved.
+ * Copyright (c) 1998-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  * 
@@ -84,7 +84,7 @@
     static IOMapper *gSystem;
 
     static void checkForSystemMapper()
-        { if ((uintptr_t) gSystem & kWaitMask) waitForSystemMapper(); };
+        { if ((uintptr_t) gSystem & kWaitMask) waitForSystemMapper(); }
 
     static IOMapper * copyMapperForDevice(IOService * device);
     static IOMapper * copyMapperForDeviceWithIndex(IOService * device, unsigned int index);
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOMemoryDescriptor.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOMemoryDescriptor.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOMemoryDescriptor.h	2015-08-27 01:55:17.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOMemoryDescriptor.h	2016-06-03 22:55:11.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 1998-2000 Apple Computer, Inc. All rights reserved.
+ * Copyright (c) 1998-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  * 
@@ -100,6 +100,8 @@
     kIOMemoryPersistent		= 0x00010000,
     kIOMemoryThreadSafe		= 0x00100000,	// Shared with Buffer MD
     kIOMemoryClearEncrypt	= 0x00200000,	// Shared with Buffer MD
+    kIOMemoryUseReserve  	= 0x00800000,	// Shared with Buffer MD
+#define IOMEMORYUSERESERVEDEFINED	1
 
 };
 
@@ -126,6 +128,7 @@
     kIOMemoryPurgeableVolatileBehaviorLifo     = VM_PURGABLE_BEHAVIOR_LIFO,
     kIOMemoryPurgeableVolatileOrderingObsolete = VM_PURGABLE_ORDERING_OBSOLETE,
     kIOMemoryPurgeableVolatileOrderingNormal   = VM_PURGABLE_ORDERING_NORMAL,
+    kIOMemoryPurgeableFaultOnAccess            = VM_PURGABLE_DEBUG_FAULT,
 };
 enum 
 {
@@ -380,7 +383,7 @@
     @abstract Create an IOMemoryDescriptor to describe one virtual range of the specified map.
     @discussion This method creates and initializes an IOMemoryDescriptor for memory consisting of a single virtual memory range mapped into the specified map.  This memory descriptor needs to be prepared before it can be used to extract data from the memory described.
     @param address The virtual address of the first byte in the memory.
-    @param withLength The length of memory.
+    @param length The length of memory.
     @param options
         kIOMemoryDirectionMask (options:direction)	This nibble indicates the I/O direction to be associated with the descriptor, which may affect the operation of the prepare and complete methods on some architectures. 
     @param task The task the virtual ranges are mapped into. Note that unlike IOMemoryDescriptor::withAddress(), kernel_task memory must be explicitly prepared when passed to this api. The task argument may be NULL to specify memory by physical address.
@@ -783,22 +786,22 @@
     @abstract Accessor to the virtual address of the first byte in the mapping.
     @discussion This method returns the virtual address of the first byte in the mapping.
     @result A virtual address. */
+    inline mach_vm_address_t 	getAddress() __attribute__((always_inline));
 /*! @function getSize
     @abstract Accessor to the length of the mapping.
     @discussion This method returns the length of the mapping.
     @result A byte count. */
-    inline mach_vm_address_t 	getAddress() __attribute__((always_inline));
     inline mach_vm_size_t 	getSize() __attribute__((always_inline));
 #else /* !__LP64__ */
 /*! @function getAddress
     @abstract Accessor to the virtual address of the first byte in the mapping.
     @discussion This method returns the virtual address of the first byte in the mapping.
     @result A virtual address. */
+    virtual mach_vm_address_t 	getAddress();
 /*! @function getSize
     @abstract Accessor to the length of the mapping.
     @discussion This method returns the length of the mapping.
     @result A byte count. */
-    virtual mach_vm_address_t 	getAddress();
     virtual mach_vm_size_t 	getSize();
 #endif /* !__LP64__ */
 
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IORegistryEntry.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IORegistryEntry.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IORegistryEntry.h	2015-08-27 01:55:17.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IORegistryEntry.h	2016-06-03 22:55:11.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 1998-2000 Apple Computer, Inc. All rights reserved.
+ * Copyright (c) 1998-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  * 
@@ -43,6 +43,7 @@
 extern const OSSymbol * gIONameKey;
 extern const OSSymbol * gIOLocationKey;
 extern const OSSymbol * gIORegistryEntryIDKey;
+extern const OSSymbol * gIORegistryEntryPropertyKeysKey;
 
 class IORegistryEntry;
 class IORegistryPlane;
@@ -71,10 +72,7 @@
 /*! @struct ExpansionData
     @discussion This structure will be used to expand the capablilties of this class in the future.
     */    
-    struct ExpansionData
-    {
-	uint64_t	fRegistryEntryID;
-    };
+    struct ExpansionData;
 
 /*! @var reserved
     Reserved for future use.  (Internal use only)  */
@@ -252,7 +250,7 @@
 /*! @function init
     @abstract Standard init method for all IORegistryEntry subclasses.
     @discussion A registry entry must be initialized with this method before it can be used. A property dictionary may passed and will be retained by this method for use as the registry entry's property table, or an empty one will be created.
-    @param A dictionary that will become the registry entry's property table (retaining it), or zero which will cause an empty property table to be created.
+    @param dictionary A dictionary that will become the registry entry's property table (retaining it), or zero which will cause an empty property table to be created.
     @result true on success, or false on a resource failure. */
 
     virtual bool init( OSDictionary * dictionary = 0 );
@@ -518,6 +516,7 @@
     virtual OSIterator * getChildIterator( const IORegistryPlane * plane )
 									const;
 
+
     virtual void applyToChildren( IORegistryEntryApplierFunction applier,
                                   void * context,
                                   const IORegistryPlane * plane ) const;
@@ -604,7 +603,7 @@
 /*! @function detachFromChild
     @abstract Detaches a child entry from its parent in a plane.
     @discussion This method is called in the parent entry when a child detaches, to make overrides possible. It is a no-op if the entry is not a child of the parent. Detaching the entry will release both the child and parent. This method will call detachFromParent in the child entry if it is not being called from detachFromParent.
-    @param parent The registry entry to detach.
+    @param child The registry entry to detach.
     @param plane The plane object. */
 
     virtual void detachFromChild( IORegistryEntry * child,
@@ -793,6 +792,7 @@
 private:
     static IORegistryEntry * initialize( void );
 
+
 private:
     inline bool arrayMember( OSArray * set,
                             const IORegistryEntry * member,
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOReturn.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOReturn.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOReturn.h	2015-08-27 01:55:17.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOReturn.h	2016-06-03 22:55:04.000000000 +0200
@@ -72,6 +72,8 @@
 #define sub_iokit_sdio                    err_sub(0x174)
 #define sub_iokit_wlan                    err_sub(0x208)
 
+#define sub_iokit_appleembeddedsleepwakehandler  err_sub(0x209)
+
 #define sub_iokit_vendor_specific         err_sub(-2)
 #define sub_iokit_reserved                err_sub(-1)
 
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOService.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOService.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOService.h	2016-02-27 07:06:55.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOService.h	2016-06-03 22:55:12.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 1998-2014 Apple Computer, Inc. All rights reserved.
+ * Copyright (c) 1998-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  * 
@@ -108,6 +108,7 @@
 
 extern const OSSymbol *     gIOResourcesKey;
 extern const OSSymbol *     gIOResourceMatchKey;
+extern const OSSymbol *     gIOResourceMatchedKey;
 extern const OSSymbol *     gIOProviderClassKey;
 extern const OSSymbol *     gIONameMatchKey;
 extern const OSSymbol *     gIONameMatchedKey;
@@ -142,6 +143,12 @@
 extern const OSSymbol *     gIOInterruptControllersKey;
 extern const OSSymbol *     gIOInterruptSpecifiersKey;
 
+extern const OSSymbol *     gIOBSDKey;
+extern const OSSymbol *     gIOBSDNameKey;
+extern const OSSymbol *     gIOBSDMajorKey;
+extern const OSSymbol *     gIOBSDMinorKey;
+extern const OSSymbol *     gIOBSDUnitKey;
+
 extern SInt32 IOServiceOrdering( const OSMetaClassBase * inObj1, const OSMetaClassBase * inObj2, void * ref );
 
 typedef void (*IOInterruptAction)( OSObject * target, void * refCon,
@@ -536,6 +543,7 @@
     @discussion IOService provides generic open and close semantics to track clients of a provider that have established an active datapath. The use of <code>open</code> and @link close close@/link, and rules regarding ownership are family defined, and defined by the @link handleOpen handleOpen@/link and @link handleClose handleClose@/link methods in the provider. Some families will limit access to a provider based on its open state.
     @param forClient Designates the client of the provider requesting the open.
     @param options Options for the open. The provider family may implement options for open; IOService defines only <code>kIOServiceSeize</code> to request the device be withdrawn from its current owner.
+    @param arg Family specific arguments which are ignored by IOService.
     @result <code>true</code> if the open was successful; <code>false</code> otherwise. */
 
     virtual bool open(   IOService *       forClient,
@@ -546,8 +554,7 @@
     @abstract Releases active access to a provider.
     @discussion IOService provides generic open and close semantics to track clients of a provider that have established an active datapath. The use of @link open open@/link and <code>close</code>, and rules regarding ownership are family defined, and defined by the @link handleOpen handleOpen@/link and @link handleClose handleClose@/link methods in the provider.
     @param forClient Designates the client of the provider requesting the close.
-    @param options Options available for the close. The provider family may implement options for close; IOService defines none.
-    @param arg Family specific arguments which are ignored by IOService. */
+    @param options Options available for the close. The provider family may implement options for close; IOService defines none. */
     
     virtual void close(  IOService *       forClient,
                          IOOptionBits      options = 0 );
@@ -555,8 +562,8 @@
 /*! @function isOpen
     @abstract Determines whether a specific, or any, client has an IOService object open.
     @discussion Returns the open state of an IOService object with respect to the specified client, or when it is open by any client.
-    @param forClient If non-zero, <codeisOpen</code returns the open state for that client. If zero is passed, <codeisOpen</code returns the open state for all clients.
-    @result <codetrue</code if the specific, or any, client has the IOService object open. */
+    @param forClient If non-zero, <code>isOpen</code> returns the open state for that client. If zero is passed, <code>isOpen</code> returns the open state for all clients.
+    @result <code>true</code> if the specific, or any, client has the IOService object open. */
 
     virtual bool isOpen( const IOService * forClient = 0 ) const;
 
@@ -697,7 +704,7 @@
     @abstract Uses the resource service to publish a property.
     @discussion The resource service uses IOService's matching and notification to allow objects to be published and found by any I/O Kit client by a global name. <code>publishResource</code> makes an object available to anyone waiting for it or looking for it in the future.
     @param key An OSSymbol key that globally identifies the object.
-    @param The object to be published. */
+    @param value The object to be published. */
 
     static void publishResource( const OSSymbol * key, OSObject * value = 0 );
 
@@ -705,7 +712,7 @@
     @abstract Uses the resource service to publish a property.
     @discussion The resource service uses IOService object's matching and notification to allow objects to be published and found by any I/O Kit client by a global name. <code>publishResource</code> makes an object available to anyone waiting for it or looking for it in the future.
     @param key A C string key that globally identifies the object.
-    @param The object to be published. */
+    @param value The object to be published. */
 
     static void publishResource( const char * key, OSObject * value = 0 );
     virtual bool addNeededResource( const char * key );
@@ -872,7 +879,7 @@
 /*! @function registryEntryIDMatching
     @abstract Creates a matching dictionary, or adds matching properties to an existing dictionary, that specify a IORegistryEntryID match.
     @discussion <code>registryEntryIDMatching</code> creates a matching dictionary that specifies the IOService object with the assigned registry entry ID (returned by <code>IORegistryEntry::getRegistryEntryID()</code>). An existing dictionary may be passed in, in which case the matching properties will be added to that dictionary rather than creating a new one.
-    @param name The service's ID. Matching is successful on the IOService object that return that ID from the <code>IORegistryEntry::getRegistryEntryID()</code> method.
+    @param entryID The service's ID. Matching is successful on the IOService object that return that ID from the <code>IORegistryEntry::getRegistryEntryID()</code> method.
     @param table If zero, <code>registryEntryIDMatching</code> creates a matching dictionary and returns a reference to it, otherwise the matching properties are added to the specified dictionary.
     @result The matching dictionary created, or passed in, is returned on success, or zero on failure. */
 
@@ -1394,7 +1401,7 @@
     @param controllingDriver A pointer to the calling driver, usually <code>this</code>.
     @param powerStates A driver-defined array of power states that the driver and device support. Power states are defined in <code>pwr_mgt/IOPMpowerState.h</code>.
     @param numberOfStates The number of power states in the array.
-    @result </code>IOPMNoErr</code>. All errors are logged via <code>kprintf</code>. */
+    @result <code>IOPMNoErr</code>. All errors are logged via <code>kprintf</code>. */
 
     virtual IOReturn registerPowerDriver(
                         IOService *      controllingDriver,
@@ -1611,7 +1618,7 @@
     @param period The desired idle timer period in seconds.
     @result <code>kIOReturnSuccess</code> upon success; an I/O Kit error code otherwise. */
 
-    virtual IOReturn setIdleTimerPeriod( unsigned long );
+    virtual IOReturn setIdleTimerPeriod( unsigned long period );
 
 #ifndef __LP64__
 /*! @function getPMworkloop
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOTimerEventSource.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOTimerEventSource.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOTimerEventSource.h	2015-08-27 01:55:18.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOTimerEventSource.h	2016-06-03 22:55:13.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 1998-2000, 2009 Apple Inc. All rights reserved.
+ * Copyright (c) 1998-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  * 
@@ -107,15 +107,13 @@
 
 /*! @function timerEventSource
     @abstract Allocates and returns an initialized timer instance.
-    @param owner
-    @param action */
+    */
     static IOTimerEventSource *
 	timerEventSource(OSObject *owner, Action action = 0);
 
 /*! @function init
     @abstract Initializes the timer with an owner, and a handler to call when the timeout expires.
-    @param owner 
-    @param action */
+    */
     virtual bool init(OSObject *owner, Action action = 0);
 
 /*! @function enable
@@ -131,19 +129,19 @@
 
 /*! @function setTimeoutTicks
     @abstract Setup a callback at after the delay in scheduler ticks.  See wakeAtTime(AbsoluteTime).
-    @param interval Delay from now to wake up, in scheduler ticks, whatever that may be.
+    @param ticks Delay from now to wake up, in scheduler ticks, whatever that may be.
     @result kIOReturnSuccess if everything is fine, kIOReturnNoResources if action hasn't been declared. */
     virtual IOReturn setTimeoutTicks(UInt32 ticks);
 
 /*! @function setTimeoutMS
     @abstract Setup a callback at after the delay in milliseconds.  See wakeAtTime(AbsoluteTime).
-    @param interval Delay from now to wake up, time in milliseconds.
+    @param ms Delay from now to wake up, time in milliseconds.
     @result kIOReturnSuccess if everything is fine, kIOReturnNoResources if action hasn't been declared. */
     virtual IOReturn setTimeoutMS(UInt32 ms);
 
 /*! @function setTimeoutUS
         @abstract Setup a callback at after the delay in microseconds.	 See wakeAtTime(AbsoluteTime).
-    @param interval Delay from now to wake up, time in microseconds.
+    @param us Delay from now to wake up, time in microseconds.
     @result kIOReturnSuccess if everything is fine, kIOReturnNoResources if action hasn't been declared. */
     virtual IOReturn setTimeoutUS(UInt32 us);
 
@@ -168,19 +166,19 @@
 
 /*! @function wakeAtTimeTicks
     @abstract Setup a callback at this absolute time.  See wakeAtTime(AbsoluteTime).
-    @param abstime Time to wake up in scheduler quantums, whatever that is?
+    @param ticks Time to wake up in scheduler quantums, whatever that is?
     @result kIOReturnSuccess if everything is fine, kIOReturnNoResources if action hasn't been declared. */
     virtual IOReturn wakeAtTimeTicks(UInt32 ticks);
 
 /*! @function wakeAtTimeMS
     @abstract Setup a callback at this absolute time.  See wakeAtTime(AbsoluteTime).
-    @param abstime Time to wake up in milliseconds.
+    @param ms Time to wake up in milliseconds.
     @result kIOReturnSuccess if everything is fine, kIOReturnNoResources if action hasn't been declared. */
     virtual IOReturn wakeAtTimeMS(UInt32 ms);
 
 /*! @function wakeAtTimeUS
     @abstract Setup a callback at this absolute time.  See wakeAtTime(AbsoluteTime).
-    @param abstime Time to wake up in microseconds.
+    @param us Time to wake up in microseconds.
     @result kIOReturnSuccess if everything is fine, kIOReturnNoResources if action hasn't been declared. */
     virtual IOReturn wakeAtTimeUS(UInt32 us);
 
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOUserClient.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOUserClient.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOUserClient.h	2016-02-27 07:06:56.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOUserClient.h	2016-06-03 22:55:13.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 1998-2000 Apple Computer, Inc. All rights reserved.
+ * Copyright (c) 1998-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  * 
@@ -297,7 +297,7 @@
         @function releaseNotificationPort
 	@abstract Release the mach_port_t passed to registerNotificationPort().
 	@discussion The mach_port_t passed to the registerNotificationPort() methods should be released to balance each call to registerNotificationPort(). Behavior is undefined if these calls are not correctly balanced.
-        @param reference The mach_port_t argument previously passed to the subclass implementation of registerNotificationPort().
+        @param port The mach_port_t argument previously passed to the subclass implementation of registerNotificationPort().
         @result A return code.
     */
     static IOReturn releaseNotificationPort(mach_port_t port);
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOWorkLoop.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOWorkLoop.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOWorkLoop.h	2015-08-27 01:55:18.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/IOWorkLoop.h	2016-06-03 22:55:13.000000000 +0200
@@ -75,7 +75,8 @@
 			       void *arg0, void *arg1,
 			       void *arg2, void *arg3);
     enum {
-	kPreciousStack = 0x00000001
+	kPreciousStack  = 0x00000001,
+	kTimeLockPanics = 0x00000002,
     };
 
 private:
@@ -150,6 +151,8 @@
 #else
 	void *iokitstatsReserved;
 #endif
+        uint64_t lockInterval;
+        uint64_t lockTime;
     };
 
 /*! @var reserved
@@ -313,10 +316,18 @@
 */
     virtual bool runEventSources();
 
+/*! @function setMaximumLockTime
+    @discussion For diagnostics use in DEVELOPMENT kernels, set a time interval which if the work loop lock is held for this time or greater, IOWorkLoop will panic or log a backtrace.
+    @param interval An absolute time interval, eg. created with clock_interval_to_absolutetime_interval().
+    @param options Pass IOWorkLoop::kTimeLockPanics to panic when the time is exceeded, otherwise a log will be generated with OSReportWithBacktrace().
+*/
+    void setMaximumLockTime(uint64_t interval, uint32_t options);
+
 protected:
     // Internal APIs used by event sources to control the thread
     virtual int sleepGate(void *event, AbsoluteTime deadline, UInt32 interuptibleType);
 
+
 protected:
 #if __LP64__
     OSMetaClassDeclareReservedUnused(IOWorkLoop, 0);
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/acpi/IOACPITypes.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/acpi/IOACPITypes.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/acpi/IOACPITypes.h	2015-08-27 02:05:34.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/acpi/IOACPITypes.h	2016-06-03 23:05:27.000000000 +0200
@@ -31,6 +31,7 @@
 extern const OSSymbol *        gIOACPIAddressKey;
 extern const OSSymbol *        gIOACPIDeviceStatusKey;
 
+#define kIOACPIInterruptTypeValid  (1 << 1)
 #pragma pack(1)
 
 struct IOACPIAddressSpaceDescriptor {
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/audio/IOAudioEngineUserClient.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/audio/IOAudioEngineUserClient.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/audio/IOAudioEngineUserClient.h	2015-11-11 08:23:02.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/audio/IOAudioEngineUserClient.h	2016-06-03 23:11:37.000000000 +0200
@@ -45,6 +45,9 @@
 class IOAudioClientBufferSet;
 struct IOAudioFormatNotification;
 
+
+#define kDriverHelper_DriverHostEntitlement	"com.apple.private.audio.driver-host"		// XXX copied from AudioHAL/DriverHelper/DriverHelper.h
+
 typedef struct IOAudioClientBuffer
 {
     IOAudioEngineUserClient		*userClient;
@@ -121,7 +124,6 @@
 protected:
 	struct ExpansionData {
 		IOAudioClientBufferExtendedInfo64	*extendedInfo;
-		IOExternalMethod					methods[kIOAudioEngineNumCalls];		// This size can be changed, this is the new methods pointer
 		UInt32								classicMode;
 		UInt32								commandGateStatus;						// <rdar://8518215>
 		SInt32								commandGateUsage;						// <rdar://8518215>
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/audio/IOAudioTypes.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/audio/IOAudioTypes.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/audio/IOAudioTypes.h	2015-08-27 02:10:50.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/audio/IOAudioTypes.h	2016-06-03 23:11:37.000000000 +0200
@@ -105,7 +105,7 @@
 typedef struct _IOAudioEngineStatus {
     UInt32					fVersion;
     volatile UInt32			fCurrentLoopCount;
-    volatile AbsoluteTime                    fLastLoopTime;
+    volatile AbsoluteTime   fLastLoopTime;
     volatile UInt32			fEraseHeadSampleFrame;
 } IOAudioEngineStatus;
 
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/bluetooth/Bluetooth.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/bluetooth/Bluetooth.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/bluetooth/Bluetooth.h	2015-08-27 02:14:47.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/bluetooth/Bluetooth.h	2016-06-07 01:24:20.000000000 +0200
@@ -302,10 +302,10 @@
 	kBluetoothDeviceNameMaxLength	= 248
 };
 
-typedef uint8_t		BluetoothDeviceName[ 256 ];		// Max 248 bytes of UTF-8 encoded Unicode.
-typedef uint16_t	BluetoothClockOffset;			// Bits 14-0 come from bits 16-2 of CLKslav-CLKmaster.
-typedef uint8_t		BluetoothRole;					// 
-typedef uint8_t		BluetoothAllowRoleSwitch;		// 0x00-0x01 valid, 0x02-0xFF reserved.
+typedef uint8_t		BluetoothDeviceName[ kBluetoothDeviceNameMaxLength ];		// Max 248 bytes of UTF-8 encoded Unicode.
+typedef uint16_t	BluetoothClockOffset;										// Bits 14-0 come from bits 16-2 of CLKslav-CLKmaster.
+typedef uint8_t		BluetoothRole;												//
+typedef uint8_t		BluetoothAllowRoleSwitch;									// 0x00-0x01 valid, 0x02-0xFF reserved.
 enum
 {
 	kBluetoothDontAllowRoleSwitch 	= 0x00, 
@@ -454,6 +454,13 @@
 	uint16_t	maxPDUPayloadSize;
 };
 
+typedef enum BluetoothL2CAPSegmentationAndReassembly {
+    kBluetoothL2CAPSegmentationAndReassemblyUnsegmentedSDU    =   0x00,
+    kBluetoothL2CAPSegmentationAndReassemblyStartOfSDU        =   0x01,
+    kBluetoothL2CAPSegmentationAndReassemblyEndOfSDU          =   0x02,
+    kBluetoothL2CAPSegmentationAndReassemblyContinuationOfSDU =   0x03
+} BluetoothL2CAPSegmentationAndReassembly;
+        
 enum
 {
 	kBluetoothL2CAPInfoTypeMaxConnectionlessMTUSize = 0x0001
@@ -472,11 +479,14 @@
 
 typedef enum
 {
-    kBluetoothL2CAPConnectionResultSuccessful				= 0x0000,
-    kBluetoothL2CAPConnectionResultPending					= 0x0001,
-    kBluetoothL2CAPConnectionResultRefusedPSMNotSupported	= 0x0002,
-    kBluetoothL2CAPConnectionResultRefusedSecurityBlock		= 0x0003,
-    kBluetoothL2CAPConnectionResultRefusedNoResources		= 0x0004,
+    kBluetoothL2CAPConnectionResultSuccessful						= 0x0000,
+    kBluetoothL2CAPConnectionResultPending							= 0x0001,
+    kBluetoothL2CAPConnectionResultRefusedPSMNotSupported			= 0x0002,
+    kBluetoothL2CAPConnectionResultRefusedSecurityBlock				= 0x0003,
+    kBluetoothL2CAPConnectionResultRefusedNoResources				= 0x0004,
+    kBluetoothL2CAPConnectionResultRefusedReserved					= 0x0005,
+    kBluetoothL2CAPConnectionResultRefusedInvalidSourceCID			= 0x0006,
+    kBluetoothL2CAPConnectionResultRefusedSourceCIDAlreadyAllocated	= 0x0007
 } BluetoothL2CAPConnectionResult;
 
 typedef enum 
@@ -558,24 +568,52 @@
     kBluetoothL2CAPQoSTypeGuaranteed	= 0x02,
 } BluetoothL2CAPQoSType;
 
+typedef enum {
+    kBluetoothL2CAPSupervisoryFuctionTypeReceiverReady			= 0x0,
+    kBluetoothL2CAPSupervisoryFuctionTypeReject					= 0x1,
+    kBluetoothL2CAPSupervisoryFuctionTypeReceiverNotReady		= 0x2,
+    kBluetoothL2CAPSupervisoryFuctionTypeSelectiveReject		= 0x3
+} BluetoothL2CAPSupervisoryFuctionType;
+        
+enum {
+	kBluetoothLETXTimeMin			= 0x0148,   // 328 us / 41 octets / 27 (0x1B) byte PDU
+	kBluetoothLETXTimeDefault		= 0x0148,   // 328 us
+	kBluetoothLETXTimeMax			= 0x0848,   // 2120 us / 265 octets / 251 (0xFB) byte PDU
+	kBluetoothLETXOctetsMin			= 0x001b,   // 27 bytes pre-LE DPLE size
+	kBluetoothLETXOctetsDefault		= 0x001b,   // 27 bytes
+	kBluetoothLETXOctetsMax			= 0x00fb,   // 251 bytes 4.2 LE DPLE feature
+};
+
 enum
 {
-	kBluetoothL2CAPMTULowEnergyDefault			= 0x001b,	// 27 bytes
-	kBluetoothL2CAPMTUMinimum					= 0x0030,	// 48 bytes
-	kBluetoothL2CAPMTUDefault					= 0x03F9,	// 11.10.08 - dropped back to 1017 from 1021 (don't aggravate the 3DH5 problem between CSR<->BRCM just yet)
+//	kBluetoothL2CAPMTULowEnergyDefault			= 0x0080,								// 128 bytes - DPLE feature
+	kBluetoothL2CAPMTULowEnergyDefault			= kBluetoothLETXOctetsMin,				// 27 bytes
+	kBluetoothL2CAPMTULowEnergyMax              = kBluetoothLETXOctetsMax,				// 251 bytes
+	kBluetoothL2CAPMTUMinimum					= 0x0030,								// 48 bytes
+	kBluetoothL2CAPMTUDefault					= 0x03F9,								// 11.10.08 - dropped back to 1017 from 1021 (don't aggravate the 3DH5 problem between CSR<->BRCM just yet)
 	kBluetoothL2CAPMTUMaximum					= 0xffff,	
 	kBluetoothL2CAPMTUStart						= 0x7fff,
-	kBluetoothL2CAPMTUSIG						= 0x0030,	// 48 bytes
+	kBluetoothL2CAPMTUSIG						= 0x0030,								// 48 bytes
 	kBluetoothL2CAPFlushTimeoutDefault			= kBluetoothL2CAPFlushTimeoutForever,	// 0xffff
 	kBluetoothL2CAPQoSFlagsDefault				= 0,
-	kBluetoothL2CAPQoSTypeDefault				= kBluetoothL2CAPQoSTypeBestEffort,	// 0x01
+	kBluetoothL2CAPQoSTypeDefault				= kBluetoothL2CAPQoSTypeBestEffort,		// 0x01
 	kBluetoothL2CAPQoSTokenRateDefault			= 0x00000000,
 	kBluetoothL2CAPQoSTokenBucketSizeDefault	= 0x00000000,
 	kBluetoothL2CAPQoSPeakBandwidthDefault		= 0x00000000,
 	kBluetoothL2CAPQoSLatencyDefault			= 0xffffffff,
 	kBluetoothL2CAPQoSDelayVariationDefault		= 0xffffffff
 };
-		
+
+enum {
+    kBluetoothLEMaxTXTimeMin = 0x0148,
+    kBluetoothLEMaxTXTimeDefault = kBluetoothL2CAPMTULowEnergyDefault,
+    kBluetoothLEMaxTXTimeMax = 0x0848,
+    kBluetoothLEMaxTXOctetsMin              = 0x001b,	// 27 bytes
+    kBluetoothLEMaxTXOctetsDefault			= 0x0080,	// 128 bytes - DPLE feature
+    kBluetoothLEMaxTXOctetsMax              = 0x00fb,	// 251 bytes - DPLE feature
+};
+        
+
 #pragma mark === LE Security Manager ===
 
 #define kBluetoothLESMPTimeout 30		
@@ -779,7 +817,7 @@
 
 // Commands
 		
-typedef uint8_t		BluetoothHCICommandOpCodeGroup;
+typedef uint8_t         BluetoothHCICommandOpCodeGroup;
 typedef uint16_t		BluetoothHCICommandOpCodeCommand;
 typedef uint16_t		BluetoothHCICommandOpCode;
 typedef	uint32_t		BluetoothHCIVendorCommandSelector;
@@ -1129,7 +1167,22 @@
 	BluetoothHCIPageNumber	maxPage;
 	uint8_t					data[8];
 };
-		
+
+        
+enum BluetoothLEFeatureBits
+{
+    kBluetoothLEFeatureLEEncryption                         = (1 << 0L),
+    kBluetoothLEFeatureConnectionParamsRequestProcedure     = (1 << 1L),
+    kBluetoothLEFeatureExtendedRejectIndication             = (1 << 2L),
+    kBluetoothLEFeatureSlaveInitiatedFeaturesExchange       = (1 << 3L),
+    kBluetoothLEFeatureLEPing                               = (1 << 4L),
+    kBluetoothLEFeatureLEDataPacketLengthExtension          = (1 << 5L),
+    kBluetoothLEFeatureLLPrivacy                            = (1 << 6L),
+    kBluetoothLEFeatureExtendedScannerFilterPolicies        = (1 << 7L),
+    
+    // Three other bytes are RFU
+};
+
 enum BluetoothFeatureBits
 {
 	// Byte 0 of the support features data structure.
@@ -1314,6 +1367,64 @@
 	uint8_t		retransmissionEffort;
 	uint16_t		packetType;
 };
+// Add for EnhancedSetup
+typedef struct BluetoothHCIEnhancedSetupSynchronousConnectionParams	BluetoothHCIEnhancedSetupSynchronousConnectionParams;
+struct BluetoothHCIEnhancedSetupSynchronousConnectionParams
+{
+    uint32_t		transmitBandwidth;
+    uint32_t		receiveBandwidth;
+    uint64_t        transmitCodingFormat;
+    uint64_t        receiveCodingFormat;
+    uint8_t         transmitCodecFrameSize;
+    uint8_t         receiveCodecFrameSize;
+    uint16_t        inputBandwidth;
+    uint16_t        outputBandwidth;
+    uint64_t        inputCodingFormat;
+    uint64_t        outputCodingFormat;
+    uint16_t        inputCodedDataSize;
+    uint16_t        outputCodedDataSize;
+    uint8_t         inputPCMDataFormat;
+    uint8_t         outputPCMDataFormat;
+    uint8_t         inputPCMSamplePayloadMSBPosition;
+    uint8_t         outputPCMSamplePayloadMSBPosition;
+    uint8_t         inputDataPath;
+    uint8_t         outputDataPath;
+    uint8_t         inputTransportUnitSize;
+    uint8_t         outputTransportUnitSize;
+    uint16_t		maxLatency;
+    uint16_t		voiceSetting;
+    uint8_t		retransmissionEffort;
+    uint16_t		packetType;
+};
+// Add for EnhancedAccept
+typedef struct BluetoothHCIEnhancedAcceptSynchronousConnectionRequestParams	BluetoothHCIEnhancedAcceptSynchronousConnectionRequestParams;
+struct BluetoothHCIEnhancedAcceptSynchronousConnectionRequestParams
+{
+    uint32_t		transmitBandwidth;
+    uint32_t		receiveBandwidth;
+    uint64_t        transmitCodingFormat;
+    uint64_t        receiveCodingFormat;
+    uint8_t         transmitCodecFrameSize;
+    uint8_t         receiveCodecFrameSize;
+    uint16_t        inputBandwidth;
+    uint16_t        outputBandwidth;
+    uint64_t        inputCodingFormat;
+    uint64_t        outputCodingFormat;
+    uint16_t        inputCodedDataSize;
+    uint16_t        outputCodedDataSize;
+    uint8_t         inputPCMDataFormat;
+    uint8_t         outputPCMDataFormat;
+    uint8_t         inputPCMSamplePayloadMSBPosition;
+    uint8_t         outputPCMSamplePayloadMSBPosition;
+    uint8_t         inputDataPath;
+    uint8_t         outputDataPath;
+    uint8_t         inputTransportUnitSize;
+    uint8_t         outputTransportUnitSize;
+    uint16_t		maxLatency;
+    uint16_t		voiceSetting;
+    uint8_t		retransmissionEffort;
+    uint16_t		packetType;
+};
 
 typedef uint8_t	BluetoothHCILoopbackMode;
 enum
@@ -1903,6 +2014,24 @@
 typedef uint8_t		BluetoothHCISupportedIAC;
 typedef uint32_t	BluetoothHCITransmitBandwidth;
 typedef uint32_t	BluetoothHCIReceiveBandwidth;
+typedef uint64_t    BluetoothHCITransmitCodingFormat;
+typedef uint64_t    BluetoothHCIReceiveCodingFormat;
+typedef uint16_t    BluetoothHCITransmitCodecFrameSize;
+typedef uint16_t    BluetoothHCIReceiveCodecFrameSize;
+typedef uint32_t    BluetoothHCIInputBandwidth;
+typedef uint32_t    BluetoothHCIOutputBandwidth;
+typedef uint64_t    BluetoothHCIInputCodingFormat;
+typedef uint64_t    BluetoothHCIOutputCodingFormat;
+typedef uint16_t    BluetoothHCIInputCodedDataSize;
+typedef uint16_t    BluetoothHCIOutputCodedDataSize;
+typedef uint8_t     BluetoothHCIInputPCMDataFormat;
+typedef uint8_t     BluetoothHCIOutputPCMDataFormat;
+typedef uint8_t     BluetoothHCIInputPCMSamplePayloadMSBPosition;
+typedef uint8_t     BluetoothHCIOutputPCMSamplePayloadMSBPosition;
+typedef uint8_t     BluetoothHCIInputDataPath;
+typedef uint8_t     BluetoothHCIOutputDataPath;
+typedef uint8_t     BluetoothHCIInputTransportUnitSize;
+typedef uint8_t     BluetoothHCIOutputTransportUnitSize;
 typedef uint16_t	BluetoothHCIMaxLatency;
 typedef uint8_t		BluetoothHCIRetransmissionEffort;		
 enum BluetoothHCIRetransmissionEffortTypes
@@ -1936,6 +2065,35 @@
 	BluetoothPacketType					packetType;
 };
 
+typedef struct	BluetoothEnhancedSynchronousConnectionInfo		BluetoothEnhancedSynchronousConnectionInfo;
+struct	BluetoothEnhancedSynchronousConnectionInfo
+{
+    BluetoothHCITransmitBandwidth                   transmitBandWidth;
+    BluetoothHCIReceiveBandwidth                    receiveBandWidth;
+    BluetoothHCITransmitCodingFormat                transmitCodingFormat;
+    BluetoothHCIReceiveCodingFormat                 receiveCodingFormat;
+    BluetoothHCITransmitCodecFrameSize              transmitCodecFrameSize;
+    BluetoothHCIReceiveCodecFrameSize               receiveCodecFrameSize;
+    BluetoothHCIInputBandwidth                      inputBandwidth;
+    BluetoothHCIOutputBandwidth                     outputBandwidth;
+    BluetoothHCIInputCodingFormat                   inputCodingFormat;
+    BluetoothHCIOutputCodingFormat                  outputCodingFormat;
+    BluetoothHCIInputCodedDataSize                  inputCodedDataSize;
+    BluetoothHCIOutputCodedDataSize                 outputCodedDataSize;
+    BluetoothHCIInputPCMDataFormat                  inputPCMDataFormat;
+    BluetoothHCIOutputPCMDataFormat                 outputPCMDataFormat;
+    BluetoothHCIInputPCMSamplePayloadMSBPosition    inputPCMSampelPayloadMSBPosition;
+    BluetoothHCIOutputPCMSamplePayloadMSBPosition   outputPCMSampelPayloadMSBPosition;
+    BluetoothHCIInputDataPath                       inputDataPath;
+    BluetoothHCIOutputDataPath                      outputDataPath;
+    BluetoothHCIInputTransportUnitSize              inputTransportUnitSize;
+    BluetoothHCIOutputTransportUnitSize             outputTransportUnitSize;
+    BluetoothHCIMaxLatency                          maxLatency;
+    BluetoothHCIVoiceSetting                        voiceSetting;
+    BluetoothHCIRetransmissionEffort                retransmissionEffort;
+    BluetoothPacketType                             packetType;
+};
+        
 typedef struct	BluetoothHCIEventSynchronousConnectionCompleteResults 	BluetoothHCIEventSynchronousConnectionCompleteResults;
 struct			BluetoothHCIEventSynchronousConnectionCompleteResults
 {
@@ -2032,6 +2190,12 @@
 		kBluetoothHCISubEventLEConnectionUpdateComplete					= 0x03,
 		kBluetoothHCISubEventLEReadRemoteUsedFeaturesComplete			= 0x04,
 		kBluetoothHCISubEventLELongTermKeyRequest						= 0x05,
+    	kBluetoothHCISubEventLERemoteConnectionParameterRequest			= 0x06,
+    	kBluetoothHCISubEventLEDataLengthChange							= 0x07,
+    	kBluetoothHCISubEventLEReadLocalP256PublicKeyComplete			= 0x08,
+    	kBluetoothHCISubEventLEGenerateDHKeyComplete					= 0x09,
+    	kBluetoothHCISubEventLEEnhancedConnectionComplete				= 0x0A,
+    	kBluetoothHCISubEventLEDirectAdvertisingReport					= 0x0B,
 	
 	// [v3.0]
 	
@@ -2480,8 +2644,9 @@
 	kBluetoothHCIErrorConnectionTerminatedDueToMICFailure				= 0x3D,
 	kBluetoothHCIErrorConnectionFailedToBeEstablished                   = 0x3E,
 	kBluetoothHCIErrorMACConnectionFailed                               = 0x3F,
-	
-	kBluetoothHCIErrorMax												= 0x3F
+    kBluetoothHCIErrorCoarseClockAdjustmentRejected                     = 0x40,
+    
+    kBluetoothHCIErrorMax												= 0x40
 };
 
 #if 0
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/bluetooth/BluetoothAssignedNumbers.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/bluetooth/BluetoothAssignedNumbers.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/bluetooth/BluetoothAssignedNumbers.h	2016-02-27 07:04:10.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/bluetooth/BluetoothAssignedNumbers.h	2016-06-07 01:20:44.000000000 +0200
@@ -390,6 +390,8 @@
     
 	// Range 0x1001-0xFFFF dynamically assigned.
     kBluetoothL2CAPPSMDynamicStart				= 0x1001,
+	// AACP
+	kBluetoothL2CAPPSMAACP						= 0x1001,
 	kBluetoothL2CAPPSMD2D						= 0x100F,
     kBluetoothL2CAPPSMDynamicEnd				= 0xFFFF,
     
@@ -637,6 +639,17 @@
     kBluetoothHCIExtendedInquiryResponseDataTypePublicTargetAddress                         =   0x17,
     kBluetoothHCIExtendedInquiryResponseDataTypeRandomTargetAddress                         =   0x18,
     kBluetoothHCIExtendedInquiryResponseDataTypeAppearance                                  =   0x19,
+    kBluetoothHCIExtendedInquiryResponseDataTypeAdvertisingInterval							=	0x1A,
+    kBluetoothHCIExtendedInquiryResponseDataTypeLEBluetoothDeviceAddress					=	0x1B,
+    kBluetoothHCIExtendedInquiryResponseDataTypeLERole										=	0x1C,
+    kBluetoothHCIExtendedInquiryResponseDataTypeSimplePairingHash							=	0x1D,
+    kBluetoothHCIExtendedInquiryResponseDataTypeSimplePairingRandomizer						=	0x1E,
+    kBluetoothHCIExtendedInquiryResponseDataTypeServiceSolicitation32BitUUIDs				=	0x1F,
+    kBluetoothHCIExtendedInquiryResponseDataTypeServiceData32BitUUID						=	0x20,
+    kBluetoothHCIExtendedInquiryResponseDataTypeServiceData128BitUUID						=	0x21,
+    kBluetoothHCIExtendedInquiryResponseDataTypeSecureConnectionsConfirmationValue			=	0x22,
+    kBluetoothHCIExtendedInquiryResponseDataTypeSecureConnectionsRandomValue				=	0x23,
+    kBluetoothHCIExtendedInquiryResponseDataType3DInformationData							=	0x3D,
 	kBluetoothHCIExtendedInquiryResponseDataTypeManufacturerSpecificData					=	0xFF
 };
 
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/bluetooth/IOBluetoothHIDDriver.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/bluetooth/IOBluetoothHIDDriver.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/bluetooth/IOBluetoothHIDDriver.h	2015-08-27 02:14:47.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/bluetooth/IOBluetoothHIDDriver.h	2016-06-07 01:24:20.000000000 +0200
@@ -129,8 +129,12 @@
 		IOTimerEventSource*		mReadyToSleepTimer;
 		
 		bool					mHandleStopBeingCalled;
+		
+		bool					mHandleStartCompleted;
 
+		bool					mHIDSuspendSent;
 		
+		IOReturn				mExitHIDSuspendResult;
     };
     ExpansionData	*_expansionData;
 	
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/graphics/IOGraphicsTypes.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/graphics/IOGraphicsTypes.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/graphics/IOGraphicsTypes.h	2015-08-27 02:09:19.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/graphics/IOGraphicsTypes.h	2016-06-03 23:08:18.000000000 +0200
@@ -31,7 +31,7 @@
 extern "C" {
 #endif
 
-#define IOGRAPHICSTYPES_REV     42
+#define IOGRAPHICSTYPES_REV     43
 
 typedef SInt32  IOIndex;
 typedef UInt32  IOSelect;
@@ -270,6 +270,18 @@
 	kIOFBDisplayPortTrainingAttribute   = 'dpta',
 };
 
+// values for kIOWindowServerActiveAttribute
+enum {
+    kIOWSAA_Unaccelerated       = 0,    // CPU rendering/access only, no GPU access
+    kIOWSAA_Accelerated         = 1,    // GPU rendering/access only, no CPU mappings
+    kIOWSAA_From_Accelerated    = 2,    // Transitioning from GPU to CPU
+    kIOWSAA_To_Accelerated      = 3,    // Transitioning from CPU to GPU
+    kIOWSAA_Sleep               = 4,
+    kIOWSAA_Hibernate           = kIOWSAA_Sleep,
+    kIOWSAA_DriverOpen          = 5,    // Reserved
+    kIOWSAA_Transactional       = 0x10  // If this bit is present, transition is to/from transactional operation model.
+};
+
 // values for kIOMirrorAttribute
 enum {
     kIOMirrorIsPrimary                  = 0x80000000,
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/hid/IOHIDKeys.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/hid/IOHIDKeys.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/hid/IOHIDKeys.h	2016-02-27 07:31:03.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/hid/IOHIDKeys.h	2016-06-03 23:10:18.000000000 +0200
@@ -115,7 +115,7 @@
 #define kIOHIDTransportI2CValue                 "I2C"
 #define kIOHIDTransportSPIValue                 "SPI"
 #define kIOHIDTransportSerialValue              "Serial"
-#define kIOHIDTransportIAPValue                 "IAP"
+#define kIOHIDTransportIAPValue                 "iAP"
 #define kIOHIDTransportAirPlayValue             "AirPlay"
 #define kIOHIDTransportSPUValue                 "SPU"
 
@@ -407,7 +407,58 @@
  */
 #define kIOHIDSystemButtonPressedDuringDarkBoot     iokit_family_msg(sub_iokit_hidsystem, 7)
 
+/*!
+ @defined IOHIDKeyboard Keys
+ @abstract Keys that represent parameters of keyboards.
+ @discussion Legacy IOHIDKeyboard keys, formerly in IOHIDPrivateKeys. See IOHIDServiceKeys.h for the new keys.
+ */
+#define kIOHIDKeyboardCapsLockDelay         "CapsLockDelay"
+#define kIOHIDKeyboardCapsLockDelayOverride "CapsLockDelayOverride"
+#define kIOHIDKeyboardEjectDelay            "EjectDelay"
+
+/*!
+ @defined Press count tracking keys
+ @abstract Keys used to set the parameters for press count tracking
+ @discussion CFBoolean value for kIOHIDKeyboardPressCountTrackingEnabledKey is used to turn on the feature or turn it off
+    kIOHIDKeyboardPressCountTriplePressTimeoutKey and kIOHIDKeybaordPressCountDoublePressTimeoutKey take CFNumberRef values
+    The numbers represent the timeout values for determining the value kIOHIDEventFieldKeyboardPressCount
+    kIOHIDKeyboardLongPressTimeoutKey value is used to determine the timeout for long presses
+ */
+#define kIOHIDKeyboardPressCountTrackingEnabledKey      "PressCountTrackingEnabled"
+#define kIOHIDKeyboardPressCountTriplePressTimeoutKey   "PressCountTriplePressTimeout"
+#define kIOHIDKeyboardPressCountDoublePressTimeoutKey   "PressCountDoublePressTimeout"
+#define kIOHIDKeyboardLongPressTimeoutKey               "LongPressTimeout"
+
+/*!
+ @defined Tap count tracking keys
+ @abstract Keys used to set the parameters for tap count tracking
+ @discussion CFBoolean value for kIOHIDBiometricTapTrackingEnabledKey is used to turn on the feature or turn it off
+ kIOHIDBiometricDoubleTapTimeoutKey and kIOHIDBiometricTripleTapTimeoutKey take CFNumberRef values
+ The numbers represent the timeout values for determining the value kIOHIDEventFieldBiometricTapCount
+ */
+#define kIOHIDBiometricTapTrackingEnabledKey            "TapTrackingEnabled"
+#define kIOHIDBiometricDoubleTapTimeoutKey              "DoubleTapTimeout"
+#define kIOHIDBiometricTripleTapTimeoutKey              "TripleTapTimeout"
+
+/*!
+    @defined kFnFunctionUsageMapKey
+    @abstract top row key remapping for consumer usages
+    @discussion string of comma separated uint64_t value representing (usagePage<<32) | usage pairs
+ 
+ */
+#define kFnFunctionUsageMapKey      "FnFunctionUsageMap"
+
+/*!
+    @defined kFnKeyboardUsageMapKey
+    @abstract top row key reampping for consumer usages
+    @discussion string of comma separated uint64_t value representing (usagePage<<32) | usage pairs
+ 
+ */
+#define kFnKeyboardUsageMapKey      "FnKeyboardUsageMap"
+
+#define kNumLockKeyboardUsageMapKey "NumLockKeyboardUsageMap"
 
+#define kKeyboardUsageMapKey        "KeyboardUsageMap"
 
 __END_DECLS
 
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/hid/IOHIDUsageTables.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/hid/IOHIDUsageTables.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/hid/IOHIDUsageTables.h	2015-11-11 08:21:27.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/hid/IOHIDUsageTables.h	2016-06-03 23:10:18.000000000 +0200
@@ -576,6 +576,15 @@
     kHIDUsage_LED_GenericIndicator    = 0x4B,    /* On/Off Control */
     kHIDUsage_LED_SystemSuspend    = 0x4C,    /* On/Off Control */
     kHIDUsage_LED_ExternalPowerConnected    = 0x4D,    /* On/Off Control */
+    kHIDUsage_LED_PlayerIndicator   = 0x4E, /* Collection Logical */
+    kHIDUsage_LED_Player1   = 0x4F,  /* Selector */
+    kHIDUsage_LED_Player2   = 0x50,  /* Selector */
+    kHIDUsage_LED_Player3   = 0x51,  /* Selector */
+    kHIDUsage_LED_Player4   = 0x52,  /* Selector */
+    kHIDUsage_LED_Player5   = 0x53,  /* Selector */
+    kHIDUsage_LED_Player6   = 0x54,  /* Selector */
+    kHIDUsage_LED_Player7   = 0x55,  /* Selector */
+    kHIDUsage_LED_Player8   = 0x56,  /* Selector */
     /* 0x4E - 0xFFFF Reserved */
     kHIDUsage_LED_Reserved = 0xFFFF
 };
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/hidevent/IOHIDEventDriver.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/hidevent/IOHIDEventDriver.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/hidevent/IOHIDEventDriver.h	2015-08-27 02:05:39.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/hidevent/IOHIDEventDriver.h	2016-06-03 23:10:18.000000000 +0200
@@ -81,6 +81,7 @@
         struct {
             IOHIDElement *      deviceModeElement;
             OSArray *           transducers;
+            IOHIDElement *      touchCancelElement;
             bool                native;
         } digitizer;
         
@@ -166,6 +167,7 @@
     void                    setLEDProperties();
     void                    setKeyboardProperties();
     void                    setUnicodeProperties();
+    void                    setAccelerationProperties();
 
     UInt32                  checkGameControllerElement(IOHIDElement * element);
     UInt32                  checkMultiAxisElement(IOHIDElement * element);
@@ -178,7 +180,7 @@
     void                    handleGameControllerReport(AbsoluteTime timeStamp, UInt32 reportID);
     void                    handleMultiAxisPointerReport(AbsoluteTime timeStamp, UInt32 reportID);
     void                    handleDigitizerReport(AbsoluteTime timeStamp, UInt32 reportID);
-    void                    handleDigitizerTransducerReport(DigitizerTransducer * transducer, AbsoluteTime timeStamp, UInt32 reportID);
+    IOHIDEvent*             handleDigitizerTransducerReport(DigitizerTransducer * transducer, AbsoluteTime timeStamp, UInt32 reportID);
     void                    handleScrollReport(AbsoluteTime timeStamp, UInt32 reportID);
     void                    handleKeboardReport(AbsoluteTime timeStamp, UInt32 reportID);
     void                    handleUnicodeReport(AbsoluteTime timeStamp, UInt32 reportID);
@@ -224,7 +226,7 @@
 
     virtual OSString *      getSerialNumber ();
 
-    virtual void            setElementValue (
+    virtual IOReturn        setElementValue (
                                 UInt32                      usagePage,
                                 UInt32                      usage,
                                 UInt32                      value );
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/hidevent/IOHIDEventService.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/hidevent/IOHIDEventService.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/hidevent/IOHIDEventService.h	2016-02-27 07:31:03.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/hidevent/IOHIDEventService.h	2016-06-03 23:10:18.000000000 +0200
@@ -34,10 +34,8 @@
 #include <IOKit/hid/IOHIDInterface.h>
 #include <IOKit/hid/IOHIDElement.h>
 #include <IOKit/hid/IOHIDKeys.h>
-
-#if TARGET_OS_EMBEDDED
-    #include <IOKit/hid/IOHIDEvent.h>
-#endif
+#include <IOKit/hid/IOHIDEvent.h>
+#include "IOHIDUtility.h"
 
 enum 
 {
@@ -72,11 +70,34 @@
     kHIDDispatchOptionKeyboardNoRepeat                  = (1<<0)
 };
 
+enum
+{
+    kHIDShutdownDebugModeStackshots = 1,
+    kHIDShutdownDebugModePanic,
+    kHIDShutdownDebugModeDisabled
+};
+
+
+class IOHIDEventService;
 class   IOHIDPointing;
 class   IOHIDKeyboard;
 class   IOHIDConsumer;
 struct  TransducerData;
 
+
+struct KeyValueMask {
+    Key key;
+    uint32_t mask;
+};
+
+typedef void (*DebugKeyActionProc) (IOHIDEventService *self, void * parameter);
+struct DebugKeyAction {
+  uint32_t            mask;
+  DebugKeyActionProc  action;
+  void*               parameter;
+};
+
+
 /*! @class IOHIDEventService : public IOService
  @abstract
  @discussion
@@ -109,9 +130,7 @@
         OSArray *               deviceUsagePairs;
         IOCommandGate *         commandGate;
         
-#if TARGET_OS_EMBEDDED
         OSDictionary *          clientDict;
-#endif
 
         struct {
             UInt32                  deviceID;
@@ -123,18 +142,6 @@
         } digitizer;
 
         struct {
-            struct {
-                UInt32                  delayMS;
-                IOTimerEventSource *    timer;
-                UInt32                  state;
-                IOOptionBits            options;
-            } eject;
-            struct {
-                UInt32                  delayMS;
-                IOTimerEventSource *    timer;
-                UInt32                  state;
-                IOOptionBits            options;
-            } caps;
             
 #if TARGET_OS_EMBEDDED
             struct {
@@ -145,13 +152,19 @@
                 IOTimerEventSource *    nmiTimer;
                 UInt32                  stackshotHeld;
                 IOTimerEventSource *    stackshotTimer;
+                UInt32                  shutdownDebugMode;
+                UInt32                  shutdownDebugKeyMask;
+                UInt32                  shutdownDebugDelay;
+                IOTimerEventSource *    shutdownDebugTimer;
             } debug;
-
             bool                    swapISO;
+#else
+            Key                     pressedKeys[10];
+            UInt32                  pressedKeysMask;
 #endif
             bool                    appleVendorSupported;
         } keyboard;
-        
+
         struct {
             IOFixed                 x;
             IOFixed                 y;
@@ -168,8 +181,23 @@
             UInt32                  buttonState;
         } relativePointer;
 
+#if !TARGET_OS_EMBEDDED
+
+        struct {
+            UInt32                  buttonState;
+        } absolutePointer;
+
+        int                   pointingShim;
+        int                   keyboardShim;
+#endif
 
     };
+
+#if !TARGET_OS_EMBEDDED
+    static KeyValueMask   keyMonitorTable[];
+    static DebugKeyAction debugKeyActionTable[];
+#endif
+
     ExpansionData *         _reserved;
     
     IOHIDPointing *         newPointingShim (
@@ -194,20 +222,20 @@
                                     
     static bool             _publishMatchingNotificationHandler(void * target, void * ref, IOService * newService, IONotifier * notifier);
 
-    void                    ejectTimerCallback(IOTimerEventSource *sender);
-
-    void                    capsTimerCallback(IOTimerEventSource *sender);
-    
 #if TARGET_OS_EMBEDDED
     void                    debuggerTimerCallback(IOTimerEventSource *sender);
 
     void                    stackshotTimerCallback(IOTimerEventSource *sender);
+
+#if TARGET_OS_IPHONE
+    void                    forcedShutdownDebugTimerCallback(IOTimerEventSource *sender);
+    void                    forcedShutdownDebugInit();
+  
+#endif
 #endif
     
     void                    multiAxisTimerCallback(IOTimerEventSource *sender);
 
-    void                    calculateCapsLockDelay();
-    
     void                    calculateStandardType();
 
 protected:
@@ -288,7 +316,7 @@
     
     virtual OSArray *       getReportElements();
 
-    virtual void            setElementValue (
+    virtual IOReturn        setElementValue (
                                 UInt32                      usagePage,
                                 UInt32                      usage,
                                 UInt32                      value );
@@ -619,9 +647,6 @@
                                 IOOptionBits                    options                 = 0 );
     
 
-
-
-#if TARGET_OS_EMBEDDED
 public:
     typedef void (*Action)(OSObject *target, OSObject * sender, void *context, OSObject *event, IOOptionBits options);
 
@@ -641,7 +666,12 @@
     
     OSMetaClassDeclareReservedUsed(IOHIDEventService, 10);
     virtual UInt32          getPrimaryUsage();
-    
+ 
+#if !TARGET_OS_EMBEDDED
+    static void debugActionSysdiagnose(IOHIDEventService* self, void *parameter);
+    static void debugActionNMI(IOHIDEventService* self, void *parameter);
+#endif
+  
 public:
     OSMetaClassDeclareReservedUsed(IOHIDEventService,  11);
     virtual IOHIDEvent *    copyEvent(
@@ -729,15 +759,6 @@
                                                                 IOOptionBits                    options         = 0 );
     
 
-#else
-    OSMetaClassDeclareReservedUnused(IOHIDEventService,  7);
-    OSMetaClassDeclareReservedUnused(IOHIDEventService,  8);
-    OSMetaClassDeclareReservedUnused(IOHIDEventService,  9);
-    OSMetaClassDeclareReservedUnused(IOHIDEventService, 10);
-    OSMetaClassDeclareReservedUnused(IOHIDEventService, 11);
-    OSMetaClassDeclareReservedUnused(IOHIDEventService, 12);
-    OSMetaClassDeclareReservedUnused(IOHIDEventService, 13);
-#endif
     OSMetaClassDeclareReservedUnused(IOHIDEventService, 14);
     OSMetaClassDeclareReservedUnused(IOHIDEventService, 15);
     OSMetaClassDeclareReservedUnused(IOHIDEventService, 16);
@@ -757,15 +778,12 @@
     OSMetaClassDeclareReservedUnused(IOHIDEventService, 30);
     OSMetaClassDeclareReservedUnused(IOHIDEventService, 31);
     
-#if TARGET_OS_EMBEDDED
 public:
     virtual void            close( IOService * forClient, IOOptionBits options = 0 );
     
 private:
     bool                    openGated( IOService *client, IOOptionBits *pOptions, void *context, Action action);
     void                    closeGated( IOService * forClient, IOOptionBits *pOptions);
-#endif
-
 };
 
 #endif /* !_IOKIT_HID_IOHIDEVENTSERVICE_H */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/hidevent/IOHIDUtility.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/hidevent/IOHIDUtility.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/hidevent/IOHIDUtility.h	1970-01-01 01:00:00.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/hidevent/IOHIDUtility.h	2016-06-03 23:10:18.000000000 +0200
@@ -0,0 +1,70 @@
+/*
+ *
+ * @APPLE_LICENSE_HEADER_START@
+ * 
+ * Copyright (c) 2016 Apple Computer, Inc.  All Rights Reserved.
+ * 
+ * This file contains Original Code and/or Modifications of Original Code
+ * as defined in and that are subject to the Apple Public Source License
+ * Version 2.0 (the 'License'). You may not use this file except in
+ * compliance with the License. Please obtain a copy of the License at
+ * http://www.opensource.apple.com/apsl/ and read it before using this
+ * file.
+ * 
+ * The Original Code and all software distributed under the License are
+ * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
+ * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
+ * INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
+ * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
+ * Please see the License for the specific language governing rights and
+ * limitations under the License.
+ * 
+ * @APPLE_LICENSE_HEADER_END@
+ */
+
+#ifndef IOHIDUtility_h
+#define IOHIDUtility_h
+
+#include <IOKit/hid/IOHIDUsageTables.h>
+#include <IOKit/hid/AppleHIDUsageTables.h>
+
+enum {
+    kKeyMaskCtrl             = 0x0001,
+    kKeyMaskShift            = 0x0002,
+    kKeyMaskAlt              = 0x0004,
+    kKeyMaskCommand          = 0x0008,
+    kKeyMaskPeriod           = 0x0010,
+    kKeyMaskComma            = 0x0020,
+    kKeyMaskSlash            = 0x0040,
+    kKeyMaskEsc              = 0x0080,
+    kKeyMaskFn               = 0x0100,
+    kKeyMaskUnknown          = 0x80000000
+};
+
+struct Key {
+    uint64_t _value;
+    Key ():_value(0){}
+    Key (uint32_t usagePage, uint32_t usage):_value(((uint64_t)usagePage << 32) | usage) {}
+    Key (uint64_t usageAndUsagePage): _value (usageAndUsagePage) {}
+    friend bool operator==(const Key &lhs, const Key &rhs) {
+        return (lhs._value == rhs._value);
+    }
+    friend bool operator<(const Key &lhs, const Key &rhs) {
+        return (lhs._value < rhs._value);
+    }
+    uint32_t usage () const {return ((uint32_t*)&_value)[0];}
+    uint32_t usagePage () const {return((uint32_t*)&_value)[1];}
+    bool isValid () const {return _value != 0;}
+    bool isModifier () const {
+      bool result = false;
+      if ((usagePage() == kHIDPage_KeyboardOrKeypad) &&
+          (((usage() >= kHIDUsage_KeyboardLeftControl) && (usage() <= kHIDUsage_KeyboardRightGUI)) || (usage() == kHIDUsage_KeyboardCapsLock))) {
+          result = true;
+      } else if ((usagePage() == kHIDPage_AppleVendorTopCase) && (usage() == kHIDUsage_AV_TopCase_KeyboardFn)) {
+          result = true;
+      }
+      return result;
+    }
+};
+
+#endif /* IOHIDUtility_h */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/hidsystem/IOHIDParameter.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/hidsystem/IOHIDParameter.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/hidsystem/IOHIDParameter.h	2015-08-27 02:05:39.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/hidsystem/IOHIDParameter.h	2016-06-03 23:10:18.000000000 +0200
@@ -70,6 +70,9 @@
 #define kIOHIDKeyboardCapsLockDoesLockKey       "HIDKeyboardCapsLockDoesLock"
 #define kIOHIDKeyboardSupportsF12EjectKey       "HIDKeyboardSupportsF12Eject"
 #define kIOHIDKeyboardSupportedModifiersKey     "HIDKeyboardSupportedModifiers"
+#define kIOHIDKeyboardGlobalModifiersKey        "HIDKeyboardGlobalModifiers"
+#define kIOHIDServiceUseGlobalModifiersKey      "HIDServiceUseGlobalModifiers"
+
 
 #define kIOHIDPointerResolutionKey		"HIDPointerResolution"
 #define kIOHIDResetPointerKey			"HIDResetPointer"
@@ -136,6 +139,10 @@
 // shift keys in sequence will toggle sticky keys on or off
 #define kIOHIDStickyKeysShiftTogglesKey	"HIDStickyKeysShiftToggles"
 
+//
+//
+#define kIOHIDMouseClickNotification    "HIDClickNotification"
+
 // if kIOHIDMouseKeysOptionTogglesKey is 1, then a sequence of five
 // option keys in sequence will toggle mouse keys on or off
 #define kIOHIDMouseKeysOptionTogglesKey	"HIDMouseKeysOptionToggles"
@@ -328,6 +335,7 @@
     kIOHIDNumLockState              = 0x00000002,
     kIOHIDActivityUserIdle          = 0x00000003,
     kIOHIDActivityDisplayOn         = 0x00000004,
+    kIOHIDModifierFlags             = 0x00000005
 };
 
 #endif /* !_DEV_EVSIO_H */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/hidsystem/IOHIDSystem.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/hidsystem/IOHIDSystem.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/hidsystem/IOHIDSystem.h	2016-02-27 07:31:03.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/hidsystem/IOHIDSystem.h	2016-06-03 23:10:18.000000000 +0200
@@ -58,8 +58,6 @@
 #include <IOKit/IODataQueue.h>
 #include <IOKit/hidsystem/ev_keymap.h>		/* For NX_NUM_SCANNED_SPECIALKEYS */
 
-#include <IOKit/IOReporter.h>
-
 // The following messages should be unique across the entire system
 #ifndef sub_iokit_hidsystem
 #define sub_iokit_hidsystem                     err_sub(14)
@@ -72,78 +70,6 @@
 #define kIOHIDSystemActivityTickle              iokit_family_msg(sub_iokit_hidsystem, 5)
 #define kIOHIDSystemUserHidActivity             iokit_family_msg(sub_iokit_hidsystem, 6)
 
-#define kKeyboardChannelID_15_30                IOREPORT_MAKEID('K', '0', '1', '5', '-', '0', '3', '0')
-#define kKeyboardChannelID_30_60                IOREPORT_MAKEID('K', '0', '3', '0', '-', '0', '6', '0')
-#define kKeyboardChannelID_60_120               IOREPORT_MAKEID('K', '0', '6', '0', '-', '1', '2', '0')
-#define kKeyboardChannelID_120_240              IOREPORT_MAKEID('K', '1', '2', '0', '-', '2', '4', '0')
-#define kKeyboardChannelID_240_360              IOREPORT_MAKEID('K', '2', '4', '0', '-', '3', '6', '0')
-#define kKeyboardChannelID_360_480              IOREPORT_MAKEID('K', '3', '6', '0', '-', '4', '8', '0')
-#define kKeyboardChannelID_480_600              IOREPORT_MAKEID('K', '4', '8', '0', '-', '6', '0', '0')
-#define kKeyboardChannelID_600_INF              IOREPORT_MAKEID('K', '6', '0', '0', '-', '<', 'x', '>')
-
-#define kPointingChannelID_15_30                IOREPORT_MAKEID('P', '0', '1', '5', '-', '0', '3', '0')
-#define kPointingChannelID_30_60                IOREPORT_MAKEID('P', '0', '3', '0', '-', '0', '6', '0')
-#define kPointingChannelID_60_120               IOREPORT_MAKEID('P', '0', '6', '0', '-', '1', '2', '0')
-#define kPointingChannelID_120_240              IOREPORT_MAKEID('P', '1', '2', '0', '-', '2', '4', '0')
-#define kPointingChannelID_240_360              IOREPORT_MAKEID('P', '2', '4', '0', '-', '3', '6', '0')
-#define kPointingChannelID_360_480              IOREPORT_MAKEID('P', '3', '6', '0', '-', '4', '8', '0')
-#define kPointingChannelID_480_600              IOREPORT_MAKEID('P', '4', '8', '0', '-', '6', '0', '0')
-#define kPointingChannelID_600_INF              IOREPORT_MAKEID('P', '6', '0', '0', '-', '<', 'x', '>')
-
-#define kCombinedChannelID_15_30                IOREPORT_MAKEID('C', '0', '1', '5', '-', '0', '3', '0')
-#define kCombinedChannelID_30_60                IOREPORT_MAKEID('C', '0', '3', '0', '-', '0', '6', '0')
-#define kCombinedChannelID_60_120               IOREPORT_MAKEID('C', '0', '6', '0', '-', '1', '2', '0')
-#define kCombinedChannelID_120_240              IOREPORT_MAKEID('C', '1', '2', '0', '-', '2', '4', '0')
-#define kCombinedChannelID_240_360              IOREPORT_MAKEID('C', '2', '4', '0', '-', '3', '6', '0')
-#define kCombinedChannelID_360_480              IOREPORT_MAKEID('C', '3', '6', '0', '-', '4', '8', '0')
-#define kCombinedChannelID_480_600              IOREPORT_MAKEID('C', '4', '8', '0', '-', '6', '0', '0')
-#define kCombinedChannelID_600_INF              IOREPORT_MAKEID('C', '6', '0', '0', '-', '<', 'x', '>')
-
-#define kKeyboardTotalChannelID_15_30                IOREPORT_MAKEID('k', '0', '1', '5', '-', '0', '3', '0')
-#define kKeyboardTotalChannelID_30_60                IOREPORT_MAKEID('k', '0', '3', '0', '-', '0', '6', '0')
-#define kKeyboardTotalChannelID_60_120               IOREPORT_MAKEID('k', '0', '6', '0', '-', '1', '2', '0')
-#define kKeyboardTotalChannelID_120_240              IOREPORT_MAKEID('k', '1', '2', '0', '-', '2', '4', '0')
-#define kKeyboardTotalChannelID_240_360              IOREPORT_MAKEID('k', '2', '4', '0', '-', '3', '6', '0')
-#define kKeyboardTotalChannelID_360_480              IOREPORT_MAKEID('k', '3', '6', '0', '-', '4', '8', '0')
-#define kKeyboardTotalChannelID_480_600              IOREPORT_MAKEID('k', '4', '8', '0', '-', '6', '0', '0')
-#define kKeyboardTotalChannelID_600_INF              IOREPORT_MAKEID('k', '6', '0', '0', '-', '<', 'x', '>')
-
-#define kPointingTotalChannelID_15_30                IOREPORT_MAKEID('p', '0', '1', '5', '-', '0', '3', '0')
-#define kPointingTotalChannelID_30_60                IOREPORT_MAKEID('p', '0', '3', '0', '-', '0', '6', '0')
-#define kPointingTotalChannelID_60_120               IOREPORT_MAKEID('p', '0', '6', '0', '-', '1', '2', '0')
-#define kPointingTotalChannelID_120_240              IOREPORT_MAKEID('p', '1', '2', '0', '-', '2', '4', '0')
-#define kPointingTotalChannelID_240_360              IOREPORT_MAKEID('p', '2', '4', '0', '-', '3', '6', '0')
-#define kPointingTotalChannelID_360_480              IOREPORT_MAKEID('p', '3', '6', '0', '-', '4', '8', '0')
-#define kPointingTotalChannelID_480_600              IOREPORT_MAKEID('p', '4', '8', '0', '-', '6', '0', '0')
-#define kPointingTotalChannelID_600_INF              IOREPORT_MAKEID('p', '6', '0', '0', '-', '<', 'x', '>')
-
-#define kCombinedTotalChannelID_15_30                IOREPORT_MAKEID('c', '0', '1', '5', '-', '0', '3', '0')
-#define kCombinedTotalChannelID_30_60                IOREPORT_MAKEID('c', '0', '3', '0', '-', '0', '6', '0')
-#define kCombinedTotalChannelID_60_120               IOREPORT_MAKEID('c', '0', '6', '0', '-', '1', '2', '0')
-#define kCombinedTotalChannelID_120_240              IOREPORT_MAKEID('c', '1', '2', '0', '-', '2', '4', '0')
-#define kCombinedTotalChannelID_240_360              IOREPORT_MAKEID('c', '2', '4', '0', '-', '3', '6', '0')
-#define kCombinedTotalChannelID_360_480              IOREPORT_MAKEID('c', '3', '6', '0', '-', '4', '8', '0')
-#define kCombinedTotalChannelID_480_600              IOREPORT_MAKEID('c', '4', '8', '0', '-', '6', '0', '0')
-#define kCombinedTotalChannelID_600_INF              IOREPORT_MAKEID('c', '6', '0', '0', '-', '<', 'x', '>')
-
-#define kChannelName_15_30              "Idle       15 -  30s"
-#define kChannelName_30_60              "Idle       30 -  60s"
-#define kChannelName_60_120             "Idle       60 - 120s"
-#define kChannelName_120_240            "Idle      120 - 240s"
-#define kChannelName_240_360            "Idle      240 - 360s"
-#define kChannelName_360_480            "Idle      360 - 480s"
-#define kChannelName_480_600            "Idle      480 - 600s"
-#define kChannelName_600_INF            "Idle      600 - ...s"
-
-#define kChannelTotalName_15_30              "Total      15 -  30s"
-#define kChannelTotalName_30_60              "Total      30 -  60s"
-#define kChannelTotalName_60_120             "Total      60 - 120s"
-#define kChannelTotalName_120_240            "Total     120 - 240s"
-#define kChannelTotalName_240_360            "Total     240 - 360s"
-#define kChannelTotalName_360_480            "Total     360 - 480s"
-#define kChannelTotalName_480_600            "Total     480 - 600s"
-#define kChannelTotalName_600_INF            "Total     600 - ...s"
-
 class IOHIDKeyboardDevice;
 class IOHIDPointingDevice;
 class IOHIDEvent;
@@ -158,28 +84,15 @@
 	friend class IOHIDEventSystemUserClient;
 
 private:
-	IOHIDWorkLoop *		workLoop;
-	IOTimerEventSource          *periodicES;
-        IOInterruptEventSource * eventConsumerES;
-        IOInterruptEventSource * keyboardEQES;
-        IOCommandGate *		cmdGate;
-	IOUserClient *		serverConnect;
-	IOUserClient *		paramConnect;
-        IONotifier *		eventPublishNotify;
-        IONotifier *		eventTerminateNotify;
-        IONotifier *		publishNotify;
-        IONotifier *		terminateNotify;
-
-        OSArray *		ioHIDevices;
-    OSSet             * touchEventPosters;
-
-	// Ports on which we hold send rights
-	mach_port_t	eventPort;	// Send msg here when event queue
-					// goes non-empty
-    mach_port_t stackShotPort;
-	mach_port_t	_specialKeyPort[NX_NUM_SCANNED_SPECIALKEYS]; // Special key msgs
-	void		*eventMsg;	// Msg to be sent to Window Server.
-	void		*stackShotMsg;	// Msg to be sent to Stack Shot.
+	IOHIDWorkLoop           *workLoop;
+	IOTimerEventSource      *periodicES;
+    IOInterruptEventSource  *keyboardEQES;
+    IOCommandGate           *cmdGate;
+	IOUserClient            *serverConnect;
+	IOUserClient            *paramConnect;
+    IONotifier              *publishNotify;
+	void                    *eventMsg;	// Msg to be sent to Window Server.
+	void                    *stackShotMsg;	// Msg to be sent to Stack Shot.
 
 	// Shared memory area information
     IOBufferMemoryDescriptor * globalMemory;
@@ -187,21 +100,21 @@
 	vm_size_t	shmem_size;	// size of shared memory
 
 	// Pointers to structures which occupy the shared memory area.
-	volatile void	*evs;		// Pointer to private driver shmem
-	volatile EvGlobals *evg;	// Pointer to EvGlobals (shmem)
+	volatile void       *evs;		// Pointer to private driver shmem
+	volatile EvGlobals  *evg;	// Pointer to EvGlobals (shmem)
 	// Internal variables related to the shared memory area
-	int		lleqSize;	// # of entries in low-level queue
+	int                 lleqSize;	// # of entries in low-level queue
                         // FIXME: why is this ivar lleqSize an ivar? {Dan]
 
 	// Screens list
-	vm_size_t	evScreenSize;	// Byte size of evScreen array
-	void		*evScreen;	// array of screens known to driver
-	volatile void	*lastShmemPtr;	// Pointer used to index thru shmem
+	vm_size_t           evScreenSize;	// Byte size of evScreen array
+	void                *evScreen;	// array of screens known to driver
+	volatile void       *lastShmemPtr;	// Pointer used to index thru shmem
 					// while assigning shared areas to
 					// drivers.
-	int		screens;	// running total of allocated screens
-	UInt32		cursorScreens;	// bit mask of screens with cursor present
-        UInt32		cursorPinScreen;// a screen to pin against
+	int             screens;	// running total of allocated screens
+	UInt32          cursorScreens;	// bit mask of screens with cursor present
+    UInt32          cursorPinScreen;// a screen to pin against
 	IOGBounds		cursorPin;	// Range to which cursor is pinned
 					// while on this screen.
 	IOGBounds		workSpace;	// IOGBounds of full workspace.
@@ -215,7 +128,7 @@
     IOGPoint	clickLoc;       // location of last mouse click
     IOGPoint    clickSpaceThresh;// max mouse delta to be a doubleclick
 
-	int	clickState;	// Current click state
+//	int	clickState;	// Current click state
 
 	bool evOpenCalled;	// Has the driver been opened?
 	bool evInitialized;	// Has the first-open-only initialization run?
@@ -226,8 +139,6 @@
 	bool cursorCoupled;	// cursor positioning on pointer moves ok?
 	bool cursorPinned;	// cursor positioning on pointer moves ok?
 
-	short leftENum;		// Unique ID for last left down event
-	short rightENum;	// Unique ID for last right down event
 
 	// The periodic event mechanism timestamps and state
 	// are recorded here.
@@ -237,60 +148,35 @@
     uint64_t lastEventTime;
     uint64_t lastUndimEvent;
 
-	// Flag used in scheduling periodic event callbacks
-	bool		needToKickEventConsumer;
-
-        IOService *	displayManager;	// points to display manager
-        IOPMPowerFlags	displayState;
+    IOService       *displayManager;	// points to display manager
+    IOPMPowerFlags	displayState;
 
 
-        IOService *	rootDomain;
-        AbsoluteTime	rootDomainStateChangeDeadline;
-        AbsoluteTime    displayStateChangeDeadline;
-        AbsoluteTime    displaySleepWakeupDeadline;
-        bool  displaySleepDrivenByPM;
+    IOService *	rootDomain;
+    AbsoluteTime    displayStateChangeDeadline;
+    AbsoluteTime    displaySleepWakeupDeadline;
 
-        OSDictionary *  savedParameters;	// keep user settings
+    OSDictionary *  savedParameters;	// keep user settings
 
-        const char *    registryName;		// cache our name
-        UInt32		maxWaitCursorFrame;	// animation frames
+    UInt32		maxWaitCursorFrame;	// animation frames
 	UInt32		firstWaitCursorFrame;	//
 
-        int		cachedEventFlags;
-        OSArray *  cachedButtonStates;
-
-        OSArray * systemInfo;
-
-        IOHIDPointingDevice * _hidPointingDevice;
-        IOHIDKeyboardDevice * _hidKeyboardDevice;
-
-        /* The consumed keys array stores key codes for which a key down event
-         * has been consumed and a corresponding key up event must be consumed
-         * when it arrives.
-         */
-        OSArray * consumedKeys;
+    IOHIDPointingDevice * _hidPointingDevice;
+    IOHIDKeyboardDevice * _hidKeyboardDevice;
 
     OSObject * lastSender;
 
-        UInt32 scrollZoomMask;
 
     bool setParamPropertiesInProgress;
 
     OSSet * dataQueueSet;
+  
 
 private:
-    UInt8 getSubtypeForSender(OSObject * sender);
-    void updateMouseEventForSender(OSObject * sender, NXEventData * evData);
-    void updateMouseMoveEventForSender(OSObject * sender, NXEventData * evData);
-    void updateScrollEventForSender(OSObject * sender, NXEventData * evData);
 
-  inline short getUniqueEventNum();
 
   virtual IOReturn powerStateDidChangeTo( IOPMPowerFlags, unsigned long, IOService * );
-  static IOReturn powerStateHandler( void *target, void *refCon,
-               UInt32 messageType, IOService *service, void *messageArgument, vm_size_t argSize );
  /* Resets */
-  void _resetMouseParameters();
     void    _setScrollCountParameters(OSDictionary *newSettings = NULL);
 
   /* Initialize the shared memory area */
@@ -302,28 +188,18 @@
           /* withData */NXEventData * myData,
           /* sender */  OSObject *    sender   = 0,
           /* pid */     UInt32        extPID   = 0,
-          /* processKEQ*/bool          processKEQ = true);
+          /* processKEQ*/bool         processKEQ = true,
+          /* options*/   UInt32       options    = 0
+                          );
   /* Dispatch mechanisms for screen state changes */
   void evDispatch(
             /* command */ EvCmd evcmd);
-  /* Dispatch mechanism for special key press */
-  void evSpecialKeyMsg(unsigned key,
-               /* direction */ unsigned dir,
-               /* flags */     unsigned f,
-               /* level */     unsigned l);
-  /* Message the event consumer to process posted events */
-  void kickEventConsumer();
-  void sendStackShotMessage(UInt32 flavor);
 
   OSDictionary * createFilteredParamPropertiesForService(IOService * service, OSDictionary * dict);
 
   static void _periodicEvents(IOHIDSystem * self,
                               IOTimerEventSource *timer);
 
-  static void doSpecialKeyMsg(IOHIDSystem * self,
-					struct evioSpecialKeyMsg *msg);
-  static void doKickEventConsumer(IOHIDSystem * self);
-
   static void doProcessKeyboardEQ(IOHIDSystem * self);
   static void processKeyboardEQ(IOHIDSystem * self, AbsoluteTime * deadline = 0);
 
@@ -332,10 +208,6 @@
   bool genericNotificationHandler(void * ref, IOService * newService, IONotifier * notifier );
 
   static bool handlePublishNotification( void * target, IOService * newService );
-  static bool handlePublishNotificationGated( void * target, IOService * newService );
-
-  static bool handleTerminateNotification( void * target, IOService * service );
-  static bool handleTerminateNotificationGated( void * target, IOService * newService );
 
   static void makeNumberParamProperty( OSDictionary * dict, const char * key,
                             unsigned long long number, unsigned int bits );
@@ -374,33 +246,25 @@
   void enableContinuousCursor();
   void disableContinuousCursor();
   void _onScreenCursorPin();
-  // Claim ownership of event sources.
-  void attachDefaultEventSources();
-  // Give up ownership of event sources.
-  void detachEventSources();
+
   bool registerEventSource(IOService * source);
 
   // Set abs cursor position.
   void setCursorPosition(IOGPoint * newLoc, bool external, OSObject * sender=0);
-  void _setButtonState(int buttons,
-                       /* atTime */ AbsoluteTime ts,
-                       OSObject * sender);
   void _setCursorPosition(bool external = false, bool proximityChange = false, OSObject * sender=0);
 
-    static bool _idleTimeSerializerCallback(void * target, void * ref, OSSerialize *s);
-    static bool _displaySerializerCallback(void * target, void * ref, OSSerialize *s);
+  static bool _idleTimeSerializerCallback(void * target, void * ref, OSSerialize *s);
+  static bool _displaySerializerCallback(void * target, void * ref, OSSerialize *s);
 
-  void _postMouseMoveEvent(int		what,
-                           AbsoluteTime	theClock,
-                           OSObject *	sender);
   void createParameters( void );
 
 /* END HISTORICAL NOTE */
-
+  
+//  void updateUnificationFlags ();
+  
 public:
   static IOHIDSystem * instance();     /* Return the current instance of the */
 				       /* EventDriver, or 0 if none. */
-  static void scaleLocationToCurrentScreen(IOGPoint *location, IOGBounds *bounds);
 
   virtual bool init(OSDictionary * properties = 0);
   virtual IOHIDSystem * probe(IOService *    provider,
@@ -429,36 +293,8 @@
   /* Unregister the IODataQueue for the new user events */
   virtual IOReturn unregisterEventQueue(IODataQueue * queue);
 
-  /* Set the port for event available notify msg */
-  virtual void     setEventPort(mach_port_t port);
-
-  /* Set if display sleep is driven by IOPMrootDomain */
-  void setDisplaySleepDrivenByPM(bool val);
-
-  bool initReporters();
-
-    
-  virtual IOReturn configureReport(IOReportChannelList   *channels,
-                                     IOReportConfigureAction action,
-                                     void                  *result,
-                                     void                  *destination);
-    
-  virtual IOReturn updateReport(IOReportChannelList      *channels,
-                                  IOReportUpdateAction      action,
-                                  void                     *result,
-                                  void                     *destination);
-private:
-    static IOReturn doSetEventPort(IOHIDSystem *self, void *port_void, void *arg1, void *arg2, void *arg3);
-    void            setEventPortGated(mach_port_t port);
 public:
 
-  /* Set the port for the special key keypress msg */
-  virtual IOReturn setSpecialKeyPort(
-                     /* keyFlavor */ int         special_key,
-                     /* keyPort */   mach_port_t key_port);
-  virtual mach_port_t specialKeyPort(int special_key);
-
-
   virtual IOReturn newUserClient(task_t         owningTask,
                  /* withToken */ void *         security_id,
                  /* ofType */    UInt32         type,
@@ -472,34 +308,6 @@
  */
 
 public:
-  /* Mouse event reporting */
-  virtual void relativePointerEvent(int        buttons,
-                       /* deltaX */ int        dx,
-                       /* deltaY */ int        dy,
-                       /* atTime */ AbsoluteTime ts);
-
-  /* Tablet event reporting */
-  virtual void absolutePointerEvent(int        buttons,
-                 /* at */           IOGPoint *    newLoc,
-                 /* withBounds */   IOGBounds *bounds,
-                 /* inProximity */  bool       proximity,
-                 /* withPressure */ int        pressure,
-                 /* withAngle */    int        stylusAngle,
-                 /* atTime */       AbsoluteTime ts);
-
-  /* Mouse scroll wheel event reporting */
-  virtual void scrollWheelEvent(short deltaAxis1,
-                                short deltaAxis2,
-                                short deltaAxis3,
-                                AbsoluteTime ts);
-
-
-  virtual void tabletEvent(NXEventData *tabletData,
-                           AbsoluteTime ts);
-
-  virtual void proximityEvent(NXEventData *proximityData,
-                              AbsoluteTime ts);
-
 /*
  * HISTORICAL NOTE:
  *   The following methods were part of the IOHIKeyboardEvents protocol;
@@ -533,60 +341,6 @@
 
 private:
 
-  /*
-   * statics for upstream callouts
-   */
-
-  void _scaleLocationToCurrentScreen(IOFixedPoint64 &location, IOGBounds *bounds);
-
-  static void _relativePointerEvent(IOHIDSystem * self,
-				    int        buttons,
-                       /* deltaX */ int        dx,
-                       /* deltaY */ int        dy,
-                       /* atTime */ AbsoluteTime ts,
-                                    OSObject * sender,
-                                    void *     refcon);
-
-  /* Tablet event reporting */
-  static void _absolutePointerEvent(IOHIDSystem * self,
-				    int        buttons,
-                 /* at */           IOGPoint *    newLoc,
-                 /* withBounds */   IOGBounds *bounds,
-                 /* inProximity */  bool       proximity,
-                 /* withPressure */ int        pressure,
-                 /* withAngle */    int        stylusAngle,
-                 /* atTime */       AbsoluteTime ts,
-                                    OSObject * sender,
-                                    void *     refcon);
-
-  /* Mouse scroll wheel event reporting */
-  static void _scrollWheelEvent(    IOHIDSystem *self,
-                                    short      deltaAxis1,
-                                    short      deltaAxis2,
-                                    short      deltaAxis3,
-                                    IOFixed    fixedDelta1,
-                                    IOFixed    fixedDelta2,
-                                    IOFixed    fixedDelta3,
-                                    SInt32  pointDeltaAxis1,
-                                    SInt32  pointDeltaAxis2,
-                                    SInt32  pointDeltaAxis3,
-                                    UInt32  options,
-                                    AbsoluteTime ts,
-                                    OSObject * sender,
-                                    void *     refcon);
-
-  static void _tabletEvent(         IOHIDSystem *self,
-                                    NXEventData *tabletData,
-                                    AbsoluteTime ts,
-                                    OSObject * sender,
-                                    void *     refcon);
-
-  static void _proximityEvent(      IOHIDSystem *self,
-                                    NXEventData *proximityData,
-                                    AbsoluteTime ts,
-                                    OSObject * sender,
-                                    void *     refcon);
-
   static void _keyboardEvent(       IOHIDSystem * self,
                                     unsigned   eventType,
             /* flags */             unsigned   flags,
@@ -686,44 +440,6 @@
 /* END HISTORICAL NOTES */
 
 private:
-void relativePointerEvent(          int        buttons,
-                 /* deltaX */       int        dx,
-                 /* deltaY */       int        dy,
-                 /* atTime */       AbsoluteTime ts,
-                 /* senderID */     OSObject * sender);
-
-  /* Tablet event reporting */
-void absolutePointerEvent(          int        buttons,
-                 /* at */           IOGPoint *    newLoc,
-                 /* withBounds */   IOGBounds *bounds,
-                 /* inProximity */  bool       proximity,
-                 /* withPressure */ int        pressure,
-                 /* withAngle */    int        stylusAngle,
-                 /* atTime */       AbsoluteTime ts,
-                 /* senderID */     OSObject * sender);
-
-  /* Mouse scroll wheel event reporting */
-void scrollWheelEvent(	        short 	       deltaAxis1,
-                                short          deltaAxis2,
-                                short          deltaAxis3,
-                                IOFixed        fixedDelta1,
-                                IOFixed        fixedDelta2,
-                                IOFixed        fixedDelta3,
-                                SInt32         pointDeltaAxis1,
-                                SInt32         pointDeltaAxis2,
-                                SInt32         pointDeltaAxis3,
-                                UInt32         options,
-                                AbsoluteTime   ts,
-                                OSObject *     sender);
-
-void tabletEvent(	NXEventData * tabletData,
-                                AbsoluteTime ts,
-                                OSObject * sender);
-
-void proximityEvent(	NXEventData * proximityData,
-                                AbsoluteTime ts,
-                                OSObject * sender);
-
 void keyboardEvent(unsigned   eventType,
       /* flags */            unsigned   flags,
       /* keyCode */          unsigned   key,
@@ -747,8 +463,6 @@
 
 void updateEventFlags(unsigned flags, OSObject * sender);
 
-bool addConsumedKey(unsigned key);
-bool removeConsumedKey(unsigned key);
 
 /*
  * COMMAND GATE COMPATIBILITY:
@@ -767,12 +481,6 @@
 static	IOReturn	doEvClose (IOHIDSystem *self);
         IOReturn	evCloseGated (void);
 
-static	IOReturn	doSetEventsEnablePre (IOHIDSystem *self, void *p1);
-        IOReturn	setEventsEnablePreGated (void *p1);
-
-static	IOReturn	doSetEventsEnablePost (IOHIDSystem *self, void *p1);
-        IOReturn	setEventsEnablePostGated (void *p1);
-
 static	IOReturn	doUnregisterScreen (IOHIDSystem *self, void * arg0, void *arg1);
         IOReturn	unregisterScreenGated (int index, bool internal);
 
@@ -788,46 +496,6 @@
 static	IOReturn	doUnregisterEventQueue (IOHIDSystem *self, void * arg0);
         IOReturn	unregisterEventQueueGated (void * p1);
 
-static	IOReturn	doRelativePointerEvent (IOHIDSystem *self, void * args);
-        void		relativePointerEventGated(int buttons,
-                                                    int dx,
-                                                    int dy,
-                                                    SInt64 ts,
-                                                    OSObject * sender);
-
-static	IOReturn	doAbsolutePointerEvent (IOHIDSystem *self, void * args);
-        void 		absolutePointerEventGated (int buttons,
-                                                    IOGPoint *    newLoc,
-                                                    IOGBounds *bounds,
-                                                    bool       proximity,
-                                                    int        pressure,
-                                                    int        stylusAngle,
-                                                    AbsoluteTime ts,
-                                                    OSObject * sender);
-
-static	IOReturn	doScrollWheelEvent(IOHIDSystem *self, void * args);
-        void		scrollWheelEventGated (short deltaAxis1,
-                                                short deltaAxis2,
-                                                short deltaAxis3,
-                                               IOFixed  fixedDelta1,
-                                               IOFixed  fixedDelta2,
-                                               IOFixed  fixedDelta3,
-                                               SInt32   pointDeltaAxis1,
-                                               SInt32   pointDeltaAxis2,
-                                               SInt32   pointDeltaAxis3,
-                                               UInt32   options,
-                                                AbsoluteTime ts,
-                                                OSObject * sender);
-
-static	IOReturn	doTabletEvent (IOHIDSystem *self, void * arg0, void * arg1, void * arg2);
-        void		tabletEventGated (	NXEventData *tabletData,
-                                                AbsoluteTime ts,
-                                                OSObject * sender);
-
-static	IOReturn	doProximityEvent (IOHIDSystem *self, void * arg0, void * arg1, void * arg2);
-        void		proximityEventGated (	NXEventData *proximityData,
-                                                AbsoluteTime ts,
-                                                OSObject * sender);
 
 static	IOReturn	doKeyboardEvent (IOHIDSystem *self, void * args);
         void		keyboardEventGated (unsigned   eventType,
@@ -888,16 +556,10 @@
 
 static	IOReturn	doExtGetStateForSelector (IOHIDSystem *self, void *p1, void *p2);
 static	IOReturn	doExtSetStateForSelector (IOHIDSystem *self, void *p1, void *p2);
-        IOReturn    getCapsLockState(unsigned int *state_O);
-        IOReturn    setCapsLockState(unsigned int state_I);
-        IOReturn    getNumLockState(unsigned int *state_O);
-        IOReturn    setNumLockState(unsigned int state_I);
 
 /* END COMMAND GATE COMPATIBILITY */
 
 public:
-    virtual void setStackShotPort(mach_port_t port);
-
     virtual UInt32 eventFlags();
 
     virtual void dispatchEvent(IOHIDEvent *event, IOOptionBits options=0);
@@ -910,7 +572,6 @@
     static IOReturn getUserHidActivityState(IOHIDSystem *self, void *arg0);
     IOReturn getUserHidActivityStateGated(void *state);
 
-    void updateIdleReporters(uint32_t mask, AbsoluteTime ts);
 };
 
 #endif /* !_IOHIDSYSTEM_H */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/hidsystem/IOHIDUsageTables.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/hidsystem/IOHIDUsageTables.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/hidsystem/IOHIDUsageTables.h	2015-11-11 08:21:27.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/hidsystem/IOHIDUsageTables.h	2016-06-03 23:10:18.000000000 +0200
@@ -576,6 +576,15 @@
     kHIDUsage_LED_GenericIndicator    = 0x4B,    /* On/Off Control */
     kHIDUsage_LED_SystemSuspend    = 0x4C,    /* On/Off Control */
     kHIDUsage_LED_ExternalPowerConnected    = 0x4D,    /* On/Off Control */
+    kHIDUsage_LED_PlayerIndicator   = 0x4E, /* Collection Logical */
+    kHIDUsage_LED_Player1   = 0x4F,  /* Selector */
+    kHIDUsage_LED_Player2   = 0x50,  /* Selector */
+    kHIDUsage_LED_Player3   = 0x51,  /* Selector */
+    kHIDUsage_LED_Player4   = 0x52,  /* Selector */
+    kHIDUsage_LED_Player5   = 0x53,  /* Selector */
+    kHIDUsage_LED_Player6   = 0x54,  /* Selector */
+    kHIDUsage_LED_Player7   = 0x55,  /* Selector */
+    kHIDUsage_LED_Player8   = 0x56,  /* Selector */
     /* 0x4E - 0xFFFF Reserved */
     kHIDUsage_LED_Reserved = 0xFFFF
 };
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/hidsystem/IOHIDWorkLoop.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/hidsystem/IOHIDWorkLoop.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/hidsystem/IOHIDWorkLoop.h	1970-01-01 01:00:00.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/hidsystem/IOHIDWorkLoop.h	2016-06-03 23:10:18.000000000 +0200
@@ -0,0 +1,22 @@
+
+#ifndef _IOKIT_IOHIDWORKLOOP_H
+#define _IOKIT_IOHIDWORKLOOP_H
+
+#include <IOKit/IOWorkLoop.h>
+class IOHIDWorkLoop : public IOWorkLoop
+{
+    OSDeclareDefaultStructors(IOHIDWorkLoop)
+    
+protected:
+	lck_grp_t *	fLockGroup;
+	
+	bool init ( void );
+	void free ( void );
+	
+public:
+    // Create a workloop
+    static IOHIDWorkLoop * workLoop();
+};
+
+#endif /* ! _IOKIT_IOHIDWORKLOOP_H */
+
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/hidsystem/IOHIKeyboard.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/hidsystem/IOHIKeyboard.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/hidsystem/IOHIKeyboard.h	2015-08-27 02:05:39.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/hidsystem/IOHIKeyboard.h	2016-06-03 23:10:18.000000000 +0200
@@ -114,8 +114,9 @@
     OSDeclareDefaultStructors(IOHIKeyboard);
 
     friend class IOHIDKeyboardDevice;
-	friend class IOHIDKeyboard;
-	friend class IOHIDConsumer;
+    friend class IOHIDKeyboardEventDevice;
+    friend class IOHIDKeyboard;
+    friend class IOHIDConsumer;
 
 protected:
     IOLock *	         _deviceLock;	// Lock for all device access
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/hidsystem/IOHIKeyboardMapper.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/hidsystem/IOHIKeyboardMapper.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/hidsystem/IOHIKeyboardMapper.h	2015-08-27 02:05:39.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/hidsystem/IOHIKeyboardMapper.h	2016-06-03 23:10:18.000000000 +0200
@@ -65,12 +65,11 @@
 // sticky keys state flags
 enum
 {
-    kState_Disabled_Flag	= 0x0001,	// disabled and will do nothing until this is changed
+    kState_Disabled_Flag        = 0x0001,	// disabled and will do nothing until this is changed
     kState_ShiftActivates_Flag	= 0x0002,	// the 'on' gesture (5 shifts) will activate
-    kState_On			= 0x0004,	// currently on, will hold down modifiers when pressed
-    kState_On_ModifiersDown	= 0x0008,	// one or more modifiers being held down
-
-    kState_Mask			= 0x00FF,	// mask for all states
+    kState_On                   = 0x0004,	// currently on, will hold down modifiers when pressed
+    kState_On_ModifiersDown     = 0x0008,	// one or more modifiers being held down
+    kState_Mask                 = 0x00FF,	// mask for all states
 };
 
 typedef struct _stickyKeys_ToggleInfo
@@ -122,39 +121,15 @@
 	IOHIKeyboard *		_delegate;					// KeyMap delegate
 	bool				_mappingShouldBeFreed;		// true if map can be IOFree'd
 	NXParsedKeyMapping	_parsedMapping;				// current system-wide keymap
-	IOHIDSystem	 *		_hidSystem;					// target of IOHIKeyboard (should be IOHIDSystem)
 	
 	// binary compatibility padding
     struct ExpansionData { 
     
-        // This is for F12 eject
-	UInt16 			f12Eject_State;
-	UInt32 			eject_Delay_MS;
-	IOTimerEventSource 	*ejectTimerEventSource;
-
         // This is for sticky keys
         kbdBitVector		cached_KeyBits;
-        StickyKeys_ModifierInfo stickyKeys_StuckModifiers[kMAX_MODIFIERS];
-        IOInterruptEventSource  *stickyKeysMouseClickEventSource;
-        IOInterruptEventSource	*stickyKeysSetFnStateEventSource;
-        // The following should really be statics, but placing here 
-        // to match design by predecesor.
-        OSDictionary		*offFnParamDict;
-        OSDictionary		*onFnParamDict;
-
-        // This is for SlowKeys
-        UInt16			slowKeys_State;
-        UInt32 			slowKeys_Delay_MS;
-        IOTimerEventSource	*slowKeysTimerEventSource;
-        
-        // stored for slowKeysPostProcess
-        UInt8		slowKeys_Aborted_Key;
-        UInt8		slowKeys_Current_Key;        
         
         UInt32		specialKeyModifierFlags;
         
-        bool		supportsF12Eject;
-        
         SInt32      modifierSwap_Modifiers[NX_NUMMODIFIERS];
 		
 		unsigned char * cachedAlphaLockModDefs;
@@ -207,84 +182,14 @@
 private:
 	// original translateKeyCode
 	void rawTranslateKeyCode (UInt8 key, bool keyDown, kbdBitVector keyBits);
-    bool modifierSwapFilterKey(UInt8 * key);
-
-	// the current state of stickyKeys
-	UInt32            	_stickyKeys_State; 
-	
-	// the number of modifiers being held down by stickyKeys
-	int		    		_stickyKeys_NumModifiersDown;
-        
-	// contains the info needed to keep track of shift repetitions
-	StickyKeys_ToggleInfo * _stickyKeys_ShiftToggle;
-
-	// contains the info needed to keep track of option repetitions
-	StickyKeys_ToggleInfo * _stickyKeys_OptionToggle;
-
-	// dictionaries with cached on and off states, used to set params when state changes
-	bool				_stateDirty;
-	OSDictionary *		_onParamDict;
-	OSDictionary *		_offParamDict;
-
-	// init/free vars
-	bool stickyKeysinit (void);
-	void stickyKeysfree (void);
-
-	// allocate/free a StickyKeys_ToggleInfo struct
-	static StickyKeys_ToggleInfo * stickyKeysAllocToggleInfo (unsigned maxCount);
-	static void stickyKeysFreeToggleInfo (StickyKeys_ToggleInfo * toggleInfo);
-
-	// create on/off dicts as part of init
-	bool createParamDicts (void);
   
 	// post special keyboard events thru the event system
 	void postKeyboardSpecialEvent (unsigned subtype, unsigned eventType=NX_SYSDEFINED);
 
-	// check any modifier to see if it is pressed 5 times
-	// based on StickyKeys_ToggleInfo
-	bool stickyKeysModifierToggleCheck(
-							StickyKeys_ToggleInfo * toggleInfo,
-							UInt8        key,
-							bool         keyDown,
-							kbdBitVector keyBits,
-                                                        bool 	     mouseClick = false);
-
-	// non-modifier key pressed
-	void stickyKeysNonModifierKey (UInt8 key, bool keyDown, kbdBitVector keyBits, bool mouseClick = false);
-
-	// modifier key pressed (shift, command, option, control)
-	bool stickyKeysModifierKey (UInt8 key, bool keyDown, kbdBitVector keyBits);
-
-	// main entry point, called for all keys (returns true if key handled)
-	bool stickyKeysFilterKey (UInt8 key, bool keyDown, kbdBitVector keyBits, bool mouseClick = false);
-
-        // called by interrupt event source to inform sticky keys of mouse down event
-        static void stickyKeysMouseUp(IOHIKeyboardMapper *owner, IOEventSource *sender);
-
-	void stickyKeysCleanup();
-
-        // called by interrupt event source to restore prior fn state
-	static void stickyKeysSetFnState(IOHIKeyboardMapper *owner, IOEventSource *sender);
-
-        /* F12 Eject Functionality */ 
 private:
         
-        // Determining f12 eject key press
-        // Returns true if f12 held down for a predetermined period of time.
-        bool f12EjectFilterKey (UInt8 key, bool keyDown, kbdBitVector keyBits);
-        
-        // Timer function for eject
-        static void performF12Eject(IOHIKeyboardMapper *owner, IOTimerEventSource *sender);
-        
-        /* SlowKeys Functionality */
 private:
-        // Slow keys methods
-        bool slowKeysFilterKey (UInt8 key, bool keyDown, kbdBitVector keyBits);
-        
-        static void slowKeysPostProcess (IOHIKeyboardMapper *owner, IOTimerEventSource *sender);
-
-	
-public:	
+public:
     OSMetaClassDeclareReservedUsed(IOHIKeyboardMapper,  0);
     virtual IOReturn message( UInt32 type, IOService * provider, void * argument = 0 );
 
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/hidsystem/IOLLEvent.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/hidsystem/IOLLEvent.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/hidsystem/IOLLEvent.h	2015-08-27 02:05:39.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/hidsystem/IOLLEvent.h	2016-06-03 23:10:18.000000000 +0200
@@ -188,6 +188,10 @@
 #define NX_SUBTYPE_SLEEP_EVENT				11
 #define NX_SUBTYPE_RESTART_EVENT			12
 #define NX_SUBTYPE_SHUTDOWN_EVENT			13
+#define NX_SUBTYPE_MENU               16
+#define NX_SUBTYPE_ACCESSIBILITY      17
+
+
 
 #define NX_SUBTYPE_STICKYKEYS_ON			100
 #define NX_SUBTYPE_STICKYKEYS_OFF			101
@@ -522,6 +526,7 @@
     UInt64              service_id __attribute__ ((packed)); /* service id */
     SInt32              ext_pid;    /* external pid */
 } NXEvent, *NXEventPtr;
+
 #endif
 
 /* The current version number of the NXEvent structure. */
@@ -559,5 +564,20 @@
                             NX_TABLETPOINTERMASK | NX_TABLETPROXIMITYMASK \
                         )
 
+
+#define  NX_EVENT_EXTENSION_LOCATION_INVALID            0x1
+#define  NX_EVENT_EXTENSION_LOCATION_TYPE_FLOAT         0x2
+#define  NX_EVENT_EXTENSION_LOCATION_DEVICE_SCALED      0x4
+#define  NX_EVENT_EXTENSION_MOUSE_DELTA_TYPE_FLOAT      0x8
+
+typedef struct _NXEventExtension {
+    UInt32              flags;
+} NXEventExtension;
+
+typedef struct _NXEventExt {
+    NXEvent             payload;
+    NXEventExtension    extension;
+} NXEventExt;
+
 #endif /* !_DEV_EVENT_H */
 
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/hidsystem/ev_keymap.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/hidsystem/ev_keymap.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/hidsystem/ev_keymap.h	2015-08-27 02:05:39.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/hidsystem/ev_keymap.h	2016-06-03 23:10:18.000000000 +0200
@@ -85,6 +85,8 @@
 #define NX_NUM_SCANNED_SPECIALKEYS	24 /* First 24 special keys are */
 					  /* actively scanned in kernel */
 
+#define NX_KEYTYPE_MENU		25
+
 /* Mask of special keys that are posted as events */
 
 #define NX_SPECIALKEY_POST_MASK		\
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/network/IONetworkController.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/network/IONetworkController.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/network/IONetworkController.h	2015-08-27 02:09:01.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/network/IONetworkController.h	2016-06-03 23:05:43.000000000 +0200
@@ -217,16 +217,22 @@
     @constant kIONetworkFeatureTransmitCompletionStatus Set this bit to
         advertise the capability to report per-packet transmit completion status.
         See <code>IONetworkInterface::reportTransmitCompletionStatus</code>.
+    @constant kIONetworkFeatureHWTimeStamp Set this bit to advertise
+         the capability to compute per-packet timestamp in hardware.
+    @constant kIONetworkFeatureHWTimeStamp Set this bit to advertise
+        the capability to compute per-packet timestamp in software.
 */
 
 enum {
-    kIONetworkFeatureNoBSDWait                  = 0x01,
-    kIONetworkFeatureHardwareVlan               = 0x02,
-    kIONetworkFeatureSoftwareVlan               = 0x04,
-    kIONetworkFeatureMultiPages                 = 0x08,
-    kIONetworkFeatureTSOIPv4                    = 0x10,
-    kIONetworkFeatureTSOIPv6                    = 0x20,
-    kIONetworkFeatureTransmitCompletionStatus   = 0x40
+    kIONetworkFeatureNoBSDWait                  = 0x001,
+    kIONetworkFeatureHardwareVlan               = 0x002,
+    kIONetworkFeatureSoftwareVlan               = 0x004,
+    kIONetworkFeatureMultiPages                 = 0x008,
+    kIONetworkFeatureTSOIPv4                    = 0x010,
+    kIONetworkFeatureTSOIPv6                    = 0x020,
+    kIONetworkFeatureTransmitCompletionStatus   = 0x040,
+    kIONetworkFeatureHWTimeStamp                = 0x080,
+    kIONetworkFeatureSWTimeStamp                = 0x100
 };
 
 #ifdef KERNEL
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/pci/IOPCIBridge.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/pci/IOPCIBridge.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/pci/IOPCIBridge.h	2015-08-27 02:05:59.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/pci/IOPCIBridge.h	2016-06-03 23:05:15.000000000 +0200
@@ -73,7 +73,8 @@
 	void restoreQEnter(IOPCIDevice * device);
     void restoreQRemove(IOPCIDevice * device);
 
-	IOReturn restoreTunnelState(IOPCIDevice * root, IOOptionBits options);
+	IOReturn restoreTunnelState(IOPCIDevice * rootDevice, IOOptionBits options, 
+                                bool * didTunnelController);
     IOReturn restoreMachineState( IOOptionBits options, IOPCIDevice * device );
     void tunnelsWait(IOPCIDevice * device);
     static IOReturn finishMachineState(IOOptionBits options);
@@ -82,6 +83,7 @@
 										void * messageArgument, vm_size_t argSize);
 
     IOReturn _restoreDeviceState( IOPCIDevice * device, IOOptionBits options );
+    IOReturn _restoreDeviceDependents(IOPCIDevice * device, IOOptionBits options, IOPCIDevice * forDependent);
     IOReturn resolveLegacyInterrupts( IOService * provider, IOPCIDevice * nub );
     IOReturn resolveMSIInterrupts   ( IOService * provider, IOPCIDevice * nub );
 
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/pwr_mgt/IOPM.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/pwr_mgt/IOPM.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/pwr_mgt/IOPM.h	2015-08-27 01:55:11.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/pwr_mgt/IOPM.h	2016-06-03 22:55:01.000000000 +0200
@@ -612,6 +612,7 @@
 #define kIOPMPSAdapterDetailsAmperageKey	    "Amperage"
 #define kIOPMPSAdapterDetailsDescriptionKey	    "Description"
 #define kIOPMPSAdapterDetailsPMUConfigurationKey    "PMUConfiguration"
+#define kIOPMPSAdapterDetailsVoltage            "AdapterVoltage"
 
 // Battery's time remaining estimate is invalid this long (seconds) after a wake
 #define kIOPMPSInvalidWakeSecondsKey           "BatteryInvalidWakeSeconds"
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/pwr_mgt/RootDomain.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/pwr_mgt/RootDomain.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/pwr_mgt/RootDomain.h	2015-08-27 01:55:12.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/pwr_mgt/RootDomain.h	2016-06-03 22:55:01.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 1998-2000 Apple Computer, Inc. All rights reserved.
+ * Copyright (c) 1998-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  * 
@@ -152,10 +152,7 @@
     @discussion systemPowerEventOccurred is a richer alternative to receivePowerNotification()
         Only Apple-owned kexts should have reason to call systemPowerEventOccurred.
     @param event An OSSymbol describing the type of power event.
-    @param value A 32-bit integer value associated with the event.
-    @param shouldUpdate indicates whether the root domain should send a notification
-        to interested parties. Pass false if you're calling systemPowerEventOccurred
-        several times in succession; and pass true only on the last invocatino.
+    @param intValue A 32-bit integer value associated with the event.
     @result kIOReturnSuccess on success */
 
     IOReturn            systemPowerEventOccurred(
@@ -260,7 +257,7 @@
 
 /*! @function createPMAssertion
     @abstract Creates an assertion to influence system power behavior.
-    @param whichAssertionBits A bitfield specify the assertion that the caller requests.
+    @param whichAssertionsBits A bitfield specify the assertion that the caller requests.
     @param assertionLevel An integer detailing the initial assertion level, kIOPMDriverAssertionLevelOn
         or kIOPMDriverAssertionLevelOff.
     @param ownerService A pointer to the caller's IOService class, for tracking.
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/scsi/IOBlockStorageServices.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/scsi/IOBlockStorageServices.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/scsi/IOBlockStorageServices.h	2015-11-11 08:38:33.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/scsi/IOBlockStorageServices.h	2016-06-03 23:14:33.000000000 +0200
@@ -133,6 +133,17 @@
 	virtual IOReturn	getWriteCacheState ( bool * enabled ) APPLE_KEXT_OVERRIDE;
 	
 	virtual IOReturn	setWriteCacheState ( bool enabled ) APPLE_KEXT_OVERRIDE;
+    
+	virtual IOReturn	doUnmap ( IOBlockStorageDeviceExtent * extents,
+								  UInt32                       extentsCount,
+								  IOStorageUnmapOptions        options = 0 ) APPLE_KEXT_OVERRIDE;
+    
+    virtual IOReturn	doGetProvisionStatus ( UInt64                                block,
+											   UInt64                                nblks,
+											   UInt32 *                              extentsCount,
+											   IOBlockStorageProvisionDeviceExtent * extents,
+											   IOStorageGetProvisionStatusOptions    options = 0) APPLE_KEXT_OVERRIDE;
+
 	
 #if !TARGET_OS_EMBEDDED
 	// Space reserved for future expansion.
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/scsi/IOSCSIBlockCommandsDevice.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/scsi/IOSCSIBlockCommandsDevice.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/scsi/IOSCSIBlockCommandsDevice.h	2015-11-11 08:38:33.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/scsi/IOSCSIBlockCommandsDevice.h	2016-06-03 23:14:33.000000000 +0200
@@ -65,11 +65,11 @@
 
 // SCSI Architecture Model Family includes
 #include <IOKit/scsi/IOSCSIPrimaryCommandsDevice.h>
+#include <IOKit/storage/IOBlockStorageDevice.h>
 
 // Build includes
 #include <TargetConditionals.h>
 
-
 // Forward declaration for the SCSIBlockCommands that is used internally by the
 // IOSCSIBlockCommandsDevice class.
 class SCSIBlockCommands;
@@ -105,11 +105,23 @@
 #endif /* !TARGET_OS_EMBEDDED */
 		bool				fProtocolSpecificPowerControl;
 		bool				fRequiresEjectWithStartStopUnit;
+		UInt32				fMaximumUnmapLBACount;
+		UInt32				fMaximumUnmapBlockDescriptorCount;
+        UInt64              fMaximumWriteSameLength;
+        UInt8               fLBPRZ;
+		bool				fUnmapAllowed;
+        bool                fUseWriteSame;
 	};
     IOSCSIBlockCommandsDeviceExpansionData * fIOSCSIBlockCommandsDeviceReserved;
 	
-	#define fPowerDownNotifier	fIOSCSIBlockCommandsDeviceReserved->fPowerDownNotifier
-	#define fWriteCacheEnabled	fIOSCSIBlockCommandsDeviceReserved->fWriteCacheEnabled
+	#define fPowerDownNotifier					fIOSCSIBlockCommandsDeviceReserved->fPowerDownNotifier
+	#define fWriteCacheEnabled					fIOSCSIBlockCommandsDeviceReserved->fWriteCacheEnabled
+	#define fMaximumUnmapLBACount				fIOSCSIBlockCommandsDeviceReserved->fMaximumUnmapLBACount
+	#define fMaximumUnmapBlockDescriptorCount	fIOSCSIBlockCommandsDeviceReserved->fMaximumUnmapBlockDescriptorCount
+    #define fMaximumWriteSameLength             fIOSCSIBlockCommandsDeviceReserved->fMaximumWriteSameLength
+    #define fLBPRZ                              fIOSCSIBlockCommandsDeviceReserved->fLBPRZ
+	#define fUnmapAllowed						fIOSCSIBlockCommandsDeviceReserved->fUnmapAllowed
+    #define fUseWriteSame						fIOSCSIBlockCommandsDeviceReserved->fUseWriteSame
 	
 	// The fDeviceIsShared is used to indicate whether this device exists on a Physical
 	// Interconnect that allows multiple initiators to access it.  This is used mainly
@@ -197,6 +209,8 @@
 	virtual void 		CreateStorageServiceNub ( void );
 	virtual bool		DetermineDeviceCharacteristics ( void );
 	void				GetMediumRotationRate ( void );
+	bool				LogicalBlockProvisioningUnmapSupport ( void );
+	void				GetDeviceUnmapCharacteristics ( );
 	
 	// ---- Methods used for controlling the polling thread ----
 	virtual void		ProcessPoll ( void );
@@ -250,6 +264,10 @@
 					  		UInt64					blockCount,
 							void * 					clientData );
 	
+	IOReturn			IssueUnmap (
+							IOBlockStorageDeviceExtent *	extentsList,
+							UInt32							blockDescriptorCount );
+	
 	// ----- Power Management Support ------
 	
 	// We override this method to set our power states and register ourselves
@@ -343,14 +361,57 @@
 	virtual UInt64		ReportMediumBlockSize ( void );
 	virtual UInt64		ReportMediumTotalBlockCount ( void );
 	virtual bool		ReportMediumWriteProtection ( void );
+    
+    // ---- Query method to report the device provision initialization pattern ----
+    IOReturn            ReportProvisioningInitializationPattern (
+                            IOMemoryDescriptor *                    buffer );
 	
 	virtual IOReturn	message ( UInt32 type, IOService * nub, void * arg ) APPLE_KEXT_OVERRIDE;
 	
 	// ---- Called prior to restarting or shutting down ----
 	virtual void systemWillShutdown ( IOOptionBits specifier ) APPLE_KEXT_OVERRIDE;
+ 
+    // ---- Unmap related methods ----
+    // Check to see if we can coalesce the current and the next extent
+    bool		UnmapTryExtentCoalesce (
+							IOBlockStorageDeviceExtent *			mergedExtent,
+							IOBlockStorageDeviceExtent *			currentExtent,
+							IOBlockStorageDeviceExtent *			nextExtent );
+    
+    // Add the merged extent to the dispatch list. If required, truncate the
+    // extent.
+    bool		UnmapTruncateAndAccumulate (
+							IOBlockStorageDeviceExtent *			extentDispatchList,
+							UInt32									blockDescriptorCount,
+							UInt32 *								unmapLBACount,
+							IOBlockStorageDeviceExtent *			mergedExtent );
+
+    // Use the write same command to do unmaps on the given extents.
+    IOReturn	WriteSameUnmap (
+							IOBlockStorageDeviceExtent *			extents,
+							UInt32									extentsCount,
+							UInt32									requestBlockSize );
+
+	// Update the extents with the provision status that we got from the device.
+	IOReturn	UpdateLBAProvisionStatus (
+							UInt32 *								extentsCount,
+							IOBlockStorageProvisionDeviceExtent *	extents,
+							IOMemoryDescriptor *					dataBuffer,
+							UInt32									transferLength );
 	
+	bool		IsUnmapAllowed ( );
+	
+	bool		IsUseWriteSame ( );
+
 protected:
 	
+	bool GET_LBA_STATUS (
+						SCSITaskIdentifier			request,
+						IOMemoryDescriptor *		dataBuffer,
+						SCSICmdField8Byte			LOGICAL_BLOCK_ADDRESS,
+						SCSICmdField4Byte			ALLOCATION_LENGTH,
+						SCSICmdField1Byte			CONTROL );
+	
 	virtual bool READ_10 (
 						SCSITaskIdentifier			request,
 						IOMemoryDescriptor *		dataBuffer,
@@ -372,7 +433,7 @@
 						SCSICmdField1Bit 			FUA,
 						SCSICmdField1Bit 			FUA_NV,
 						SCSICmdField4Byte 			LOGICAL_BLOCK_ADDRESS,
-						SCSICmdField5Bit			GROUP_NUMBER,
+						SCSICmdField6Bit			GROUP_NUMBER,
 						SCSICmdField2Byte 			TRANSFER_LENGTH,
 						SCSICmdField1Byte 			CONTROL );
 
@@ -398,7 +459,7 @@
 						SCSICmdField1Bit 			FUA_NV,
 						SCSICmdField4Byte 			LOGICAL_BLOCK_ADDRESS,
 						SCSICmdField4Byte 			TRANSFER_LENGTH,
-						SCSICmdField5Bit			GROUP_NUMBER,
+						SCSICmdField6Bit			GROUP_NUMBER,
 						SCSICmdField1Byte 			CONTROL );
 
 	bool READ_16 (
@@ -411,7 +472,7 @@
 						SCSICmdField1Bit			FUA_NV,
 						SCSICmdField8Byte			LOGICAL_BLOCK_ADDRESS,
 						SCSICmdField4Byte			TRANSFER_LENGTH,
-						SCSICmdField5Bit			GROUP_NUMBER,
+						SCSICmdField6Bit			GROUP_NUMBER,
 						SCSICmdField1Byte			CONTROL );
 	
 	virtual bool READ_CAPACITY (
@@ -429,6 +490,12 @@
 						SCSICmdField4Byte			ALLOCATION_LENGTH,
 						SCSICmdField1Bit 			PMI,
 						SCSICmdField1Byte 			CONTROL );
+    
+    bool REPORT_PROVISIONING_INITIALIZATION_PATTERN (
+                        SCSITaskIdentifier          request,
+                        IOMemoryDescriptor *        dataBuffer,
+                        SCSICmdField4Byte           ALLOCATION_LENGTH,
+                        SCSICmdField1Byte           CONTROL );
 	
 	virtual bool START_STOP_UNIT (
 						SCSITaskIdentifier			request,
@@ -452,7 +519,7 @@
 						SCSICmdField1Bit 			IMMED,
 						SCSICmdField1Bit 			SYNC_NV,
 						SCSICmdField4Byte 			LOGICAL_BLOCK_ADDRESS,
-						SCSICmdField5Bit			GROUP_NUMBER,
+						SCSICmdField6Bit			GROUP_NUMBER,
 						SCSICmdField2Byte 			NUMBER_OF_BLOCKS,
 						SCSICmdField1Byte 			CONTROL );
 
@@ -462,9 +529,19 @@
 						SCSICmdField1Bit			IMMED,
 						SCSICmdField8Byte			LOGICAL_BLOCK_ADDRESS,
 						SCSICmdField4Byte			NUMBER_OF_BLOCKS,
-						SCSICmdField5Bit			GROUP_NUMBER,
+						SCSICmdField6Bit			GROUP_NUMBER,
 						SCSICmdField1Byte			CONTROL );
+	
+	bool UNMAP (
+						SCSITaskIdentifier          request,
+						IOMemoryDescriptor *        dataBuffer,
+						SCSICmdField1Bit            ANCHOR,
+						SCSICmdField6Bit            GROUP_NUMBER,
+						SCSICmdField2Byte           PARAMETER_LIST_LENGTH,
+						SCSICmdField1Byte           CONTROL );
+	
 
+    
 	virtual bool WRITE_10 (
 						SCSITaskIdentifier			request,
 						IOMemoryDescriptor *		dataBuffer,
@@ -487,7 +564,7 @@
 						SCSICmdField1Bit 			FUA,
 						SCSICmdField1Bit 			FUA_NV,
 						SCSICmdField4Byte 			LOGICAL_BLOCK_ADDRESS,
-						SCSICmdField5Bit			GROUP_NUMBER,
+						SCSICmdField6Bit			GROUP_NUMBER,
 						SCSICmdField2Byte 			TRANSFER_LENGTH,
 						SCSICmdField1Byte 			CONTROL );
 
@@ -513,7 +590,7 @@
 						SCSICmdField1Bit 			FUA,
 						SCSICmdField1Bit 			FUA_NV,
 						SCSICmdField4Byte 			LOGICAL_BLOCK_ADDRESS,
-						SCSICmdField5Bit			GROUP_NUMBER,
+						SCSICmdField6Bit			GROUP_NUMBER,
 						SCSICmdField4Byte 			TRANSFER_LENGTH,
 						SCSICmdField1Byte 			CONTROL );
 
@@ -527,12 +604,37 @@
 						SCSICmdField1Bit			FUA_NV,
 						SCSICmdField8Byte			LOGICAL_BLOCK_ADDRESS,
 						SCSICmdField4Byte			TRANSFER_LENGTH,
-						SCSICmdField5Bit			GROUP_NUMBER,
+						SCSICmdField6Bit			GROUP_NUMBER,
 						SCSICmdField1Byte			CONTROL );	
 	
-	/* Added with 10.2 */	
+    bool WRITE_SAME_10 (
+                        SCSITaskIdentifier          request,
+                        IOMemoryDescriptor *        buffer,
+                        UInt32                      requestBlockSize,
+                        SCSICmdField3Bit			WRPROTECT,
+                        SCSICmdField1Bit            ANCHOR,
+                        SCSICmdField1Bit            UNMAP,
+                        SCSICmdField4Byte           startBlock,
+                        SCSICmdField6Bit			GROUP_NUMBER,
+                        SCSICmdField2Byte           blockCount,
+                        SCSICmdField1Byte           CONTROL );
+    
+    bool WRITE_SAME_16 (
+                        SCSITaskIdentifier          request,
+                        IOMemoryDescriptor *        buffer,
+                        UInt32                      requestBlockSize,
+                        SCSICmdField3Bit			WRPROTECT,
+                        SCSICmdField1Bit            ANCHOR,
+                        SCSICmdField1Bit            UNMAP,
+                        SCSICmdField1Bit            NDOB,
+                        SCSICmdField8Byte           startBlock,
+                        SCSICmdField4Byte           blockCount,
+                        SCSICmdField6Bit            GROUP_NUMBER,
+                        SCSICmdField1Byte           CONTROL );
+    
+	/* Added with 10.2 */
 	OSMetaClassDeclareReservedUsed ( IOSCSIBlockCommandsDevice, 1 );
-	
+
 public:
 	
 	virtual IOReturn	PowerDownHandler (	void * 			refCon,
@@ -570,15 +672,33 @@
 							UInt64					blockSize,
 							IOStorageAttributes *	attributes,
 							void * 					clientData );
+
+	OSMetaClassDeclareReservedUsed ( IOSCSIBlockCommandsDevice, 5 );
 	
+	virtual IOReturn Unmap ( IOBlockStorageDeviceExtent *	extents,
+							 UInt32							ExtentsCount );
+    
+    OSMetaClassDeclareReservedUsed ( IOSCSIBlockCommandsDevice, 6 );
+
+    virtual IOReturn WriteSame (
+                            IOMemoryDescriptor *	buffer,
+                            UInt64					startBlock,
+                            UInt64					blockCount,
+                            UInt8                   writeSameOptions,
+                            UInt32                  requestBlockSize );
+	
+	OSMetaClassDeclareReservedUsed ( IOSCSIBlockCommandsDevice, 7 );
+
+	virtual IOReturn GetProvisionStatus ( UInt64									block,
+										  UInt64									nblks,
+										  UInt32 *									extentsCount,
+										  IOBlockStorageProvisionDeviceExtent *		extents );
+
 	
 private:
 	
 #if !TARGET_OS_EMBEDDED
 	// Space reserved for future expansion.
-	OSMetaClassDeclareReservedUnused ( IOSCSIBlockCommandsDevice, 5 );
-	OSMetaClassDeclareReservedUnused ( IOSCSIBlockCommandsDevice, 6 );
-	OSMetaClassDeclareReservedUnused ( IOSCSIBlockCommandsDevice, 7 );
 	OSMetaClassDeclareReservedUnused ( IOSCSIBlockCommandsDevice, 8 );
 	OSMetaClassDeclareReservedUnused ( IOSCSIBlockCommandsDevice, 9 );
 	OSMetaClassDeclareReservedUnused ( IOSCSIBlockCommandsDevice, 10 );
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/scsi/IOSCSIReducedBlockCommandsDevice.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/scsi/IOSCSIReducedBlockCommandsDevice.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/scsi/IOSCSIReducedBlockCommandsDevice.h	2015-11-11 08:38:33.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/scsi/IOSCSIReducedBlockCommandsDevice.h	2016-06-03 23:14:33.000000000 +0200
@@ -530,7 +530,7 @@
 	/*!
 	@function ReportEjectability
 	@abstract Reports whether or not the media is ejectable.
-	@discussion Called by IOBlockStorageDevice subclasses to determine wether or not the media is ejectable.
+	@discussion Called by IOBlockStorageDevice subclasses to determine whether or not the media is ejectable.
 	@param isEjectable a valid pointer to a bool in which the ejectability of the media is to be stored.
 	@result A valid IOReturn value.
 	*/
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/scsi/SCSICmds_INQUIRY_Definitions.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/scsi/SCSICmds_INQUIRY_Definitions.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/scsi/SCSICmds_INQUIRY_Definitions.h	2015-08-27 04:10:56.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/scsi/SCSICmds_INQUIRY_Definitions.h	2016-06-03 23:14:33.000000000 +0200
@@ -643,6 +643,12 @@
 Page Code 83h.
 @constant kINQUIRY_Page89_PageCode
 Page Code 89h.
+@constant kINQUIRY_PageB0_PageCode
+Page Code B0h.
+@constant kINQUIRY_PageB1_PageCode
+Page Code B1h.
+@constant kINQUIRY_PageB2_PageCode
+Page Code B2h.
 */
 enum
 {
@@ -650,7 +656,9 @@
 	kINQUIRY_Page80_PageCode				= 0x80,
 	kINQUIRY_Page83_PageCode				= 0x83,
 	kINQUIRY_Page89_PageCode				= 0x89,
-	kINQUIRY_PageB1_PageCode				= 0xB1
+	kINQUIRY_PageB0_PageCode				= 0xB0,
+	kINQUIRY_PageB1_PageCode				= 0xB1,
+	kINQUIRY_PageB2_PageCode				= 0xB2
 };	
 
 
@@ -977,7 +985,7 @@
 /*!
 @struct SCSICmd_INQUIRY_Page89_Data
 @discussion INQUIRY Page 89h data as defined in the SAT 1.0
-specification. This section contians all structures and
+specification. This section contains all structures and
 definitions used by the INQUIRY command in response to a request
 for page 89h - ATA information VPD Page.
 */
@@ -996,11 +1004,44 @@
 	UInt8		IDENTIFY_DATA[512];
 } SCSICmd_INQUIRY_Page89_Data;
 
+#pragma pack(push, 1)
+
+/*!
+ @struct SCSICmd_INQUIRY_PageB0_Data
+ @discussion INQUIRY Page B0h data as defined in the SBC
+ specification. This section contains all structures and
+ definitions used by the INQUIRY command in response to a request
+ for page B0h - Block Limits VPD Page.
+ */
+typedef struct SCSICmd_INQUIRY_PageB0_Data
+{
+	UInt8 		PERIPHERAL_DEVICE_TYPE;					// 7-5 = Qualifier. 4-0 = Device type.
+	UInt8 		PAGE_CODE;								// Must be equal to B0h
+	UInt16 		PAGE_LENGTH;							// Must be equal to 3Ch
+	UInt8 		WSNZ;									// 0 = WSNZ, 7-1 = Reserved.
+	UInt8 		MAXIMUM_COMPARE_AND_WRITE_LENGTH;
+	UInt16 		OPTIMAL_TRANSFER_LENGTH_GRANULARITY;
+	UInt32		MAXIMUM_TRANSFER_LENGTH;
+	UInt32 		OPTIMAL_TRANSFER_LENGTH;
+	UInt32 		MAXIMUM_PREFETCH_LENGTH;
+	UInt32 		MAXIMUM_UNMAP_LBA_COUNT;
+	UInt32 		MAXIMUM_UNMAP_BLOCK_DESCRIPTOR_COUNT;
+	UInt32 		OPTIMAL_UNMAP_GRANULARITY;
+	UInt32 		UNMAP_GRANULARITY_ALIGNMENT;
+	UInt64 		MAXIMUM_WRITE_SAME_LENGTH;
+	UInt32		MAXIMUM_ATOMIC_TRANSFER_LENGTH;
+	UInt32		ATOMIC_ALIGNMENT;
+	UInt32		ATOMIC_TRANSFER_LENGTH_GRANULARITY;
+	UInt32		MAXIMUM_ATOMIC_TRANSFER_LENGTH_WITH_ATOMIC_BOUNDARY;
+	UInt32		MAXIMUM_ATOMIC_BOUNDARY_SIZE;
+} SCSICmd_INQUIRY_PageB0_Data;
+
+#pragma pack(pop)
 
 /*!
 @struct SCSICmd_INQUIRY_PageB1_Data
 @discussion INQUIRY Page B1h data as defined in the SBC 
-specification. This section contians all structures and
+specification. This section contains all structures and
 definitions used by the INQUIRY command in response to a request
 for page B1h - Block Device Characteristics VPD Page.
 */
@@ -1019,6 +1060,35 @@
 	kINQUIRY_PageB1_Page_Length	= 0x3C
 };
 
+#pragma pack(push, 1)
+
+/*!
+ @struct SCSICmd_INQUIRY_PageB2_Data
+ @discussion INQUIRY Page B2h data as defined in the SBC
+ specification. This section contains all structures and
+ definitions used by the INQUIRY command in response to a request
+ for page B2h - Logical Block Provisioning VPD Page.
+ */
+typedef struct SCSICmd_INQUIRY_PageB2_Data
+{
+	UInt8 		PERIPHERAL_DEVICE_TYPE;			// 7-5 = Qualifier. 4-0 = Device type.
+	UInt8 		PAGE_CODE;						// Must be equal to B2h.
+	UInt16 		PAGE_LENGTH;					// Must be n-3.
+	UInt8 		THRESHOLD_EXPONENT;
+	UInt8 		LBP_FLAGS;						// 7 = LBPU, 6 = LBPWS, 5 = LBPWS10,
+												// 4-2 = LBPRZ, 1 = ANC_SUP, 0 = DP.
+	UInt8 		MINIMUM_PERCENTAGE;				// 7-3 = MINIMUM PERCENTAGE,
+												// 2-0 = PROVISIONING TYPE.
+	UInt8		THRESHOLD_PERCENTAGE;
+} SCSICmd_INQUIRY_PageB2_Data;
+
+typedef struct SCSICmd_INQUIRY_PageB2_Provisioning_Group_Descriptor
+{
+	UInt8	DESIGNATION_DESCRIPTOR[20];
+	UInt8	RESERVED[18];
+} SCSICmd_INQUIRY_PageB2_Provisioning_Group_Descriptor;
+
+#pragma pack(pop)
 
 /*!
 @define kIOPropertySATVendorIdentification
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/scsi/SCSICommandOperationCodes.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/scsi/SCSICommandOperationCodes.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/scsi/SCSICommandOperationCodes.h	2015-08-27 04:10:56.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/scsi/SCSICommandOperationCodes.h	2016-06-03 23:14:33.000000000 +0200
@@ -170,7 +170,7 @@
     kSCSICmd_REPAIR_TRACK                   = 0x58,
     kSCSICmd_REPORT_DEVICE_IDENTIFIER    	= 0xA3,
     kSCSICmd_REPORT_KEY                     = 0xA4,
-    kSCSICmd_REPORT_LUNS                    = 0xA0, 
+    kSCSICmd_REPORT_LUNS                    = 0xA0,
     kSCSICmd_REQUEST_SENSE                  = 0x03,
     kSCSICmd_RESERVE_6                      = 0x16,
     kSCSICmd_RESERVE_10                     = 0x56,
@@ -207,7 +207,8 @@
     kSCSICmd_SYNCHRONIZE_CACHE              = 0x35,
     kSCSICmd_SYNCHRONIZE_CACHE_16           = 0x91,
     kSCSICmd_TEST_UNIT_READY                = 0x00,
-	kSCSICmd_UPDATE_BLOCK					= 0x3D,
+    kSCSICmd_UPDATE_BLOCK					= 0x3D,
+    kSCSICmd_UNMAP                          = 0x42,
     kSCSICmd_VERIFY_10                      = 0x2F,
     kSCSICmd_VERIFY_12                      = 0xAF,
     kSCSICmd_VERIFY_16                      = 0x8F,
@@ -254,6 +255,7 @@
 	kSCSIServiceAction_REPORT_ALIASES								= 0x0B,
 	kSCSIServiceAction_REPORT_DEVICE_IDENTIFIER						= 0x05,
 	kSCSIServiceAction_REPORT_PRIORITY								= 0x0E,
+	kSCSIServiceAction_REPORT_PROVISIONING_INITIALIZATION_PATTERN   = 0x1D,
 	kSCSIServiceAction_REPORT_SUPPORTED_OPERATION_CODES				= 0x0C,
 	kSCSIServiceAction_REPORT_SUPPORTED_TASK_MANAGEMENT_FUNCTIONS	= 0x0D,
 	kSCSIServiceAction_REPORT_TARGET_PORT_GROUPS					= 0x0A
@@ -271,8 +273,9 @@
 /* Service Action Definitions for the SERVICE ACTION IN (9Eh) command */
 enum
 {
+	kSCSIServiceAction_GET_LBA_STATUS       = 0x12,
 	kSCSIServiceAction_READ_CAPACITY_16		= 0x10,
-	kSCSIServiceAction_READ_LONG_16			= 0x11	
+	kSCSIServiceAction_READ_LONG_16			= 0x11,
 };
 
 /* Service Action Definitions for the SERVICE ACTION OUT (9Fh) command */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/skywalk/IOSkywalkSupport.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/skywalk/IOSkywalkSupport.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/skywalk/IOSkywalkSupport.h	1970-01-01 01:00:00.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/skywalk/IOSkywalkSupport.h	2016-06-03 22:55:03.000000000 +0200
@@ -0,0 +1,81 @@
+/*
+ * Copyright (c) 2015-2016 Apple, Inc. All rights reserved.
+ *
+ * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
+ * 
+ * This file contains Original Code and/or Modifications of Original Code
+ * as defined in and that are subject to the Apple Public Source License
+ * Version 2.0 (the 'License'). You may not use this file except in
+ * compliance with the License. The rights granted to you under the License
+ * may not be used to create, or enable the creation or redistribution of,
+ * unlawful or unlicensed copies of an Apple operating system, or to
+ * circumvent, violate, or enable the circumvention or violation of, any
+ * terms of an Apple operating system software license agreement.
+ * 
+ * Please obtain a copy of the License at
+ * http://www.opensource.apple.com/apsl/ and read it before using this file.
+ * 
+ * The Original Code and all software distributed under the License are
+ * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
+ * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
+ * INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
+ * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
+ * Please see the License for the specific language governing rights and
+ * limitations under the License.
+ * 
+ * @APPLE_OSREFERENCE_LICENSE_HEADER_END@
+ */
+#ifndef __IOSKYWALKSUPPORT_H
+#define __IOSKYWALKSUPPORT_H
+
+#include <sys/cdefs.h>
+
+extern int sk_verbose;
+
+__BEGIN_DECLS
+
+#ifdef __cplusplus
+class IOMemoryDescriptor;
+class IOMemoryMap;
+
+typedef IOMemoryDescriptor *        IOSKMemoryRef;
+typedef IOMemoryMap *               IOSKMemoryMapRef;
+#else
+typedef struct IOMemoryDescriptor * IOSKMemoryRef;
+typedef struct IOMemoryMap *        IOSKMemoryMapRef;
+#endif
+
+typedef IOSKMemoryRef   IOSKMemoryArrayRef;
+typedef IOSKMemoryRef   IOSKMemoryBufferRef;
+typedef IOSKMemoryRef   IOSKMemoryDescriptor;
+
+typedef struct
+{
+    boolean_t writable;
+    boolean_t purgeable;
+} IOSKMemoryBufferSpec;
+
+IOSKMemoryBufferRef IOSKMemoryBufferCreate( mach_vm_size_t capacity,
+                                            const IOSKMemoryBufferSpec * spec,
+                                            mach_vm_address_t * kvaddr );
+
+IOSKMemoryArrayRef  IOSKMemoryArrayCreate( const IOSKMemoryRef refs[],
+                                           uint32_t count );
+
+void                IOSKMemoryDestroy( IOSKMemoryRef reference );
+
+IOSKMemoryMapRef    IOSKMemoryMapToTask( IOSKMemoryRef reference,
+                                         task_t intoTask,
+                                         mach_vm_address_t * mapAddr,
+                                         mach_vm_size_t * mapSize );
+
+void                IOSKMemoryMapDestroy( IOSKMemoryMapRef reference );
+
+IOSKMemoryDescriptor IOSKMemoryGetIOMD( IOSKMemoryRef reference );
+
+int                 IOSKMemoryReclaim( IOSKMemoryRef reference );
+int                 IOSKMemoryDiscard( IOSKMemoryRef reference );
+
+__END_DECLS
+
+#endif /* __IOSKYWALKSUPPORT_H */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/storage/IOAppleLabelScheme.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/storage/IOAppleLabelScheme.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/storage/IOAppleLabelScheme.h	2015-08-27 02:08:41.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/storage/IOAppleLabelScheme.h	2016-06-03 23:05:25.000000000 +0200
@@ -98,7 +98,7 @@
      * Free all of this object's outstanding resources.
      */
 
-    virtual void free(void);
+    virtual void free(void) APPLE_KEXT_OVERRIDE;
 
     /*
      * Scan the provider media for an Apple label scheme.
@@ -148,25 +148,25 @@
      * Initialize this object's minimal state.
      */
 
-    virtual bool init(OSDictionary * properties = 0);
+    virtual bool init(OSDictionary * properties = 0) APPLE_KEXT_OVERRIDE;
 
     /*
      * Determine whether the provider media contains an Apple label scheme.
      */
 
-    virtual IOService * probe(IOService * provider, SInt32 * score);
+    virtual IOService * probe(IOService * provider, SInt32 * score) APPLE_KEXT_OVERRIDE;
 
     /*
      * Publish the new media object which represents our content.
      */
 
-    virtual bool start(IOService * provider);
+    virtual bool start(IOService * provider) APPLE_KEXT_OVERRIDE;
 
     /*
      * Clean up after the media object we published before terminating.
      */
 
-    virtual void stop(IOService * provider);
+    virtual void stop(IOService * provider) APPLE_KEXT_OVERRIDE;
 
     OSMetaClassDeclareReservedUnused(IOAppleLabelScheme,  0);
     OSMetaClassDeclareReservedUnused(IOAppleLabelScheme,  1);
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/storage/IOApplePartitionScheme.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/storage/IOApplePartitionScheme.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/storage/IOApplePartitionScheme.h	2015-08-27 02:08:41.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/storage/IOApplePartitionScheme.h	2016-06-03 23:05:25.000000000 +0200
@@ -147,7 +147,7 @@
      * Free all of this object's outstanding resources.
      */
 
-    virtual void free(void);
+    virtual void free(void) APPLE_KEXT_OVERRIDE;
 
     /*
      * Scan the provider media for an Apple partition map.  Returns the set
@@ -202,31 +202,31 @@
      * Initialize this object's minimal state.
      */
 
-    virtual bool init(OSDictionary * properties = 0);
+    virtual bool init(OSDictionary * properties = 0) APPLE_KEXT_OVERRIDE;
 
     /*
      * Determine whether the provider media contains an Apple partition map.
      */
 
-    virtual IOService * probe(IOService * provider, SInt32 * score);
+    virtual IOService * probe(IOService * provider, SInt32 * score) APPLE_KEXT_OVERRIDE;
 
     /*
      * Publish the new media objects which represent our partitions.
      */
 
-    virtual bool start(IOService * provider);
+    virtual bool start(IOService * provider) APPLE_KEXT_OVERRIDE;
 
     /*
      * Clean up after the media objects we published before terminating.
      */
 
-    virtual void stop(IOService * provider);
+    virtual void stop(IOService * provider) APPLE_KEXT_OVERRIDE;
 
     /*
      * Request that the provider media be re-scanned for partitions.
      */
 
-    virtual IOReturn requestProbe(IOOptionBits options);
+    virtual IOReturn requestProbe(IOOptionBits options) APPLE_KEXT_OVERRIDE;
 
     OSMetaClassDeclareReservedUnused(IOApplePartitionScheme,  0);
     OSMetaClassDeclareReservedUnused(IOApplePartitionScheme,  1);
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/storage/IOBlockStorageDevice.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/storage/IOBlockStorageDevice.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/storage/IOBlockStorageDevice.h	2015-08-27 02:08:41.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/storage/IOBlockStorageDevice.h	2016-06-03 23:05:25.000000000 +0200
@@ -111,6 +111,27 @@
 };
 
 /*!
+ * @struct IOBlockStorageProvisionDeviceExtent
+ * @discussion
+ * Extent for provision status.
+ * @field blockStart
+ * Starting block offset for the operation.
+ * @field blockCount
+ * Size of the operation.
+ * @field provisionType
+ * Block provision type, such as mapped, deallocated, or anchared. See
+ * IOStorageProvisionTypes
+ */
+
+struct IOBlockStorageProvisionDeviceExtent
+{
+    UInt64 blockStart;
+    UInt64 blockCount;
+    UInt8  provisionType;
+    UInt8  reserved[7];
+};
+
+/*!
  * @class
  * IOBlockStorageDevice
  * @abstract
@@ -159,11 +180,11 @@
      * 
      * This function is usually not overridden by developers.
      */    
-    virtual bool	init(OSDictionary * properties);
+    virtual bool	init(OSDictionary * properties) APPLE_KEXT_OVERRIDE;
 
-    virtual OSObject *	getProperty(const OSSymbol * key) const;
+    virtual OSObject *	getProperty(const OSSymbol * key) const APPLE_KEXT_OVERRIDE;
 
-    virtual IOReturn	setProperties(OSObject * properties);
+    virtual IOReturn	setProperties(OSObject * properties) APPLE_KEXT_OVERRIDE;
 
     /* --- A subclass must implement the the following methods: --- */
 
@@ -437,10 +458,35 @@
                                       UInt64                      nblks,
                                       IOStorageSynchronizeOptions options = 0); /* 10.11.0 */
 
+    /*!
+     * @function doGetProvisionStatus
+     * @discussion
+     * Get device block provision status
+     * @param block
+     * Block offset of logical extent on the device.
+     * @param nblks
+     * Blocks count of logical extent on the device.
+     * @param extentsCount
+     * Number of extents allocated in extents. On return, this parameter indicate number
+     * of provision extents returned.
+     * @param extents
+     * List of provision extents, block based. See IOStorageProvisionDeviceExtents.
+     * @param options
+     * Options for get provision status. See IOStorageGetProvisionStatusOptions.
+     * @result
+     * Returns the status of the getProvisionStatus.
+     */
+
+    virtual IOReturn doGetProvisionStatus(UInt64                                block,
+                                          UInt64                                nblks,
+                                          UInt32 *                              extentsCount,
+                                          IOBlockStorageProvisionDeviceExtent * extents,
+                                          IOStorageGetProvisionStatusOptions    options = 0); /* 10.12.0 */
+
     OSMetaClassDeclareReservedUsed(IOBlockStorageDevice,  0);
     OSMetaClassDeclareReservedUsed(IOBlockStorageDevice,  1);
     OSMetaClassDeclareReservedUsed(IOBlockStorageDevice,  2);
-    OSMetaClassDeclareReservedUnused(IOBlockStorageDevice,  3);
+    OSMetaClassDeclareReservedUsed(IOBlockStorageDevice,  3);
     OSMetaClassDeclareReservedUnused(IOBlockStorageDevice,  4);
     OSMetaClassDeclareReservedUnused(IOBlockStorageDevice,  5);
     OSMetaClassDeclareReservedUnused(IOBlockStorageDevice,  6);
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/storage/IOBlockStorageDriver.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/storage/IOBlockStorageDriver.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/storage/IOBlockStorageDriver.h	2015-08-27 02:08:41.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/storage/IOBlockStorageDriver.h	2016-06-03 23:05:25.000000000 +0200
@@ -456,7 +456,7 @@
      * This method's implementation is not typically overridden.
      */
 
-    void free();
+    void free() APPLE_KEXT_OVERRIDE;
 
     /*!
      * @function handleOpen
@@ -486,7 +486,7 @@
 
     virtual bool handleOpen(IOService *  client,
                             IOOptionBits options,
-                            void *       access);
+                            void *       access) APPLE_KEXT_OVERRIDE;
 
     /*!
      * @function handleIsOpen
@@ -502,7 +502,7 @@
      * Returns true if the client was (or clients were) open, false otherwise.
      */
 
-    virtual bool handleIsOpen(const IOService * client) const;
+    virtual bool handleIsOpen(const IOService * client) const APPLE_KEXT_OVERRIDE;
 
     /*!
      * @function handleClose
@@ -516,7 +516,7 @@
      * Options for the close.  Set to zero.
      */
 
-    virtual void handleClose(IOService * client, IOOptionBits options);
+    virtual void handleClose(IOService * client, IOOptionBits options) APPLE_KEXT_OVERRIDE;
 
     /*!
      * @function addToBytesTransferred
@@ -707,7 +707,7 @@
      * This method's implementation is not typically overridden.
      */
 
-    virtual bool init(OSDictionary * properties = 0);
+    virtual bool init(OSDictionary * properties = 0) APPLE_KEXT_OVERRIDE;
 
     /*
      * This method is called once we have been attached to the provider object.
@@ -715,7 +715,7 @@
      * This method's implementation is not typically overridden.
      */
 
-    virtual bool start(IOService * provider);
+    virtual bool start(IOService * provider) APPLE_KEXT_OVERRIDE;
 
     /*
      * This method is called before we are detached from the provider object.
@@ -723,11 +723,11 @@
      * This method's implementation is not typically overridden.
      */
 
-    virtual void stop(IOService * provider);
+    virtual void stop(IOService * provider) APPLE_KEXT_OVERRIDE;
 
     virtual bool didTerminate(IOService *  provider,
                               IOOptionBits options,
-                              bool *       defer);
+                              bool *       defer) APPLE_KEXT_OVERRIDE;
 
 #ifdef __x86_64__
     virtual bool yield(IOService *  provider,
@@ -771,7 +771,7 @@
                       UInt64                byteStart,
                       IOMemoryDescriptor *  buffer,
                       IOStorageAttributes * attributes,
-                      IOStorageCompletion * completion);
+                      IOStorageCompletion * completion) APPLE_KEXT_OVERRIDE;
 
     /*!
      * @function write
@@ -809,7 +809,7 @@
                        UInt64                byteStart,
                        IOMemoryDescriptor *  buffer,
                        IOStorageAttributes * attributes,
-                       IOStorageCompletion * completion);
+                       IOStorageCompletion * completion) APPLE_KEXT_OVERRIDE;
 
     /*!
      * @function synchronize
@@ -830,7 +830,7 @@
     virtual IOReturn synchronize(IOService *                 client,
                                  UInt64                      byteStart,
                                  UInt64                      byteCount,
-                                 IOStorageSynchronizeOptions options = 0);
+                                 IOStorageSynchronizeOptions options = 0) APPLE_KEXT_OVERRIDE;
 
     /*!
      * @function unmap
@@ -852,7 +852,33 @@
     virtual IOReturn unmap(IOService *           client,
                            IOStorageExtent *     extents,
                            UInt32                extentsCount,
-                           IOStorageUnmapOptions options = 0);
+                           IOStorageUnmapOptions options = 0) APPLE_KEXT_OVERRIDE;
+
+    /*!
+     * @function getProvisionStatus
+     * @discussion
+     * Get device block provision status
+     * @param client
+     * Client requesting the synchronization.
+     * @param byteStart
+     * Byte offset of logical extent on the device.
+     * @param byteCount
+     * Byte length of logical extent on the device, 0 mean the entire remaining space.
+     * @param extentsCount
+     * Number of extents allocated in extents. On return, this parameter indicate number
+     * of provision extents returned.
+     * @param extents
+     * List of provision extents. See IOStorageProvisionExtents.
+     * @result
+     * Returns the status of the getProvisionStatus.
+     */
+
+    virtual IOReturn getProvisionStatus(IOService *                           client,
+                                        UInt64                                byteStart,
+                                        UInt64                                byteCount,
+                                        UInt32 *                              extentsCount,
+                                        IOStorageProvisionExtent *            extents,
+                                        IOStorageGetProvisionStatusOptions    options = 0) APPLE_KEXT_OVERRIDE;
 
     /*!
      * @function lockPhysicalExtents
@@ -865,7 +891,7 @@
      * Returns true if the lock was successful, false otherwise.
      */
 
-    virtual bool lockPhysicalExtents(IOService * client);
+    virtual bool lockPhysicalExtents(IOService * client) APPLE_KEXT_OVERRIDE;
 
     /*!
      * @function copyPhysicalExtent
@@ -888,7 +914,7 @@
 
     virtual IOStorage * copyPhysicalExtent(IOService * client,
                                            UInt64 *    byteStart,
-                                           UInt64 *    byteCount);
+                                           UInt64 *    byteCount) APPLE_KEXT_OVERRIDE;
 
     /*!
      * @function unlockPhysicalExtents
@@ -899,7 +925,7 @@
      * Client requesting the operation.
      */
 
-    virtual void unlockPhysicalExtents(IOService * client);
+    virtual void unlockPhysicalExtents(IOService * client) APPLE_KEXT_OVERRIDE;
 
     /*!
      * @function setPriority
@@ -921,7 +947,7 @@
     virtual IOReturn setPriority(IOService *       client,
                                  IOStorageExtent * extents,
                                  UInt32            extentsCount,
-                                 IOStoragePriority priority);
+                                 IOStoragePriority priority) APPLE_KEXT_OVERRIDE;
 
     /*!
      * @function ejectMedia
@@ -1066,7 +1092,7 @@
      * applicable, that it was successful.
      */
 
-    virtual IOReturn message(UInt32 type, IOService * provider, void * argument);
+    virtual IOReturn message(UInt32 type, IOService * provider, void * argument) APPLE_KEXT_OVERRIDE;
 
     /*
      * Obtain this object's provider.  We override the superclass's method to
@@ -1074,7 +1100,7 @@
      * This method serves simply as a convenience to subclass developers.
      */
 
-    virtual IOBlockStorageDevice * getProvider() const;
+    virtual IOBlockStorageDevice * getProvider() const APPLE_KEXT_OVERRIDE;
 
 protected:
 
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/storage/IOFDiskPartitionScheme.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/storage/IOFDiskPartitionScheme.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/storage/IOFDiskPartitionScheme.h	2015-08-27 02:08:41.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/storage/IOFDiskPartitionScheme.h	2016-06-03 23:05:25.000000000 +0200
@@ -130,7 +130,7 @@
      * Free all of this object's outstanding resources.
      */
 
-    virtual void free(void);
+    virtual void free(void) APPLE_KEXT_OVERRIDE;
 
     /*
      * Scan the provider media for an FDisk partition map.  Returns the set
@@ -196,31 +196,31 @@
      * Initialize this object's minimal state.
      */
 
-    virtual bool init(OSDictionary * properties = 0);
+    virtual bool init(OSDictionary * properties = 0) APPLE_KEXT_OVERRIDE;
 
     /*
      * Determine whether the provider media contains an FDisk partition map.
      */
 
-    virtual IOService * probe(IOService * provider, SInt32 * score);
+    virtual IOService * probe(IOService * provider, SInt32 * score) APPLE_KEXT_OVERRIDE;
 
     /*
      * Publish the new media objects which represent our partitions.
      */
 
-    virtual bool start(IOService * provider);
+    virtual bool start(IOService * provider) APPLE_KEXT_OVERRIDE;
 
     /*
      * Clean up after the media objects we published before terminating.
      */
 
-    virtual void stop(IOService * provider);
+    virtual void stop(IOService * provider) APPLE_KEXT_OVERRIDE;
 
     /*
      * Request that the provider media be re-scanned for partitions.
      */
 
-    virtual IOReturn requestProbe(IOOptionBits options);
+    virtual IOReturn requestProbe(IOOptionBits options) APPLE_KEXT_OVERRIDE;
 
     OSMetaClassDeclareReservedUnused(IOFDiskPartitionScheme,  0);
     OSMetaClassDeclareReservedUnused(IOFDiskPartitionScheme,  1);
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/storage/IOFilterScheme.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/storage/IOFilterScheme.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/storage/IOFilterScheme.h	2015-08-27 02:08:41.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/storage/IOFilterScheme.h	2016-06-03 23:05:25.000000000 +0200
@@ -104,7 +104,7 @@
 
     virtual bool handleOpen(IOService *  client,
                             IOOptionBits options,
-                            void *       access);
+                            void *       access) APPLE_KEXT_OVERRIDE;
 
     /*!
      * @function handleIsOpen
@@ -120,7 +120,7 @@
      * Returns true if the client was (or clients were) open, false otherwise.
      */
 
-    virtual bool handleIsOpen(const IOService * client) const;
+    virtual bool handleIsOpen(const IOService * client) const APPLE_KEXT_OVERRIDE;
 
     /*!
      * @function handleClose
@@ -134,7 +134,7 @@
      * Options for the close.  Set to zero.
      */
 
-    virtual void handleClose(IOService * client, IOOptionBits options);
+    virtual void handleClose(IOService * client, IOOptionBits options) APPLE_KEXT_OVERRIDE;
 
 public:
 
@@ -174,7 +174,7 @@
                       UInt64                byteStart,
                       IOMemoryDescriptor *  buffer,
                       IOStorageAttributes * attributes,
-                      IOStorageCompletion * completion);
+                      IOStorageCompletion * completion) APPLE_KEXT_OVERRIDE;
 
     /*!
      * @function write
@@ -209,7 +209,7 @@
                        UInt64                byteStart,
                        IOMemoryDescriptor *  buffer,
                        IOStorageAttributes * attributes,
-                       IOStorageCompletion * completion);
+                       IOStorageCompletion * completion) APPLE_KEXT_OVERRIDE;
 
     /*!
      * @function synchronize
@@ -230,7 +230,7 @@
     virtual IOReturn synchronize(IOService *                 client,
                                  UInt64                      byteStart,
                                  UInt64                      byteCount,
-                                 IOStorageSynchronizeOptions options = 0);
+                                 IOStorageSynchronizeOptions options = 0) APPLE_KEXT_OVERRIDE;
 
     /*!
      * @function unmap
@@ -252,7 +252,33 @@
     virtual IOReturn unmap(IOService *           client,
                            IOStorageExtent *     extents,
                            UInt32                extentsCount,
-                           IOStorageUnmapOptions options = 0);
+                           IOStorageUnmapOptions options = 0) APPLE_KEXT_OVERRIDE;
+
+    /*!
+     * @function getProvisionStatus
+     * @discussion
+     * Get device block provision status
+     * @param client
+     * Client requesting the synchronization.
+     * @param byteStart
+     * Byte offset of logical extent on the device.
+     * @param byteCount
+     * Byte length of logical extent on the device, 0 mean the entire remaining space.
+     * @param extentsCount
+     * Number of extents allocated in extents. On return, this parameter indicate number
+     * of provision extents returned.
+     * @param extents
+     * List of provision extents. See IOStorageProvisionExtents.
+     * @result
+     * Returns the status of the getProvisionStatus.
+     */
+
+    virtual IOReturn getProvisionStatus(IOService *                         client,
+                                        UInt64                              byteStart,
+                                        UInt64                              byteCount,
+                                        UInt32 *                            extentsCount,
+                                        IOStorageProvisionExtent *          extents,
+                                        IOStorageGetProvisionStatusOptions  options = 0) APPLE_KEXT_OVERRIDE;
 
     /*!
      * @function lockPhysicalExtents
@@ -265,7 +291,7 @@
      * Returns true if the lock was successful, false otherwise.
      */
 
-    virtual bool lockPhysicalExtents(IOService * client);
+    virtual bool lockPhysicalExtents(IOService * client) APPLE_KEXT_OVERRIDE;
 
     /*!
      * @function copyPhysicalExtent
@@ -288,7 +314,7 @@
 
     virtual IOStorage * copyPhysicalExtent(IOService * client,
                                            UInt64 *    byteStart,
-                                           UInt64 *    byteCount);
+                                           UInt64 *    byteCount) APPLE_KEXT_OVERRIDE;
 
     /*!
      * @function unlockPhysicalExtents
@@ -299,7 +325,7 @@
      * Client requesting the operation.
      */
 
-    virtual void unlockPhysicalExtents(IOService * client);
+    virtual void unlockPhysicalExtents(IOService * client) APPLE_KEXT_OVERRIDE;
 
     /*!
      * @function setPriority
@@ -321,7 +347,7 @@
     virtual IOReturn setPriority(IOService *       client,
                                  IOStorageExtent * extents,
                                  UInt32            extentsCount,
-                                 IOStoragePriority priority);
+                                 IOStoragePriority priority) APPLE_KEXT_OVERRIDE;
 
     /*
      * Obtain this object's provider.  We override the superclass's method
@@ -329,7 +355,7 @@
      * method serves simply as a convenience to subclass developers.
      */
 
-    virtual IOMedia * getProvider() const;
+    virtual IOMedia * getProvider() const APPLE_KEXT_OVERRIDE;
 
     OSMetaClassDeclareReservedUnused(IOFilterScheme,  0);
     OSMetaClassDeclareReservedUnused(IOFilterScheme,  1);
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/storage/IOGUIDPartitionScheme.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/storage/IOGUIDPartitionScheme.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/storage/IOGUIDPartitionScheme.h	2015-08-27 02:08:41.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/storage/IOGUIDPartitionScheme.h	2016-06-03 23:05:25.000000000 +0200
@@ -119,7 +119,7 @@
      * Free all of this object's outstanding resources.
      */
 
-    virtual void free(void);
+    virtual void free(void) APPLE_KEXT_OVERRIDE;
 
     /*
      * Scan the provider media for a GUID partition map.    Returns the set
@@ -175,31 +175,31 @@
      * Initialize this object's minimal state.
      */
 
-    virtual bool init(OSDictionary * properties = 0);
+    virtual bool init(OSDictionary * properties = 0) APPLE_KEXT_OVERRIDE;
 
     /*
      * Determine whether the provider media contains a GUID partition map.
      */
 
-    virtual IOService * probe(IOService * provider, SInt32 * score);
+    virtual IOService * probe(IOService * provider, SInt32 * score) APPLE_KEXT_OVERRIDE;
 
     /*
      * Publish the new media objects which represent our partitions.
      */
 
-    virtual bool start(IOService * provider);
+    virtual bool start(IOService * provider) APPLE_KEXT_OVERRIDE;
 
     /*
      * Clean up after the media objects we published before terminating.
      */
 
-    virtual void stop(IOService * provider);
+    virtual void stop(IOService * provider) APPLE_KEXT_OVERRIDE;
 
     /*
      * Request that the provider media be re-scanned for partitions.
      */
 
-    virtual IOReturn requestProbe(IOOptionBits options);
+    virtual IOReturn requestProbe(IOOptionBits options) APPLE_KEXT_OVERRIDE;
 
     OSMetaClassDeclareReservedUnused(IOGUIDPartitionScheme,  0);
     OSMetaClassDeclareReservedUnused(IOGUIDPartitionScheme,  1);
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/storage/IOMedia.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/storage/IOMedia.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/storage/IOMedia.h	2015-08-27 02:08:41.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/storage/IOMedia.h	2016-06-03 23:05:25.000000000 +0200
@@ -287,7 +287,7 @@
      * Free all of this object's outstanding resources.
      */
 
-    virtual void free();
+    virtual void free() APPLE_KEXT_OVERRIDE;
 
     /*!
      * @function handleOpen
@@ -317,7 +317,7 @@
 
     virtual bool handleOpen(IOService *  client,
                             IOOptionBits options,
-                            void *       access);
+                            void *       access) APPLE_KEXT_OVERRIDE;
 
     /*!
      * @function handleIsOpen
@@ -333,7 +333,7 @@
      * Returns true if the client was (or clients were) open, false otherwise.
      */
 
-    virtual bool handleIsOpen(const IOService * client) const;
+    virtual bool handleIsOpen(const IOService * client) const APPLE_KEXT_OVERRIDE;
 
     /*!
      * @function handleClose
@@ -347,7 +347,7 @@
      * Options for the close.  Set to zero.
      */
 
-    virtual void handleClose(IOService * client, IOOptionBits options);
+    virtual void handleClose(IOService * client, IOOptionBits options) APPLE_KEXT_OVERRIDE;
 
 public:
 
@@ -361,7 +361,7 @@
      */
 
     virtual bool attachToChild(IORegistryEntry *       client,
-                               const IORegistryPlane * plane);
+                               const IORegistryPlane * plane) APPLE_KEXT_OVERRIDE;
 
     /*
      * This method is called for each client that loses interest in the
@@ -370,7 +370,7 @@
      */
 
     virtual void detachFromChild(IORegistryEntry *       client,
-                                 const IORegistryPlane * plane);
+                                 const IORegistryPlane * plane) APPLE_KEXT_OVERRIDE;
 
     /*
      * Obtain this object's provider.  We override the superclass's method to
@@ -378,13 +378,13 @@
      * serves simply as a convenience to subclass developers.
      */
 
-    virtual IOStorage * getProvider() const;
+    virtual IOStorage * getProvider() const APPLE_KEXT_OVERRIDE;
 
     /*
      * Compare the properties in the supplied table to this object's properties.
      */
 
-    virtual bool matchPropertyTable(OSDictionary * table, SInt32 * score);
+    virtual bool matchPropertyTable(OSDictionary * table, SInt32 * score) APPLE_KEXT_OVERRIDE;
 
     /*!
      * @function read
@@ -415,7 +415,7 @@
                       UInt64                byteStart,
                       IOMemoryDescriptor *  buffer,
                       IOStorageAttributes * attributes,
-                      IOStorageCompletion * completion);
+                      IOStorageCompletion * completion) APPLE_KEXT_OVERRIDE;
 
     /*!
      * @function write
@@ -446,7 +446,7 @@
                        UInt64                byteStart,
                        IOMemoryDescriptor *  buffer,
                        IOStorageAttributes * attributes,
-                       IOStorageCompletion * completion);
+                       IOStorageCompletion * completion) APPLE_KEXT_OVERRIDE;
 
     /*!
      * @function synchronize
@@ -467,7 +467,7 @@
     virtual IOReturn synchronize(IOService *                 client,
                                  UInt64                      byteStart,
                                  UInt64                      byteCount,
-                                 IOStorageSynchronizeOptions options = 0);
+                                 IOStorageSynchronizeOptions options = 0) APPLE_KEXT_OVERRIDE;
 
     /*!
      * @function unmap
@@ -489,7 +489,33 @@
     virtual IOReturn unmap(IOService *           client,
                            IOStorageExtent *     extents,
                            UInt32                extentsCount,
-                           IOStorageUnmapOptions options = 0);
+                           IOStorageUnmapOptions options = 0) APPLE_KEXT_OVERRIDE;
+
+    /*!
+     * @function getProvisionStatus
+     * @discussion
+     * Get device block provision status
+     * @param client
+     * Client requesting the synchronization.
+     * @param byteStart
+     * Byte offset of logical extent on the device.
+     * @param byteCount
+     * Byte length of logical extent on the device, 0 mean the entire remaining space.
+     * @param extentsCount
+     * Number of extents allocated in extents. On return, this parameter indicate number
+     * of provision extents returned.
+     * @param extents
+     * List of provision extents. See IOStorageProvisionExtents.
+     * @result
+     * Returns the status of the getProvisionStatus.
+     */
+
+    virtual IOReturn getProvisionStatus(IOService *                         client,
+                                        UInt64                              byteStart,
+                                        UInt64                              byteCount,
+                                        UInt32 *                            extentsCount,
+                                        IOStorageProvisionExtent *          extents,
+                                        IOStorageGetProvisionStatusOptions  options = 0) APPLE_KEXT_OVERRIDE;
 
     /*!
      * @function lockPhysicalExtents
@@ -502,7 +528,7 @@
      * Returns true if the lock was successful, false otherwise.
      */
 
-    virtual bool lockPhysicalExtents(IOService * client);
+    virtual bool lockPhysicalExtents(IOService * client) APPLE_KEXT_OVERRIDE;
 
     /*!
      * @function copyPhysicalExtent
@@ -525,7 +551,7 @@
 
     virtual IOStorage * copyPhysicalExtent(IOService * client,
                                            UInt64 *    byteStart,
-                                           UInt64 *    byteCount);
+                                           UInt64 *    byteCount) APPLE_KEXT_OVERRIDE;
 
     /*!
      * @function unlockPhysicalExtents
@@ -536,7 +562,7 @@
      * Client requesting the operation.
      */
 
-    virtual void unlockPhysicalExtents(IOService * client);
+    virtual void unlockPhysicalExtents(IOService * client) APPLE_KEXT_OVERRIDE;
 
     /*!
      * @function setPriority
@@ -558,7 +584,7 @@
     virtual IOReturn setPriority(IOService *       client,
                                  IOStorageExtent * extents,
                                  UInt32            extentsCount,
-                                 IOStoragePriority priority);
+                                 IOStoragePriority priority) APPLE_KEXT_OVERRIDE;
 
     /*!
      * @function getPreferredBlockSize
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/storage/IOMediaBSDClient.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/storage/IOMediaBSDClient.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/storage/IOMediaBSDClient.h	2015-08-27 02:08:41.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/storage/IOMediaBSDClient.h	2016-06-03 23:05:25.000000000 +0200
@@ -83,7 +83,7 @@
      * Free all of this object's outstanding resources.
      */
 
-    virtual void free();
+    virtual void free() APPLE_KEXT_OVERRIDE;
 
 public:
 
@@ -93,25 +93,25 @@
      * method serves simply as a convenience to subclass developers.
      */
 
-    virtual IOMedia * getProvider() const;
+    virtual IOMedia * getProvider() const APPLE_KEXT_OVERRIDE;
 
     /*
      * Initialize this object's minimal state.
      */
 
-    virtual bool init(OSDictionary * properties  = 0);
+    virtual bool init(OSDictionary * properties  = 0) APPLE_KEXT_OVERRIDE;
 
     /*
      * This method is called once we have been attached to the provider object.
      */
 
-    virtual bool start(IOService * provider);
+    virtual bool start(IOService * provider) APPLE_KEXT_OVERRIDE;
 
     /*
      * This method is called when we are to terminate from the provider object.
      */
 
-    virtual bool terminate(IOOptionBits options);
+    virtual bool terminate(IOOptionBits options) APPLE_KEXT_OVERRIDE;
 
     /*
      * Process a foreign ioctl.
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/storage/IOPartitionScheme.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/storage/IOPartitionScheme.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/storage/IOPartitionScheme.h	2015-08-27 02:08:41.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/storage/IOPartitionScheme.h	2016-06-03 23:05:25.000000000 +0200
@@ -123,7 +123,7 @@
      * Free all of this object's outstanding resources.
      */
 
-    virtual void free();
+    virtual void free() APPLE_KEXT_OVERRIDE;
 
     /*!
      * @function handleOpen
@@ -153,7 +153,7 @@
 
     virtual bool handleOpen(IOService *  client,
                             IOOptionBits options,
-                            void *       access);
+                            void *       access) APPLE_KEXT_OVERRIDE;
 
     /*!
      * @function handleIsOpen
@@ -169,7 +169,7 @@
      * Returns true if the client was (or clients were) open, false otherwise.
      */
 
-    virtual bool handleIsOpen(const IOService * client) const;
+    virtual bool handleIsOpen(const IOService * client) const APPLE_KEXT_OVERRIDE;
 
     /*!
      * @function handleClose
@@ -183,7 +183,7 @@
      * Options for the close.  Set to zero.
      */
 
-    virtual void handleClose(IOService * client, IOOptionBits options);
+    virtual void handleClose(IOService * client, IOOptionBits options) APPLE_KEXT_OVERRIDE;
 
     /*
      * Attach the given media object to the device tree plane.
@@ -219,7 +219,7 @@
      * Initialize this object's minimal state.
      */
 
-    virtual bool init(OSDictionary * properties = 0);
+    virtual bool init(OSDictionary * properties = 0) APPLE_KEXT_OVERRIDE;
 
     /*!
      * @function read
@@ -254,7 +254,7 @@
                       UInt64                byteStart,
                       IOMemoryDescriptor *  buffer,
                       IOStorageAttributes * attributes,
-                      IOStorageCompletion * completion);
+                      IOStorageCompletion * completion) APPLE_KEXT_OVERRIDE;
 
     /*!
      * @function write
@@ -289,7 +289,7 @@
                        UInt64                byteStart,
                        IOMemoryDescriptor *  buffer,
                        IOStorageAttributes * attributes,
-                       IOStorageCompletion * completion);
+                       IOStorageCompletion * completion) APPLE_KEXT_OVERRIDE;
 
     /*!
      * @function synchronize
@@ -310,7 +310,7 @@
     virtual IOReturn synchronize(IOService *                 client,
                                  UInt64                      byteStart,
                                  UInt64                      byteCount,
-                                 IOStorageSynchronizeOptions options = 0);
+                                 IOStorageSynchronizeOptions options = 0) APPLE_KEXT_OVERRIDE;
 
     /*!
      * @function unmap
@@ -332,7 +332,33 @@
     virtual IOReturn unmap(IOService *           client,
                            IOStorageExtent *     extents,
                            UInt32                extentsCount,
-                           IOStorageUnmapOptions options = 0);
+                           IOStorageUnmapOptions options = 0) APPLE_KEXT_OVERRIDE;
+
+    /*!
+     * @function getProvisionStatus
+     * @discussion
+     * Get device block provision status
+     * @param client
+     * Client requesting the synchronization.
+     * @param byteStart
+     * Byte offset of logical extent on the device.
+     * @param byteCount
+     * Byte length of logical extent on the device, 0 mean the entire remaining space.
+     * @param extentsCount
+     * Number of extents allocated in extents. On return, this parameter indicate number
+     * of provision extents returned.
+     * @param extents
+     * List of provision extents. See IOStorageProvisionExtents.
+     * @result
+     * Returns the status of the getProvisionStatus.
+     */
+
+    virtual IOReturn getProvisionStatus(IOService *                         client,
+                                        UInt64                              byteStart,
+                                        UInt64                              byteCount,
+                                        UInt32 *                            extentsCount,
+                                        IOStorageProvisionExtent *          extents,
+                                        IOStorageGetProvisionStatusOptions  options = 0) APPLE_KEXT_OVERRIDE;
 
     /*!
      * @function lockPhysicalExtents
@@ -345,7 +371,7 @@
      * Returns true if the lock was successful, false otherwise.
      */
 
-    virtual bool lockPhysicalExtents(IOService * client);
+    virtual bool lockPhysicalExtents(IOService * client) APPLE_KEXT_OVERRIDE;
 
     /*!
      * @function copyPhysicalExtent
@@ -368,7 +394,7 @@
 
     virtual IOStorage * copyPhysicalExtent(IOService * client,
                                            UInt64 *    byteStart,
-                                           UInt64 *    byteCount);
+                                           UInt64 *    byteCount) APPLE_KEXT_OVERRIDE;
 
     /*!
      * @function unlockPhysicalExtents
@@ -379,7 +405,7 @@
      * Client requesting the operation.
      */
 
-    virtual void unlockPhysicalExtents(IOService * client);
+    virtual void unlockPhysicalExtents(IOService * client) APPLE_KEXT_OVERRIDE;
 
     /*!
      * @function setPriority
@@ -401,7 +427,7 @@
     virtual IOReturn setPriority(IOService *       client,
                                  IOStorageExtent * extents,
                                  UInt32            extentsCount,
-                                 IOStoragePriority priority);
+                                 IOStoragePriority priority) APPLE_KEXT_OVERRIDE;
 
     /*
      * Obtain this object's provider.  We override the superclass's method
@@ -409,7 +435,7 @@
      * method serves simply as a convenience to subclass developers.
      */
 
-    virtual IOMedia * getProvider() const;
+    virtual IOMedia * getProvider() const APPLE_KEXT_OVERRIDE;
 
     OSMetaClassDeclareReservedUnused(IOPartitionScheme,  0);
     OSMetaClassDeclareReservedUnused(IOPartitionScheme,  1);
@@ -445,6 +471,11 @@
     OSMetaClassDeclareReservedUnused(IOPartitionScheme, 31);
 };
 
+#ifdef KERNEL_PRIVATE
+#define kIOPartitionScheme_partition_valid      ( ( intptr_t ) 1 )
+#define _partitionSchemeState                   ( *( intptr_t *) &( IOPartitionScheme::_expansionData ) )
+#endif /* KERNEL_PRIVATE */
+
 #endif /* __cplusplus */
 #endif /* KERNEL */
 #endif /* !_IOPARTITIONSCHEME_H */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/storage/IOStorage.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/storage/IOStorage.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/storage/IOStorage.h	2015-08-27 02:08:41.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/storage/IOStorage.h	2016-06-03 23:05:25.000000000 +0200
@@ -283,6 +283,41 @@
 };
 
 /*!
+ * @enum IOStorageProvisionTypes
+ * @discussion
+ * Device block provision types, such as mapped, deallocated, or anchored. See SCSI
+ * SBC4 specifiction, LBA status descriptor for definitions.
+ */
+
+enum
+{
+    kIOStorageProvisionTypeMapped      = 0x00,
+    kIOStorageProvisionTypeDeallocated = 0x01,
+    kIOStorageProvisionTypeAnchored    = 0x02
+};
+
+typedef UInt64 IOStorageGetProvisionStatusOptions;
+/*!
+ * @struct IOStorageProvisionExtent
+ * @discussion
+ * Extent for provision status.
+ * @field byteStart
+ * Starting byte offset for the operation.
+ * @field byteCount
+ * Size of the operation.
+ * @field provisionType
+ * Block provision type. See IOStorageProvisionTypes.
+ */
+
+struct IOStorageProvisionExtent
+{
+    UInt64 byteStart;
+    UInt64 byteCount;
+    UInt8  provisionType;
+    UInt8  reserved[7];
+};
+
+/*!
  * @typedef IOStorageCompletionAction
  * @discussion
  * The IOStorageCompletionAction declaration describes the C (or C++) completion
@@ -371,7 +406,7 @@
 
     virtual bool handleOpen(IOService *  client,
                             IOOptionBits options,
-                            void *       access) = 0;
+                            void *       access) APPLE_KEXT_OVERRIDE = 0;
 
     /*!
      * @function handleIsOpen
@@ -385,7 +420,7 @@
      * Returns true if the client was (or clients were) open, false otherwise.
      */
 
-    virtual bool handleIsOpen(const IOService * client) const = 0;
+    virtual bool handleIsOpen(const IOService * client) const APPLE_KEXT_OVERRIDE = 0;
 
     /*!
      * @function handleClose
@@ -397,12 +432,12 @@
      * Options for the close.  Set to zero.
      */
 
-    virtual void handleClose(IOService * client, IOOptionBits options) = 0;
+    virtual void handleClose(IOService * client, IOOptionBits options) APPLE_KEXT_OVERRIDE = 0;
 
 public:
 
 #ifdef __x86_64__
-    virtual bool attach(IOService * provider);
+    virtual bool attach(IOService * provider) APPLE_KEXT_OVERRIDE;
 #endif /* __x86_64__ */
 
     /*!
@@ -698,13 +733,41 @@
                                  IOStorageSynchronizeOptions options = 0) = 0;
 #endif /* !__x86_64__ */
 
+    /*!
+     * @function getProvisionStatus
+     * @discussion
+     * Get device block provision status
+     * @param client
+     * Client requesting the synchronization.
+     * @param byteStart
+     * Byte offset of logical extent on the device.
+     * @param byteCount
+     * Byte length of logical extent on the device, 0 mean the entire remaining space.
+     * @param extentsCount
+     * Number of extents allocated in extents. On return, this parameter indicate number
+     * of provision extents returned.
+     * @param extents
+     * List of provision extents. See IOStorageProvisionExtents.
+     * @param options
+     * Options for get provision status.  See IOStorageGetProvisionStatusOptions.
+     * @result
+     * Returns the status of the getProvisionStatus.
+     */
+
+    virtual IOReturn getProvisionStatus(IOService *                        client,
+                                        UInt64                             byteStart,
+                                        UInt64                             byteCount,
+                                        UInt32 *                           extentsCount,
+                                        IOStorageProvisionExtent *         extents,
+                                        IOStorageGetProvisionStatusOptions options = 0 ); /* 10.12.0 */
+
     OSMetaClassDeclareReservedUsed(IOStorage,  0);
     OSMetaClassDeclareReservedUsed(IOStorage,  1);
     OSMetaClassDeclareReservedUsed(IOStorage,  2);
     OSMetaClassDeclareReservedUsed(IOStorage,  3);
     OSMetaClassDeclareReservedUsed(IOStorage,  4);
     OSMetaClassDeclareReservedUsed(IOStorage,  5);
-    OSMetaClassDeclareReservedUnused(IOStorage,  6);
+    OSMetaClassDeclareReservedUsed(IOStorage,  6);
     OSMetaClassDeclareReservedUnused(IOStorage,  7);
     OSMetaClassDeclareReservedUnused(IOStorage,  8);
     OSMetaClassDeclareReservedUnused(IOStorage,  9);
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/usb/IOUFIStorageServices.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/usb/IOUFIStorageServices.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/usb/IOUFIStorageServices.h	2015-08-27 04:12:36.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/usb/IOUFIStorageServices.h	1970-01-01 01:00:00.000000000 +0100
@@ -1,129 +0,0 @@
-/*
- * Copyright (c) 1998-2015 Apple Inc. All rights reserved.
- *
- * @APPLE_LICENSE_HEADER_START@
- * 
- * This file contains Original Code and/or Modifications of Original Code
- * as defined in and that are subject to the Apple Public Source License
- * Version 2.0 (the 'License'). You may not use this file except in
- * compliance with the License. Please obtain a copy of the License at
- * http://www.opensource.apple.com/apsl/ and read it before using this
- * file.
- * 
- * The Original Code and all software distributed under the License are
- * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
- * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
- * INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
- * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
- * Please see the License for the specific language governing rights and
- * limitations under the License.
- * 
- * @APPLE_LICENSE_HEADER_END@
- */
- 
-
-#ifndef _IOKIT_UFI_STORAGE_SERVICES_H_
-#define _IOKIT_UFI_STORAGE_SERVICES_H_
-
-#if defined(KERNEL) && defined(__cplusplus)
-
-#include <IOKit/IOTypes.h>
-#include <IOKit/storage/IOBlockStorageDevice.h>
-#include <IOKit/usb/IOUSBMassStorageUFISubclass.h>
-
-
-class IOUFIStorageServices : public IOBlockStorageDevice
-{
-	
-	OSDeclareDefaultStructors ( IOUFIStorageServices )
-
-private:
-	bool							fMediaChanged;
-	bool							fMediaPresent;
-
-protected:
-	
-    IOUSBMassStorageUFIDevice *		fProvider;
-
-	UInt64							fMaxReadBlocks;
-	UInt64							fMaxWriteBlocks;
-	
-	virtual bool	attach ( IOService * provider );
-	virtual void	detach ( IOService * provider );
-	
-    // Reserve space for future expansion.
-    struct IOUFIStorageServicesExpansionData { };
-    IOUFIStorageServicesExpansionData *fIOUFIStorageServicesReserved;
-	
-public:
-
-	virtual IOReturn 	message ( UInt32 type, IOService * provider, void * argument );
-
-	static void 		AsyncReadWriteComplete ( void * 			clientData,
-                                				 IOReturn			status,
-                                				 UInt64 			actualByteCount );
-
-    // Deprecated
-    virtual IOReturn    doAsyncReadWrite (	IOMemoryDescriptor *	buffer,
-											UInt32					block,
-											UInt32					nblks,
-											IOStorageCompletion		completion );
-                                            
-	virtual IOReturn	doAsyncReadWrite (  IOMemoryDescriptor *    buffer,
-                                            UInt64                  block, 
-                                            UInt64                  nblks,
-                                            IOStorageAttributes *   attributes,
-                                            IOStorageCompletion *   completion );
-
-	virtual IOReturn	doSyncReadWrite ( 	IOMemoryDescriptor *	buffer,
-											UInt32					block,
-											UInt32					nblks );
-
-    virtual IOReturn	doEjectMedia ( void );
-
-    virtual IOReturn	doFormatMedia ( UInt64 byteCapacity );
-
-    virtual UInt32		doGetFormatCapacities ( UInt64 *	capacities,
-    											UInt32		capacitiesMaxCount ) const;
-
-    virtual IOReturn	doSynchronizeCache ( void );
-        
-    virtual char *		getVendorString ( void );
-    
-    virtual char *		getProductString ( void );
-    
-    virtual char *		getRevisionString ( void );
-    
-    virtual char *		getAdditionalDeviceInfoString ( void );
-    
-    virtual IOReturn	reportBlockSize ( UInt64 * blockSize );
-    
-    virtual IOReturn	reportEjectability ( bool * isEjectable );
-    
-    virtual IOReturn	reportMediaState ( bool * mediaPresent, bool * changed );
-    
-    virtual IOReturn	reportMaxValidBlock ( UInt64 * maxBlock );
-    
-    virtual IOReturn	reportRemovability ( bool * isRemovable );
-    
-    virtual IOReturn	reportWriteProtection ( bool * isWriteProtected );
-
-    virtual IOReturn	getWriteCacheState ( bool * enabled );
-	
-	virtual IOReturn	setWriteCacheState ( bool enabled );
-    
-	// Space reserved for future expansion.
-    OSMetaClassDeclareReservedUnused( IOUFIStorageServices, 1 );
-    OSMetaClassDeclareReservedUnused( IOUFIStorageServices, 2 );
-    OSMetaClassDeclareReservedUnused( IOUFIStorageServices, 3 );
-    OSMetaClassDeclareReservedUnused( IOUFIStorageServices, 4 );
-    OSMetaClassDeclareReservedUnused( IOUFIStorageServices, 5 );
-    OSMetaClassDeclareReservedUnused( IOUFIStorageServices, 6 );
-    OSMetaClassDeclareReservedUnused( IOUFIStorageServices, 7 );
-    OSMetaClassDeclareReservedUnused( IOUFIStorageServices, 8 );
-
-};
-
-#endif	/* defined(KERNEL) && defined(__cplusplus) */
-
-#endif	/* _IOKIT_UFI_STORAGE_SERVICES_H_ */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/usb/IOUSBHostDevice.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/usb/IOUSBHostDevice.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/usb/IOUSBHostDevice.h	2016-02-27 07:35:43.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/usb/IOUSBHostDevice.h	2016-06-07 01:20:47.000000000 +0200
@@ -130,6 +130,7 @@
     
 #pragma mark IOService overrides
 public:
+
     virtual bool attach(IOService* provider);
     virtual bool start(IOService* provider);
     virtual bool terminate(IOOptionBits options = 0);
@@ -140,6 +141,8 @@
     virtual bool compareProperty(OSDictionary* matching, const OSString* key);
     virtual bool matchPropertyTable(OSDictionary* table, SInt32* score);
 
+    virtual IOReturn setProperties(OSObject* properties);
+
     virtual bool open(IOService* forClient, IOOptionBits options = 0, void* arg = 0);
     virtual bool handleOpen(IOService* forClient, IOOptionBits options, void* arg);
     virtual bool handleIsOpen(const IOService* forClient) const;
@@ -150,6 +153,15 @@
 
     virtual const char* stringFromReturn(IOReturn rtn);
 
+    virtual bool setProperty(const OSSymbol* aKey, OSObject*   anObject);
+    virtual bool setProperty(const OSString* aKey, OSObject*   anObject);
+    virtual bool setProperty(const char*     aKey, OSObject*   anObject);
+    virtual bool setProperty(const char*     aKey, const char* aString);
+    virtual bool setProperty(const char*     aKey, bool        aBoolean);
+
+    virtual bool setProperty(const char* aKey, unsigned long long aValue, unsigned int aNumberOfBits);
+    virtual bool setProperty(const char* aKey, void*      	      bytes,  unsigned int length);
+
 protected:
     virtual IOReturn terminateGated(IOOptionBits options = 0);
     
@@ -479,7 +491,7 @@
      * @return Pointer to the newly created IOUSBHostPipe object
      */
     virtual IOUSBHostPipe* createPipe(const StandardUSB::EndpointDescriptor* descriptor, const StandardUSB::SuperSpeedEndpointCompanionDescriptor* companionDescriptor, IOUSBHostInterface* interface);
-    
+
     /*!
      * @brief Issue an aynchronous setup request on the default control pipe
      *
@@ -675,6 +687,7 @@
      * @constant kUSBHostConnectionSpeedFull
      * @constant kUSBHostConnectionSpeedHigh
      * @constant kUSBHostConnectionSpeedSuper
+     * @constant kUSBHostConnectionSpeedSuperPlus
      */
     virtual uint8_t getSpeed() const;
     
@@ -955,6 +968,7 @@
     uint32_t                                 _pendingCloseCount;
     
     uint32_t _debugLoggingMask;
+    uint32_t _locationID;
 
     struct tExpansionData
     {
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/usb/IOUSBHostFamily.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/usb/IOUSBHostFamily.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/usb/IOUSBHostFamily.h	2016-02-27 07:35:43.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/usb/IOUSBHostFamily.h	2016-06-07 01:20:47.000000000 +0200
@@ -89,11 +89,12 @@
  */
 enum
 {
-    kUSBHostConnectionSpeedLow   = 0,
-    kUSBHostConnectionSpeedFull  = 1,
-    kUSBHostConnectionSpeedHigh  = 2,
-    kUSBHostConnectionSpeedSuper = 3,
-    kUSBHostConnectionSpeedCount = 4
+    kUSBHostConnectionSpeedLow          = 0,
+    kUSBHostConnectionSpeedFull         = 1,
+    kUSBHostConnectionSpeedHigh         = 2,
+    kUSBHostConnectionSpeedSuper        = 3,
+    kUSBHostConnectionSpeedSuperPlus    = 4,
+    kUSBHostConnectionSpeedCount        = 5
 };
 
 /*!
@@ -120,6 +121,7 @@
 #define kUSBHostMessageDeviceConnected                iokit_usbhost_msg(0x105)      // 0xe0005105  Apple Internal use only.  AppleUSBRemovablePort -> clients after a connect.
 #define kUSBHostMessageDeviceDisconnected             iokit_usbhost_msg(0x106)      // 0xe0005106  Apple Internal use only.  AppleUSBRemovablePort -> clients after a disconnect.
 #define kUSBHostMessageControllerPoweredOn            iokit_usbhost_msg(0x107)      // 0xe0005107  Apple Internal use only.  AppleEmbeddedUSBXHCIFL1100 -> FL1100Boot after a stable power state is reached.
+#define kUSBHostMessageNonInterruptIsochFrame         iokit_usbhost_msg(0x108)      // 0xe0005108  Apple Internal use only. 
 
 // User Message Support
 #define kUSBHostMessageOvercurrentCondition           iokit_usblegacy_err_msg(0x13) // 0xe0004013  Message sent to the clients of the device's hub parent, when a device causes an overcurrent condition.  The message argument contains the locationID of the device
@@ -167,15 +169,17 @@
  * @constant kUSBHostPortConnectionSpeedLow A low-speed (1.5 Mb/s) device is connected
  * @constant kUSBHostPortConnectionSpeedHigh A high-speed (480 Mb/s) device is connected)
  * @constant kUSBHostPortConnectionSpeedSuper A superspeed (5 Gb/s) device is connected)
+ * @constant kUSBHostPortConnectionSpeedSuperPlus A superspeed (10 Gb/s) device is connected)
  */
 enum tUSBHostConnectionSpeed
 {
-    kUSBHostPortConnectionSpeedNone  = 0,
-    kUSBHostPortConnectionSpeedFull  = 1,
-    kUSBHostPortConnectionSpeedLow   = 2,
-    kUSBHostPortConnectionSpeedHigh  = 3,
-    kUSBHostPortConnectionSpeedSuper = 4,
-    kUSBHostPortConnectionSpeedCount = 5
+    kUSBHostPortConnectionSpeedNone         = 0,
+    kUSBHostPortConnectionSpeedFull         = 1,
+    kUSBHostPortConnectionSpeedLow          = 2,
+    kUSBHostPortConnectionSpeedHigh         = 3,
+    kUSBHostPortConnectionSpeedSuper        = 4,
+    kUSBHostPortConnectionSpeedSuperPlus    = 5,
+    kUSBHostPortConnectionSpeedCount        = 6
 };
 
 /*!
@@ -200,25 +204,26 @@
  */
 enum tUSBHostPortStatus
 {
-    kUSBHostPortStatusPortTypeMask          = StandardUSBBitRange(0, 3),
-    kUSBHostPortStatusPortTypePhase         = StandardUSBBitRangePhase(0, 3),
-    kUSBHostPortStatusPortTypeStandard      = (kUSBHostPortTypeStandard << StandardUSBBitRangePhase(0, 3)),
-    kUSBHostPortStatusPortTypeCaptive       = (kUSBHostPortTypeCaptive << StandardUSBBitRangePhase(0, 3)),
-    kUSBHostPortStatusPortTypeInternal      = (kUSBHostPortTypeInternal << StandardUSBBitRangePhase(0, 3)),
-    kUSBHostPortStatusPortTypeAccessory     = (kUSBHostPortTypeAccessory << StandardUSBBitRangePhase(0, 3)),
-    kUSBHostPortStatusPortTypeReserved      = StandardUSBBitRange(4, 7),
-    kUSBHostPortStatusConnectedSpeedMask    = StandardUSBBitRange(8, 10),
-    kUSBHostPortStatusConnectedSpeedPhase   = StandardUSBBitRangePhase(8, 10),
-    kUSBHostPortStatusConnectedSpeedNone    = (kUSBHostPortConnectionSpeedNone << StandardUSBBitRangePhase(8, 10)),
-    kUSBHostPortStatusConnectedSpeedFull    = (kUSBHostPortConnectionSpeedFull << StandardUSBBitRangePhase(8, 10)),
-    kUSBHostPortStatusConnectedSpeedLow     = (kUSBHostPortConnectionSpeedLow << StandardUSBBitRangePhase(8, 10)),
-    kUSBHostPortStatusConnectedSpeedHigh    = (kUSBHostPortConnectionSpeedHigh << StandardUSBBitRangePhase(8, 10)),
-    kUSBHostPortStatusConnectedSpeedSuper   = (kUSBHostPortConnectionSpeedSuper << StandardUSBBitRangePhase(8, 10)),
-    kUSBHostPortStatusResetting             = StandardUSBBit(11),
-    kUSBHostPortStatusEnabled               = StandardUSBBit(12),
-    kUSBHostPortStatusSuspended             = StandardUSBBit(13),
-    kUSBHostPortStatusOvercurrent           = StandardUSBBit(14),
-    kUSBHostPortStatusTestMode              = StandardUSBBit(15)
+    kUSBHostPortStatusPortTypeMask              = StandardUSBBitRange(0, 3),
+    kUSBHostPortStatusPortTypePhase             = StandardUSBBitRangePhase(0, 3),
+    kUSBHostPortStatusPortTypeStandard          = (kUSBHostPortTypeStandard << StandardUSBBitRangePhase(0, 3)),
+    kUSBHostPortStatusPortTypeCaptive           = (kUSBHostPortTypeCaptive << StandardUSBBitRangePhase(0, 3)),
+    kUSBHostPortStatusPortTypeInternal          = (kUSBHostPortTypeInternal << StandardUSBBitRangePhase(0, 3)),
+    kUSBHostPortStatusPortTypeAccessory         = (kUSBHostPortTypeAccessory << StandardUSBBitRangePhase(0, 3)),
+    kUSBHostPortStatusPortTypeReserved          = StandardUSBBitRange(4, 7),
+    kUSBHostPortStatusConnectedSpeedMask        = StandardUSBBitRange(8, 10),
+    kUSBHostPortStatusConnectedSpeedPhase       = StandardUSBBitRangePhase(8, 10),
+    kUSBHostPortStatusConnectedSpeedNone        = (kUSBHostPortConnectionSpeedNone << StandardUSBBitRangePhase(8, 10)),
+    kUSBHostPortStatusConnectedSpeedFull        = (kUSBHostPortConnectionSpeedFull << StandardUSBBitRangePhase(8, 10)),
+    kUSBHostPortStatusConnectedSpeedLow         = (kUSBHostPortConnectionSpeedLow << StandardUSBBitRangePhase(8, 10)),
+    kUSBHostPortStatusConnectedSpeedHigh        = (kUSBHostPortConnectionSpeedHigh << StandardUSBBitRangePhase(8, 10)),
+    kUSBHostPortStatusConnectedSpeedSuper       = (kUSBHostPortConnectionSpeedSuper << StandardUSBBitRangePhase(8, 10)),
+    kUSBHostPortStatusConnectedSpeedSuperPlus   = (kUSBHostPortConnectionSpeedSuperPlus << StandardUSBBitRangePhase(8, 10)),
+    kUSBHostPortStatusResetting                 = StandardUSBBit(11),
+    kUSBHostPortStatusEnabled                   = StandardUSBBit(12),
+    kUSBHostPortStatusSuspended                 = StandardUSBBit(13),
+    kUSBHostPortStatusOvercurrent               = StandardUSBBit(14),
+    kUSBHostPortStatusTestMode                  = StandardUSBBit(15)
 };
 
 /*!
@@ -308,6 +313,19 @@
 #define kUSBHostDevicePropertyConfigurationCurrentOverride      "kUSBConfigurationCurrentOverride"
 #define kUSBHostDevicePropertyResetDurationOverride             "kUSBResetDurationOverride"
 #define kUSBHostDevicePropertyDesiredChargingCurrent            "kUSBDesiredChargingCurrent"
+#define kUSBHostDevicePropertyDescriptorOverride                "kUSBDescriptorOverride"
+
+#define kUSBHostBillboardDevicePropertyNumberOfAlternateModes   "bNumberOfAlternateModes"
+#define kUSBHostBillboardDevicePropertyPreferredAlternateMode   "bPreferredAlternateMode"
+#define kUSBHostBillboardDevicePropertyVCONNPower               "VCONNPower"
+#define kUSBHostBillboardDevicePropertyConfigured               "bmConfigured"
+#define kUSBHostBillboardDevicePropertyAdditionalFailureInfo    "bAdditonalFailureInfo"
+#define kUSBHostBillboardDevicePropertyBcdVersion               "BcdVersion"
+#define kUSBHostBillboardDevicePropertySVID                     "wSVID"
+#define kUSBHostBillboardDevicePropertyAlternateMode            "bAlternateMode"
+#define kUSBHostBillboardDevicePropertyAlternateModeStringIndex "iAlternateModeString"
+#define kUSBHostBillboardDevicePropertyAlternateModeString      "AlternateModeString"
+#define kUSBHostBillboardDevicePropertyAddtionalInfoURLIndex    "iAddtionalInfoURL"
 
 #if TARGET_OS_EMBEDDED
 #define kUSBHostInterfacePropertyStringIndex                    "iInterface"
@@ -316,6 +334,7 @@
 #endif
 #define kUSBHostInterfacePropertyAlternateSetting               "bAlternateSetting"
 
+#define kUSBHostPortPropertyOvercurrent                         "UsbHostPortOvercurrent"
 #define kUSBHostPortPropertyPortNumber                          "port"
 #define kUSBHostPortPropertyRemovable                           "removable"
 #define kUSBHostPortPropertyTestMode                            "kUSBTestMode"
@@ -327,6 +346,7 @@
 #define kUSBHostPortPropertyMux                                 "UsbMux"
 #define kUSBHostPortPropertyCompanionIndex                      "kUSBCompanionIndex"
 #define kUSBHostPortPropertyDisconnectInterval                  "kUSBDisconnectInterval"
+#define kUSBHostPortPropertyUsbCPortNumber                      "UsbCPortNumber"
 
 #define kUSBHostHubPropertyPowerSupply                          "kUSBHubPowerSupply"                    // OSNumber mA available for downstream ports, 0 for bus-powered
 #define kUSBHostHubPropertyIdlePolicy                           "kUSBHubIdlePolicy"                     // OSNumber ms to be used as device idle policy
@@ -335,7 +355,6 @@
 #define kUSBHostHubPropertyHubPowerSupplyType                   "kUSBHubPowerSupplyType"                // OSNumber for tPowerSupply hub is, 2 for bus-powered, 1 for self
 
 #define kUSBHostControllerPropertyIsochronousRequiresContiguous "kUSBIsochronousRequiresContiguous"
-#define kUSBHostControllerPropertyDebugError                    "kUSBDebugError"
 #define kUSBHostControllerPropertySleepSupported                "kUSBSleepSupported"
 #define kUSBHostControllerPropertyMuxEnabled                    "kUSBMuxEnabled"
 #define kUSBHostControllerPropertyCompanion                     "kUSBCompanion"                         // OSBoolean false to disable all companion controllers
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/usb/IOUSBHostHIDDevice.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/usb/IOUSBHostHIDDevice.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/usb/IOUSBHostHIDDevice.h	2015-08-27 02:09:42.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/usb/IOUSBHostHIDDevice.h	2016-06-07 01:21:06.000000000 +0200
@@ -138,7 +138,7 @@
 private:
     typedef struct IOUSBHidExpansionData
     {
-        
+        uint8_t _bInterfaceNumber;
     } tIOUSBHidExpansionData;
     
     tIOUSBHidExpansionData *_expansionData;
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/usb/IOUSBHostInterface.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/usb/IOUSBHostInterface.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/usb/IOUSBHostInterface.h	2016-02-27 07:35:43.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/usb/IOUSBHostInterface.h	2016-06-07 01:20:47.000000000 +0200
@@ -428,6 +428,7 @@
     IOUSBHostDevice*                            _device;
     
     uint32_t _debugLoggingMask;
+    uint32_t _locationID;           // TODO: Initialize this for tracepoints
 
 #pragma mark Miscellaneous
 public:
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/usb/IOUSBHostPipe.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/usb/IOUSBHostPipe.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/usb/IOUSBHostPipe.h	2016-02-27 07:35:43.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/usb/IOUSBHostPipe.h	2016-06-07 01:20:47.000000000 +0200
@@ -56,13 +56,32 @@
     OSDeclareDefaultStructors(IOUSBHostPipe)
 
 public:
+    /*!
+     * @struct StandardUSBDescriptors
+     *
+     * @brief Encapsulates descriptors for a single endpoint
+     * 
+     * @discussion The StandardUSBDescriptors struct is used to intialize and adjust pipes in the system.  The bcdUSB member
+     * must be initialized to the USB revision supported by the device.  Acceptable values are 0x0110, 0x0200, 0x0300, 0x0310.
+     * The descriptor member must always be initialized with a pointer to a valid endpoint descriptor.  The ssCompanionDescriptor
+     * and sspCompanionDescriptor members may be required for bcdUSB versions 0x0300 and greater, depending on operating speed
+     * and values set in the descriptors.  See USB 3.1  9.5 for more information on when these descriptors may be required.
+     */
+    struct StandardUSBDescriptors
+    {
+        uint16_t                                                                    bcdUSB;
+        const StandardUSB::EndpointDescriptor*                                      descriptor;
+        const StandardUSB::SuperSpeedEndpointCompanionDescriptor*                   ssCompanionDescriptor;
+        const StandardUSB::SuperSpeedPlusIsochronousEndpointCompanionDescriptor*    sspCompanionDescriptor;
+    };
+    
     static IOUSBHostPipe* withDescriptorsAndOwners(const StandardUSB::EndpointDescriptor* descriptor, const StandardUSB::SuperSpeedEndpointCompanionDescriptor* companionDescriptor,
                                                    AppleUSBHostController* controller, IOUSBHostDevice* device, IOUSBHostInterface* interface, UInt8 speed, tUSBHostDeviceAddress address);
 
 protected:
     virtual bool initWithDescriptorsAndOwners(const StandardUSB::EndpointDescriptor* descriptor, const StandardUSB::SuperSpeedEndpointCompanionDescriptor* companionDescriptor,
                                               AppleUSBHostController* controller, IOUSBHostDevice* device, IOUSBHostInterface* interface, UInt8 speed, tUSBHostDeviceAddress address);
-    
+
 #pragma mark IOUSBHostIOSource overrides
 public:
     virtual void free();
@@ -173,7 +192,7 @@
     /*!
      * @brief Clear the halt condition of the pipe.
      *
-     * @discussion  This method will abort all pending I/O, clear the halted condition, and reset the data toggle for the pipe.
+     * @discussion This method will abort all pending I/O, clear the halted condition, and reset the data toggle for the pipe.
      * In general, this must be done after a non-control I/O call returns or completes with an error condition.  This method
      * will also clear the transaction translator if this is a 'split' pipe as described in section 11.17.5 of the 
      * USB 2.0 specification.
@@ -186,8 +205,37 @@
     virtual IOReturn clearStall(bool withRequest);
     
     // Public pad slots for descriptors and policies
-    OSMetaClassDeclareReservedUnused(IOUSBHostPipe, 10);
-    OSMetaClassDeclareReservedUnused(IOUSBHostPipe, 11);
+    /*!
+     * @brief This method is used to change the amount of bandwidth currently allocated to the pipe.
+     *
+     * @discussion This method is only valid for interrupt and isochronous endpoints.  The standard USB descriptors used
+     * as parameters define the max packet size and bInterval to use for the new endpoint policy.
+     *
+     * @param descriptors Pointer to an endpoint descriptor structure describing the bandwidth request.  See documentation for StandardUSBDescriptors
+     * for more information on proper intialization of the structure.
+     *
+     * @return IOReturn result code
+     */
+    OSMetaClassDeclareReservedUsed(IOUSBHostPipe, 10);
+    virtual IOReturn adjustPipe(StandardUSBDescriptors* descriptors);
+
+    /*!
+     * @brief This method is used to retrieve standard USB descriptors for the pipe
+     *
+     * @discussion This method will return an @link //apple_ref/cpp/tag/IOUSBHostPipe/StandardUSBDescriptors IOUSBHostPipe::StandardUSBDescriptors @/link
+     * populated with pointers to the descriptor set specified by the <code>type</code> parameter.
+     *
+     * @param descriptors A pointer to an @link //apple_ref/cpp/tag/IOUSBHostPipe/StandardUSBDescriptors IOUSBHostPipe::StandardUSBDescriptors @/link struct
+     * that will be populated with descriptor pointers
+     *
+     * @param type The desired endpoint descriptor type to return.  See @link //apple_ref/cpp/tag/IOUSBHostPipe/tGetEndpointDescriptorOptions
+     * IOUSBHostPipe::tGetEndpointDescriptorOptions @/link for more details.
+     *
+     * @return IOReturn result code
+     */
+    OSMetaClassDeclareReservedUsed(IOUSBHostPipe, 11);
+    virtual IOReturn getDescriptors(StandardUSBDescriptors* descriptors, tGetEndpointDescriptorOptions type = kGetEndpointDescriptorCurrentPolicy);
+
     OSMetaClassDeclareReservedUnused(IOUSBHostPipe, 12);
     OSMetaClassDeclareReservedUnused(IOUSBHostPipe, 13);
     OSMetaClassDeclareReservedUnused(IOUSBHostPipe, 14);
@@ -198,7 +246,8 @@
     OSMetaClassDeclareReservedUnused(IOUSBHostPipe, 19);
     
 protected:
-    virtual IOReturn adjustPipeGated(const StandardUSB::EndpointDescriptor* endpointDescriptor, const StandardUSB::SuperSpeedEndpointCompanionDescriptor* companionDescriptor);
+    virtual IOReturn adjustPipeGated(const StandardUSB::EndpointDescriptor* endpointDescriptor,
+                                     const StandardUSB::SuperSpeedEndpointCompanionDescriptor* companionDescriptor);
     
     virtual IOReturn setIdlePolicyGated(uint32_t idleTimeoutMs);
     virtual IOReturn getIdlePolicyGated(uint32_t& result);
@@ -206,7 +255,9 @@
     virtual IOReturn clearStallGated(bool withRequest);
 
     // Protected pad slots for descriptors and policies
-    OSMetaClassDeclareReservedUnused(IOUSBHostPipe, 20);
+    OSMetaClassDeclareReservedUsed(IOUSBHostPipe, 20);
+    virtual IOReturn adjustPipeGatedV2(StandardUSBDescriptors* descriptors);
+
     OSMetaClassDeclareReservedUnused(IOUSBHostPipe, 21);
     OSMetaClassDeclareReservedUnused(IOUSBHostPipe, 22);
     OSMetaClassDeclareReservedUnused(IOUSBHostPipe, 23);
@@ -218,11 +269,13 @@
     OSMetaClassDeclareReservedUnused(IOUSBHostPipe, 29);
     
 protected:
-    const StandardUSB::EndpointDescriptor*                    _descriptor;
-    const StandardUSB::SuperSpeedEndpointCompanionDescriptor* _companionDescriptor;
-
-    StandardUSB::EndpointDescriptor                    _currentPolicyDescriptor;
-    StandardUSB::SuperSpeedEndpointCompanionDescriptor _currentPolicyCompanionDescriptor;
+    const StandardUSB::EndpointDescriptor*                                   _descriptor;
+    const StandardUSB::SuperSpeedEndpointCompanionDescriptor*                _companionDescriptor;
+    const StandardUSB::SuperSpeedPlusIsochronousEndpointCompanionDescriptor* _sspCompanionDescriptor;
+
+    StandardUSB::EndpointDescriptor                                     _currentPolicyDescriptor;
+    StandardUSB::SuperSpeedEndpointCompanionDescriptor                  _currentPolicyCompanionDescriptor;
+    StandardUSB::SuperSpeedPlusIsochronousEndpointCompanionDescriptor   _currentPolicySSPCompanionDescriptor;
 
     // Cached values
     UInt32 _maxPacketSize;
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/usb/IOUSBMassStorageClass.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/usb/IOUSBMassStorageClass.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/usb/IOUSBMassStorageClass.h	2015-08-27 04:12:36.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/usb/IOUSBMassStorageClass.h	1970-01-01 01:00:00.000000000 +0100
@@ -1,560 +0,0 @@
-/*
- * Copyright (c) 1998-2015 Apple Inc. All rights reserved.
- *
- * @APPLE_LICENSE_HEADER_START@
- * 
- * This file contains Original Code and/or Modifications of Original Code
- * as defined in and that are subject to the Apple Public Source License
- * Version 2.0 (the 'License'). You may not use this file except in
- * compliance with the License. Please obtain a copy of the License at
- * http://www.opensource.apple.com/apsl/ and read it before using this
- * file.
- * 
- * The Original Code and all software distributed under the License are
- * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
- * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
- * INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
- * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
- * Please see the License for the specific language governing rights and
- * limitations under the License.
- * 
- * @APPLE_LICENSE_HEADER_END@
- */
- 
-
-#ifndef _IOKIT_IOUSBMASSSTORAGECLASS_H
-#define _IOKIT_IOUSBMASSSTORAGECLASS_H
-
-// Headers for general IOKit definitions
-#include <IOKit/IOLib.h>
-#include <IOKit/IOService.h>
-#include <IOKit/IOMemoryDescriptor.h>
-#include <IOKit/IOMessage.h>
-
-// Headers for USB specific definitions
-#include <IOKit/usb/IOUSBInterface.h>
-#include <IOKit/usb/IOUSBPipe.h>
-#include <IOKit/usb/USBSpec.h>
-#include <IOKit/usb/USB.h>
-
-// Headers for SCSI Protocol support definitions
-#include <IOKit/scsi/IOSCSIProtocolServices.h>
-
-// BSD includes
-#include <sys/sysctl.h>
-
-#define UNUSED(x) ((void)x)
-
-#pragma mark -
-#pragma mark Vendor Specific Device Support
-#define kIOUSBMassStorageCharacteristics		"USB Mass Storage Characteristics"
-#define kIOUSBMassStoragePreferredSubclass		"Preferred Subclass"
-#define kIOUSBMassStoragePreferredProtocol		"Preferred Protocol"
-#define kIOUSBMassStorageUseStandardUSBReset	"Use Standard USB Reset"
-#define kIOUSBKnownCSWTagIssues					"Known CSW Tag Issues"
-#define kIOUSBMassStorageMaxLogicalUnitNumber	"Max Logical Unit Number"
-#define kIOPropertyIOUnitKey					"IOUnit"
-#define kIOUSBMassStorageDoNotMatch				"Do Not Match MSC"
-#define kIOUSBMassStorageDoNotOperate			"Do Not Operate"
-#define kIOUSBMassStorageEnableSuspendResumePM	"Enable Port Suspend-Resume PM"
-#define kIOUSBMassStoragePostResetCoolDown		"Reset Recovery Time"
-
-#ifndef EMBEDDED
-#define kIOUSBMassStorageSuspendOnReboot        "Suspend On Reboot"
-#define kIOUSBMassStorageResetOnResume			"Reset On Resume"
-#endif // EMBEDDED
-
-enum 
-{
-	kUSBDAddressLength = 10
-};
-
-enum 
-{
-	kIOUSBMassStorageReconfigurationTimeoutMS = 5000
-};
-
-
-#pragma mark -
-#pragma mark CBI Protocol Strutures
-// Structure for the global PB's
-struct CBIRequestBlock
-{
-	SCSITaskIdentifier			request;
-	IOUSBDevRequest				cbiDevRequest;
-	SCSICommandDescriptorBlock	cbiCDB;
-	IOUSBCompletion				cbiCompletion;
-	UInt32						currentState;
-	IOMemoryDescriptor *		cbiPhaseDesc;
-	UInt8						cbiGetStatusBuffer[2];	// 2 bytes as specified in the USB spec
-};
-
-typedef struct CBIRequestBlock	CBIRequestBlock;
-
-#pragma mark -
-#pragma mark Bulk Only Protocol Structures
-
-struct StorageBulkOnlyCBW
-{
-	UInt32		cbwSignature;
-	UInt32		cbwTag;
-	UInt32		cbwTransferLength;
-	UInt8		cbwFlags;
-	UInt8		cbwLUN;					// Bits 0-3: LUN, 4-7: Reserved
-	UInt8		cbwCDBLength;			// Bits 0-4: CDB Length, 5-7: Reserved
-	UInt8		cbwCDB[16];
-};
-
-typedef struct StorageBulkOnlyCBW	StorageBulkOnlyCBW;
-
-struct	StorageBulkOnlyCSW
-{
-	UInt32		cswSignature;
-	UInt32		cswTag;
-	UInt32		cswDataResidue;
-	UInt8		cswStatus;
-};
-
-typedef struct StorageBulkOnlyCSW	StorageBulkOnlyCSW;
-
-struct	BulkOnlyRequestBlock
-{
-	SCSITaskIdentifier		request;
-	IOUSBCompletion			boCompletion;
-	UInt32					currentState;
-	StorageBulkOnlyCBW		boCBW;
-	StorageBulkOnlyCSW		boCSW;
-	IOMemoryDescriptor *	boPhaseDesc;
-	UInt8					boGetStatusBuffer[2];	// 2 bytes as specified in the USB spec
-};
-
-typedef struct BulkOnlyRequestBlock		BulkOnlyRequestBlock;
-
-
-#pragma mark -
-#pragma mark IOUSBMassStorageClass definition
-
-class IOUSBMassStorageClass : public IOSCSIProtocolServices
-{
-    OSDeclareDefaultStructors(IOUSBMassStorageClass)
-
-private:
-	// ---- Member variables used by all protocols ----
-	// The interface object that provides the driver with access to the 
-	// USB so that it may talk to its device.
-    IOUSBInterface *			fInterface;
-
-	// The pipe objects that the driver uses to transport data through a
-	// pipe to the appropriate endpoint.
-    IOUSBPipe *					fBulkInPipe;
-    IOUSBPipe *					fBulkOutPipe;
-    IOUSBPipe *					fInterruptPipe;
-    
-	IOUSBDevRequest				fUSBDeviceRequest;
-	UInt8						fPreferredSubclass;
-	UInt8						fPreferredProtocol;
-	
-  	// The maximum Logical Unit Number.  This is the highest valid LUN
-  	// that the USB device supports, so if the device only supports one
-  	// LUN, such as CBI and CB, this number will be zero.
-  	UInt8						fMaxLogicalUnitNumber;
-
-	// ---- Member variables used by CBI protocol ----
-	bool						fCBICommandStructInUse; 
-
-	CBIRequestBlock				fCBICommandRequestBlock;
-    
-	// ---- Member variables used by Bulk Only protocol ----
- 	// Command tag, this driver just uses a sequential counter that is
- 	// incremented for each CBW that is sent to the device.
- 	UInt32 						fBulkOnlyCommandTag;
-
-	bool						fBulkOnlyCommandStructInUse; 
-    
-    // Dedicated CBW and CSW IOMemoryDescriptors are listed in the ExpansionData struct.
-		
- 	// The Request block that contains all the necessary data for 
- 	// transporting a Bulk Only request across the USB.
- 	BulkOnlyRequestBlock		fBulkOnlyCommandRequestBlock;
-
-protected:
-    // Reserve space for future expansion.
-    
-    // We flatten the ExpansionData for iOS since we're relieved of the burden binary compatibility.
-#ifndef EMBEDDED
-    struct ExpansionData
-	{
-#endif // EMBEDDED
-		bool					fResetInProgress;
-		OSSet *					fClients;
-		IOUSBPipe *				fPotentiallyStalledPipe;
-		bool					fUseUSBResetNotBOReset;
-		bool					fAbortCurrentSCSITaskInProgress;
-		IOMemoryDescriptor *	fCBIMemoryDescriptor;
-		IOMemoryDescriptor *	fBulkOnlyCBWMemoryDescriptor;
-		IOMemoryDescriptor *	fBulkOnlyCSWMemoryDescriptor;
-        bool                    fDeviceAttached;
-		bool                    fWaitingForReconfigurationMessage;
-		bool					fTerminating;
-        bool                    fKnownCSWTagMismatchIssues;
-        bool                    fPortSuspendResumeForPMEnabled;
-        bool                    fPortIsSuspended;
-#ifndef EMBEDDED
-		bool					fRequiresResetOnResume;
-		bool					fAutonomousSpinDownWorkAround;
-#endif // EMBEDDED
-		UInt8					fConsecutiveResetCount;
-#ifndef EMBEDDED
-		bool					fClearStallInProgress;				/* OBSOLETE */
-#endif // EMBEDDED
-		bool					fTerminationDeferred;
-#ifndef EMBEDDED
-		UInt32					fRequiredMaxBusStall;
-#endif // EMBEDDED
-		bool					fBlockOnResetThread;
-#ifndef EMBEDDED
-        UInt32					fPostDeviceResetCoolDownInterval;
-		bool					fSuspendOnReboot;
-#endif // EMBEDDED
-		UInt8					fResetStatus;
-        
-#ifndef EMBEDDED
-	};
-    ExpansionData *				reserved;
-#endif // EMBEDDED
-	
-#ifndef EMBEDDED
-	#define fResetInProgress					reserved->fResetInProgress
-	#define fClients							reserved->fClients
-	#define fPotentiallyStalledPipe				reserved->fPotentiallyStalledPipe
-    #define fUseUSBResetNotBOReset				reserved->fUseUSBResetNotBOReset
-	#define fAbortCurrentSCSITaskInProgress		reserved->fAbortCurrentSCSITaskInProgress
-    #define fCBIMemoryDescriptor                reserved->fCBIMemoryDescriptor
-	#define	fBulkOnlyCBWMemoryDescriptor		reserved->fBulkOnlyCBWMemoryDescriptor
-	#define	fBulkOnlyCSWMemoryDescriptor		reserved->fBulkOnlyCSWMemoryDescriptor
-    #define fDeviceAttached                     reserved->fDeviceAttached
-	#define fWaitingForReconfigurationMessage	reserved->fWaitingForReconfigurationMessage
-	#define fTerminating						reserved->fTerminating
-    #define fKnownCSWTagMismatchIssues          reserved->fKnownCSWTagMismatchIssues
-    #define fPortSuspendResumeForPMEnabled      reserved->fPortSuspendResumeForPMEnabled
-    #define fPortIsSuspended                    reserved->fPortIsSuspended
-    #define fRequiresResetOnResume				reserved->fRequiresResetOnResume
-    #define fAutonomousSpinDownWorkAround		reserved->fAutonomousSpinDownWorkAround
-    #define fConsecutiveResetCount				reserved->fConsecutiveResetCount
-    #define fClearStallInProgress				reserved->fClearStallInProgress
-    #define fTerminationDeferred				reserved->fTerminationDeferred
-    #define fRequiredMaxBusStall				reserved->fRequiredMaxBusStall
-    #define fBlockOnResetThread					reserved->fBlockOnResetThread
-    #define fPostDeviceResetCoolDownInterval	reserved->fPostDeviceResetCoolDownInterval
-    #define fSuspendOnReboot					reserved->fSuspendOnReboot
-    #define fResetStatus						reserved->fResetStatus	
-#endif // EMBEDDED
-    
-	// Enumerated constants used to control various aspects of this
-	// driver.
-
-	// Enumerates the fResetStatus
-	enum
-	{
-		kUSBResetStatusSuccess				= 0,
-		kUSBResetStatusFailure				= 1
-	};
-	
-	// Enumerations for Mass Storage Class Subclass types
-	enum
-	{
-		kUSBStorageRBCSubclass 				= 1,
-		kUSBStorageSFF8020iSubclass 		= 2,
-		kUSBStorageQIC157Subclass			= 3,
-		kUSBStorageUFISubclass				= 4,
-		kUSBStorageSFF8070iSubclass			= 5,
-		kUSBStorageSCSITransparentSubclass	= 6
-	};
-
-	// The supported USB Mass Storage Class transport protocols.
-	enum
-	{
-		kProtocolControlBulkInterrupt	= 0x00,
-		kProtocolControlBulk			= 0x01,
-		kProtocolBulkOnly				= 0x50
-	};
-
-	// ------- Protocol support functions ------------
-	// The SendSCSICommand function will take a SCSITask Object and transport
-	// it across the physical wire(s) to the device
-	virtual bool    		SendSCSICommand( 	
-								SCSITaskIdentifier 		request, 
-								SCSIServiceResponse *	serviceResponse,
-								SCSITaskStatus		*	taskStatus );
-
-	// The AbortSCSICommand function will abort the indicated SCSITask object,
-	// if it is possible and the SCSITask has not already completed.
-    virtual SCSIServiceResponse    	AbortSCSICommand( SCSITaskIdentifier abortTask );
-
-	virtual bool					IsProtocolServiceSupported( 
-										SCSIProtocolFeature 	feature, 
-										void * 					serviceValue );
-
-	virtual bool					HandleProtocolServiceFeature( 
-										SCSIProtocolFeature 	feature, 
-										void * 					serviceValue );
- 
-	// Methods for retrieving and setting the object for the Interface
-	IOUSBInterface *		GetInterfaceReference( void );
-	void					SetInterfaceReference( IOUSBInterface * newInterface );
-	
-	UInt8					GetInterfaceSubclass( void );
-	UInt8					GetInterfaceProtocol( void );
-	
-	// Methods for retrieving an object for a Pipe.
-	IOUSBPipe *				GetControlPipe( void );
-	IOUSBPipe *				GetBulkInPipe( void );
-	IOUSBPipe *				GetBulkOutPipe( void );
-	IOUSBPipe *				GetInterruptPipe( void );
-    
-	// Methods for getting and setting the maximum LUN of a device.
-	UInt8					GetMaxLogicalUnitNumber( void ) const;
-	void					SetMaxLogicalUnitNumber( UInt8 maxLUN );
-	
-	virtual void 			CompleteSCSICommand( 
-								SCSITaskIdentifier request, 
-								IOReturn status );
-
-	virtual	bool			BeginProvidedServices( void );
-	virtual	bool			EndProvidedServices( void );
-	
-	// The Protocol specific helper methods for SendSCSICommand	
-	virtual IOReturn		SendSCSICommandForCBIProtocol(
-                                                          SCSITaskIdentifier request );
-	
-	virtual IOReturn		SendSCSICommandForBulkOnlyProtocol(
-                                                               SCSITaskIdentifier request );
-    
-	// The Protocol specific helper methods for AbortSCSICommand	
-	virtual IOReturn		AbortSCSICommandForCBIProtocol(
-                                                           SCSITaskIdentifier abortTask );
-	
-	virtual IOReturn		AbortSCSICommandForBulkOnlyProtocol(
-                                                                SCSITaskIdentifier abortTask );
-
-	// Helper methods for performing general USB device requests
-	virtual IOReturn		ClearFeatureEndpointStall( 
-								IOUSBPipe *			thePipe,
-								IOUSBCompletion	*	completion );
-	virtual IOReturn 		GetStatusEndpointStatus(
-								IOUSBPipe *			thePipe,
-								void *				endpointStatus,
-								IOUSBCompletion	*	completion );
-	
- 	/* All CBI transport related methods.
- 	 */
-	// All definitions and structures for the CBI Protocol
-	enum
-	{
- 		kUSBStorageAutoStatusSize	= 2		// Per the USB CBI Protocol
- 	};
-
- 	// Methods for accessing Bulk Only specific member variables.
-	CBIRequestBlock *		GetCBIRequestBlock( void );
-
-	void 					ReleaseCBIRequestBlock( 
-								CBIRequestBlock *	cbiRequestBlock );
-
-	// Methods used for CBI/CB command transportation.
-	static void		CBIProtocolUSBCompletionAction(
-						void *					target,
-		                void *					parameter,
-		                IOReturn				status,
-		                UInt32					bufferSizeRemaining);
-
-	IOReturn		CBIProtocolTransferData( 
-						CBIRequestBlock *		cbiRequestBlock,
-						UInt32					nextExecutionState );
-		                
-	IOReturn		CBIProtocolReadInterrupt( 
-						CBIRequestBlock *		cbiRequestBlock,
-						UInt32					nextExecutionState );
-
-	IOReturn		CBIGetStatusEndpointStatus( 
-						IOUSBPipe *				targetPipe,
-						CBIRequestBlock *		cbiRequestBlock,
-						UInt32					nextExecutionState );
-
-	IOReturn		CBIClearFeatureEndpointStall( 
-						IOUSBPipe *				targetPipe,
-						CBIRequestBlock *		cbiRequestBlock,
-						UInt32					nextExecutionState );
-						
-	void 			CBIProtocolCommandCompletion(
-						CBIRequestBlock *		cbiRequestBlock,
-		                IOReturn				resultingStatus,
-		                UInt32					bufferSizeRemaining );
-		                
- 	/* All Bulk Only transport related methods, structures and enums.
- 	 */
- 	// All Bulk Only specific structures and enums.
-	
-	// All definitions and structures for the Bulk Only Protocol
-	// Command Block Wrapper (CBW)
-	enum
-	{
-		// CBW general struture definitions
-		kCommandBlockWrapperSignature	= OSSwapHostToBigConstInt32 ( 'USBC' ),
-		kByteCountOfCBW					= 31,
-
-		// CBW LUN related definitions
-		kCBWLUNMask						= 0x0F,
-
-		kCBWFlagsDataOut				= 0x00,
-		kCBWFlagsDataIn					= 0x80
-	};
-	
-	// All definitions and structures for the Bulk Only Protocol
-	// Command Status Wrapper (CSW)
-	enum
-	{
-		// CSW general struture definitions
-		kCommandStatusWrapperSignature	= OSSwapHostToBigConstInt32 ( 'USBS' ),
-		kByteCountOfCSW					= 13,
-
-		// CSW status definitions
-		kCSWCommandPassedError 			= 0x00,	// No error occurred
-		kCSWCommandFailedError			= 0x01,	/* An error occurred (probably a 
-											 	 * bad command or parameter ) */
-		kCSWPhaseError					= 0x02	/* A transfer was performed in 
-											 	 * the wrong sequence */
-	};
-
- 	// Methods for accessing Bulk Only specific member variables.
-	BulkOnlyRequestBlock *	GetBulkOnlyRequestBlock( void );
-
-	void 			ReleaseBulkOnlyRequestBlock( 
-						BulkOnlyRequestBlock * 		boRequestBlock );
-
-	UInt32			GetNextBulkOnlyCommandTag( void );
-
-	// Methods for Bulk Only specific utility commands
-	IOReturn		BulkDeviceResetDevice(
-						BulkOnlyRequestBlock *		boRequestBlock,
-						UInt32						nextExecutionState );
-						
-	// Methods used for Bulk Only command transportation.
-	IOReturn		BulkOnlySendCBWPacket(
-						BulkOnlyRequestBlock *		boRequestBlock,
-						UInt32						nextExecutionState );
-	
-	IOReturn		BulkOnlyTransferData( 
-						BulkOnlyRequestBlock *		boRequestBlock,
-						UInt32						nextExecutionState );
-	
-	IOReturn		BulkOnlyReceiveCSWPacket(
-						BulkOnlyRequestBlock *		boRequestBlock,
-						UInt32						nextExecutionState );
-	
-	void			BulkOnlyExecuteCommandCompletion (
-						BulkOnlyRequestBlock *		boRequestBlock,
-		                IOReturn					resultingStatus,
-		                UInt32						bufferSizeRemaining );
-
-	static void		BulkOnlyUSBCompletionAction (
-		                void *			target,
-		                void *			parameter,
-		                IOReturn		status,
-		                UInt32			bufferSizeRemaining );
-	
-public:
-
-    bool				init( OSDictionary * 	propTable );
-    virtual bool		start( IOService *	 	provider );
-    virtual void 		stop( IOService * 		provider );
-	virtual void		free( void );
-	virtual	IOReturn	message( UInt32 type, IOService * provider, void * argument = 0 );
-	
-	virtual bool        willTerminate(  IOService *     provider, 
-                                        IOOptionBits    options );
-										
-	virtual bool        didTerminate(	IOService *     provider, 
-                                        IOOptionBits    options, 
-										bool *			defer );
-                                        
-	virtual bool		handleOpen( IOService *		client,
-									IOOptionBits	options,
-									void *			arg );
-	
-	virtual void		handleClose( IOService *	client,
-									 IOOptionBits	options );
-	
-	virtual bool		handleIsOpen(  const IOService * client ) const;
-	
-	virtual IOReturn	HandlePowerOn( void );
-	
-#ifndef EMBEDDED
-	virtual void		systemWillShutdown ( IOOptionBits specifier );
-#endif // EMBEDDED
-	
-protected:
-
-	static IOReturn		sWaitForReset( void * refcon );
-	IOReturn			GatedWaitForReset( void );
-	
-#ifndef EMBEDDED
-	static IOReturn		sWaitForTaskAbort( void * refcon );			/* OBSOLETE */
-	IOReturn			GatedWaitForTaskAbort( void );				/* OBSOLETE */
-#endif // EMBEDDED
-    
-	static void			sResetDevice( void * refcon );
-
-#ifndef EMBEDDED
-	static void			sAbortCurrentSCSITask( void * refcon );		/* OBSOLETE */
-	
-    OSMetaClassDeclareReservedUsed( IOUSBMassStorageClass, 1 );
-	virtual IOReturn	StartDeviceRecovery( void );				/* OBSOLETE */
-
-    OSMetaClassDeclareReservedUsed( IOUSBMassStorageClass, 2 );
-	virtual void		FinishDeviceRecovery( IOReturn	status );	/* OBSOLETE */
-
-	static void			DeviceRecoveryCompletionAction(
-		                	void *			target,
-		                	void *			parameter,
-		                	IOReturn		status,
-		                	UInt32			bufferSizeRemaining );	/* OBSOLETE */
-#endif // EMBEDDED
-    
-	IOReturn       ResetDeviceNow( bool waitForReset );
-	
-	void                AbortCurrentSCSITask( void );
-	
-	bool                IsPhysicalInterconnectLocationInternal ( void );
-	    
-	IOReturn            SuspendPort ( bool suspend );
-	
-private:
-	
-	void				ClearPipeStall ( void );
-	
-	IOReturn			AcceptSCSITask ( SCSITaskIdentifier scsiTask, bool * pAccepted );
-	
-	void				CheckDeferredTermination ( void );
-	
-	void				GatedCompleteSCSICommand ( SCSITaskIdentifier request, SCSIServiceResponse * serviceResponse, SCSITaskStatus * taskStatus );
-	
-	// Space reserved for future expansion.
-    OSMetaClassDeclareReservedUnused( IOUSBMassStorageClass, 3 );
-    OSMetaClassDeclareReservedUnused( IOUSBMassStorageClass, 4 );
-    OSMetaClassDeclareReservedUnused( IOUSBMassStorageClass, 5 );
-    OSMetaClassDeclareReservedUnused( IOUSBMassStorageClass, 6 );
-    OSMetaClassDeclareReservedUnused( IOUSBMassStorageClass, 7 );
-    OSMetaClassDeclareReservedUnused( IOUSBMassStorageClass, 8 );
-    OSMetaClassDeclareReservedUnused( IOUSBMassStorageClass, 9 );
-    OSMetaClassDeclareReservedUnused( IOUSBMassStorageClass, 10 );
-    OSMetaClassDeclareReservedUnused( IOUSBMassStorageClass, 11 );
-    OSMetaClassDeclareReservedUnused( IOUSBMassStorageClass, 12 );
-    OSMetaClassDeclareReservedUnused( IOUSBMassStorageClass, 13 );
-    OSMetaClassDeclareReservedUnused( IOUSBMassStorageClass, 14 );
-    OSMetaClassDeclareReservedUnused( IOUSBMassStorageClass, 15 );
-    OSMetaClassDeclareReservedUnused( IOUSBMassStorageClass, 16 );
-	
-};
-
-
-#endif //_IOKIT_IOUSBMASSSTORAGECLASS_H
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/usb/IOUSBMassStorageUFISubclass.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/usb/IOUSBMassStorageUFISubclass.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/usb/IOUSBMassStorageUFISubclass.h	2015-08-27 04:12:36.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/usb/IOUSBMassStorageUFISubclass.h	1970-01-01 01:00:00.000000000 +0100
@@ -1,355 +0,0 @@
-/*
- * Copyright (c) 1998-2015 Apple Inc. All rights reserved.
- *
- * @APPLE_LICENSE_HEADER_START@
- * 
- * This file contains Original Code and/or Modifications of Original Code
- * as defined in and that are subject to the Apple Public Source License
- * Version 2.0 (the 'License'). You may not use this file except in
- * compliance with the License. Please obtain a copy of the License at
- * http://www.opensource.apple.com/apsl/ and read it before using this
- * file.
- * 
- * The Original Code and all software distributed under the License are
- * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
- * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
- * INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
- * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
- * Please see the License for the specific language governing rights and
- * limitations under the License.
- * 
- * @APPLE_LICENSE_HEADER_END@
- */
-
-
-#ifndef _IOKIT_IOUSBMASSSTORAGEUFISUBCLASS_H
-#define _IOKIT_IOUSBMASSSTORAGEUFISUBCLASS_H
-
-// This class' header file
-#include <IOKit/usb/IOUSBMassStorageClass.h>
-#include <IOKit/scsi/IOSCSIPrimaryCommandsDevice.h>
-
-
-#pragma mark -
-#pragma mark IOUSBMassStorageUFIDevice declaration
-
-class IOUSBMassStorageUFIDevice : public IOSCSIPrimaryCommandsDevice
-{
-    OSDeclareDefaultStructors(IOUSBMassStorageUFIDevice)
-
-private:
-	static void			AsyncReadWriteComplete( SCSITaskIdentifier	completedTask );
-	
-protected:
-    // Reserve space for future expansion.
-    struct IOUSBMassStorageUFIDeviceExpansionData
-	{
-	};
-    IOUSBMassStorageUFIDeviceExpansionData *fIOUSBMassStorageUFIDeviceReserved;
-
-	// ---- Medium Characteristics ----
-	bool				fMediumPresent;
-
-	// The byte count of each physical block on the medium.
-	UInt32				fMediumBlockSize;
-
-	// The total number of blocks of fMediumBlockSize on the medium.
-	UInt32				fMediumBlockCount;
-
-	// Whether the installed medium is protected from writes
-	bool				fMediumIsWriteProtected;
-
-	// Polling thread variables
-	thread_call_t		fPollingThread;
-	UInt32				fPollingMode;
-	enum
-	{
-		kPollingMode_Suspended		= 0,
-		kPollingMode_NewMedia 		= 1,
-		kPollingMode_MediaRemoval	= 2
-	};
-	
-	// ---- Methods for controlling the current state of device support ----
-	virtual bool		InitializeDeviceSupport( void );
-	virtual void 		StartDeviceSupport ( void );
-	virtual void		SuspendDeviceSupport( void );
-	virtual void		ResumeDeviceSupport( void );
-	virtual void 		StopDeviceSupport ( void );
-	virtual void		TerminateDeviceSupport( void );
-
-	// ---- Methods used for misc  ----
-	virtual bool		ClearNotReadyStatus( void );
-	virtual void 		CreateStorageServiceNub( void );
-	virtual bool		DetermineDeviceCharacteristics( void );
-
-	// ---- Methods used for controlling the polling thread ----
-	virtual void		ProcessPoll( void );
-	virtual void		EnablePolling( void );
-	virtual void		DisablePolling( void );
-
-	// ---- Main and support methods for polling for new Media ----
-	virtual void		PollForNewMedia( void );
-	virtual bool		DetermineMediaPresence( void );
-	virtual bool		DetermineMediumCapacity( 
-							UInt64 * 				blockSize, 
-							UInt64 * 				blockCount );
-	virtual bool		DetermineMediumWriteProtectState( void );
-
-	// ---- Main and support methods for polling for Media removal ----
-	virtual void		PollForMediaRemoval( void );
-	
-	// ---- Methods used for power managment ----
-	virtual UInt32		GetInitialPowerState ( void );
-	virtual void 		InitializePowerManagement ( IOService * provider );
-	virtual void		HandlePowerChange ( void );
-	virtual void		HandleCheckPowerState ( void );
-	virtual void		TicklePowerManager ( void );
-	virtual UInt32		GetNumberOfPowerStateTransitions ( void );
-
-	// ---- Methods used for handling medium characteristics ----
-    virtual void		SetMediumCharacteristics( 
-    						UInt32 					blockSize, 
-    						UInt32 					blockCount );
-	
-	virtual void		ResetMediumCharacteristics( void );
-
-	virtual IOReturn	IssueRead( 	
-							IOMemoryDescriptor *	buffer,
-                         	UInt64					startBlock,
-                     		UInt64					blockCount );
-	
-	virtual IOReturn	IssueRead(	
-							IOMemoryDescriptor *	buffer,
-                      		UInt64					startBlock,
-                     		UInt64					blockCount,
-                       		void * 					clientData );
-
-
-	virtual IOReturn	IssueWrite( 
-							IOMemoryDescriptor *	buffer,
-                    		UInt64					startBlock,
-                       		UInt64					blockCount );
-
-	virtual IOReturn	IssueWrite(	
-							IOMemoryDescriptor *	buffer,
-                         	UInt64					startBlock,
-                      		UInt64					blockCount,
-							void * 					clientData );
-
-public:
-											
-	static 	void		sProcessPoll( void * pdtDriver, void * refCon );
-
-	// Interface to the UFI Storage Services Driver
-	// ---- Methods for controlling the device ----
-	virtual IOReturn	SyncReadWrite(
-							IOMemoryDescriptor *	buffer,
-							UInt64					startBlock,
-							UInt64					blockCount,
-							UInt64					blockSize );
-
-	virtual IOReturn	AsyncReadWrite(
-							IOMemoryDescriptor *	buffer,
-							UInt64					startBlock,
-							UInt64					blockCount,
-							UInt64					blockSize,
-							void * 					clientData );
-
-	// ---- Methods for controlling medium state ----
-	virtual IOReturn	EjectTheMedium( void );
-
-	// ---- Methods for controlling media format ----
-	virtual IOReturn	FormatMedium( 
-							UInt64 					blockCount, 
-							UInt64 					blockSize );
-	virtual UInt32		GetFormatCapacities( 	
-							UInt64 * 				capacities,
-             				UInt32   				capacitiesMaxCount ) const;
-
-	// ---- Query methods to report device characteristics ----
-	// Report the maximum number of blocks that the device can handle per
-	// read or write.  A value of 0 (zero) indicates there is no limit aside
-	// from the size of the method's return parameter.
-	virtual UInt64		ReportDeviceMaxBlocksReadTransfer( void );
-	virtual UInt64		ReportDeviceMaxBlocksWriteTransfer( void );
-	
-	// ---- Query methods to report installed medium characteristics ----
-	virtual UInt64		ReportMediumBlockSize( void );
-	virtual UInt64		ReportMediumTotalBlockCount( void );
-	virtual bool		ReportMediumWriteProtection( void );
-        
-	// Methods for getting device information strings
-	virtual char *		GetVendorString( void );
-	virtual char *		GetProductString( void );
-	virtual char *		GetRevisionString( void );
-	OSDictionary *		GetProtocolCharacteristicsDictionary ( void );
-	OSDictionary *		GetDeviceCharacteristicsDictionary ( void );	
-	
-protected:
-	// Utility methods used by all SCSI Command Set objects
-	
-	// isParameterValid methods are used to validate that the parameter passed into
-	// the command methods are of the correct value.
-	
-	// Validate Parameter used for 1 bit to 1 byte paramaters
-    bool		 	IsParameterValid( 
-							SCSICmdField1Byte 			param,
-							SCSICmdField1Byte 			mask );
-	
-	// Validate Parameter used for 9 bit to 2 byte paramaters
-	bool		 	IsParameterValid( 
-							SCSICmdField2Byte 			param,
-							SCSICmdField2Byte 			mask );
-	
-	// Validate Parameter used for 17 bit to 4 byte paramaters
-	bool		 	IsParameterValid( 
-							SCSICmdField4Byte 			param,
-							SCSICmdField4Byte 			mask );
-	
-	// UFI Required Commands
-	virtual bool 	FORMAT_UNIT(
-							SCSITaskIdentifier			request,
-			    			IOMemoryDescriptor *		dataBuffer,
-			    			IOByteCount					defectListSize,
-			    			SCSICmdField1Byte 			TRACK_NUMBER, 
-			    			SCSICmdField2Byte 			INTERLEAVE );
-
-	virtual bool	INQUIRY(
-							SCSITaskIdentifier			request,
-    						IOMemoryDescriptor 			*dataBuffer,
-    						SCSICmdField1Byte 			PAGE_OR_OPERATION_CODE,
-    						SCSICmdField1Byte 			ALLOCATION_LENGTH );
-
-   	virtual bool	MODE_SELECT_10(
-							SCSITaskIdentifier			request,
-    						IOMemoryDescriptor 			*dataBuffer,
-    						SCSICmdField1Bit 			PF,
-    						SCSICmdField1Bit 			SP,
-    						SCSICmdField2Byte 			PARAMETER_LIST_LENGTH );  
-
-   	virtual bool	MODE_SENSE_10(
-							SCSITaskIdentifier			request,
-    						IOMemoryDescriptor 			*dataBuffer,
-    						SCSICmdField1Bit 			DBD,
-	   						SCSICmdField2Bit 			PC,
-	   						SCSICmdField6Bit 			PAGE_CODE,
-	   						SCSICmdField2Byte 			PARAMETER_LIST_LENGTH );
-
-    virtual bool	PREVENT_ALLOW_MEDIUM_REMOVAL( 
-							SCSITaskIdentifier			request,
-	     					SCSICmdField1Bit 			PREVENT );
-
-	virtual bool 	READ_10(
-							SCSITaskIdentifier			request,
-			    			IOMemoryDescriptor *		dataBuffer, 
-			    			UInt32						blockSize,
-			    			SCSICmdField1Bit 			DPO, 
-			    			SCSICmdField1Bit 			FUA,
-							SCSICmdField1Bit 			RELADR, 
-							SCSICmdField4Byte 			LOGICAL_BLOCK_ADDRESS, 
-							SCSICmdField2Byte 			TRANSFER_LENGTH );
-
-	virtual bool 	READ_12(
-							SCSITaskIdentifier			request,
-			    			IOMemoryDescriptor *		dataBuffer, 
-			    			UInt32						blockSize,
-			    			SCSICmdField1Bit 			DPO, 
-			    			SCSICmdField1Bit 			FUA,
-							SCSICmdField1Bit 			RELADR, 
-							SCSICmdField4Byte 			LOGICAL_BLOCK_ADDRESS, 
-							SCSICmdField4Byte 			TRANSFER_LENGTH );
-
-	virtual bool 	READ_CAPACITY(
-							SCSITaskIdentifier			request,
-			    			IOMemoryDescriptor *		dataBuffer, 
-			    			SCSICmdField1Bit 			RELADR,
-							SCSICmdField4Byte 			LOGICAL_BLOCK_ADDRESS, 
-							SCSICmdField1Bit 			PMI );
-
-	virtual bool 	READ_FORMAT_CAPACITIES(
-							SCSITaskIdentifier			request,
-			    			IOMemoryDescriptor *		dataBuffer, 
-			    			SCSICmdField2Byte 			ALLOCATION_LENGTH );
-
-	virtual bool 	REQUEST_SENSE(
-							SCSITaskIdentifier			request,
-   							IOMemoryDescriptor 			*dataBuffer,
-			    			SCSICmdField1Byte 			ALLOCATION_LENGTH );
- 	
-	virtual bool 	REZERO_UNIT( 
-							SCSITaskIdentifier			request );
-
-	virtual bool 	SEEK( 
-							SCSITaskIdentifier			request,
-			    			SCSICmdField4Byte 			LOGICAL_BLOCK_ADDRESS );
-
-	virtual bool 	SEND_DIAGNOSTICS( 
-							SCSITaskIdentifier			request,
-							SCSICmdField1Bit 			PF, 
-							SCSICmdField1Bit 			SELF_TEST, 
-							SCSICmdField1Bit 			DEF_OFL, 
-							SCSICmdField1Bit 			UNIT_OFL );
-
-	virtual bool 	START_STOP_UNIT( 
-							SCSITaskIdentifier			request,
-							SCSICmdField1Bit 			IMMED, 
-							SCSICmdField1Bit 			LOEJ, 
-							SCSICmdField1Bit 			START );
-
-    virtual bool 	TEST_UNIT_READY(  
-							SCSITaskIdentifier			request );
- 
-	virtual bool 	VERIFY( 
-							SCSITaskIdentifier			request,
-							SCSICmdField1Bit 			DPO, 
-							SCSICmdField1Bit 			BYTCHK, 
-							SCSICmdField1Bit 			RELADR,
-							SCSICmdField4Byte 			LOGICAL_BLOCK_ADDRESS, 
-							SCSICmdField2Byte 			VERIFICATION_LENGTH );
-
-	virtual bool 	WRITE_10(
-							SCSITaskIdentifier			request,
-			    			IOMemoryDescriptor *		dataBuffer, 
-			    			UInt32						blockSize,
-			    			SCSICmdField1Bit 			DPO, 
-			    			SCSICmdField1Bit 			FUA,
-							SCSICmdField1Bit 			RELADR, 
-							SCSICmdField4Byte 			LOGICAL_BLOCK_ADDRESS, 
-							SCSICmdField2Byte 			TRANSFER_LENGTH );
-
-	virtual bool 	WRITE_12(
-							SCSITaskIdentifier			request,
-							IOMemoryDescriptor *		dataBuffer, 
-			    			UInt32						blockSize,
-			    			SCSICmdField1Bit 			DPO, 
-							SCSICmdField1Bit 			EBP, 
-							SCSICmdField1Bit 			RELADR, 
-							SCSICmdField4Byte 			LOGICAL_BLOCK_ADDRESS, 
-							SCSICmdField4Byte 			TRANSFER_LENGTH );
-
-	virtual bool 	WRITE_AND_VERIFY(
-							SCSITaskIdentifier			request,
-			    			IOMemoryDescriptor *		dataBuffer, 
-			    			UInt32						blockSize,
-			    			SCSICmdField1Bit 			DPO,
-			    			SCSICmdField1Bit 			BYTCHK, 
-			    			SCSICmdField1Bit 			RELADR, 
-			    			SCSICmdField4Byte			LOGICAL_BLOCK_ADDRESS, 
-			    			SCSICmdField2Byte 			TRANSFER_LENGTH );
-};
-
-
-#pragma mark -
-#pragma mark IOUSBMassStorageUFISubclass declaration
-
-
-class IOUSBMassStorageUFISubclass : public IOUSBMassStorageClass
-{
-    OSDeclareDefaultStructors(IOUSBMassStorageUFISubclass)
-
-protected:
-	virtual	bool		BeginProvidedServices( void );
-	virtual	bool		EndProvidedServices( void );
-};
-
-#endif //_IOKIT_IOUSBMASSSTORAGEUFISUBCLASS_H
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/usb/IOUSBUserClient.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/usb/IOUSBUserClient.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/usb/IOUSBUserClient.h	2015-08-27 02:12:06.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/usb/IOUSBUserClient.h	2016-06-07 01:22:45.000000000 +0200
@@ -95,6 +95,8 @@
     kUSBInterfaceUserClientUnregisterNotification,
     kUSBInterfaceUserClientAcknowledgeNotification,
     kUSBInterfaceUserClientRegisterDriver,
+    kUSBInterfaceUserClientSetDeviceIdlePolicy,
+    kUSBInterfaceUserClientSetPipeIdlePolicy,
     kIOUSBLibInterfaceUserClientNumCommands
 };
 
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/usb/StandardUSB.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/usb/StandardUSB.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/usb/StandardUSB.h	2016-02-27 07:35:43.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/usb/StandardUSB.h	2016-06-07 01:20:47.000000000 +0200
@@ -57,7 +57,8 @@
         kDescriptorTypeDeviceCapability = 16,
         kDescriptorTypeHub = 41,
         kDescriptorTypeSuperSpeedHub = 42,
-        kDescriptorTypeSuperSpeedUSBEndpointCompanion = 48
+        kDescriptorTypeSuperSpeedUSBEndpointCompanion = 48,
+        kDescriptorTypeSuperSpeedPlusIsochronousEndpointCompanion = 49
     };
     
     typedef enum tDescriptorType tDescriptorType;
@@ -81,7 +82,10 @@
         kDescriptorSizeHubMinimum = 9,
         kDescriptorSizeHubMaximum = 21,
         kDescriptorSizeSuperSpeedHub = 12,
-        kDescriptorSizeSuperSpeedUSBEndpointCompanion = 6
+        kDescriptorSizeSuperSpeedUSBEndpointCompanion = 6,
+        kDescriptorSizeSuperSpeedPlusIsochronousEndpointCompanion = 8,
+        kDescriptorSizeBillboardDeviceMinimum = 44,
+        kDescriptorSizeBillboardDeviceMaximum = 256
     };
     
     typedef enum tDescriptorSize tDescriptorSize;
@@ -276,13 +280,24 @@
     typedef struct StringDescriptor StringDescriptor;
     
     
-    // USB 3.0 Table 9-13
     enum tDeviceCapabilityType
     {
-        kDeviceCapabilityTypeWireless       = 1,
-        kDeviceCapabilityTypeUSB20Extension = 2,
-        kDeviceCapabilityTypeSuperSpeed     = 3,
-        kDeviceCapabilityTypeContainerID    = 4
+        // USB 3.0 Table 9-13
+        kDeviceCapabilityTypeWireless               = 1,
+        kDeviceCapabilityTypeUSB20Extension         = 2,
+        kDeviceCapabilityTypeSuperSpeed             = 3,
+        kDeviceCapabilityTypeContainerID            = 4,
+        
+        // USB 3.1 Table 9-14
+        kDeviceCapabilityTypePlatform               = 5,
+        kDeviceCapabilityTypePowerDelivery          = 6,
+        kDeviceCapabilityTypeBatteryInfo            = 7,
+        kDeviceCapabilityTypePdConsumerPort         = 8,
+        kDeviceCapabilityTypePdProviderPort         = 9,
+        kDeviceCapabilityTypeSuperSpeedPlus         = 10,
+        kDeviceCapabilityTypePrecisionMeasurement   = 11,
+        kDeviceCapabilityTypeWirelessExt            = 12,
+        kDeviceCapabilityTypeBillboard              = 13
     };
     
     typedef enum tDeviceCapabilityType tDeviceCapabilityType;
@@ -303,8 +318,8 @@
     } __attribute__((packed));
         
     typedef struct BOSDescriptor BOSDescriptor;
-        
-        
+
+
 #ifdef __cplusplus
     // USB 3.0 9.6.2: Binary Device Object Store (BOS)
     struct DeviceCapabilityDescriptor : public Descriptor
@@ -330,6 +345,7 @@
     {
         uint8_t     bLength;
         uint8_t     bDescriptorType;
+        uint8_t     bDevCapabilityType;
 #endif
         uint32_t    bmAttributes;
     } __attribute__((packed));
@@ -352,6 +368,7 @@
     {
         uint8_t     bLength;
         uint8_t     bDescriptorType;
+        uint8_t     bDevCapabilityType;
 #endif
         uint8_t     bmAttributes;
         uint16_t    wSpeedsSupported;
@@ -380,7 +397,70 @@
         kSuperSpeedDeviceCapabilityU1DevExitLatMax = 0xa,
         kSuperSpeedDeviceCapabilityU2DevExitLatMax = 0x7ff
     };
+        
+#ifdef __cplusplus
+    // USB 3.1 9.6.2.5: SuperSpeedPlus USB Device Capability
+    struct SuperSpeedPlusUSBDeviceCapabilityDescriptor : public DeviceCapabilityDescriptor
+    {
+#else
+    struct SuperSpeedPlusUSBDeviceCapabilityDescriptor
+    {
+        uint8_t     bLength;
+        uint8_t     bDescriptorType;
+        uint8_t     bDevCapabilityType;
+#endif
+        uint8_t     bReserved;
+        uint32_t    bmAttributes;
+        uint16_t    wFunctionalitySupport;
+        uint16_t    wReserved;
+        uint32_t    bmSublinkSpeedAttr[1];
+        
+    } __attribute__((packed));
+
+    typedef struct SuperSpeedPlusUSBDeviceCapabilityDescriptor SuperSpeedPlusUSBDeviceCapabilityDescriptor;
     
+    enum
+    {
+        //bmAttributes
+        kSuperSpeedPlusDeviceCapabilitySublinkSpeedAttrCount = StandardUSBBitRange(0, 4),
+        kSuperSpeedPlusDeviceCapabilitySublinkSpeedAttrCountPhase = StandardUSBBitRangePhase(0, 4),
+        
+        kSuperSpeedPlusDeviceCapabilitySublinkSpeedIdCount = StandardUSBBitRange(5, 8),
+        kSuperSpeedPlusDeviceCapabilitySublinkSpeedIdCountPhase = StandardUSBBitRangePhase(5, 8),
+        
+        //wFunctionalitySupport
+        kSuperSpeedPlusDeviceCapabilitySublinkMinSpeedId = StandardUSBBitRange(0, 3),
+        kSuperSpeedPlusDeviceCapabilitySublinkMinSpeedIdPhase = StandardUSBBitRangePhase(0, 3),
+        
+        kSuperSpeedPlusDeviceCapabilityReserved = StandardUSBBitRange(4, 7),
+        kSuperSpeedPlusDeviceCapabilityReservedPhase = StandardUSBBitRangePhase(4, 7),
+        
+        kSuperSpeedPlusDeviceCapabilityMinRxLaneCount = StandardUSBBitRange(8, 11),
+        kSuperSpeedPlusDeviceCapabilityMinRxLaneCountPhase = StandardUSBBitRangePhase(8, 11),
+        
+        kSuperSpeedPlusDeviceCapabilityMinTxLaneCount = StandardUSBBitRange(12, 15),
+        kSuperSpeedPlusDeviceCapabilityMinTxLaneCountPhase = StandardUSBBitRangePhase(12, 15),
+        
+        //bmSublinkSpeedAttr
+        kSuperSpeedPlusDeviceCapabilitySublinkSpeedId = StandardUSBBitRange(0, 3),
+        kSuperSpeedPlusDeviceCapabilitySublinkSpeedIdPhase = StandardUSBBitRangePhase(0, 3),
+        
+        kSuperSpeedPlusDeviceCapabilitySublinkLSE = StandardUSBBitRange(4, 5),
+        kSuperSpeedPlusDeviceCapabilitySublinkLSEPhase = StandardUSBBitRangePhase(4, 5),
+        
+        kSuperSpeedPlusDeviceCapabilitySublinkType = StandardUSBBitRange(6, 7),
+        kSuperSpeedPlusDeviceCapabilitySublinkTypePhase = StandardUSBBitRangePhase(6, 7),
+        
+        kSuperSpeedPlusDeviceCapabilitySublinkReserved = StandardUSBBitRange(8, 13),
+        kSuperSpeedPlusDeviceCapabilitySublinkReservedPhase = StandardUSBBitRangePhase(8, 13),
+        
+        kSuperSpeedPlusDeviceCapabilitySublinkProtocol = StandardUSBBitRange(14, 15),
+        kSuperSpeedPlusDeviceCapabilitySublinkProtocolPhase = StandardUSBBitRangePhase(14, 15),
+        
+        kSuperSpeedPlusDeviceCapabilitySublinkSpeedMantissa = StandardUSBBitRange(16, 31),
+        kSuperSpeedPlusDeviceCapabilitySublinkSpeedMantissaPhase = StandardUSBBitRangePhase(16, 31),
+    };
+
         
 #ifdef __cplusplus
     // USB 3.0 9.6.2.3: Container ID
@@ -391,14 +471,48 @@
     {
         uint8_t     bLength;
         uint8_t     bDescriptorType;
+        uint8_t     bDevCapabilityType;
 #endif
         uint8_t  bReserved;
         uint32_t containerID[4];
     } __attribute__((packed));
         
     typedef struct ContainerIDCapabilityDescriptor ContainerIDCapabilityDescriptor;
-        
-    
+
+
+    // USB Billboard 3.1.6.2: Billboard Capability Descriptor
+    struct BillboardAlternateModeCapability
+    {
+        uint16_t wSVID;
+        uint8_t  bAlternateMode;
+        uint8_t  iAlternateModeString;
+    };
+
+#ifdef __cplusplus
+    // USB Billboard 3.1.6.2: Billboard Capability Descriptor
+    struct BillboardCapabilityDescriptor : public DeviceCapabilityDescriptor
+    {
+#else
+    struct BillboardCapabilityDescriptor
+    {
+        uint8_t                                 bLength;
+        uint8_t                                 bDescriptorType;
+        uint8_t                                 bDevCapabilityType;
+#endif
+        uint8_t                                 iAddtionalInfoURL;
+        uint8_t                                 bNumberOfAlternateModes;
+        uint8_t                                 bPreferredAlternateMode;
+        uint16_t                                VCONNPower;
+        uint8_t                                 bmConfigured[32];
+        uint16_t                                bcdVersion;
+        uint8_t                                 bAdditonalFailureInfo;
+        uint8_t                                 bReserved;
+        struct BillboardAlternateModeCapability BillboardAlternateModeCapabilities[];
+    } __attribute__((packed));
+
+    typedef struct BillboardCapabilityDescriptor BillboardCapabilityDescriptor;
+
+
 #ifdef __cplusplus
     // USB 3.0 9.6.4: Interface Association
     struct InterfaceAssociationDescriptor: public Descriptor
@@ -421,7 +535,7 @@
         
     
 #ifdef __cplusplus
-    // USB 3.0 9.6.7: SuperSpeed Endpoint Companion
+    // USB 3.1 9.6.7: SuperSpeed Endpoint Companion
     struct SuperSpeedEndpointCompanionDescriptor : public Descriptor
     {
 #else
@@ -430,9 +544,9 @@
         uint8_t     bLength;
         uint8_t     bDescriptorType;
 #endif
-        uint8_t  bMaxBurst;
-        uint8_t  bmAttributes;
-        uint16_t wBytesPerInterval;
+        uint8_t     bMaxBurst;
+        uint8_t     bmAttributes;
+        uint16_t    wBytesPerInterval;
     } __attribute__((packed));
         
     typedef struct SuperSpeedEndpointCompanionDescriptor SuperSpeedEndpointCompanionDescriptor;
@@ -449,10 +563,28 @@
         kSuperSpeedEndpointCompanionDescriptorBulkReservedPhase   = StandardUSBBitRangePhase(5, 7),
         kSuperSpeedEndpointCompanionDescriptorIsocMult            = StandardUSBBitRange(0, 1),
         kSuperSpeedEndpointCompanionDescriptorIsocMultPhase       = StandardUSBBitRangePhase(0, 1),
-        kSuperSpeedEndpointCompanionDescriptorIsocReserved        = StandardUSBBitRange(2, 7),
-        kSuperSpeedEndpointCompanionDescriptorIsocReservedPhase   = StandardUSBBitRangePhase(2, 7)
+        kSuperSpeedEndpointCompanionDescriptorIsocReserved        = StandardUSBBitRange(2, 6),
+        kSuperSpeedEndpointCompanionDescriptorIsocReservedPhase   = StandardUSBBitRangePhase(2, 6),
+        kSuperSpeedEndpointCompanionDescriptorSSPIsocCompanion    = StandardUSBBit(7)
     };
-    
+
+
+#ifdef __cplusplus
+    // USB 3.1 9.6.8: SuperSpeedPlus Isochronous Endpoint Companion
+    struct SuperSpeedPlusIsochronousEndpointCompanionDescriptor : public Descriptor
+    {
+#else
+    struct SuperSpeedPlusIsochronousEndpointCompanionDescriptor
+    {
+        uint8_t     bLength;
+        uint8_t     bDescriptorType;
+#endif
+        uint16_t    wReserved;
+        uint32_t    dwBytesPerInterval;
+    } __attribute__((packed));
+
+    typedef struct SuperSpeedPlusIsochronousEndpointCompanionDescriptor SuperSpeedPlusIsochronousEndpointCompanionDescriptor;
+
         
 #ifdef __cplusplus
     // USB 2.0 11.23.2.1: Hub Descriptor
@@ -526,8 +658,10 @@
     const DeviceCapabilityDescriptor* getNextCapabilityDescriptorWithType(const BOSDescriptor* bosDescriptor, const DeviceCapabilityDescriptor* currentDescriptor, const uint8_t type);
     const USB20ExtensionCapabilityDescriptor* getUSB20ExtensionDeviceCapabilityDescriptor(const BOSDescriptor* bosDescriptor);
     const SuperSpeedUSBDeviceCapabilityDescriptor* getSuperSpeedDeviceCapabilityDescriptor(const BOSDescriptor* bosDescriptor);
+    const SuperSpeedPlusUSBDeviceCapabilityDescriptor* getSuperSpeedPlusDeviceCapabilityDescriptor(const BOSDescriptor* bosDescriptor);
     const ContainerIDCapabilityDescriptor* getContainerIDDescriptor(const BOSDescriptor* bosDescriptor);
-    
+    const BillboardCapabilityDescriptor* getBillboardDescriptor(const BOSDescriptor* bosDescriptor);
+
 #pragma mark Device descriptor parsing
     bool validateDeviceDescriptor(uint32_t usbDeviceSpeed, const DeviceDescriptor* descriptor);
     
@@ -539,7 +673,19 @@
     bool validateEndpointMaxPacketSize(uint32_t usbDeviceSpeed, const EndpointDescriptor* descriptor);
     uint16_t getEndpointMaxPacketSize(uint32_t usbDeviceSpeed, const EndpointDescriptor* descriptor);
     bool validateEndpointBurstSize(uint32_t usbDeviceSpeed, const EndpointDescriptor* descriptor, const SuperSpeedEndpointCompanionDescriptor* companionDescriptor);
+    bool validateEndpointBurstSize(uint32_t usbDeviceSpeed,
+                                   const EndpointDescriptor* descriptor,
+                                   const SuperSpeedEndpointCompanionDescriptor* companionDescriptor,
+                                   const SuperSpeedPlusIsochronousEndpointCompanionDescriptor* sspCompanionDescriptor);
     uint16_t getEndpointBurstSize(uint32_t usbDeviceSpeed, const EndpointDescriptor* descriptor, const SuperSpeedEndpointCompanionDescriptor* companionDescriptor);
+    uint32_t getEndpointBurstSize32(uint32_t usbDeviceSpeed,
+                                    const EndpointDescriptor* descriptor,
+                                    const SuperSpeedEndpointCompanionDescriptor* companionDescriptor = NULL,
+                                    const SuperSpeedPlusIsochronousEndpointCompanionDescriptor* sspCompanionDescriptor = NULL);
+    uint8_t getEndpointMult(uint32_t usbDeviceSpeed,
+                            const EndpointDescriptor* descriptor,
+                            const SuperSpeedEndpointCompanionDescriptor* companionDescriptor = NULL,
+                            const SuperSpeedPlusIsochronousEndpointCompanionDescriptor* sspCompanionDescriptor = NULL);
     bool validateEndpointInterval(uint32_t usbDeviceSpeed, const EndpointDescriptor* descriptor);
     uint32_t getEndpointIntervalEncodedMicroframes(uint32_t usbDeviceSpeed, const EndpointDescriptor* descriptor);
     uint32_t getEndpointIntervalMicroframes(uint32_t usbDeviceSpeed, const EndpointDescriptor* descriptor);
@@ -548,6 +694,10 @@
     uint32_t getEndpointMaxStreams(uint32_t usbDeviceSpeed, const EndpointDescriptor* descriptor, const SuperSpeedEndpointCompanionDescriptor* companionDescriptor);
     uint32_t getConfigurationMaxPowerMilliAmps(uint32_t usbDeviceSpeed, const ConfigurationDescriptor* descriptor);
     bool validateEndpointDescriptor(uint32_t usbDeviceSpeed, const EndpointDescriptor* descriptor, const SuperSpeedEndpointCompanionDescriptor* companionDescriptor);
+    bool validateEndpointDescriptor(uint32_t usbDeviceSpeed,
+                                    const EndpointDescriptor* descriptor,
+                                    const SuperSpeedEndpointCompanionDescriptor* companionDescriptor,
+                                    const SuperSpeedPlusIsochronousEndpointCompanionDescriptor* sspCompanionDescriptor);
     
 #pragma mark String descriptor parsing
     /*!
@@ -661,6 +811,11 @@
         kInterfaceSuspendLowPower           = StandardUSBBit(0),
         kInterfaceSuspendRemoteWakeEnable   = StandardUSBBit(1)
     };
+
+    enum tBusVoltage
+    {
+        kBusVoltageDefault                  = 5
+    };
         
 #ifdef __cplusplus
 }
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/usb/USB.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/usb/USB.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/usb/USB.h	2015-08-27 02:12:06.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/usb/USB.h	2016-06-07 01:22:45.000000000 +0200
@@ -609,6 +609,43 @@
 	};
 	typedef struct IOUSBDeviceCapabilityContainerID		IOUSBDeviceCapabilityContainerID;
 	typedef IOUSBDeviceCapabilityContainerID *			IOUSBDeviceCapabilityContainerIDPtr;
+
+    /*!
+     @typedef IOUSBDeviceCapabilityBillboardAltConfig
+     @discussion Device Capability Billboard Alternate Setting Info
+     */
+    struct IOUSBDeviceCapabilityBillboardAltConfig {
+        UInt16          wSVID;
+        UInt8           bAltenateMode;
+        UInt8           iAlternateModeString;
+    };
+
+    typedef struct IOUSBDeviceCapabilityBillboardAltConfig		IOUSBDeviceCapabilityBillboardAltConfig;
+    typedef IOUSBDeviceCapabilityBillboardAltConfig *			IOUSBDeviceCapabilityBillboardAltConfigPtr;
+
+    /*!
+     @typedef IOUSBDeviceCapabilityBillboard
+     @discussion Device Capability Billboard
+     */
+    struct IOUSBDeviceCapabilityBillboard {
+        UInt8                                           bLength;
+        UInt8                                           bDescriptorType;
+        UInt8                                           bDevCapabilityType;
+        UInt8                                           iAdditionalInfoURL;
+        UInt8                                           bNumberOfAlternateModes;
+        UInt8                                           bPreferredAlternateMode;
+        UInt16                                          vCONNPower;
+        UInt8                                           bmConfigured[32];
+        UInt16                                          bcdVersion;
+        UInt8                                           bAdditionalFailureInfo;
+        UInt8                                           bReserved;
+        IOUSBDeviceCapabilityBillboardAltConfig         pAltConfigurations[];
+    };
+
+    typedef struct IOUSBDeviceCapabilityBillboard		IOUSBDeviceCapabilityBillboard;
+    typedef IOUSBDeviceCapabilityBillboard *			IOUSBDeviceCapabilityBillboardPtr;
+
+
 #pragma options align=reset
 	
 /*!
@@ -1134,17 +1171,19 @@
 	/*!
 	 @enum USBDeviceSpeed
 	 @discussion Returns the speed of a particular USB device. 
-	 @constant	kUSBDeviceSpeedLow	The device is a low speed device.
-	 @constant	kUSBDeviceSpeedFull	The device is a full speed device.
-	 @constant	kUSBDeviceSpeedHigh	The device is a high speed device.
-	 @constant	kUSBDeviceSpeedSuper  The device is a SuperSpeed device
+	 @constant	kUSBDeviceSpeedLow        The device is a low speed device.
+	 @constant	kUSBDeviceSpeedFull       The device is a full speed device.
+	 @constant	kUSBDeviceSpeedHigh       The device is a high speed device.
+	 @constant	kUSBDeviceSpeedSuper      The device is a SuperSpeed (Gen 1) 5Gbps device
+     @constant	kUSBDeviceSpeedSuperGen2  The device is a SuperSpeed Plus (Gen 2) 10Gbps device
 	 */
 enum {
-        kUSBDeviceSpeedLow		= 0,
-        kUSBDeviceSpeedFull		= 1,
-		kUSBDeviceSpeedHigh		= 2,
-		kUSBDeviceSpeedSuper	= 3
-        };
+        kUSBDeviceSpeedLow          = 0,
+        kUSBDeviceSpeedFull         = 1,
+		kUSBDeviceSpeedHigh         = 2,
+		kUSBDeviceSpeedSuper        = 3,
+        kUSBDeviceSpeedSuperPlus	= 4
+};
 
 /*!
     @enum MicrosecondsInFrame
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/usb/USBSpec.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/usb/USBSpec.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/usb/USBSpec.h	2015-11-11 08:28:57.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/IOKit/usb/USBSpec.h	2016-06-07 01:22:45.000000000 +0200
@@ -21,7 +21,6 @@
  * @APPLE_LICENSE_HEADER_END@
  */
 
-
 /*
  * Constants that both OS9 and OSX want to define, and whose values are
  * specified by the USB Standard.
@@ -149,7 +148,8 @@
 		kUSBDeviceCapabilityWirelessUSB		= 1,
 		kUSBDeviceCapabilityUSB20Extension	= 2,
 		kUSBDeviceCapabilitySuperSpeedUSB	= 3,
-		kUSBDeviceCapabilityContainerID		= 4
+		kUSBDeviceCapabilityContainerID		= 4,
+        kUSBDeviceCapabilityBillboard       = 13
 };
 
     /*!
@@ -480,7 +480,41 @@
 		kUSBSuperSpeedSupportsHS	=	2,		// Value of wSpeedSupported indicating that the device supports high speed
 		kUSBSuperSpeedSupportsSS	=	3,		// Value of wSpeedSupported indicating that the device supports 5 Gbps
 	};
-		
+
+    /*!
+     @enum USB Device Billboard Capability Vconn Power constants
+     @discussion Power needed by the adapter for full functionality
+     */
+    enum {
+        kUSBBillboardVConn1Watt     =   0,
+        kUSBBillboardVConn1P5Watt   =   1,
+        kUSBBillboardVConn2Watt     =   2,
+        kUSBBillboardVConn3Watt     =   3,
+        kUSBBillboardVConn4Watt     =   4,
+        kUSBBillboardVConn5Watt     =   5,
+        kUSBBillboardVConn6Watt     =   6,
+        kUSBBillboardVConnReserved  =   7
+    };
+    /*!
+     @defineblock USB Billboard Capability Descriptor Constant
+     @define	kUSBBillboardVConnNoPowerReq	bit position for No Power Required, VConn b2:0 are ignored when this bit is set
+     */
+
+#define kUSBBillboardVConnNoPowerReq    15
+
+    /*! @/defineblock */
+
+    /*!
+     @enum USB Device Billboard Capability bmConfigured constants
+     @ A bit pair signifying the state of Alternate Modes
+     */
+    enum {
+        kUSBBillboardUnspecifiedError     =   0,
+        kUSBBillboardConfigNotAttempted   =   1,
+        kUSBBillboardConfigUnsuccessful   =   2,
+        kUSBBillboardAltModeConfigSuccess =   3
+    };
+
 	/*!
 	 @defineblock USB Descriptor and IORegistry constants
 	 @discussion 	Various constants used to describe the fields in the various USB Device Descriptors and IORegistry names used for some of those fields 
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/TargetConditionals.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/TargetConditionals.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/TargetConditionals.h	2015-08-23 00:34:55.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/TargetConditionals.h	2016-05-11 14:53:08.000000000 +0200
@@ -61,10 +61,12 @@
         TARGET_OS_WIN32           - Generated code will run under 32-bit Windows
         TARGET_OS_UNIX            - Generated code will run under some Unix (not OSX) 
         TARGET_OS_MAC             - Generated code will run under Mac OS X variant
-           TARGET_OS_IPHONE          - Generated code for firmware, devices, or simulator 
+           TARGET_OS_OSX          - Generated code will run under OS X devices
+           TARGET_OS_IPHONE          - Generated code for firmware, devices, or simulator
               TARGET_OS_IOS             - Generated code will run under iOS 
               TARGET_OS_TV              - Generated code will run under Apple TV OS
               TARGET_OS_WATCH           - Generated code will run under Apple Watch OS
+                 TARGET_OS_BRIDGE          - Generated code will run under Bridge devices
            TARGET_OS_SIMULATOR      - Generated code will run under a simulator
            TARGET_OS_EMBEDDED       - Generated code for firmware
        
@@ -93,9 +95,11 @@
     #define TARGET_OS_MAC               1
     #define TARGET_OS_WIN32             0
     #define TARGET_OS_UNIX              0
-    #define TARGET_OS_IPHONE            0 
+    #define TARGET_OS_OSX               1
+    #define TARGET_OS_IPHONE            0
     #define TARGET_OS_IOS               0
     #define TARGET_OS_WATCH             0
+    #define TARGET_OS_BRIDGE            0
     #define TARGET_OS_TV                0
     #define TARGET_OS_SIMULATOR         0
     #define TARGET_OS_EMBEDDED          0 
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/atm/atm_types.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/atm/atm_types.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/atm/atm_types.h	2015-08-27 01:55:10.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/atm/atm_types.h	2016-06-03 22:54:59.000000000 +0200
@@ -64,6 +64,9 @@
 typedef uint64_t *atm_memory_size_array_t;
 
 #define ATM_SUBAID32_MAX 	(UINT32_MAX)
-#define ATM_TRACE_DISABLE       (0x100)
+#define ATM_TRACE_DISABLE		(0x0100) /* OS_TRACE_MODE_DISABLE - Do not initialize the new logging*/
+#define ATM_TRACE_OFF			(0x0400) /* OS_TRACE_MODE_OFF - Don't drop log messages to new log buffers */
+#define ATM_ENABLE_LEGACY_LOGGING	(0x0200) /* OS_TRACE_SYSTEMMODE_LEGACY_LOGGING - Enable legacy logging  */
 
 #endif /* _ATM_ATM_TYPES_H_ */
+
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/corpses/task_corpse.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/corpses/task_corpse.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/corpses/task_corpse.h	2015-08-27 01:55:12.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/corpses/task_corpse.h	2016-06-03 22:55:00.000000000 +0200
@@ -32,47 +32,10 @@
 #include <stdint.h>
 #include <mach/mach_types.h>
 #include <kern/kern_cdata.h>
+#include <kern/kcdata.h>
 
 typedef struct kcdata_item	*task_crashinfo_item_t;
 
-/*
- * NOTE: Please update libkdd/kcdata/kcdtypes.c if you make any changes
- * in TASK_CRASHINFO_* types.
- */
-
-#define TASK_CRASHINFO_BEGIN                KCDATA_BUFFER_BEGIN_CRASHINFO
-#define TASK_CRASHINFO_STRING_DESC          KCDATA_TYPE_STRING_DESC
-#define TASK_CRASHINFO_UINT32_DESC          KCDATA_TYPE_UINT32_DESC
-#define TASK_CRASHINFO_UINT64_DESC          KCDATA_TYPE_UINT64_DESC
-
-#define TASK_CRASHINFO_EXTMODINFO           0x801
-#define TASK_CRASHINFO_BSDINFOWITHUNIQID    0x802 /* struct proc_uniqidentifierinfo */
-#define TASK_CRASHINFO_TASKDYLD_INFO        0x803
-#define TASK_CRASHINFO_UUID                 0x804
-#define TASK_CRASHINFO_PID                  0x805
-#define TASK_CRASHINFO_PPID                 0x806
-#define TASK_CRASHINFO_RUSAGE               0x807  /* struct rusage */
-#define TASK_CRASHINFO_RUSAGE_INFO          0x808  /* struct rusage_info_current */
-#define TASK_CRASHINFO_PROC_NAME            0x809  /* char * */
-#define TASK_CRASHINFO_PROC_STARTTIME       0x80B  /* struct timeval64 */
-#define TASK_CRASHINFO_USERSTACK            0x80C  /* uint64_t */
-#define TASK_CRASHINFO_ARGSLEN              0x80D
-#define TASK_CRASHINFO_EXCEPTION_CODES      0x80E  /* mach_exception_data_t */
-#define TASK_CRASHINFO_PROC_PATH            0x80F  /* string of len MAXPATHLEN */
-#define TASK_CRASHINFO_PROC_CSFLAGS         0x810  /* uint32_t */
-#define TASK_CRASHINFO_PROC_STATUS          0x811  /* char */
-#define TASK_CRASHINFO_UID                  0x812  /* uid_t */
-#define TASK_CRASHINFO_GID                  0x813  /* gid_t */
-#define TASK_CRASHINFO_PROC_ARGC            0x814  /* int */
-#define TASK_CRASHINFO_PROC_FLAGS           0x815  /* unsigned int */
-#define TASK_CRASHINFO_CPUTYPE              0x816  /* cpu_type_t */
-#define TASK_CRASHINFO_WORKQUEUEINFO        0x817  /* struct proc_workqueueinfo */
-#define TASK_CRASHINFO_RESPONSIBLE_PID      0x818  /* pid_t */
-#define TASK_CRASHINFO_DIRTY_FLAGS          0x819  /* int */
-#define TASK_CRASHINFO_CRASHED_THREADID     0x81A  /* uint64_t */
-
-#define TASK_CRASHINFO_END                  KCDATA_TYPE_BUFFER_END
-
 /* Deprecated: use the KCDATA_* macros for all future use */
 #define CRASHINFO_ITEM_TYPE(item)		  KCDATA_ITEM_TYPE(item)
 #define CRASHINFO_ITEM_SIZE(item)		  KCDATA_ITEM_SIZE(item)
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/default_pager/default_pager_alerts.defs /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/default_pager/default_pager_alerts.defs
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/default_pager/default_pager_alerts.defs	2015-08-27 01:55:16.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/default_pager/default_pager_alerts.defs	1970-01-01 01:00:00.000000000 +0100
@@ -1,50 +0,0 @@
-/*
- * Copyright (c) 2000 Apple Computer, Inc. All rights reserved.
- *
- * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
- * 
- * This file contains Original Code and/or Modifications of Original Code
- * as defined in and that are subject to the Apple Public Source License
- * Version 2.0 (the 'License'). You may not use this file except in
- * compliance with the License. The rights granted to you under the License
- * may not be used to create, or enable the creation or redistribution of,
- * unlawful or unlicensed copies of an Apple operating system, or to
- * circumvent, violate, or enable the circumvention or violation of, any
- * terms of an Apple operating system software license agreement.
- * 
- * Please obtain a copy of the License at
- * http://www.opensource.apple.com/apsl/ and read it before using this file.
- * 
- * The Original Code and all software distributed under the License are
- * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
- * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
- * INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
- * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
- * Please see the License for the specific language governing rights and
- * limitations under the License.
- * 
- * @APPLE_OSREFERENCE_LICENSE_HEADER_END@
- */
-/*
- * File:	default_pager/default_pager_alerts.defs
- *
- */
-
-subsystem 
-#if	KERNEL_USER
-	KernelUser
-#endif /* KERNEL_USER */
-#if	KERNEL_SERVER
-	KernelServer
-#endif /* KERNEL_SERVER */
-		default_pager_alerts 2295;
-
-#include <mach/std_types.defs>
-#include <mach/mach_types.defs>
-
-
-simpleroutine	default_pager_space_alert(
-		alert_port		: mach_port_t;
-	in	flags			: int);
-
-/* vim: set ft=c : */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/default_pager/default_pager_object.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/default_pager/default_pager_object.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/default_pager/default_pager_object.h	2015-08-27 01:55:16.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/default_pager/default_pager_object.h	1970-01-01 01:00:00.000000000 +0100
@@ -1,520 +0,0 @@
-#ifndef	_default_pager_object_user_
-#define	_default_pager_object_user_
-
-/* Module default_pager_object */
-
-#include <string.h>
-#include <mach/ndr.h>
-#include <mach/boolean.h>
-#include <mach/kern_return.h>
-#include <mach/notify.h>
-#include <mach/mach_types.h>
-#include <mach/message.h>
-#include <mach/mig_errors.h>
-#include <mach/port.h>
-
-#ifdef AUTOTEST
-#ifndef FUNCTION_PTR_T
-#define FUNCTION_PTR_T
-typedef void (*function_ptr_t)(mach_port_t, char *, mach_msg_type_number_t);
-typedef struct {
-        char            *name;
-        function_ptr_t  function;
-} function_table_entry;
-typedef function_table_entry   *function_table_t;
-#endif /* FUNCTION_PTR_T */
-#endif /* AUTOTEST */
-
-#ifndef	default_pager_object_MSG_COUNT
-#define	default_pager_object_MSG_COUNT	11
-#endif	/* default_pager_object_MSG_COUNT */
-
-#include <mach/std_types.h>
-#include <mach/mig.h>
-#include <mach/mig.h>
-#include <mach/mach_types.h>
-#include <default_pager/default_pager_types.h>
-
-#ifdef __BeforeMigUserHeader
-__BeforeMigUserHeader
-#endif /* __BeforeMigUserHeader */
-
-#include <sys/cdefs.h>
-__BEGIN_DECLS
-
-
-/* Routine default_pager_object_create */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t default_pager_object_create
-(
-	mach_port_t default_pager,
-	vm_size_t object_size,
-	memory_object_t *memory_object
-);
-
-/* Routine default_pager_info */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t default_pager_info
-(
-	mach_port_t default_pager,
-	default_pager_info_t *info
-);
-
-/* Routine default_pager_objects */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t default_pager_objects
-(
-	mach_port_t default_pager,
-	default_pager_object_array_t *objects,
-	mach_msg_type_number_t *objectsCnt,
-	mach_port_array_t *ports,
-	mach_msg_type_number_t *portsCnt
-);
-
-/* Routine default_pager_object_pages */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t default_pager_object_pages
-(
-	mach_port_t default_pager,
-	mach_port_t memory_object,
-	default_pager_page_array_t *pages,
-	mach_msg_type_number_t *pagesCnt
-);
-
-/* Routine default_pager_backing_store_create */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t default_pager_backing_store_create
-(
-	mach_port_t default_pager,
-	int priority,
-	int clsize,
-	mach_port_t *backing_store
-);
-
-/* Routine default_pager_backing_store_delete */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t default_pager_backing_store_delete
-(
-	mach_port_t backing_store
-);
-
-/* Routine default_pager_backing_store_info */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t default_pager_backing_store_info
-(
-	mach_port_t backing_store,
-	backing_store_flavor_t flavor,
-	backing_store_info_t info,
-	mach_msg_type_number_t *infoCnt
-);
-
-/* Routine default_pager_add_file */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t default_pager_add_file
-(
-	mach_port_t backing_store,
-	vnode_ptr_t vnode,
-	int record_size,
-	vm_size_t size
-);
-
-/* Routine default_pager_triggers */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t default_pager_triggers
-(
-	mach_port_t default_pager,
-	int hi_wat,
-	int lo_wat,
-	int flags,
-	mach_port_t trigger_port
-);
-
-/* Routine default_pager_info_64 */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t default_pager_info_64
-(
-	mach_port_t default_pager,
-	default_pager_info_64_t *info
-);
-
-__END_DECLS
-
-/********************** Caution **************************/
-/* The following data types should be used to calculate  */
-/* maximum message sizes only. The actual message may be */
-/* smaller, and the position of the arguments within the */
-/* message layout may vary from what is presented here.  */
-/* For example, if any of the arguments are variable-    */
-/* sized, and less than the maximum is sent, the data    */
-/* will be packed tight in the actual message to reduce  */
-/* the presence of holes.                                */
-/********************** Caution **************************/
-
-/* typedefs for all requests */
-
-#ifndef __Request__default_pager_object_subsystem__defined
-#define __Request__default_pager_object_subsystem__defined
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		vm_size_t object_size;
-	} __Request__default_pager_object_create_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-	} __Request__default_pager_info_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-	} __Request__default_pager_objects_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_port_descriptor_t memory_object;
-		/* end of the kernel processed data */
-	} __Request__default_pager_object_pages_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		int priority;
-		int clsize;
-	} __Request__default_pager_backing_store_create_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-	} __Request__default_pager_backing_store_delete_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		backing_store_flavor_t flavor;
-		mach_msg_type_number_t infoCnt;
-	} __Request__default_pager_backing_store_info_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		vnode_ptr_t vnode;
-		int record_size;
-		vm_size_t size;
-	} __Request__default_pager_add_file_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_port_descriptor_t trigger_port;
-		/* end of the kernel processed data */
-		NDR_record_t NDR;
-		int hi_wat;
-		int lo_wat;
-		int flags;
-	} __Request__default_pager_triggers_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-	} __Request__default_pager_info_64_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-#endif /* !__Request__default_pager_object_subsystem__defined */
-
-/* union of all requests */
-
-#ifndef __RequestUnion__default_pager_object_subsystem__defined
-#define __RequestUnion__default_pager_object_subsystem__defined
-union __RequestUnion__default_pager_object_subsystem {
-	__Request__default_pager_object_create_t Request_default_pager_object_create;
-	__Request__default_pager_info_t Request_default_pager_info;
-	__Request__default_pager_objects_t Request_default_pager_objects;
-	__Request__default_pager_object_pages_t Request_default_pager_object_pages;
-	__Request__default_pager_backing_store_create_t Request_default_pager_backing_store_create;
-	__Request__default_pager_backing_store_delete_t Request_default_pager_backing_store_delete;
-	__Request__default_pager_backing_store_info_t Request_default_pager_backing_store_info;
-	__Request__default_pager_add_file_t Request_default_pager_add_file;
-	__Request__default_pager_triggers_t Request_default_pager_triggers;
-	__Request__default_pager_info_64_t Request_default_pager_info_64;
-};
-#endif /* !__RequestUnion__default_pager_object_subsystem__defined */
-/* typedefs for all replies */
-
-#ifndef __Reply__default_pager_object_subsystem__defined
-#define __Reply__default_pager_object_subsystem__defined
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_port_descriptor_t memory_object;
-		/* end of the kernel processed data */
-	} __Reply__default_pager_object_create_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-		default_pager_info_t info;
-	} __Reply__default_pager_info_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_ool_descriptor_t objects;
-		mach_msg_ool_ports_descriptor_t ports;
-		/* end of the kernel processed data */
-		NDR_record_t NDR;
-		mach_msg_type_number_t objectsCnt;
-		mach_msg_type_number_t portsCnt;
-	} __Reply__default_pager_objects_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_ool_descriptor_t pages;
-		/* end of the kernel processed data */
-		NDR_record_t NDR;
-		mach_msg_type_number_t pagesCnt;
-	} __Reply__default_pager_object_pages_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_port_descriptor_t backing_store;
-		/* end of the kernel processed data */
-	} __Reply__default_pager_backing_store_create_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-	} __Reply__default_pager_backing_store_delete_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-		mach_msg_type_number_t infoCnt;
-		integer_t info[20];
-	} __Reply__default_pager_backing_store_info_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-	} __Reply__default_pager_add_file_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-	} __Reply__default_pager_triggers_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-		default_pager_info_64_t info;
-	} __Reply__default_pager_info_64_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-#endif /* !__Reply__default_pager_object_subsystem__defined */
-
-/* union of all replies */
-
-#ifndef __ReplyUnion__default_pager_object_subsystem__defined
-#define __ReplyUnion__default_pager_object_subsystem__defined
-union __ReplyUnion__default_pager_object_subsystem {
-	__Reply__default_pager_object_create_t Reply_default_pager_object_create;
-	__Reply__default_pager_info_t Reply_default_pager_info;
-	__Reply__default_pager_objects_t Reply_default_pager_objects;
-	__Reply__default_pager_object_pages_t Reply_default_pager_object_pages;
-	__Reply__default_pager_backing_store_create_t Reply_default_pager_backing_store_create;
-	__Reply__default_pager_backing_store_delete_t Reply_default_pager_backing_store_delete;
-	__Reply__default_pager_backing_store_info_t Reply_default_pager_backing_store_info;
-	__Reply__default_pager_add_file_t Reply_default_pager_add_file;
-	__Reply__default_pager_triggers_t Reply_default_pager_triggers;
-	__Reply__default_pager_info_64_t Reply_default_pager_info_64;
-};
-#endif /* !__RequestUnion__default_pager_object_subsystem__defined */
-
-#ifndef subsystem_to_name_map_default_pager_object
-#define subsystem_to_name_map_default_pager_object \
-    { "default_pager_object_create", 2275 },\
-    { "default_pager_info", 2276 },\
-    { "default_pager_objects", 2277 },\
-    { "default_pager_object_pages", 2278 },\
-    { "default_pager_backing_store_create", 2280 },\
-    { "default_pager_backing_store_delete", 2281 },\
-    { "default_pager_backing_store_info", 2282 },\
-    { "default_pager_add_file", 2283 },\
-    { "default_pager_triggers", 2284 },\
-    { "default_pager_info_64", 2285 }
-#endif
-
-#ifdef __AfterMigUserHeader
-__AfterMigUserHeader
-#endif /* __AfterMigUserHeader */
-
-#endif	 /* _default_pager_object_user_ */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/default_pager/default_pager_types.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/default_pager/default_pager_types.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/default_pager/default_pager_types.h	2015-08-27 01:55:16.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/default_pager/default_pager_types.h	2016-06-03 22:55:02.000000000 +0200
@@ -41,71 +41,6 @@
 #include <mach/machine/vm_types.h>
 #include <mach/memory_object_types.h>
 
-typedef	memory_object_default_t	default_pager_t;
-
-/*
- *	Remember to update the mig type definitions
- *	in default_pager_types.defs when adding/removing fields.
- */
-
-typedef struct default_pager_info {
-	vm_size_t 	dpi_total_space; /* size of backing store */
-	vm_size_t	dpi_free_space;	 /* how much of it is unused */
-	vm_size_t	dpi_page_size;	 /* the pager's vm page size */
-} default_pager_info_t;
-
-typedef struct default_pager_info_64 {
-	memory_object_size_t 	dpi_total_space; /* size of backing store */
-	memory_object_size_t	dpi_free_space;	 /* how much of it is unused */
-	vm_size_t		dpi_page_size;	 /* the pager's vm page size */
-	int			dpi_flags;
-#define DPI_ENCRYPTED	0x1	/* swap files are encrypted */
-} default_pager_info_64_t;
-
-typedef integer_t *backing_store_info_t;
-typedef int	backing_store_flavor_t;
-typedef int	*vnode_ptr_t;
-
-#define BACKING_STORE_BASIC_INFO	1
-#define BACKING_STORE_BASIC_INFO_COUNT \
-		(sizeof(struct backing_store_basic_info)/sizeof(integer_t))
-struct backing_store_basic_info {
-	natural_t	pageout_calls;		/* # pageout calls */
-	natural_t	pagein_calls;		/* # pagein calls */
-	natural_t	pages_in;		/* # pages paged in (total) */
-	natural_t	pages_out;		/* # pages paged out (total) */
-	natural_t	pages_unavail;		/* # zero-fill pages */
-	natural_t	pages_init;		/* # page init requests */
-	natural_t	pages_init_writes;	/* # page init writes */
-
-	natural_t	bs_pages_total;		/* # pages (total) */
-	natural_t	bs_pages_free;		/* # unallocated pages */
-	natural_t	bs_pages_in;		/* # page read requests */
-	natural_t	bs_pages_in_fail;	/* # page read errors */
-	natural_t	bs_pages_out;		/* # page write requests */
-	natural_t	bs_pages_out_fail;	/* # page write errors */
-
-	integer_t	bs_priority;
-	integer_t	bs_clsize;
-};
-typedef struct backing_store_basic_info	*backing_store_basic_info_t;
-
-
-typedef struct default_pager_object {
-	vm_offset_t dpo_object;		/* object managed by the pager */
-	vm_size_t dpo_size;		/* backing store used for the object */
-} default_pager_object_t;
-
-typedef default_pager_object_t *default_pager_object_array_t;
-
-typedef struct default_pager_page {
-	vm_offset_t dpp_offset;		/* offset of the page in its object */
-} default_pager_page_t;
-
-typedef default_pager_page_t *default_pager_page_array_t;
-
-#define DEFAULT_PAGER_BACKING_STORE_MAXPRI	4
-
 #define HI_WAT_ALERT		0x01
 #define LO_WAT_ALERT		0x02
 #define SWAP_ENCRYPT_ON		0x04
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/gssd/gssd_mach.defs /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/gssd/gssd_mach.defs
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/gssd/gssd_mach.defs	2015-08-27 01:55:26.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/gssd/gssd_mach.defs	2016-06-03 22:55:06.000000000 +0200
@@ -40,6 +40,7 @@
 type gssd_gid_list = array [*:16] of uint32_t;
 type gssd_ctx = uint64_t;
 type gssd_cred = uint64_t;
+type gssd_etype_list = array [*:64] of int32_t;
 
 subsystem
 #if KERNEL_USER
@@ -135,6 +136,29 @@
 	out minor_stat		: uint32_t
 );
 
+routine mach_gss_init_sec_context_v3(
+	server			: mach_port_t;
+	in  mech		: gssd_mechtype;
+	in  intoken		: gssd_byte_buffer;
+	in  uid			: uint32_t;
+	in  clnt_nt		: gssd_nametype;
+	in  clnt_princ		: gssd_byte_buffer;
+	in  svc_nt		: gssd_nametype;
+	in  svc_princ		: gssd_byte_buffer;
+	in  flags		: uint32_t;
+	in  etypes		: gssd_etype_list;
+	inout gssd_flags	: uint32_t;
+	inout context		: gssd_ctx;
+	inout cred_handle	: gssd_cred;
+	ServerAuditToken atoken	: audit_token_t;
+	out  ret_flags		: uint32_t;
+	out key			: gssd_byte_buffer, dealloc;
+	out outtoken		: gssd_byte_buffer, dealloc;
+	out displayname		: gssd_dstring;
+	out major_stat		: uint32_t;
+	out minor_stat		: uint32_t
+);
+
 routine mach_gss_hold_cred(
 	server			: mach_port_t;
 	in  mech		: gssd_mechtype;
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/gssd/gssd_mach.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/gssd/gssd_mach.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/gssd/gssd_mach.h	2015-08-27 01:55:26.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/gssd/gssd_mach.h	2016-06-03 22:55:06.000000000 +0200
@@ -12,6 +12,29 @@
 #include <mach/message.h>
 #include <mach/mig_errors.h>
 #include <mach/port.h>
+	
+/* BEGIN MIG_STRNCPY_ZEROFILL CODE */
+
+#if defined(__has_include)
+#if __has_include(<mach/mig_strncpy_zerofill_support.h>)
+#ifndef USING_MIG_STRNCPY_ZEROFILL
+#define USING_MIG_STRNCPY_ZEROFILL
+#endif
+#ifndef __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#define __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#ifdef __cplusplus
+extern "C" {
+#endif
+	extern int mig_strncpy_zerofill(char *dest, const char *src, int len) __attribute__((weak_import));
+#ifdef __cplusplus
+}
+#endif
+#endif /* __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__ */
+#endif /* __has_include(<mach/mig_strncpy_zerofill_support.h>) */
+#endif /* __has_include */
+	
+/* END MIG_STRNCPY_ZEROFILL CODE */
+
 #if	(__MigKernelSpecificCode) || (_MIG_KERNEL_SPECIFIC_CODE_)
 #include <kern/ipc_mig.h>
 #endif /* __MigKernelSpecificCode */
@@ -29,7 +52,7 @@
 #endif /* AUTOTEST */
 
 #ifndef	gssd_mach_MSG_COUNT
-#define	gssd_mach_MSG_COUNT	8
+#define	gssd_mach_MSG_COUNT	9
 #endif	/* gssd_mach_MSG_COUNT */
 
 #include <mach/std_types.h>
@@ -179,6 +202,41 @@
 	uint32_t *minor_stat
 );
 
+/* Routine mach_gss_init_sec_context_v3 */
+#ifdef	mig_external
+mig_external
+#else
+extern
+#endif	/* mig_external */
+kern_return_t mach_gss_init_sec_context_v3
+(
+	mach_port_t server,
+	gssd_mechtype mech,
+	gssd_byte_buffer intoken,
+	mach_msg_type_number_t intokenCnt,
+	uint32_t uid,
+	gssd_nametype clnt_nt,
+	gssd_byte_buffer clnt_princ,
+	mach_msg_type_number_t clnt_princCnt,
+	gssd_nametype svc_nt,
+	gssd_byte_buffer svc_princ,
+	mach_msg_type_number_t svc_princCnt,
+	uint32_t flags,
+	gssd_etype_list etypes,
+	mach_msg_type_number_t etypesCnt,
+	uint32_t *gssd_flags,
+	gssd_ctx *context,
+	gssd_cred *cred_handle,
+	uint32_t *ret_flags,
+	gssd_byte_buffer *key,
+	mach_msg_type_number_t *keyCnt,
+	gssd_byte_buffer *outtoken,
+	mach_msg_type_number_t *outtokenCnt,
+	gssd_dstring displayname,
+	uint32_t *major_stat,
+	uint32_t *minor_stat
+);
+
 /* Routine mach_gss_hold_cred */
 #ifdef	mig_external
 mig_external
@@ -372,6 +430,36 @@
 		mach_msg_header_t Head;
 		/* start of the kernel processed data */
 		mach_msg_body_t msgh_body;
+		mach_msg_ool_descriptor_t intoken;
+		mach_msg_ool_descriptor_t clnt_princ;
+		mach_msg_ool_descriptor_t svc_princ;
+		/* end of the kernel processed data */
+		NDR_record_t NDR;
+		gssd_mechtype mech;
+		mach_msg_type_number_t intokenCnt;
+		uint32_t uid;
+		gssd_nametype clnt_nt;
+		mach_msg_type_number_t clnt_princCnt;
+		gssd_nametype svc_nt;
+		mach_msg_type_number_t svc_princCnt;
+		uint32_t flags;
+		mach_msg_type_number_t etypesCnt;
+		int32_t etypes[64];
+		uint32_t gssd_flags;
+		gssd_ctx context;
+		gssd_cred cred_handle;
+	} __Request__mach_gss_init_sec_context_v3_t __attribute__((unused));
+#ifdef  __MigPackStructs
+#pragma pack()
+#endif
+
+#ifdef  __MigPackStructs
+#pragma pack(4)
+#endif
+	typedef struct {
+		mach_msg_header_t Head;
+		/* start of the kernel processed data */
+		mach_msg_body_t msgh_body;
 		mach_msg_ool_descriptor_t princ;
 		/* end of the kernel processed data */
 		NDR_record_t NDR;
@@ -425,6 +513,7 @@
 	__Request__mach_gss_log_error_t Request_mach_gss_log_error;
 	__Request__mach_gss_init_sec_context_v2_t Request_mach_gss_init_sec_context_v2;
 	__Request__mach_gss_accept_sec_context_v2_t Request_mach_gss_accept_sec_context_v2;
+	__Request__mach_gss_init_sec_context_v3_t Request_mach_gss_init_sec_context_v3;
 	__Request__mach_gss_hold_cred_t Request_mach_gss_hold_cred;
 	__Request__mach_gss_unhold_cred_t Request_mach_gss_unhold_cred;
 	__Request__mach_gss_lookup_t Request_mach_gss_lookup;
@@ -555,6 +644,33 @@
 #endif
 	typedef struct {
 		mach_msg_header_t Head;
+		/* start of the kernel processed data */
+		mach_msg_body_t msgh_body;
+		mach_msg_ool_descriptor_t key;
+		mach_msg_ool_descriptor_t outtoken;
+		/* end of the kernel processed data */
+		NDR_record_t NDR;
+		uint32_t gssd_flags;
+		gssd_ctx context;
+		gssd_cred cred_handle;
+		uint32_t ret_flags;
+		mach_msg_type_number_t keyCnt;
+		mach_msg_type_number_t outtokenCnt;
+		mach_msg_type_number_t displaynameOffset; /* MiG doesn't use it */
+		mach_msg_type_number_t displaynameCnt;
+		char displayname[128];
+		uint32_t major_stat;
+		uint32_t minor_stat;
+	} __Reply__mach_gss_init_sec_context_v3_t __attribute__((unused));
+#ifdef  __MigPackStructs
+#pragma pack()
+#endif
+
+#ifdef  __MigPackStructs
+#pragma pack(4)
+#endif
+	typedef struct {
+		mach_msg_header_t Head;
 		NDR_record_t NDR;
 		kern_return_t RetCode;
 		uint32_t major_stat;
@@ -603,6 +719,7 @@
 	__Reply__mach_gss_log_error_t Reply_mach_gss_log_error;
 	__Reply__mach_gss_init_sec_context_v2_t Reply_mach_gss_init_sec_context_v2;
 	__Reply__mach_gss_accept_sec_context_v2_t Reply_mach_gss_accept_sec_context_v2;
+	__Reply__mach_gss_init_sec_context_v3_t Reply_mach_gss_init_sec_context_v3;
 	__Reply__mach_gss_hold_cred_t Reply_mach_gss_hold_cred;
 	__Reply__mach_gss_unhold_cred_t Reply_mach_gss_unhold_cred;
 	__Reply__mach_gss_lookup_t Reply_mach_gss_lookup;
@@ -616,9 +733,10 @@
     { "mach_gss_log_error", 1001 },\
     { "mach_gss_init_sec_context_v2", 1002 },\
     { "mach_gss_accept_sec_context_v2", 1003 },\
-    { "mach_gss_hold_cred", 1004 },\
-    { "mach_gss_unhold_cred", 1005 },\
-    { "mach_gss_lookup", 1006 }
+    { "mach_gss_init_sec_context_v3", 1004 },\
+    { "mach_gss_hold_cred", 1005 },\
+    { "mach_gss_unhold_cred", 1006 },\
+    { "mach_gss_lookup", 1007 }
 #endif
 
 #ifdef __AfterMigUserHeader
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/gssd/gssd_mach_types.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/gssd/gssd_mach_types.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/gssd/gssd_mach_types.h	2015-08-27 01:55:25.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/gssd/gssd_mach_types.h	2016-06-03 22:55:05.000000000 +0200
@@ -61,6 +61,7 @@
 typedef uint32_t *gssd_gid_list;
 typedef uint64_t gssd_ctx;
 typedef uint64_t gssd_cred;
+typedef int32_t *gssd_etype_list;
 
 /* The following need to correspond to GSS_C_*_FLAG in gssapi.h */
 #define GSSD_DELEG_FLAG		1
@@ -81,6 +82,6 @@
 #define GSSD_RESTART		16 // Destroy the supplied context and start over
 #define GSSD_NFS_1DES		64 // Only get single DES session keys
 #define GSSD_WIN2K_HACK		128 // Hack for Win2K
-
+#define GSSD_LUCID_CONTEXT	256 // Export Lucid context
 
 #endif /* _GSSD_MACH_TYPES_H_ */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/hfs/hfs_encodings.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/hfs/hfs_encodings.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/hfs/hfs_encodings.h	2015-08-27 01:55:12.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/hfs/hfs_encodings.h	2016-06-03 23:06:21.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2000-2002, 2005 Apple Computer, Inc. All rights reserved.
+ * Copyright (c) 2000-2015 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  * 
@@ -26,12 +26,14 @@
  * @APPLE_OSREFERENCE_LICENSE_HEADER_END@
  */
 /*
- * Copyright (c) 1997-2000 Apple Computer, Inc. All Rights Reserved
+ * Copyright (c) 1997-2000 Apple Inc. All Rights Reserved
  */
 
 #ifndef _HFS_ENCODINGS_H_
 #define _HFS_ENCODINGS_H_
 
+#if !TARGET_OS_EMBEDDED
+
 #include <sys/appleapiopts.h>
 
 #ifdef __APPLE_API_UNSTABLE
@@ -41,6 +43,8 @@
 	{ "encodingbias", CTLTYPE_INT }, \
 }
 
+__BEGIN_DECLS
+
 /*
  * HFS Filename Encoding Converters Interface
  *
@@ -50,22 +54,36 @@
  * have Unicode filenames).
  *
  * Used by HFS Encoding Converter Kernel Modules
- * (like HFS_Japanese.kmod) to register their
- * encoding conversion routines.
+ * to register their encoding conversion routines.
  */
 
-typedef int (* hfs_to_unicode_func_t)(const Str31 hfs_str, UniChar *uni_str,
+typedef int (* hfs_to_unicode_func_t)(const uint8_t hfs_str[32], uint16_t *uni_str,
 		u_int32_t maxCharLen, u_int32_t *usedCharLen);
 
-typedef int (* unicode_to_hfs_func_t)(UniChar *uni_str, u_int32_t unicodeChars,
-		Str31 hfs_str);
+typedef int (* unicode_to_hfs_func_t)(uint16_t *uni_str, u_int32_t unicodeChars,
+        uint8_t hfs_str[32]);
 
+int hfs_relconverter (u_int32_t encoding);
+int hfs_getconverter(u_int32_t encoding, hfs_to_unicode_func_t *get_unicode,
+					 unicode_to_hfs_func_t *get_hfsname);
 int hfs_addconverter(int kmod_id, u_int32_t encoding,
-		hfs_to_unicode_func_t get_unicode,
-		unicode_to_hfs_func_t get_hfsname);
-
+					 hfs_to_unicode_func_t get_unicode,
+					 unicode_to_hfs_func_t get_hfsname);
 int hfs_remconverter(int kmod_id, u_int32_t encoding);
 
+u_int32_t hfs_pickencoding(const u_int16_t *src, int len);
+u_int32_t hfs_getencodingbias(void);
+void hfs_setencodingbias(u_int32_t bias);
+int mac_roman_to_utf8(const uint8_t hfs_str[32], uint32_t maxDstLen, uint32_t *actualDstLen,
+					  unsigned char* dstStr);
+int utf8_to_mac_roman(uint32_t srcLen, const unsigned char* srcStr, uint8_t dstStr[32]);
+int mac_roman_to_unicode(const uint8_t hfs_str[32], uint16_t *uni_str, u_int32_t maxCharLen, u_int32_t *usedCharLen);
+int unicode_to_mac_roman(uint16_t *uni_str, u_int32_t unicodeChars, uint8_t hfs_str[32]);
+
+__END_DECLS
+
 #endif /* __APPLE_API_UNSTABLE */
 
+#endif // !TARGET_OS_EMBEDDED
+
 #endif /* ! _HFS_ENCODINGS_H_ */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/hfs/hfs_format.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/hfs/hfs_format.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/hfs/hfs_format.h	2015-08-27 01:55:12.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/hfs/hfs_format.h	2016-05-15 07:58:02.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2000-2013 Apple Inc. All rights reserved.
+ * Copyright (c) 2000-2015 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  * 
@@ -30,15 +30,12 @@
 
 #include <sys/types.h>
 #include <sys/appleapiopts.h>
-#include <hfs/hfs_unistr.h>
+#include "hfs_unistr.h"
 
 /*
  * hfs_format.h
  *
  * This file describes the on-disk format for HFS and HFS Plus volumes.
- * The HFS Plus volume format is desciibed in detail in Apple Technote 1150.
- *
- * http://developer.apple.com/technotes/tn/tn1150.html
  *
  * Note: Starting 10.9, definition of struct HFSUniStr255 exists in hfs_unitstr.h
  *
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/hfs/hfs_mount.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/hfs/hfs_mount.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/hfs/hfs_mount.h	2015-08-27 01:55:12.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/hfs/hfs_mount.h	2016-06-03 23:06:21.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2000-2007 Apple Inc. All rights reserved.
+ * Copyright (c) 2000-2015 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  * 
@@ -26,7 +26,7 @@
  * @APPLE_OSREFERENCE_LICENSE_HEADER_END@
  */
 /*
- * Copyright (c) 1997-2002 Apple Computer, Inc. All Rights Reserved
+ * Copyright (c) 1997-2002 Apple Inc. All Rights Reserved
  *
  */
 
@@ -70,11 +70,8 @@
  */
 #define HFS_ENCODINGBIAS	1	    /* encoding matching CJK bias */
 #define HFS_EXTEND_FS		2
-#define HFS_ENCODINGHINT	3	    /* guess encoding for string */
 #define HFS_ENABLE_JOURNALING   0x082969
 #define HFS_DISABLE_JOURNALING  0x031272
-#define HFS_GET_JOURNAL_INFO    0x6a6e6c69
-#define HFS_SET_PKG_EXTENSIONS  0x121031
 #define HFS_REPLAY_JOURNAL	0x6a6e6c72
 #define HFS_ENABLE_RESIZE_DEBUG 4	/* enable debug code for volume resizing */
 
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/i386/types.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/i386/types.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/i386/types.h	2015-08-27 01:55:08.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/i386/types.h	2016-06-03 22:54:56.000000000 +0200
@@ -78,10 +78,10 @@
 #include <sys/_types/_int32_t.h>
 #include <sys/_types/_int64_t.h>
 
-typedef	unsigned char		u_int8_t;
-typedef	unsigned short		u_int16_t;
-typedef	unsigned int		u_int32_t;
-typedef	unsigned long long	u_int64_t;
+#include <sys/_types/_u_int8_t.h>
+#include <sys/_types/_u_int16_t.h>
+#include <sys/_types/_u_int32_t.h>
+#include <sys/_types/_u_int64_t.h>
 
 #if __LP64__
 typedef int64_t			register_t;
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/assert.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/assert.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/assert.h	2016-02-27 07:06:47.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/assert.h	2016-06-03 22:55:03.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2000-2007 Apple Inc. All rights reserved.
+ * Copyright (c) 2000-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  * 
@@ -72,7 +72,9 @@
 	int		line,
 	const char	*expression) __attribute__((noinline));
 
-#if CONFIG_NO_PANIC_STRINGS
+extern int kext_assertions_enable;
+
+#ifdef CONFIG_NO_PANIC_STRINGS
 #define Assert(file, line, ex) (Assert)("", line, "")
 #define __Panic(fmt, args...) panic("", ##args)
 #else /* CONFIG_NO_PANIC_STRINGS */
@@ -81,24 +83,65 @@
 
 __END_DECLS
 
-#if	MACH_ASSERT
+#ifndef APPLE_KEXT_ASSERTIONS
+#define APPLE_KEXT_ASSERTIONS	0
+#endif
+
+#if 	MACH_ASSERT
 
 #define assert(ex)  \
 	(__builtin_expect(!!((long)(ex)), 1L) ? (void)0 : Assert(__FILE__, __LINE__, # ex))
-#define assert_static(ex) _Static_assert((ex), #ex)
 #define assertf(ex, fmt, args...) \
 	(__builtin_expect(!!((long)(ex)), 1L) ? (void)0 : __Panic("%s:%d Assertion failed: %s : " fmt, __FILE__, __LINE__, # ex, ##args))
+#define __assert_only
+
+#elif APPLE_KEXT_ASSERTIONS && !XNU_KERNEL_PRIVATE	/* MACH_ASSERT */
 
+#define assert(ex)  \
+	(__builtin_expect(!!((long)((!kext_assertions_enable) || (ex))), 1L) ? (void)0 : Assert(__FILE__, __LINE__, # ex))
+#define assertf(ex, fmt, args...) \
+	(__builtin_expect(!!((long)((!kext_assertions_enable) || (ex))), 1L) ? (void)0 : __Panic("%s:%d Assertion failed: %s : " fmt, __FILE__, __LINE__, # ex, ##args))
 #define __assert_only
 
-#else	/* MACH_ASSERT */
+#else 				/* APPLE_KEXT_ASSERTIONS && !XNU_KERNEL_PRIVATE */
 
 #define assert(ex) ((void)0)
-#define assert_static(ex) _Static_assert((ex), #ex)
 #define assertf(ex, fmt, args...) ((void)0)
-
 #define __assert_only __unused
 
 #endif	/* MACH_ASSERT */
 
+/*
+ * static_assert is a C11 / C++0x / C++1z feature.
+ *
+ * Beginning with C++0x, it is a keyword and should not be #defined
+ *
+ * static_assert is not disabled by MACH_ASSERT or NDEBUG
+ */
+
+#ifndef __cplusplus
+	#if defined(__STDC_VERSION__) && __STDC_VERSION__ >= 201112L
+		#define _STATIC_ASSERT_OVERLOADED_MACRO(_1, _2, NAME, ...) NAME
+		#define static_assert(...) _STATIC_ASSERT_OVERLOADED_MACRO(__VA_ARGS__, _static_assert_2_args, _static_assert_1_arg)(__VA_ARGS__)
+
+		#define _static_assert_2_args(ex, str) _Static_assert((ex), str)
+		#define _static_assert_1_arg(ex) _Static_assert((ex), #ex)
+	#endif
+#else
+	#if !defined(__cpp_static_assert)
+		/* pre C++11 support */
+		#define _STATIC_ASSERT_OVERLOADED_MACRO(_1, _2, NAME, ...) NAME
+		#define static_assert(...) _STATIC_ASSERT_OVERLOADED_MACRO(__VA_ARGS__, _static_assert_2_args, _static_assert_1_arg)(__VA_ARGS__)
+
+		#define _static_assert_2_args(ex, str) _Static_assert((ex), str)
+		#define _static_assert_1_arg(ex) _Static_assert((ex), #ex)
+	#else
+		/*
+		 * C++11 only supports the 2 argument version of static_assert.
+		 * C++1z has added support for the 1 argument version.
+		 */
+		#define _static_assert_1_arg(ex) static_assert((ex), #ex)
+	#endif
+#endif
+
 #endif	/* _KERN_ASSERT_H_ */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/backtrace.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/backtrace.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/backtrace.h	1970-01-01 01:00:00.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/backtrace.h	2016-06-03 22:55:03.000000000 +0200
@@ -0,0 +1,54 @@
+/*
+ * Copyright (c) 2016 Apple Inc. All rights reserved.
+ *
+ * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
+ *
+ * This file contains Original Code and/or Modifications of Original Code
+ * as defined in and that are subject to the Apple Public Source License
+ * Version 2.0 (the 'License'). You may not use this file except in
+ * compliance with the License. The rights granted to you under the License
+ * may not be used to create, or enable the creation or redistribution of,
+ * unlawful or unlicensed copies of an Apple operating system, or to
+ * circumvent, violate, or enable the circumvention or violation of, any
+ * terms of an Apple operating system software license agreement.
+ *
+ * Please obtain a copy of the License at
+ * http://www.opensource.apple.com/apsl/ and read it before using this file.
+ *
+ * The Original Code and all software distributed under the License are
+ * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
+ * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
+ * INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
+ * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
+ * Please see the License for the specific language governing rights and
+ * limitations under the License.
+ *
+ * @APPLE_OSREFERENCE_LICENSE_HEADER_END@
+ */
+
+#ifndef BACKTRACE_H
+#define BACKTRACE_H
+
+#include <stdint.h>
+#include <sys/cdefs.h>
+
+__BEGIN_DECLS
+
+/*
+ * Backtrace the current thread, storing up to max_frames return addresses in
+ * bt.  Returns the number of return addresses stored.
+ */
+uint32_t backtrace(uintptr_t *bt, uint32_t max_frames)
+	__attribute__((noinline));
+
+/*
+ * Backtrace the current thread starting at the frame pointer start_fp, storing
+ * up to max_frames return addresses in bt.  Returns the number of return
+ * addresses stored.
+ */
+uint32_t backtrace_fp(uintptr_t *bt, uint32_t max_frames, void *start_fp)
+	__attribute__((noinline,not_tail_called));
+
+__END_DECLS
+
+#endif /* !defined(BACKTRACE_H) */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/bits.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/bits.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/bits.h	1970-01-01 01:00:00.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/bits.h	2016-06-03 22:55:04.000000000 +0200
@@ -0,0 +1,331 @@
+/*
+ * Copyright (c) 2015 Apple Inc. All rights reserved.
+ *
+ * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
+ * 
+ * This file contains Original Code and/or Modifications of Original Code
+ * as defined in and that are subject to the Apple Public Source License
+ * Version 2.0 (the 'License'). You may not use this file except in
+ * compliance with the License. The rights granted to you under the License
+ * may not be used to create, or enable the creation or redistribution of,
+ * unlawful or unlicensed copies of an Apple operating system, or to
+ * circumvent, violate, or enable the circumvention or violation of, any
+ * terms of an Apple operating system software license agreement.
+ * 
+ * Please obtain a copy of the License at
+ * http://www.opensource.apple.com/apsl/ and read it before using this file.
+ * 
+ * The Original Code and all software distributed under the License are
+ * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
+ * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
+ * INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
+ * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
+ * Please see the License for the specific language governing rights and
+ * limitations under the License.
+ * 
+ * @APPLE_OSREFERENCE_LICENSE_HEADER_END@
+ *
+ * Bit manipulation functions
+ */
+
+#ifndef __BITS_H__
+#define __BITS_H__
+
+#define BIT(b)				(1ULL << (b))
+
+#define mask(width)			(BIT(width) - 1)
+#define extract(x, shift, width)	((((uint64_t)(x)) >> (shift)) & mask(width))
+#define bits(x, hi, lo)			extract((x), (lo), (hi) - (lo) + 1)
+
+#define bit_set(x, b)			((x) |= BIT(b))
+#define bit_clear(x, b)			((x) &= ~BIT(b))
+#define bit_test(x, b)			((bool)((x) & BIT(b)))
+
+/* Returns the most significant '1' bit, or -1 if all zeros */
+inline static int
+bit_first(uint64_t bitmap)
+{
+	return (bitmap == 0) ? -1 : 63 - __builtin_clzll(bitmap);
+}
+
+
+inline static int
+__bit_next(uint64_t bitmap, int previous_bit)
+{
+	uint64_t mask = previous_bit ? mask(previous_bit) : ~0ULL;
+
+	return bit_first(bitmap & mask);
+}
+
+/* Returns the most significant '1' bit that is less significant than previous_bit,
+ * or -1 if no such bit exists.
+ */
+inline static int
+bit_next(uint64_t bitmap, int previous_bit)
+{
+	if (previous_bit == 0) {
+		return -1;
+	} else {
+		return __bit_next(bitmap, previous_bit);
+	}
+}
+
+/* Returns the least significant '1' bit, or -1 if all zeros */
+inline static int
+lsb_first(uint64_t bitmap)
+{
+	return __builtin_ffsll(bitmap) - 1;
+}
+
+/* Returns the least significant '1' bit that is more significant than previous_bit,
+ * or -1 if no such bit exists.
+ * previous_bit may be -1, in which case this is equivalent to lsb_first()
+ */
+inline static int
+lsb_next(uint64_t bitmap, int previous_bit)
+{
+	uint64_t mask = mask(previous_bit + 1);
+
+	return lsb_first(bitmap & ~mask);
+}
+
+inline static int
+bit_count(uint64_t x)
+{
+	return __builtin_popcountll(x);
+}
+
+/* Return the highest power of 2 that is <= n, or -1 if n == 0 */
+inline static int
+bit_floor(uint64_t n)
+{
+	return bit_first(n);
+}
+
+/* Return the lowest power of 2 that is >= n, or -1 if n == 0 */
+inline static int
+bit_ceiling(uint64_t n)
+{
+	if (n == 0) {
+		return -1;
+	}
+	return bit_first(n - 1) + 1;
+}
+
+/* If n is a power of 2, bit_log2(n) == bit_floor(n) == bit_ceiling(n) */
+#define bit_log2(n)		bit_floor((uint64_t)(n))
+
+typedef _Atomic uint64_t		bitmap_t;
+
+inline static void
+atomic_bit_set(bitmap_t *map, int n)
+{
+	__c11_atomic_fetch_or((_Atomic bitmap_t *)map, BIT(n), __ATOMIC_SEQ_CST);
+}
+
+inline static void
+atomic_bit_clear(bitmap_t *map, int n)
+{
+	__c11_atomic_fetch_and((_Atomic bitmap_t *)map, ~BIT(n), __ATOMIC_SEQ_CST);
+}
+
+
+#define BITMAP_SIZE(n)	(size_t)((((uint)(n) + 63) >> 6) << 3)	/* Round to 64bit bitmap_t, then convert to bytes */
+#define bitmap_bit(n)	bits(n, 5, 0)
+#define bitmap_index(n)	bits(n, 63, 6)
+
+inline static bitmap_t *
+bitmap_zero(bitmap_t *map, uint nbits)
+{
+	return (bitmap_t *)memset((void *)map, 0, BITMAP_SIZE(nbits));
+}
+
+inline static bitmap_t *
+bitmap_full(bitmap_t *map, uint nbits)
+{
+	return (bitmap_t *)memset((void *)map, ~0, BITMAP_SIZE(nbits));
+}
+
+inline static bitmap_t *
+bitmap_alloc(uint nbits)
+{
+	assert(nbits > 0);
+	bitmap_t *map = (bitmap_t *)kalloc(BITMAP_SIZE(nbits));
+	if (map) {
+		bitmap_zero(map, nbits);
+	}
+	return map;
+}
+
+inline static void
+bitmap_free(bitmap_t *map, uint nbits)
+{
+	assert(nbits > 0);
+	kfree(map, BITMAP_SIZE(nbits));
+}
+
+inline static void
+bitmap_set(bitmap_t *map, uint n)
+{
+	atomic_bit_set(&map[bitmap_index(n)], bitmap_bit(n));
+}
+
+inline static void
+bitmap_clear(bitmap_t *map, uint n)
+{
+	atomic_bit_clear(&map[bitmap_index(n)], bitmap_bit(n));
+}
+
+inline static bool
+bitmap_test(bitmap_t *map, uint n)
+{
+	return bit_test(map[bitmap_index(n)], bitmap_bit(n));
+}
+
+inline static int
+bitmap_first(bitmap_t *map, uint nbits)
+{
+	for (int i = (int)bitmap_index(nbits - 1); i >= 0; i--) {
+		if (map[i] == 0) {
+			continue;
+		}
+		return (i << 6) + bit_first(map[i]);
+	}
+
+	return -1;
+}
+
+inline static int
+bitmap_and_not_mask_first(bitmap_t *map, bitmap_t *mask, uint nbits)
+{
+	for (int i = (int)bitmap_index(nbits - 1); i >= 0; i--) {
+		if ((map[i] & ~mask[i]) == 0) {
+			continue;
+		}
+		return (i << 6) + bit_first(map[i] & ~mask[i]);
+	}
+
+	return -1;
+}
+
+inline static int
+bitmap_lsb_first(bitmap_t *map, uint nbits)
+{
+	for (uint i = 0; i <= bitmap_index(nbits - 1); i++) {
+		if (map[i] == 0) {
+			continue;
+		}
+		return (int)((i << 6) + (uint32_t)lsb_first(map[i]));
+	}
+
+	return -1;
+}
+
+inline static int
+bitmap_next(bitmap_t *map, uint prev)
+{
+	if (prev == 0) {
+		return -1;
+	}
+
+	int64_t i = bitmap_index(prev - 1);
+	int res = __bit_next(map[i], bits(prev, 5, 0));
+	if (res >= 0) {
+		return (int)(res + (i << 6));
+	}
+
+	for (i = i - 1; i >= 0; i--) {
+		if (map[i] == 0) {
+			continue;
+		}
+		return (int)((i << 6) + bit_first(map[i]));
+	}
+
+	return -1;
+}
+
+inline static int
+bitmap_lsb_next(bitmap_t *map, uint nbits, uint prev)
+{
+	if ((prev + 1) >= nbits) {
+		return -1;
+	}
+
+	uint64_t i = bitmap_index(prev + 1);
+	uint b = bits((prev + 1), 5, 0) - 1;
+	int32_t res = lsb_next((uint64_t)map[i], (int)b);
+	if (res >= 0) {
+		return (int)((uint64_t)res + (i << 6));
+	}
+
+	for (i = i + 1; i <= bitmap_index(nbits - 1); i++) {
+		if (map[i] == 0) {
+			continue;
+		}
+		return (int)((i << 6) + (uint64_t)lsb_first(map[i]));
+	}
+
+	return -1;
+}
+
+#if DEVELOPMENT || DEBUG
+
+extern void dump_bitmap_next(bitmap_t *map, uint nbits);
+extern void dump_bitmap_lsb(bitmap_t *map, uint nbits);
+extern void test_bitmap(void);
+
+void
+dump_bitmap_next(bitmap_t *map, uint nbits)
+{
+	for (int i = bitmap_first(map, nbits); i >= 0; i = bitmap_next(map, i)) {
+		printf(" %d", i);
+	}
+	printf("\n");
+}
+
+void
+dump_bitmap_lsb(bitmap_t *map, uint nbits)
+{
+	for (int i = bitmap_lsb_first(map, nbits); i >= 0; i = bitmap_lsb_next(map, nbits, i)) {
+		printf(" %d", i);
+	}
+	printf("\n");
+}
+
+void
+test_bitmap(void)
+{
+	uint start = 60;
+	for (uint nbits = start; nbits <= 192; nbits++) {
+		bitmap_t *map = bitmap_alloc(nbits);
+
+		for (uint i = 0; i < nbits; i++) {
+			bitmap_set(map, i);
+		}
+
+		int expected_result = nbits - 1;
+		for (int i = bitmap_first(map, nbits); i >= 0; i = bitmap_next(map, i)) {
+			assert(i == expected_result);
+			expected_result--;
+		}
+		assert(expected_result == -1);
+
+		expected_result = 0;
+		for (int i = bitmap_lsb_first(map, nbits); i >= 0; i = bitmap_lsb_next(map, nbits, i)) {
+			assert(i == expected_result);
+			expected_result++;
+		}
+		assert(expected_result == (int)nbits);
+
+		for (uint i = 0; i < nbits; i++) {
+			bitmap_clear(map, i);
+		}
+		assert(bitmap_first(map, nbits) == -1);
+		assert(bitmap_lsb_first(map, nbits) == -1);
+
+		bitmap_free(map, nbits);
+	}
+}
+#endif
+
+#endif
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/clock.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/clock.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/clock.h	2015-08-27 01:55:18.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/clock.h	2016-06-03 22:55:04.000000000 +0200
@@ -39,6 +39,7 @@
 #include <mach/clock_types.h>
 #include <mach/message.h>
 #include <mach/mach_time.h>
+#include <mach/boolean.h>
 
 #include <kern/kern_types.h>
 
@@ -101,6 +102,10 @@
 							uint64_t		abstime,
 							uint64_t		*result);
 
+extern void				clock_continuoustime_interval_to_deadline(
+							uint64_t		abstime,
+							uint64_t		*result);
+
 extern void				clock_delay_until(
 							uint64_t		deadline);
 
@@ -108,10 +113,16 @@
 							uint64_t		abstime,
 							uint64_t		*result);
 
-extern void             nanoseconds_to_absolutetime(
+extern void				nanoseconds_to_absolutetime(
 							uint64_t		nanoseconds,
 							uint64_t		*result);
 
+extern uint64_t			absolutetime_to_continuoustime(
+							uint64_t		abstime);
+
+extern uint64_t			continuoustime_to_absolutetime(
+							uint64_t		conttime);
+
 extern uint64_t mach_absolutetime_asleep;
 extern uint64_t mach_absolutetime_last_sleep;
 
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/debug.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/debug.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/debug.h	2015-08-27 01:55:18.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/debug.h	2016-06-03 22:55:03.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2000-2007 Apple Inc. All rights reserved.
+ * Copyright (c) 2000-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  * 
@@ -29,21 +29,19 @@
 #ifndef	_KERN_DEBUG_H_
 #define _KERN_DEBUG_H_
 
+#include <kern/kcdata.h>
+
 #include <sys/cdefs.h>
 #include <stdint.h>
 #include <uuid/uuid.h>
 #include <mach/boolean.h>
+#include <mach/kern_return.h>
 
 #include <TargetConditionals.h>
 
 #ifdef __APPLE_API_PRIVATE
 #ifdef __APPLE_API_UNSTABLE
 
-/* This value must always match IO_NUM_PRIORITIES defined in thread_info.h */
-#define STACKSHOT_IO_NUM_PRIORITIES 	4
-/* This value must always match MAXTHREADNAMESIZE used in bsd */
-#define STACKSHOT_MAX_THREAD_NAME_SIZE	64
-
 struct thread_snapshot {
 	uint32_t 		snapshot_magic;
 	uint32_t 		nkern_frames;
@@ -88,33 +86,12 @@
 	uint64_t		total_syscalls;
 	char			pth_name[STACKSHOT_MAX_THREAD_NAME_SIZE];
 
-} __attribute__ ((packed));
-
-struct thread_snapshot_v2 {
-	uint64_t  ths_thread_id;
-	uint64_t  ths_wait_event;
-	uint64_t  ths_continuation;
-	uint64_t  ths_total_syscalls;
-	uint64_t  ths_voucher_identifier;
-	uint64_t  ths_dqserialnum;
-	uint64_t  ths_user_time;
-	uint64_t  ths_sys_time;
-	uint64_t  ths_ss_flags;
-	uint64_t  ths_last_run_time;
-	uint64_t  ths_last_made_runnable_time;
-	uint32_t  ths_state;
-	uint32_t  ths_sched_flags;
-	int16_t   ths_base_priority;
-	int16_t   ths_sched_priority;
-	uint8_t   ths_eqos;
-	uint8_t   ths_rqos;
-	uint8_t   ths_rqos_override;
-	uint8_t   ths_io_tier;
-} __attribute__ ((packed));
+} __attribute__((packed));
 
+/* old, non kcdata format */
 struct task_snapshot {
-	uint32_t		snapshot_magic;
-	int32_t			pid;
+	uint32_t snapshot_magic;
+	int32_t pid;
 	uint64_t		uniqueid;
 	uint64_t		user_time_in_terminated_threads;
 	uint64_t		system_time_in_terminated_threads;
@@ -164,48 +141,7 @@
 
 } __attribute__ ((packed));
 
-struct io_stats_snapshot
-{
-	/*
-	 * I/O Statistics
-	 * XXX: These fields must be together.
-	 */
-	uint64_t         ss_disk_reads_count;
-	uint64_t         ss_disk_reads_size;
-	uint64_t         ss_disk_writes_count;
-	uint64_t         ss_disk_writes_size;
-	uint64_t         ss_io_priority_count[STACKSHOT_IO_NUM_PRIORITIES];
-	uint64_t         ss_io_priority_size[STACKSHOT_IO_NUM_PRIORITIES];
-	uint64_t         ss_paging_count;
-	uint64_t         ss_paging_size;
-	uint64_t         ss_non_paging_count;
-	uint64_t         ss_non_paging_size;
-	uint64_t         ss_data_count;
-	uint64_t         ss_data_size;
-	uint64_t         ss_metadata_count;
-	uint64_t         ss_metadata_size;
-	/* XXX: I/O Statistics end */
 
-} __attribute__ ((packed));
-
-struct task_snapshot_v2 {
-	uint64_t  ts_unique_pid;
-	uint64_t  ts_ss_flags;
-	uint64_t  ts_user_time_in_terminated_threads;
-	uint64_t  ts_system_time_in_terminated_threads;
-	uint64_t  ts_p_start_sec;
-	uint64_t  ts_task_size;
-	uint64_t  ts_max_resident_size;
-	uint32_t  ts_suspend_count;
-	uint32_t  ts_faults;
-	uint32_t  ts_pageins;
-	uint32_t  ts_cow_faults;
-	uint32_t  ts_was_throttled;
-	uint32_t  ts_did_throttle;
-	uint32_t  ts_latency_qos;
-	int32_t   ts_pid;
-	char      ts_p_comm[32];
-} __attribute__ ((packed));
 
 struct micro_snapshot {
 	uint32_t		snapshot_magic;
@@ -216,34 +152,7 @@
 	uint16_t		ms_opaque_flags;	/* managed by external entity, e.g. fdrmicrod */
 } __attribute__ ((packed));
 
-struct mem_and_io_snapshot {
-	uint32_t	snapshot_magic;
-	uint32_t	free_pages;
-	uint32_t	active_pages;
-	uint32_t	inactive_pages;
-	uint32_t	purgeable_pages;
-	uint32_t	wired_pages;
-	uint32_t	speculative_pages;
-	uint32_t	throttled_pages;
-	uint32_t	filebacked_pages;
-	uint32_t 	compressions;
-	uint32_t	decompressions;
-	uint32_t	compressor_size;
-	int     	busy_buffer_count;
-	uint32_t	pages_wanted;
-	uint32_t	pages_reclaimed;
-	uint8_t		pages_wanted_reclaimed_valid; // did mach_vm_pressure_monitor succeed?
-} __attribute__((packed));
-
-struct stack_snapshot_frame32 {
-	uint32_t lr;
-    uint32_t sp;
-};
 
-struct stack_snapshot_frame64 {
-    uint64_t lr;
-    uint64_t sp;
-};
 
 struct _dyld_cache_header
 {
@@ -262,20 +171,12 @@
     uint8_t     uuid[16];               // unique value for each shared cache file
 };
 
-struct dyld_uuid_info_32 {
-    uint32_t imageLoadAddress; /* base address image is mapped at */
-	uuid_t	 imageUUID;
-};
-
-struct dyld_uuid_info_64 {
-    uint64_t imageLoadAddress; /* base address image is mapped at */
-    uuid_t   imageUUID;
-};
 
 enum micro_snapshot_flags {
 	kInterruptRecord	= 0x1,
 	kTimerArmingRecord	= 0x2,
-	kUserMode 			= 0x4, /* interrupted usermode, or armed by usermode */
+	kUserMode 		= 0x4, /* interrupted usermode, or armed by usermode */
+	kIORecord 		= 0x8,
 };
 
 /*
@@ -286,81 +187,55 @@
 	kKernel64_p 		= 0x2
 };
 
-enum task_snapshot_flags {
-	kTaskRsrcFlagged      = 0x4, // In the EXC_RESOURCE danger zone?
-	kTerminatedSnapshot   = 0x8,
-	kPidSuspended         = 0x10, // true for suspended task
-	kFrozen               = 0x20, // true for hibernated task (along with pidsuspended)
-	kTaskDarwinBG         = 0x40,
-	kTaskExtDarwinBG      = 0x80,
-	kTaskVisVisible       = 0x100,
-	kTaskVisNonvisible    = 0x200,
-	kTaskIsForeground     = 0x400,
-	kTaskIsBoosted        = 0x800,
-	kTaskIsSuppressed     = 0x1000,
-	kTaskIsTimerThrottled = 0x2000, /* deprecated */
-	kTaskIsImpDonor       = 0x4000,
-	kTaskIsLiveImpDonor   = 0x8000
-};
-
-enum thread_snapshot_flags {
-	kHasDispatchSerial = 0x4,
-	kStacksPCOnly      = 0x8,  /* Stack traces have no frame pointers. */
-	kThreadDarwinBG    = 0x10, /* Thread is darwinbg */
-	kThreadIOPassive   = 0x20, /* Thread uses passive IO */
-	kThreadSuspended   = 0x40, /* Thread is suspended */
-	kThreadTruncatedBT = 0x80, /* Unmapped pages caused truncated backtrace */
-	kGlobalForcedIdle  = 0x100, /* Thread performs global forced idle */
-	kThreadDecompressedBT = 0x200,   /* Some thread stack pages were decompressed as part of BT */
-	kThreadFaultedBT = 0x400   /* Some thread stack pages were faulted in as part of BT */
-};
 
 #define VM_PRESSURE_TIME_WINDOW 5 /* seconds */
 
 enum {
-	STACKSHOT_GET_DQ							= 0x01,
-	STACKSHOT_SAVE_LOADINFO						= 0x02,
-	STACKSHOT_GET_GLOBAL_MEM_STATS				= 0x04,
-	STACKSHOT_SAVE_KEXT_LOADINFO				= 0x08,
-	STACKSHOT_GET_MICROSTACKSHOT				= 0x10,
-	STACKSHOT_GLOBAL_MICROSTACKSHOT_ENABLE		= 0x20,
-	STACKSHOT_GLOBAL_MICROSTACKSHOT_DISABLE		= 0x40,
-	STACKSHOT_SET_MICROSTACKSHOT_MARK			= 0x80,
-	STACKSHOT_SAVE_KERNEL_FRAMES_ONLY			= 0x100,
-	STACKSHOT_GET_BOOT_PROFILE					= 0x200,
-	STACKSHOT_GET_WINDOWED_MICROSTACKSHOTS		= 0x400,
-	STACKSHOT_WINDOWED_MICROSTACKSHOTS_ENABLE	= 0x800,
-	STACKSHOT_WINDOWED_MICROSTACKSHOTS_DISABLE	= 0x1000,
-	STACKSHOT_SAVE_IMP_DONATION_PIDS		= 0x2000,
-	STACKSHOT_SAVE_IN_KERNEL_BUFFER			= 0x4000,
-	STACKSHOT_RETRIEVE_EXISTING_BUFFER		= 0x8000,
-	STACKSHOT_KCDATA_FORMAT				= 0x10000,
-	STACKSHOT_ENABLE_FAULTING			= 0x20000
+	STACKSHOT_GET_DQ                           = 0x01,
+	STACKSHOT_SAVE_LOADINFO                    = 0x02,
+	STACKSHOT_GET_GLOBAL_MEM_STATS             = 0x04,
+	STACKSHOT_SAVE_KEXT_LOADINFO               = 0x08,
+	STACKSHOT_GET_MICROSTACKSHOT               = 0x10,
+	STACKSHOT_GLOBAL_MICROSTACKSHOT_ENABLE     = 0x20,
+	STACKSHOT_GLOBAL_MICROSTACKSHOT_DISABLE    = 0x40,
+	STACKSHOT_SET_MICROSTACKSHOT_MARK          = 0x80,
+	STACKSHOT_ACTIVE_KERNEL_THREADS_ONLY       = 0x100,
+	STACKSHOT_GET_BOOT_PROFILE                 = 0x200,
+	STACKSHOT_SAVE_IMP_DONATION_PIDS           = 0x2000,
+	STACKSHOT_SAVE_IN_KERNEL_BUFFER            = 0x4000,
+	STACKSHOT_RETRIEVE_EXISTING_BUFFER         = 0x8000,
+	STACKSHOT_KCDATA_FORMAT                    = 0x10000,
+	STACKSHOT_ENABLE_BT_FAULTING               = 0x20000,
+	STACKSHOT_COLLECT_DELTA_SNAPSHOT           = 0x40000,
+	/*
+	 * STACKSHOT_TAILSPIN flips on several features aimed at minimizing the size
+	 * of stackshots.  It is meant to be used only by the tailspin daemon.  Its
+	 * behavior may be changed at any time to suit the needs of the tailspin
+	 * daemon.  Seriously, if you are not the tailspin daemon, don't use this
+	 * flag.  If you need these features, ask us to add a stable SPI for what
+	 * you need.   That being said, the features it turns on are:
+	 *
+	 * minimize_uuids: If the set of loaded dylibs or kexts has not changed in
+	 * the delta period, do then not report them.
+	 *
+	 * iostats: do not include io statistics.
+	 *
+	 * trace_fp: do not include the frame pointers in stack traces.
+	 *
+	 * minimize_nonrunnables: Do not report detailed information about threads
+	 * which were not runnable in the delta period.
+	 */
+	STACKSHOT_TAILSPIN                         = 0x80000,
+	/*
+	 * Kernel consumers of stackshot (via stack_snapshot_from_kernel) can ask
+	 * that we try to take the stackshot lock, and fail if we don't get it.
+	 */
+	STACKSHOT_TRYLOCK                          = 0x100000,
+	STACKSHOT_ENABLE_UUID_FAULTING             = 0x200000,
+	STACKSHOT_FROM_PANIC                       = 0x400000,
+	STACKSHOT_NO_IO_STATS                      = 0x800000,
 };
 
-/*
- * NOTE: Please update libkdd/kcdata/kcdtypes.c if you make any changes
- * in STACKSHOT_KCTYPE_* types.
- */
-#define STACKSHOT_KCTYPE_IOSTATS                0x901  /* io_stats_snapshot */
-#define STACKSHOT_KCTYPE_GLOBAL_MEM_STATS       0x902  /* struct mem_and_io_snapshot */
-#define STACKSHOT_KCCONTAINER_TASK              0x903
-#define STACKSHOT_KCCONTAINER_THREAD            0x904
-#define STACKSHOT_KCTYPE_TASK_SNAPSHOT          0x905  /* task_snapshot_v2 */
-#define STACKSHOT_KCTYPE_THREAD_SNAPSHOT        0x906  /* thread_snapshot_v2 */
-#define STASKSHOT_KCTYPE_DONATING_PIDS          0x907  /* int[] */
-#define STACKSHOT_KCTYPE_SHAREDCACHE_LOADINFO   0x908  /* same as KCDATA_TYPE_LIBRARY_LOADINFO64 */
-#define STACKSHOT_KCTYPE_THREAD_NAME            0x909  /* char[] */
-#define STACKSHOT_KCTYPE_KERN_STACKFRAME        0x90A  /* struct stack_snapshot_frame32 */
-#define STACKSHOT_KCTYPE_KERN_STACKFRAME64      0x90B  /* struct stack_snapshot_frame64 */
-#define STACKSHOT_KCTYPE_USER_STACKFRAME        0x90C  /* struct stack_snapshot_frame32 */
-#define STACKSHOT_KCTYPE_USER_STACKFRAME64      0x90D  /* struct stack_snapshot_frame64 */
-#define STACKSHOT_KCTYPE_BOOTARGS               0x90E  /* boot args string */
-#define STACKSHOT_KCTYPE_OSVERSION              0x90F  /* os version string */
-#define STACKSHOT_KCTYPE_KERN_PAGE_SIZE         0x910  /* kernel page size in uint32_t */
-#define STACKSHOT_KCTYPE_JETSAM_LEVEL           0x911  /* jetsam level in uint32_t */
-
-
 #define STACKSHOT_THREAD_SNAPSHOT_MAGIC 	0xfeedface
 #define STACKSHOT_TASK_SNAPSHOT_MAGIC   	0xdecafbad
 #define STACKSHOT_MEM_AND_IO_SNAPSHOT_MAGIC	0xbfcabcde
@@ -371,12 +246,14 @@
 
 
 
+
+
 __BEGIN_DECLS
 
 extern void panic(const char *string, ...) __printflike(1,2);
 
 
-#if CONFIG_NO_PANIC_STRINGS
+#ifdef CONFIG_NO_PANIC_STRINGS
 #define panic_plain(...) (panic)((char *)0)
 #define panic(...)  (panic)((char *)0)
 #else /* CONFIGS_NO_PANIC_STRINGS */
@@ -395,6 +272,8 @@
 #endif /* CONFIGS_NO_PANIC_STRINGS */
 
 
+
+
 __END_DECLS
 
 
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/exc_resource.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/exc_resource.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/exc_resource.h	2015-08-27 01:55:18.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/exc_resource.h	2016-06-03 22:55:03.000000000 +0200
@@ -61,6 +61,7 @@
 #define RESOURCE_TYPE_CPU	1
 #define RESOURCE_TYPE_WAKEUPS	2
 #define	RESOURCE_TYPE_MEMORY	3
+#define RESOURCE_TYPE_IO 	4
 
 /* RESOURCE_TYPE_CPU flavors */
 #define FLAVOR_CPU_MONITOR		1
@@ -159,6 +160,40 @@
 #define EXC_RESOURCE_HWM_DECODE_LIMIT(code) \
 	((code) & 0x1FFFULL)
 
+/* RESOURCE_TYPE_IO flavors */
+#define FLAVOR_IO_PHYSICAL_WRITES 		1
+#define FLAVOR_IO_LOGICAL_WRITES 		2
+
+/*
+ * RESOURCE_TYPE_IO exception code & subcode.
+ *
+ * This is sent by the kernel when a task crosses its 
+ * I/O limits.
+ *
+ * code:
+ * +-----------------------------------------------+
+ * |[63:61] RESOURCE |[60:58] FLAVOR_IO_  |[57:32] |
+ * |_TYPE_IO         |PHYSICAL/LOGICAL    |Unused  |
+ * +-----------------------------------------------+
+ * |[31:15]  Interval (sec)    | [14:0] Limit (MB) |
+ * +-----------------------------------------------+
+ *
+ * subcode:
+ * +-----------------------------------------------+
+ * |                           | [14:0] I/O Count  |
+ * |                           | (in MB)           |
+ * +-----------------------------------------------+
+ *
+ */
+
+/* RESOURCE_TYPE_IO decoding macros */
+#define EXC_RESOURCE_IO_DECODE_INTERVAL(code) \
+        (((code) >> 15) & 0x1FFFFULL)
+#define EXC_RESOURCE_IO_DECODE_LIMIT(code) \
+        ((code) & 0x7FFFULL)
+#define EXC_RESOURCE_IO_OBSERVED(subcode) \
+        ((subcode) & 0x7FFFULL)
+
 
 
 /* EXC_RESOURCE type and flavor encoding macros */
@@ -185,6 +220,14 @@
 #define EXC_RESOURCE_HWM_ENCODE_LIMIT(code, num) \
 	((code) |= ((uint64_t)(num) & 0x1FFFULL))
 
+/* RESOURCE_TYPE_IO::FLAVOR_IO_PHYSICAL_WRITES/FLAVOR_IO_LOGICAL_WRITES specific encoding macros */
+#define EXC_RESOURCE_IO_ENCODE_INTERVAL(code, interval) \
+	((code) |= (((uint64_t)(interval) & 0x1FFFFULL) << 15))
+#define EXC_RESOURCE_IO_ENCODE_LIMIT(code, limit) \
+	((code) |= (((uint64_t)(limit) & 0x7FFFULL)))
+#define EXC_RESOURCE_IO_ENCODE_OBSERVED(subcode, num) \
+	((subcode) |= (((uint64_t)(num) & 0x7FFFULL)))
+
 
 
 #endif /* _EXC_RESOURCE_H_ */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/kcdata.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/kcdata.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/kcdata.h	1970-01-01 01:00:00.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/kcdata.h	2016-06-03 22:55:03.000000000 +0200
@@ -0,0 +1,1057 @@
+/*
+ * Copyright (c) 2015 Apple Inc. All rights reserved.
+ *
+ * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
+ *
+ * This file contains Original Code and/or Modifications of Original Code
+ * as defined in and that are subject to the Apple Public Source License
+ * Version 2.0 (the 'License'). You may not use this file except in
+ * compliance with the License. The rights granted to you under the License
+ * may not be used to create, or enable the creation or redistribution of,
+ * unlawful or unlicensed copies of an Apple operating system, or to
+ * circumvent, violate, or enable the circumvention or violation of, any
+ * terms of an Apple operating system software license agreement.
+ *
+ * Please obtain a copy of the License at
+ * http://www.opensource.apple.com/apsl/ and read it before using this file.
+ *
+ * The Original Code and all software distributed under the License are
+ * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
+ * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
+ * INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
+ * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
+ * Please see the License for the specific language governing rights and
+ * limitations under the License.
+ *
+ * @APPLE_OSREFERENCE_LICENSE_HEADER_END@
+ */
+
+
+/*
+ *
+ *                     THE KCDATA MANIFESTO
+ *
+ *   Kcdata is a self-describing data serialization format.  It is meant to get
+ *   nested data structures out of xnu with minimum fuss, but also for that data
+ *   to be easy to parse.  It is also meant to allow us to add new fields and
+ *   evolve the data format without breaking old parsers.
+ *
+ *   Kcdata is a permanent data format suitable for long-term storage including
+ *   in files.  It is very important that we continue to be able to parse old
+ *   versions of kcdata-based formats.  To this end, there are several
+ *   invariants you MUST MAINTAIN if you alter this file.
+ *
+ *     * None of the magic numbers should ever be a byteswap of themselves or
+ *       of any of the other magic numbers.
+ *
+ *     * Never remove any type.
+ *
+ *     * All kcdata structs must be packed, and must exclusively use fixed-size
+ *        types.
+ *
+ *     * Never change the definition of any type, except to add new fields to
+ *      the end.
+ *
+ *     * If you do add new fields to the end of a type, do not actually change
+ *       the definition of the old structure.  Instead, define a new structure
+ *       with the new fields.  See thread_snapshot_v3 as an example.  This
+ *       provides source compatibility for old readers, and also documents where
+ *       the potential size cutoffs are.
+ *
+ *     * If you change libkdd, or kcdata.py run the unit tests under libkdd.
+ *
+ *     * If you add a type or extend an existing one, add a sample test to
+ *       libkdd/tests so future changes to libkdd will always parse your struct
+ *       correctly.
+ *
+ *       For example to add a field to this:
+ *
+ *          struct foobar {
+ *              uint32_t baz;
+ *              uint32_t quux;
+ *          } __attribute__ ((packed));
+ *
+ *       Make it look like this:
+ *
+ *          struct foobar {
+ *              uint32_t baz;
+ *              uint32_t quux;
+ *              ///////// end version 1 of foobar.  sizeof(struct foobar) was 8 ////////
+ *              uint32_t frozzle;
+ *          } __attribute__ ((packed));
+ *
+ *   If you are parsing kcdata formats, you MUST
+ *
+ *     * Check the length field of each struct, including array elements.   If the
+ *       struct is longer than you expect, you must ignore the extra data.
+ *
+ *     * Ignore any data types you do not understand.
+ *
+ *   Additionally, we want to be as forward compatible as we can.  Meaning old
+ *   tools should still be able to use new data whenever possible.  To this end,
+ *   you should:
+ *
+ *     * Try not to add new versions of types that supplant old ones.  Instead
+ *        extend the length of existing types or add supplemental types.
+ *
+ *     * Try not to remove information from existing kcdata formats, unless
+ *        removal was explicitly asked for.  For example it is fine to add a
+ *        stackshot flag to remove unwanted information, but you should not
+ *        remove it from the default stackshot if the new flag is absent.
+ *
+ *     * (TBD) If you do break old readers by removing information or
+ *        supplanting old structs, then increase the major version number.
+ *
+ *
+ *
+ *  The following is a description of the kcdata format.
+ *
+ *
+ * The format for data is setup in a generic format as follows
+ *
+ * Layout of data structure:
+ *
+ *   |         8 - bytes         |
+ *   |  type = MAGIC |  LENGTH   |
+ *   |            0              |
+ *   |      type     |  size     |
+ *   |          flags            |
+ *   |           data            |
+ *   |___________data____________|
+ *   |      type     |   size    |
+ *   |          flags            |
+ *   |___________data____________|
+ *   |  type = END   |  size=0   |
+ *   |            0              |
+ *
+ *
+ * The type field describes what kind of data is passed. For example type = TASK_CRASHINFO_UUID means the following data is a uuid.
+ * These types need to be defined in task_corpses.h for easy consumption by userspace inspection tools.
+ *
+ * Some range of types is reserved for special types like ints, longs etc. A cool new functionality made possible with this
+ * extensible data format is that kernel can decide to put more information as required without requiring user space tools to
+ * re-compile to be compatible. The case of rusage struct versions could be introduced without breaking existing tools.
+ *
+ * Feature description: Generic data with description
+ * -------------------
+ * Further more generic data with description is very much possible now. For example
+ *
+ *   - kcdata_add_uint64_with_description(cdatainfo, 0x700, "NUM MACH PORTS");
+ *   - and more functions that allow adding description.
+ * The userspace tools can then look at the description and print the data even if they are not compiled with knowledge of the field apriori.
+ *
+ *  Example data:
+ * 0000  57 f1 ad de 00 00 00 00 00 00 00 00 00 00 00 00  W...............
+ * 0010  01 00 00 00 00 00 00 00 30 00 00 00 00 00 00 00  ........0.......
+ * 0020  50 49 44 00 00 00 00 00 00 00 00 00 00 00 00 00  PID.............
+ * 0030  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
+ * 0040  9c 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
+ * 0050  01 00 00 00 00 00 00 00 30 00 00 00 00 00 00 00  ........0.......
+ * 0060  50 41 52 45 4e 54 20 50 49 44 00 00 00 00 00 00  PARENT PID......
+ * 0070  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
+ * 0080  01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
+ * 0090  ed 58 91 f1
+ *
+ * Feature description: Container markers for compound data
+ * ------------------
+ * If a given kernel data type is complex and requires adding multiple optional fields inside a container
+ * object for a consumer to understand arbitrary data, we package it using container markers.
+ *
+ * For example, the stackshot code gathers information and describes the state of a given task with respect
+ * to many subsystems. It includes data such as io stats, vm counters, process names/flags and syscall counts.
+ *
+ * kcdata_add_container_marker(kcdata_p, KCDATA_TYPE_CONTAINER_BEGIN, STACKSHOT_KCCONTAINER_TASK, task_uniqueid);
+ * // add multiple data, or add_<type>_with_description()s here
+ *
+ * kcdata_add_container_marker(kcdata_p, KCDATA_TYPE_CONTAINER_END, STACKSHOT_KCCONTAINER_TASK, task_uniqueid);
+ *
+ * Feature description: Custom Data formats on demand
+ * --------------------
+ * With the self describing nature of format, the kernel provider can describe a data type (uniquely identified by a number) and use
+ * it in the buffer for sending data. The consumer can parse the type information and have knowledge of describing incoming data.
+ * Following is an example of how we can describe a kernel specific struct sample_disk_io_stats in buffer.
+ *
+ * struct sample_disk_io_stats {
+ *     uint64_t        disk_reads_count;
+ *     uint64_t        disk_reads_size;
+ *     uint64_t        io_priority_count[4];
+ *     uint64_t        io_priority_size;
+ * } __attribute__ ((packed));
+ *
+ *
+ * struct kcdata_subtype_descriptor disk_io_stats_def[] = {
+ *     {KCS_SUBTYPE_FLAGS_NONE, KC_ST_UINT64, 0 * sizeof(uint64_t), sizeof(uint64_t), "disk_reads_count"},
+ *     {KCS_SUBTYPE_FLAGS_NONE, KC_ST_UINT64, 1 * sizeof(uint64_t), sizeof(uint64_t), "disk_reads_size"},
+ *     {KCS_SUBTYPE_FLAGS_ARRAY, KC_ST_UINT64, 2 * sizeof(uint64_t), KCS_SUBTYPE_PACK_SIZE(4, sizeof(uint64_t)), "io_priority_count"},
+ *     {KCS_SUBTYPE_FLAGS_ARRAY, KC_ST_UINT64, (2 + 4) * sizeof(uint64_t), sizeof(uint64_t), "io_priority_size"},
+ * };
+ *
+ * Now you can add this custom type definition into the buffer as
+ * kcdata_add_type_definition(kcdata_p, KCTYPE_SAMPLE_DISK_IO_STATS, "sample_disk_io_stats",
+ *          &disk_io_stats_def[0], sizeof(disk_io_stats_def)/sizeof(struct kcdata_subtype_descriptor));
+ *
+ */
+
+
+#ifndef _KCDATA_H_
+#define _KCDATA_H_
+
+#include <stdint.h>
+#include <string.h>
+#include <uuid/uuid.h>
+
+#define KCDATA_DESC_MAXLEN 32 /* including NULL byte at end */
+
+#define KCDATA_FLAGS_STRUCT_PADDING_MASK 0xf
+#define KCDATA_FLAGS_STRUCT_HAS_PADDING 0x80
+
+/*
+ * kcdata aligns elements to 16 byte boundaries.
+ */
+#define KCDATA_ALIGNMENT_SIZE       0x10
+
+struct kcdata_item {
+	uint32_t type;
+	uint32_t size; /* len(data)  */
+	               /* flags.
+	                *
+	                * For structures:
+	                *    padding      = flags & 0xf
+	                *    has_padding  = (flags & 0x80) >> 7
+	                *
+	                * has_padding is needed to disambiguate cases such as
+	                * thread_snapshot_v2 and thread_snapshot_v3.  Their
+	                * respective sizes are 0x68 and 0x70, and thread_snapshot_v2
+	                * was emmitted by old kernels *before* we started recording
+	                * padding.  Since legacy thread_snapsht_v2 and modern
+	                * thread_snapshot_v3 will both record 0 for the padding
+	                * flags, we need some other bit which will be nonzero in the
+	                * flags to disambiguate.
+	                *
+	                * This is why we hardcode a special case for
+	                * STACKSHOT_KCTYPE_THREAD_SNAPSHOT into the iterator
+	                * functions below.  There is only a finite number of such
+	                * hardcodings which will ever be needed.  They can occur
+	                * when:
+	                *
+	                *  * We have a legacy structure that predates padding flags
+	                *
+	                *  * which we want to extend without changing the kcdata type
+	                *
+	                *  * by only so many bytes as would fit in the space that
+	                *  was previously unused padding.
+	                *
+	                * For containers:
+	                *    container_id = flags
+	                *
+	                * For arrays:
+	                *    element_count = flags & UINT32_MAX
+	                *    element_type = (flags >> 32) & UINT32_MAX
+	                */
+	uint64_t flags;
+	char data[]; /* must be at the end */
+};
+
+typedef struct kcdata_item * kcdata_item_t;
+
+enum KCDATA_SUBTYPE_TYPES { KC_ST_CHAR = 1, KC_ST_INT8, KC_ST_UINT8, KC_ST_INT16, KC_ST_UINT16, KC_ST_INT32, KC_ST_UINT32, KC_ST_INT64, KC_ST_UINT64 };
+typedef enum KCDATA_SUBTYPE_TYPES kctype_subtype_t;
+
+/*
+ * A subtype description structure that defines
+ * how a compound data is laid out in memory. This
+ * provides on the fly definition of types and consumption
+ * by the parser.
+ */
+struct kcdata_subtype_descriptor {
+	uint8_t kcs_flags;
+#define KCS_SUBTYPE_FLAGS_NONE 0x0
+#define KCS_SUBTYPE_FLAGS_ARRAY 0x1
+/* Force struct type even if only one element.
+ *
+ * Normally a kcdata_type_definition is treated as a structure if it has
+ * more than one subtype descriptor.  Otherwise it is treated as a simple
+ * type.  For example libkdd will represent a simple integer 42 as simply
+ * 42, but it will represent a structure containing an integer 42 as
+ * {"field_name": 42}..
+ *
+ * If a kcdata_type_definition has only single subtype, then it will be
+ * treated as a structure iff KCS_SUBTYPE_FLAGS_STRUCT is set.  If it has
+ * multiple subtypes, it will always be treated as a structure.
+ *
+ * KCS_SUBTYPE_FLAGS_MERGE has the opposite effect.  If this flag is used then
+ * even if there are multiple elements, they will all be treated as individual
+ * properties of the parent dictionary.
+ */
+#define KCS_SUBTYPE_FLAGS_STRUCT 0x2                    /* force struct type even if only one element */
+#define KCS_SUBTYPE_FLAGS_MERGE 0x4                     /* treat as multiple elements of parents instead of struct */
+	uint8_t kcs_elem_type;                              /* restricted to kctype_subtype_t */
+	uint16_t kcs_elem_offset;                           /* offset in struct where data is found */
+	uint32_t kcs_elem_size;                             /* size of element (or) packed state for array type */
+	char                 kcs_name[KCDATA_DESC_MAXLEN];  /* max 31 bytes for name of field */
+};
+
+typedef struct kcdata_subtype_descriptor * kcdata_subtype_descriptor_t;
+
+/*
+ * In case of array of basic c types in kctype_subtype_t,
+ * size is packed in lower 16 bits and
+ * count is packed in upper 16 bits of kcs_elem_size field.
+ */
+#define KCS_SUBTYPE_PACK_SIZE(e_count, e_size) (((e_count)&0xffffu) << 16 | ((e_size)&0xffffu))
+
+static inline uint32_t
+kcs_get_elem_size(kcdata_subtype_descriptor_t d)
+{
+	if (d->kcs_flags & KCS_SUBTYPE_FLAGS_ARRAY) {
+		/* size is composed as ((count &0xffff)<<16 | (elem_size & 0xffff)) */
+		return (uint32_t)((d->kcs_elem_size & 0xffff) * ((d->kcs_elem_size & 0xffff0000)>>16));
+	}
+	return d->kcs_elem_size;
+}
+
+static inline uint32_t
+kcs_get_elem_count(kcdata_subtype_descriptor_t d)
+{
+	if (d->kcs_flags & KCS_SUBTYPE_FLAGS_ARRAY)
+		return (d->kcs_elem_size >> 16) & 0xffff;
+	return 1;
+}
+
+static inline int
+kcs_set_elem_size(kcdata_subtype_descriptor_t d, uint32_t size, uint32_t count)
+{
+	if (count > 1) {
+		/* means we are setting up an array */
+		if (size > 0xffff || count > 0xffff)
+			return -1; //invalid argument
+		d->kcs_elem_size = ((count & 0xffff) << 16 | (size & 0xffff));
+	}
+	else
+	{
+		d->kcs_elem_size = size;
+	}
+	return 0;
+}
+
+struct kcdata_type_definition {
+	uint32_t kct_type_identifier;
+	uint32_t kct_num_elements;
+	char kct_name[KCDATA_DESC_MAXLEN];
+	struct kcdata_subtype_descriptor kct_elements[];
+};
+
+
+/* chunk type definitions. 0 - 0x7ff are reserved  and defined here
+ * NOTE: Please update kcdata/libkdd/kcdtypes.c if you make any changes
+ * in STACKSHOT_KCTYPE_* types.
+ */
+
+/*
+ * Types with description value.
+ * these will have KCDATA_DESC_MAXLEN-1 length string description
+ * and rest of kcdata_iter_size() - KCDATA_DESC_MAXLEN bytes as data
+ */
+#define KCDATA_TYPE_INVALID 0x0u
+#define KCDATA_TYPE_STRING_DESC 0x1u
+#define KCDATA_TYPE_UINT32_DESC 0x2u
+#define KCDATA_TYPE_UINT64_DESC 0x3u
+#define KCDATA_TYPE_INT32_DESC 0x4u
+#define KCDATA_TYPE_INT64_DESC 0x5u
+#define KCDATA_TYPE_BINDATA_DESC 0x6u
+
+/*
+ * Compound type definitions
+ */
+#define KCDATA_TYPE_ARRAY 0x11u         /* Array of data OBSOLETE DONT USE THIS*/
+#define KCDATA_TYPE_TYPEDEFINTION 0x12u /* Meta type that describes a type on the fly. */
+#define KCDATA_TYPE_CONTAINER_BEGIN                                       \
+	0x13u /* Container type which has corresponding CONTAINER_END header. \
+	      * KCDATA_TYPE_CONTAINER_BEGIN has type in the data segment.     \
+	      * Both headers have (uint64_t) ID for matching up nested data.  \
+	      */
+#define KCDATA_TYPE_CONTAINER_END 0x14u
+
+#define KCDATA_TYPE_ARRAY_PAD0 0x20u /* Array of data with 0 byte of padding*/
+#define KCDATA_TYPE_ARRAY_PAD1 0x21u /* Array of data with 1 byte of padding*/
+#define KCDATA_TYPE_ARRAY_PAD2 0x22u /* Array of data with 2 byte of padding*/
+#define KCDATA_TYPE_ARRAY_PAD3 0x23u /* Array of data with 3 byte of padding*/
+#define KCDATA_TYPE_ARRAY_PAD4 0x24u /* Array of data with 4 byte of padding*/
+#define KCDATA_TYPE_ARRAY_PAD5 0x25u /* Array of data with 5 byte of padding*/
+#define KCDATA_TYPE_ARRAY_PAD6 0x26u /* Array of data with 6 byte of padding*/
+#define KCDATA_TYPE_ARRAY_PAD7 0x27u /* Array of data with 7 byte of padding*/
+#define KCDATA_TYPE_ARRAY_PAD8 0x28u /* Array of data with 8 byte of padding*/
+#define KCDATA_TYPE_ARRAY_PAD9 0x29u /* Array of data with 9 byte of padding*/
+#define KCDATA_TYPE_ARRAY_PADa 0x2au /* Array of data with a byte of padding*/
+#define KCDATA_TYPE_ARRAY_PADb 0x2bu /* Array of data with b byte of padding*/
+#define KCDATA_TYPE_ARRAY_PADc 0x2cu /* Array of data with c byte of padding*/
+#define KCDATA_TYPE_ARRAY_PADd 0x2du /* Array of data with d byte of padding*/
+#define KCDATA_TYPE_ARRAY_PADe 0x2eu /* Array of data with e byte of padding*/
+#define KCDATA_TYPE_ARRAY_PADf 0x2fu /* Array of data with f byte of padding*/
+
+/*
+ * Generic data types that are most commonly used
+ */
+#define KCDATA_TYPE_LIBRARY_LOADINFO 0x30u   /* struct dyld_uuid_info_32 */
+#define KCDATA_TYPE_LIBRARY_LOADINFO64 0x31u /* struct dyld_uuid_info_64 */
+#define KCDATA_TYPE_TIMEBASE 0x32u           /* struct mach_timebase_info */
+#define KCDATA_TYPE_MACH_ABSOLUTE_TIME 0x33u /* uint64_t */
+#define KCDATA_TYPE_TIMEVAL 0x34u            /* struct timeval64 */
+#define KCDATA_TYPE_USECS_SINCE_EPOCH 0x35u  /* time in usecs uint64_t */
+#define KCDATA_TYPE_PID 0x36u                /* int32_t */
+#define KCDATA_TYPE_PROCNAME 0x37u           /* char * */
+#define KCDATA_TYPE_NESTED_KCDATA 0x38u      /* nested kcdata buffer */
+
+#define KCDATA_TYPE_BUFFER_END 0xF19158EDu
+
+/* MAGIC numbers defined for each class of chunked data
+ *
+ * To future-proof against big-endian arches, make sure none of these magic
+ * numbers are byteswaps of each other
+ */
+
+#define KCDATA_BUFFER_BEGIN_CRASHINFO 0xDEADF157u       /* owner: corpses/task_corpse.h */
+                                                        /* type-range: 0x800 - 0x8ff */
+#define KCDATA_BUFFER_BEGIN_STACKSHOT 0x59a25807u       /* owner: sys/stackshot.h */
+                                                        /* type-range: 0x900 - 0x93f */
+#define KCDATA_BUFFER_BEGIN_DELTA_STACKSHOT 0xDE17A59Au /* owner: sys/stackshot.h */
+                                                        /* type-range: 0x940 - 0x9ff */
+#define KCDATA_BUFFER_BEGIN_OS_REASON 0x53A20900u       /* owner: sys/reason.h */
+                                                        /* type-range: 0x1000-103f */
+
+/* next type range number available 0x1040 */
+
+/**************** definitions for stackshot *********************/
+
+/* This value must always match IO_NUM_PRIORITIES defined in thread_info.h */
+#define STACKSHOT_IO_NUM_PRIORITIES 	4
+/* This value must always match MAXTHREADNAMESIZE used in bsd */
+#define STACKSHOT_MAX_THREAD_NAME_SIZE	64
+
+/*
+ * NOTE: Please update kcdata/libkdd/kcdtypes.c if you make any changes
+ * in STACKSHOT_KCTYPE_* types.
+ */
+#define STACKSHOT_KCTYPE_IOSTATS 0x901u          /* io_stats_snapshot */
+#define STACKSHOT_KCTYPE_GLOBAL_MEM_STATS 0x902u /* struct mem_and_io_snapshot */
+#define STACKSHOT_KCCONTAINER_TASK 0x903u
+#define STACKSHOT_KCCONTAINER_THREAD 0x904u
+#define STACKSHOT_KCTYPE_TASK_SNAPSHOT 0x905u         /* task_snapshot_v2 */
+#define STACKSHOT_KCTYPE_THREAD_SNAPSHOT 0x906u       /* thread_snapshot_v2, thread_snapshot_v3 */
+#define STASKSHOT_KCTYPE_DONATING_PIDS 0x907u         /* todo: remove once all callers move to the correct spelling below */
+#define STACKSHOT_KCTYPE_DONATING_PIDS 0x907u         /* int[] */
+#define STACKSHOT_KCTYPE_SHAREDCACHE_LOADINFO 0x908u  /* same as KCDATA_TYPE_LIBRARY_LOADINFO64 */
+#define STACKSHOT_KCTYPE_THREAD_NAME 0x909u           /* char[] */
+#define STACKSHOT_KCTYPE_KERN_STACKFRAME 0x90Au       /* struct stack_snapshot_frame32 */
+#define STACKSHOT_KCTYPE_KERN_STACKFRAME64 0x90Bu     /* struct stack_snapshot_frame64 */
+#define STACKSHOT_KCTYPE_USER_STACKFRAME 0x90Cu       /* struct stack_snapshot_frame32 */
+#define STACKSHOT_KCTYPE_USER_STACKFRAME64 0x90Du     /* struct stack_snapshot_frame64 */
+#define STACKSHOT_KCTYPE_BOOTARGS 0x90Eu              /* boot args string */
+#define STACKSHOT_KCTYPE_OSVERSION 0x90Fu             /* os version string */
+#define STACKSHOT_KCTYPE_KERN_PAGE_SIZE 0x910u        /* kernel page size in uint32_t */
+#define STACKSHOT_KCTYPE_JETSAM_LEVEL 0x911u          /* jetsam level in uint32_t */
+#define STACKSHOT_KCTYPE_DELTA_SINCE_TIMESTAMP 0x912u /* timestamp used for the delta stackshot */
+
+#define STACKSHOT_KCTYPE_TASK_DELTA_SNAPSHOT 0x940u   /* task_delta_snapshot_v2 */
+#define STACKSHOT_KCTYPE_THREAD_DELTA_SNAPSHOT 0x941u /* thread_delta_snapshot_v2 */
+
+#define STACKSHOT_KCTYPE_KERN_STACKLR 0x913u          /* uint32_t */
+#define STACKSHOT_KCTYPE_KERN_STACKLR64 0x914u        /* uint64_t */
+#define STACKSHOT_KCTYPE_USER_STACKLR 0x915u          /* uint32_t */
+#define STACKSHOT_KCTYPE_USER_STACKLR64 0x916u        /* uint64_t */
+#define STACKSHOT_KCTYPE_NONRUNNABLE_TIDS 0x917u      /* uint64_t */
+#define STACKSHOT_KCTYPE_NONRUNNABLE_TASKS 0x918u     /* uint64_t */
+#define STACKSHOT_KCTYPE_CPU_TIMES 0x919u             /* struct stackshot_cpu_times */
+#define STACKSHOT_KCTYPE_STACKSHOT_DURATION 0x91au    /* struct stackshot_duration */
+#define STACKSHOT_KCTYPE_STACKSHOT_FAULT_STATS 0x91bu /* struct stackshot_fault_stats */
+
+struct stack_snapshot_frame32 {
+	uint32_t lr;
+	uint32_t sp;
+};
+
+struct stack_snapshot_frame64 {
+    uint64_t lr;
+    uint64_t sp;
+};
+
+struct dyld_uuid_info_32 {
+    uint32_t imageLoadAddress; /* base address image is mapped at */
+    uuid_t   imageUUID;
+};
+
+struct dyld_uuid_info_64 {
+    uint64_t imageLoadAddress; /* XXX image slide */
+    uuid_t   imageUUID;
+};
+
+struct dyld_uuid_info_64_v2 {
+    uint64_t imageLoadAddress; /* XXX image slide */
+    uuid_t   imageUUID;
+    /* end of version 1 of dyld_uuid_info_64. sizeof v1 was 24 */
+    uint64_t imageSlidBaseAddress; /* slid base address of image */
+};
+
+struct user32_dyld_uuid_info {
+	uint32_t	imageLoadAddress;	/* base address image is mapped into */
+	uuid_t			imageUUID;			/* UUID of image */
+};
+
+struct user64_dyld_uuid_info {
+	uint64_t	imageLoadAddress;	/* base address image is mapped into */
+	uuid_t			imageUUID;			/* UUID of image */
+};
+
+enum task_snapshot_flags {
+	kTaskRsrcFlagged                      = 0x4, // In the EXC_RESOURCE danger zone?
+	kTerminatedSnapshot                   = 0x8,
+	kPidSuspended                         = 0x10, // true for suspended task
+	kFrozen                               = 0x20, // true for hibernated task (along with pidsuspended)
+	kTaskDarwinBG                         = 0x40,
+	kTaskExtDarwinBG                      = 0x80,
+	kTaskVisVisible                       = 0x100,
+	kTaskVisNonvisible                    = 0x200,
+	kTaskIsForeground                     = 0x400,
+	kTaskIsBoosted                        = 0x800,
+	kTaskIsSuppressed                     = 0x1000,
+	kTaskIsTimerThrottled                 = 0x2000, /* deprecated */
+	kTaskIsImpDonor                       = 0x4000,
+	kTaskIsLiveImpDonor                   = 0x8000,
+	kTaskIsDirty                          = 0x10000,
+	kTaskWqExceededConstrainedThreadLimit = 0x20000,
+	kTaskWqExceededTotalThreadLimit       = 0x40000,
+	kTaskWqFlagsAvailable                 = 0x80000,
+	kTaskUUIDInfoFaultedIn                = 0x100000, /* successfully faulted in some UUID info */
+	kTaskUUIDInfoMissing                  = 0x200000, /* some UUID info was paged out */
+	kTaskUUIDInfoTriedFault               = 0x400000, /* tried to fault in UUID info */
+	kTaskSharedRegionInfoUnavailable      = 0x800000,  /* shared region info unavailable */
+};
+
+enum thread_snapshot_flags {
+	kHasDispatchSerial    = 0x4,
+	kStacksPCOnly         = 0x8,    /* Stack traces have no frame pointers. */
+	kThreadDarwinBG       = 0x10,   /* Thread is darwinbg */
+	kThreadIOPassive      = 0x20,   /* Thread uses passive IO */
+	kThreadSuspended      = 0x40,   /* Thread is suspended */
+	kThreadTruncatedBT    = 0x80,   /* Unmapped pages caused truncated backtrace */
+	kGlobalForcedIdle     = 0x100,  /* Thread performs global forced idle */
+	kThreadFaultedBT      = 0x200,  /* Some thread stack pages were faulted in as part of BT */
+	kThreadTriedFaultBT   = 0x400,  /* We tried to fault in thread stack pages as part of BT */
+	kThreadOnCore         = 0x800,  /* Thread was on-core when we entered debugger context */
+	kThreadIdleWorker     = 0x1000, /* Thread is an idle libpthread worker thread */
+};
+
+struct mem_and_io_snapshot {
+	uint32_t	snapshot_magic;
+	uint32_t	free_pages;
+	uint32_t	active_pages;
+	uint32_t	inactive_pages;
+	uint32_t	purgeable_pages;
+	uint32_t	wired_pages;
+	uint32_t	speculative_pages;
+	uint32_t	throttled_pages;
+	uint32_t	filebacked_pages;
+	uint32_t 	compressions;
+	uint32_t	decompressions;
+	uint32_t	compressor_size;
+	int32_t 	busy_buffer_count;
+	uint32_t	pages_wanted;
+	uint32_t	pages_reclaimed;
+	uint8_t		pages_wanted_reclaimed_valid; // did mach_vm_pressure_monitor succeed?
+} __attribute__((packed));
+
+/* SS_TH_* macros are for ths_state */
+#define SS_TH_WAIT 0x01       /* queued for waiting */
+#define SS_TH_SUSP 0x02       /* stopped or requested to stop */
+#define SS_TH_RUN 0x04        /* running or on runq */
+#define SS_TH_UNINT 0x08      /* waiting uninteruptibly */
+#define SS_TH_TERMINATE 0x10  /* halted at termination */
+#define SS_TH_TERMINATE2 0x20 /* added to termination queue */
+#define SS_TH_IDLE 0x80       /* idling processor */
+
+struct thread_snapshot_v2 {
+	uint64_t  ths_thread_id;
+	uint64_t  ths_wait_event;
+	uint64_t  ths_continuation;
+	uint64_t  ths_total_syscalls;
+	uint64_t  ths_voucher_identifier;
+	uint64_t  ths_dqserialnum;
+	uint64_t  ths_user_time;
+	uint64_t  ths_sys_time;
+	uint64_t  ths_ss_flags;
+	uint64_t  ths_last_run_time;
+	uint64_t  ths_last_made_runnable_time;
+	uint32_t  ths_state;
+	uint32_t  ths_sched_flags;
+	int16_t   ths_base_priority;
+	int16_t   ths_sched_priority;
+	uint8_t   ths_eqos;
+	uint8_t ths_rqos;
+	uint8_t ths_rqos_override;
+	uint8_t ths_io_tier;
+} __attribute__((packed));
+
+struct thread_snapshot_v3 {
+	uint64_t ths_thread_id;
+	uint64_t ths_wait_event;
+	uint64_t ths_continuation;
+	uint64_t ths_total_syscalls;
+	uint64_t ths_voucher_identifier;
+	uint64_t ths_dqserialnum;
+	uint64_t ths_user_time;
+	uint64_t ths_sys_time;
+	uint64_t ths_ss_flags;
+	uint64_t ths_last_run_time;
+	uint64_t ths_last_made_runnable_time;
+	uint32_t ths_state;
+	uint32_t ths_sched_flags;
+	int16_t ths_base_priority;
+	int16_t ths_sched_priority;
+	uint8_t ths_eqos;
+	uint8_t ths_rqos;
+	uint8_t ths_rqos_override;
+	uint8_t ths_io_tier;
+	uint64_t ths_thread_t;
+} __attribute__((packed));
+
+struct thread_delta_snapshot_v2 {
+	uint64_t  tds_thread_id;
+	uint64_t  tds_voucher_identifier;
+	uint64_t  tds_ss_flags;
+	uint64_t  tds_last_made_runnable_time;
+	uint32_t  tds_state;
+	uint32_t  tds_sched_flags;
+	int16_t   tds_base_priority;
+	int16_t   tds_sched_priority;
+	uint8_t   tds_eqos;
+	uint8_t   tds_rqos;
+	uint8_t   tds_rqos_override;
+	uint8_t   tds_io_tier;
+} __attribute__ ((packed));
+
+struct io_stats_snapshot
+{
+	/*
+	 * I/O Statistics
+	 * XXX: These fields must be together.
+	 */
+	uint64_t         ss_disk_reads_count;
+	uint64_t         ss_disk_reads_size;
+	uint64_t         ss_disk_writes_count;
+	uint64_t         ss_disk_writes_size;
+	uint64_t         ss_io_priority_count[STACKSHOT_IO_NUM_PRIORITIES];
+	uint64_t         ss_io_priority_size[STACKSHOT_IO_NUM_PRIORITIES];
+	uint64_t         ss_paging_count;
+	uint64_t         ss_paging_size;
+	uint64_t         ss_non_paging_count;
+	uint64_t         ss_non_paging_size;
+	uint64_t         ss_data_count;
+	uint64_t         ss_data_size;
+	uint64_t         ss_metadata_count;
+	uint64_t         ss_metadata_size;
+	/* XXX: I/O Statistics end */
+
+} __attribute__ ((packed));
+
+struct task_snapshot_v2 {
+	uint64_t  ts_unique_pid;
+	uint64_t  ts_ss_flags;
+	uint64_t  ts_user_time_in_terminated_threads;
+	uint64_t  ts_system_time_in_terminated_threads;
+	uint64_t  ts_p_start_sec;
+	uint64_t  ts_task_size;
+	uint64_t  ts_max_resident_size;
+	uint32_t  ts_suspend_count;
+	uint32_t  ts_faults;
+	uint32_t  ts_pageins;
+	uint32_t  ts_cow_faults;
+	uint32_t  ts_was_throttled;
+	uint32_t  ts_did_throttle;
+	uint32_t  ts_latency_qos;
+	int32_t   ts_pid;
+	char      ts_p_comm[32];
+} __attribute__ ((packed));
+
+struct task_delta_snapshot_v2 {
+	uint64_t  tds_unique_pid;
+	uint64_t  tds_ss_flags;
+	uint64_t  tds_user_time_in_terminated_threads;
+	uint64_t  tds_system_time_in_terminated_threads;
+	uint64_t  tds_task_size;
+	uint64_t  tds_max_resident_size;
+	uint32_t  tds_suspend_count;
+	uint32_t  tds_faults;
+	uint32_t  tds_pageins;
+	uint32_t  tds_cow_faults;
+	uint32_t  tds_was_throttled;
+	uint32_t  tds_did_throttle;
+	uint32_t  tds_latency_qos;
+} __attribute__ ((packed));
+
+struct stackshot_cpu_times {
+	uint64_t user_usec;
+	uint64_t system_usec;
+} __attribute__((packed));
+
+struct stackshot_duration {
+	uint64_t stackshot_duration;
+	uint64_t stackshot_duration_outer;
+} __attribute__((packed));
+
+struct stackshot_fault_stats {
+	uint32_t sfs_pages_faulted_in;      /* number of pages faulted in using KDP fault path */
+	uint64_t sfs_time_spent_faulting;   /* MATUs spent faulting */
+	uint64_t sfs_system_max_fault_time; /* MATUs fault time limit per stackshot */
+	uint8_t  sfs_stopped_faulting;      /* we stopped decompressing because we hit the limit */
+} __attribute__((packed));
+
+/**************** definitions for crashinfo *********************/
+
+/*
+ * NOTE: Please update kcdata/libkdd/kcdtypes.c if you make any changes
+ * in TASK_CRASHINFO_* types.
+ */
+
+/* FIXME some of these types aren't clean (fixed width,  packed, and defined *here*) */
+
+#define TASK_CRASHINFO_BEGIN                KCDATA_BUFFER_BEGIN_CRASHINFO
+#define TASK_CRASHINFO_STRING_DESC          KCDATA_TYPE_STRING_DESC
+#define TASK_CRASHINFO_UINT32_DESC          KCDATA_TYPE_UINT32_DESC
+#define TASK_CRASHINFO_UINT64_DESC          KCDATA_TYPE_UINT64_DESC
+
+#define TASK_CRASHINFO_EXTMODINFO           0x801
+#define TASK_CRASHINFO_BSDINFOWITHUNIQID    0x802 /* struct proc_uniqidentifierinfo */
+#define TASK_CRASHINFO_TASKDYLD_INFO        0x803
+#define TASK_CRASHINFO_UUID                 0x804
+#define TASK_CRASHINFO_PID                  0x805
+#define TASK_CRASHINFO_PPID                 0x806
+#define TASK_CRASHINFO_RUSAGE               0x807  /* struct rusage DEPRECATED do not use.
+													  This struct has longs in it */
+#define TASK_CRASHINFO_RUSAGE_INFO          0x808  /* struct rusage_info_v3 from resource.h */
+#define TASK_CRASHINFO_PROC_NAME            0x809  /* char * */
+#define TASK_CRASHINFO_PROC_STARTTIME       0x80B  /* struct timeval64 */
+#define TASK_CRASHINFO_USERSTACK            0x80C  /* uint64_t */
+#define TASK_CRASHINFO_ARGSLEN              0x80D
+#define TASK_CRASHINFO_EXCEPTION_CODES      0x80E  /* mach_exception_data_t */
+#define TASK_CRASHINFO_PROC_PATH            0x80F  /* string of len MAXPATHLEN */
+#define TASK_CRASHINFO_PROC_CSFLAGS         0x810  /* uint32_t */
+#define TASK_CRASHINFO_PROC_STATUS          0x811  /* char */
+#define TASK_CRASHINFO_UID                  0x812  /* uid_t */
+#define TASK_CRASHINFO_GID                  0x813  /* gid_t */
+#define TASK_CRASHINFO_PROC_ARGC            0x814  /* int */
+#define TASK_CRASHINFO_PROC_FLAGS           0x815  /* unsigned int */
+#define TASK_CRASHINFO_CPUTYPE              0x816  /* cpu_type_t */
+#define TASK_CRASHINFO_WORKQUEUEINFO        0x817  /* struct proc_workqueueinfo */
+#define TASK_CRASHINFO_RESPONSIBLE_PID      0x818  /* pid_t */
+#define TASK_CRASHINFO_DIRTY_FLAGS          0x819  /* int */
+#define TASK_CRASHINFO_CRASHED_THREADID     0x81A  /* uint64_t */
+#define TASK_CRASHINFO_COALITION_ID         0x81B  /* uint64_t */
+#define TASK_CRASHINFO_UDATA_PTRS           0x81C  /* uint64_t */
+#define TASK_CRASHINFO_MEMORY_LIMIT         0x81D  /* uint64_t */
+
+#define TASK_CRASHINFO_END                  KCDATA_TYPE_BUFFER_END
+
+/**************** definitions for os reasons *********************/
+
+#define EXIT_REASON_SNAPSHOT            0x1001
+#define EXIT_REASON_USER_DESC           0x1002 /* string description of reason */
+#define EXIT_REASON_USER_PAYLOAD        0x1003 /* user payload data */
+#define EXIT_REASON_CODESIGNING_INFO    0x1004
+
+struct exit_reason_snapshot {
+        uint32_t ers_namespace;
+        uint64_t ers_code;
+        /* end of version 1 of exit_reason_snapshot. sizeof v1 was 12 */
+        uint64_t ers_flags;
+} __attribute__((packed));
+
+#define EXIT_REASON_CODESIG_PATH_MAX    1024
+
+struct codesigning_exit_reason_info {
+	uint64_t  ceri_virt_addr;
+	uint64_t  ceri_file_offset;
+	char      ceri_pathname[EXIT_REASON_CODESIG_PATH_MAX];
+	char      ceri_filename[EXIT_REASON_CODESIG_PATH_MAX];
+	uint64_t  ceri_codesig_modtime_secs;
+	uint64_t  ceri_codesig_modtime_nsecs;
+	uint64_t  ceri_page_modtime_secs;
+	uint64_t  ceri_page_modtime_nsecs;
+	uint8_t   ceri_path_truncated;
+	uint8_t   ceri_object_codesigned;
+	uint8_t   ceri_page_codesig_validated;
+	uint8_t   ceri_page_codesig_tainted;
+	uint8_t   ceri_page_codesig_nx;
+	uint8_t   ceri_page_wpmapped;
+	uint8_t   ceri_page_slid;
+	uint8_t   ceri_page_dirty;
+	uint32_t  ceri_page_shadow_depth;
+} __attribute__((packed));
+
+#define EXIT_REASON_USER_DESC_MAX_LEN   1024
+#define EXIT_REASON_PAYLOAD_MAX_LEN     2048
+/**************** safe iterators *********************/
+
+typedef struct kcdata_iter {
+	kcdata_item_t item;
+	void *end;
+} kcdata_iter_t;
+
+
+static inline
+kcdata_iter_t kcdata_iter(void *buffer, unsigned long size) {
+	kcdata_iter_t iter;
+	iter.item = (kcdata_item_t) buffer;
+	iter.end = (void*) (((uintptr_t)buffer) + size);
+	return iter;
+}
+
+static inline
+kcdata_iter_t kcdata_iter_unsafe(void *buffer) __attribute__((deprecated));
+
+static inline
+kcdata_iter_t kcdata_iter_unsafe(void *buffer) {
+	kcdata_iter_t iter;
+	iter.item = (kcdata_item_t) buffer;
+	iter.end = (void*) (uintptr_t) ~0;
+	return iter;
+}
+
+static const kcdata_iter_t kcdata_invalid_iter = { .item = 0, .end = 0 };
+
+static inline
+int kcdata_iter_valid(kcdata_iter_t iter) {
+	return
+		( (uintptr_t)iter.item + sizeof(struct kcdata_item) <= (uintptr_t)iter.end ) &&
+		( (uintptr_t)iter.item + sizeof(struct kcdata_item) + iter.item->size  <= (uintptr_t)iter.end);
+}
+
+
+static inline
+kcdata_iter_t kcdata_iter_next(kcdata_iter_t iter) {
+	iter.item = (kcdata_item_t) (((uintptr_t)iter.item) + sizeof(struct kcdata_item) + (iter.item->size));
+	return iter;
+}
+
+static inline uint32_t
+kcdata_iter_type(kcdata_iter_t iter)
+{
+	if ((iter.item->type & ~0xfu) == KCDATA_TYPE_ARRAY_PAD0)
+		return KCDATA_TYPE_ARRAY;
+	else
+		return iter.item->type;
+}
+
+static inline uint32_t
+kcdata_calc_padding(uint32_t size)
+{
+	/* calculate number of bits to add to size to get something divisible by 16 */
+	return (-size) & 0xf;
+}
+
+static inline uint32_t
+kcdata_flags_get_padding(uint64_t flags)
+{
+	return flags & KCDATA_FLAGS_STRUCT_PADDING_MASK;
+}
+
+/* see comment above about has_padding */
+static inline int
+kcdata_iter_is_legacy_item(kcdata_iter_t iter, uint32_t legacy_size)
+{
+	uint32_t legacy_size_padded = legacy_size + kcdata_calc_padding(legacy_size);
+	return (iter.item->size == legacy_size_padded &&
+		(iter.item->flags & (KCDATA_FLAGS_STRUCT_PADDING_MASK | KCDATA_FLAGS_STRUCT_HAS_PADDING)) == 0);
+
+}
+
+static inline uint32_t
+kcdata_iter_size(kcdata_iter_t iter)
+{
+	uint32_t legacy_size = 0;
+
+	switch (kcdata_iter_type(iter)) {
+	case KCDATA_TYPE_ARRAY:
+	case KCDATA_TYPE_CONTAINER_BEGIN:
+		return iter.item->size;
+	case STACKSHOT_KCTYPE_THREAD_SNAPSHOT: {
+		legacy_size = sizeof(struct thread_snapshot_v2);
+		if (kcdata_iter_is_legacy_item(iter, legacy_size)) {
+			return legacy_size;
+		}
+
+		goto not_legacy;
+	}
+	case STACKSHOT_KCTYPE_SHAREDCACHE_LOADINFO: {
+		legacy_size = sizeof(struct dyld_uuid_info_64);
+		if (kcdata_iter_is_legacy_item(iter, legacy_size)) {
+			return legacy_size;
+		}
+
+		goto not_legacy;
+	}
+not_legacy:
+	default:
+		if (iter.item->size < kcdata_flags_get_padding(iter.item->flags))
+			return 0;
+		else
+			return iter.item->size - kcdata_flags_get_padding(iter.item->flags);
+	}
+}
+
+static inline uint64_t
+kcdata_iter_flags(kcdata_iter_t iter)
+{
+	return iter.item->flags;
+}
+
+static inline
+void * kcdata_iter_payload(kcdata_iter_t iter) {
+	return &iter.item->data;
+}
+
+
+static inline
+uint32_t kcdata_iter_array_elem_type(kcdata_iter_t iter) {
+	return (iter.item->flags >> 32) & UINT32_MAX;
+}
+
+static inline
+uint32_t kcdata_iter_array_elem_count(kcdata_iter_t iter) {
+	return (iter.item->flags) & UINT32_MAX;
+}
+
+/* KCDATA_TYPE_ARRAY is ambiguous about the size of the array elements.  Size is
+ * calculated as total_size / elements_count, but total size got padded out to a
+ * 16 byte alignment.  New kernels will generate KCDATA_TYPE_ARRAY_PAD* instead
+ * to explicitly tell us how much padding was used.  Here we have a fixed, never
+ * to be altered list of the sizes of array elements that were used before I
+ * discovered this issue.  If you find a KCDATA_TYPE_ARRAY that is not one of
+ * these types, treat it as invalid data. */
+
+static inline
+uint32_t
+kcdata_iter_array_size_switch(kcdata_iter_t iter) {
+	switch(kcdata_iter_array_elem_type(iter)) {
+	case KCDATA_TYPE_LIBRARY_LOADINFO:
+		return sizeof(struct dyld_uuid_info_32);
+	case KCDATA_TYPE_LIBRARY_LOADINFO64:
+		return sizeof(struct dyld_uuid_info_64);
+	case STACKSHOT_KCTYPE_KERN_STACKFRAME:
+	case STACKSHOT_KCTYPE_USER_STACKFRAME:
+		return sizeof(struct stack_snapshot_frame32);
+	case STACKSHOT_KCTYPE_KERN_STACKFRAME64:
+	case STACKSHOT_KCTYPE_USER_STACKFRAME64:
+		return sizeof(struct stack_snapshot_frame64);
+	case STACKSHOT_KCTYPE_DONATING_PIDS:
+		return sizeof(int32_t);
+	case STACKSHOT_KCTYPE_THREAD_DELTA_SNAPSHOT:
+		return sizeof(struct thread_delta_snapshot_v2);
+    // This one is only here to make some unit tests work. It should be OK to
+    // remove.
+	case TASK_CRASHINFO_CRASHED_THREADID:
+		return sizeof(uint64_t);
+	default:
+		return 0;
+	}
+}
+
+static inline
+int kcdata_iter_array_valid(kcdata_iter_t iter) {
+	if (!kcdata_iter_valid(iter))
+		return 0;
+	if (kcdata_iter_type(iter) != KCDATA_TYPE_ARRAY)
+		return 0;
+    if (kcdata_iter_array_elem_count(iter) == 0)
+		return iter.item->size == 0;
+	if (iter.item->type == KCDATA_TYPE_ARRAY) {
+		uint32_t elem_size = kcdata_iter_array_size_switch(iter);
+		if (elem_size == 0)
+			return 0;
+		/* sizes get aligned to the nearest 16. */
+		return
+			kcdata_iter_array_elem_count(iter) <= iter.item->size / elem_size &&
+			iter.item->size % kcdata_iter_array_elem_count(iter) < 16;
+	} else {
+		return
+			(iter.item->type & 0xf) <= iter.item->size &&
+			kcdata_iter_array_elem_count(iter) <= iter.item->size - (iter.item->type & 0xf) &&
+			(iter.item->size - (iter.item->type & 0xf)) % kcdata_iter_array_elem_count(iter) == 0;
+	}
+}
+
+
+static inline
+uint32_t kcdata_iter_array_elem_size(kcdata_iter_t iter) {
+	if (iter.item->type == KCDATA_TYPE_ARRAY)
+		return kcdata_iter_array_size_switch(iter);
+	if (kcdata_iter_array_elem_count(iter) == 0)
+		return 0;
+	return (iter.item->size - (iter.item->type & 0xf)) / kcdata_iter_array_elem_count(iter);
+}
+
+static inline
+int kcdata_iter_container_valid(kcdata_iter_t iter) {
+	return
+		kcdata_iter_valid(iter) &&
+		kcdata_iter_type(iter) == KCDATA_TYPE_CONTAINER_BEGIN &&
+		iter.item->size >= sizeof(uint32_t);
+}
+
+static inline
+uint32_t kcdata_iter_container_type(kcdata_iter_t iter) {
+	return * (uint32_t *) kcdata_iter_payload(iter);
+}
+
+static inline
+uint64_t kcdata_iter_container_id(kcdata_iter_t iter) {
+	return iter.item->flags;
+}
+
+
+#define KCDATA_ITER_FOREACH(iter) for(; kcdata_iter_valid(iter) && iter.item->type != KCDATA_TYPE_BUFFER_END; iter = kcdata_iter_next(iter))
+#define KCDATA_ITER_FOREACH_FAILED(iter) (!kcdata_iter_valid(iter) || (iter).item->type != KCDATA_TYPE_BUFFER_END)
+
+static inline
+kcdata_iter_t
+kcdata_iter_find_type(kcdata_iter_t iter, uint32_t type)
+{
+	KCDATA_ITER_FOREACH(iter)
+	{
+		if (kcdata_iter_type(iter) == type)
+			return iter;
+	}
+	return kcdata_invalid_iter;
+}
+
+static inline
+int kcdata_iter_data_with_desc_valid(kcdata_iter_t iter, uint32_t minsize) {
+	return
+		kcdata_iter_valid(iter) &&
+		kcdata_iter_size(iter) >= KCDATA_DESC_MAXLEN + minsize &&
+		((char*)kcdata_iter_payload(iter))[KCDATA_DESC_MAXLEN-1] == 0;
+}
+
+static inline
+char *kcdata_iter_string(kcdata_iter_t iter, uint32_t offset) {
+	if (offset > kcdata_iter_size(iter)) {
+		return NULL;
+	}
+	uint32_t maxlen = kcdata_iter_size(iter) - offset;
+	char *s = ((char*)kcdata_iter_payload(iter)) + offset;
+	if (strnlen(s, maxlen) < maxlen) {
+		return s;
+	} else {
+		return NULL;
+	}
+}
+
+static inline void kcdata_iter_get_data_with_desc(kcdata_iter_t iter, char **desc_ptr, void **data_ptr, uint32_t *size_ptr) {
+	if (desc_ptr)
+		*desc_ptr = (char *)kcdata_iter_payload(iter);
+	if (data_ptr)
+		*data_ptr = (void *)((uintptr_t)kcdata_iter_payload(iter) + KCDATA_DESC_MAXLEN);
+	if (size_ptr)
+		*size_ptr = kcdata_iter_size(iter) - KCDATA_DESC_MAXLEN;
+}
+
+#endif
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/kern_cdata.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/kern_cdata.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/kern_cdata.h	2015-08-27 01:55:18.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/kern_cdata.h	2016-06-03 22:55:03.000000000 +0200
@@ -29,165 +29,31 @@
 #ifndef _KERN_CDATA_H_
 #define _KERN_CDATA_H_
 
-#include <stdint.h>
+#include <kern/kcdata.h>
 #include <mach/mach_types.h>
 
-#define KCDATA_DESC_MAXLEN          32      /* including NULL byte at end */
-
-struct kcdata_item {
-	uint32_t type;
-	uint32_t size; /* len(data)  */
-	uint64_t flags;
-};
-
-typedef struct kcdata_item * kcdata_item_t;
-
-enum KCDATA_SUBTYPE_TYPES { KC_ST_CHAR = 1, KC_ST_INT8, KC_ST_UINT8, KC_ST_INT16, KC_ST_UINT16, KC_ST_INT32, KC_ST_UINT32, KC_ST_INT64, KC_ST_UINT64 };
-typedef enum KCDATA_SUBTYPE_TYPES kctype_subtype_t;
-
-/*
- * A subtype description structure that defines
- * how a compound data is laid out in memory. This
- * provides on the fly definition of types and consumption
- * by the parser.
- */
-struct kcdata_subtype_descriptor {
-	uint8_t              kcs_flags;
-#define KCS_SUBTYPE_FLAGS_NONE    0x0
-#define KCS_SUBTYPE_FLAGS_ARRAY   0x1
-	uint8_t              kcs_elem_type;                 /* restricted to kctype_subtype_t */
-	uint16_t             kcs_elem_offset;               /* offset in struct where data is found */
-	uint32_t             kcs_elem_size;                 /* size of element (or) packed state for array type */
-	char                 kcs_name[KCDATA_DESC_MAXLEN];  /* max 31 bytes for name of field */
-};
-
-typedef struct kcdata_subtype_descriptor * kcdata_subtype_descriptor_t;
-
-/*
- * In case of array of basic c types in kctype_subtype_t,
- * size is packed in lower 16 bits and
- * count is packed in upper 16 bits of kcs_elem_size field.
- */
-#define KCS_SUBTYPE_PACK_SIZE(e_count,e_size)      (((e_count) & 0xffff) << 16 | ((e_size) & 0xffff))
-
-static inline uint32_t
-kcs_get_elem_size(kcdata_subtype_descriptor_t d)
-{
-	if (d->kcs_flags & KCS_SUBTYPE_FLAGS_ARRAY) {
-		/* size is composed as ((count &0xffff)<<16 | (elem_size & 0xffff)) */
-		return (uint32_t)((d->kcs_elem_size & 0xffff) * ((d->kcs_elem_size & 0xffff0000)>>16));
-	}
-	return d->kcs_elem_size;
-}
-
-static inline uint32_t
-kcs_get_elem_count(kcdata_subtype_descriptor_t d)
-{
-	if (d->kcs_flags & KCS_SUBTYPE_FLAGS_ARRAY)
-		return (d->kcs_elem_size >> 16) & 0xffff;
-	return 1;
-}
-
-static inline kern_return_t
-kcs_set_elem_size(kcdata_subtype_descriptor_t d, uint32_t size, uint32_t count)
-{
-	if (count > 1) {
-		/* means we are setting up an array */
-		if (size > 0xffff || count > 0xffff)
-			return KERN_INVALID_ARGUMENT;
-		d->kcs_elem_size = ((count & 0xffff) << 16 | (size & 0xffff));
-	}
-	else
-	{
-		d->kcs_elem_size = size;
-	}
-	return KERN_SUCCESS;
-}
-
-struct kcdata_type_definition {
-	uint32_t kct_type_identifier;
-	uint32_t kct_num_elements;
-	char kct_name[KCDATA_DESC_MAXLEN];
-};
-
-/* chunk type definitions. 0 - 0x7ff are reserved  and defined here
- * NOTE: Please update libkdd/kcdata/kcdtypes.c if you make any changes
- * in STACKSHOT_KCTYPE_* types.
- */
-
 /*
- * Types with description value.
- * these will have KCDATA_DESC_MAXLEN-1 length string description
- * and rest of KCDATA_ITEM_SIZE() - KCDATA_DESC_MAXLEN bytes as data
+ * Do not use these macros!
+ *
+ * Instead, you should use kcdata_iter_* functions defined in kcdata.h.  These
+ * macoros have no idea where the kcdata buffer ends, so they are all unsafe.
  */
-#define KCDATA_TYPE_INVALID              0x0
-#define KCDATA_TYPE_STRING_DESC          0x1
-#define KCDATA_TYPE_UINT32_DESC          0x2
-#define KCDATA_TYPE_UINT64_DESC          0x3
-#define KCDATA_TYPE_INT32_DESC           0x4
-#define KCDATA_TYPE_INT64_DESC           0x5
-#define KCDATA_TYPE_BINDATA_DESC         0x6
-
-/*
- * Compound type definitions
- */
-#define KCDATA_TYPE_ARRAY                0x11       /* Array of data */
-#define KCDATA_TYPE_TYPEDEFINTION        0x12       /* Meta type that describes a type on the fly. */
-#define KCDATA_TYPE_CONTAINER_BEGIN      0x13       /* Container type which has corresponding CONTAINER_END header.
-                                                     * KCDATA_TYPE_CONTAINER_BEGIN has type in the data segment.
-                                                     * Both headers have (uint64_t) ID for matching up nested data.
-                                                     */
-#define KCDATA_TYPE_CONTAINER_END        0x14
-
-
-/*
- * Generic data types that are most commonly used
- */
-#define KCDATA_TYPE_LIBRARY_LOADINFO     0x30       /* struct dyld_uuid_info_32 */
-#define KCDATA_TYPE_LIBRARY_LOADINFO64   0x31       /* struct dyld_uuid_info_64 */
-#define KCDATA_TYPE_TIMEBASE             0x32       /* struct mach_timebase_info */
-#define KCDATA_TYPE_MACH_ABSOLUTE_TIME   0x33       /* uint64_t */
-#define KCDATA_TYPE_TIMEVAL              0x34       /* struct timeval64 */
-#define KCDATA_TYPE_USECS_SINCE_EPOCH    0x35       /* time in usecs uint64_t */
-
-#define KCDATA_TYPE_BUFFER_END      0xF19158ED
-
-/* MAGIC numbers defined for each class of chunked data */
-#define KCDATA_BUFFER_BEGIN_CRASHINFO  0xDEADF157   /* owner: corpses/task_corpse.h */
-						    /* type-range: 0x800 - 0x8ff */
-#define KCDATA_BUFFER_BEGIN_STACKSHOT  0x59a25807   /* owner: sys/stackshot.h */
-						    /* type-range: 0x900 - 0x9ff */
-
-/* next type range number available 0x1000 */
-
-/* Common MACROS and library functions */
-/* make header = sizeof(type, flags, size) */
 #define KCDATA_ITEM_HEADER_SIZE         (sizeof(uint32_t) + sizeof(uint32_t) + sizeof(uint64_t))
-#define KCDATA_ITEM_TYPE(item)          (((kcdata_item_t)(item))->type)
-#define KCDATA_ITEM_SIZE(item)          (((kcdata_item_t)(item))->size)
-#define KCDATA_ITEM_FLAGS(item)          (((kcdata_item_t)(item))->flags)
-
-#define KCDATA_ITEM_ARRAY_GET_EL_TYPE(item)   ((KCDATA_ITEM_FLAGS(item) >> 32) & UINT32_MAX)
-#define KCDATA_ITEM_ARRAY_GET_EL_COUNT(item)  (KCDATA_ITEM_FLAGS(item) & UINT32_MAX)
-#define KCDATA_ITEM_ARRAY_GET_EL_SIZE(item)   (KCDATA_ITEM_SIZE(item) / KCDATA_ITEM_ARRAY_GET_EL_COUNT(item))
-
-#define KCDATA_CONTAINER_ID(item)             ((uint64_t)KCDATA_ITEM_FLAGS(item))
-
-#define KCDATA_ITEM_NEXT_HEADER(item)   ((kcdata_item_t)((uint64_t)((uintptr_t)(item)) + KCDATA_ITEM_HEADER_SIZE + KCDATA_ITEM_SIZE(item)))
-
-#define KCDATA_ITEM_FOREACH(head) for (; KCDATA_ITEM_TYPE(head) != KCDATA_TYPE_BUFFER_END; (head) = KCDATA_ITEM_NEXT_HEADER(head))
-
-static inline kcdata_item_t
-KCDATA_ITEM_FIND_TYPE(kcdata_item_t head, uint32_t type)
-{
-	KCDATA_ITEM_FOREACH(head)
-	{
-		if (KCDATA_ITEM_TYPE(head) == type) {
-			break;
-		}
-	}
-	return (KCDATA_ITEM_TYPE(head) == type) ? (kcdata_item_t)head : 0;
-}
+#define KCDATA_ITEM_ITER(item)          kcdata_iter_unsafe((void*)(item))
+#define KCDATA_ITEM_TYPE(item)          kcdata_iter_type(KCDATA_ITEM_ITER(item))
+#define KCDATA_ITEM_SIZE(item)          kcdata_iter_size(KCDATA_ITEM_ITER(item))
+#define KCDATA_ITEM_FLAGS(item)         kcdata_iter_flags(KCDATA_ITEM_ITER(item))
+#define KCDATA_ITEM_ARRAY_GET_EL_TYPE(item)    kcdata_iter_array_elem_type(KCDATA_ITEM_ITER(item))
+#define KCDATA_ITEM_ARRAY_GET_EL_COUNT(item)   kcdata_iter_array_elem_count(KCDATA_ITEM_ITER(item))
+#define KCDATA_ITEM_ARRAY_GET_EL_SIZE(item)    kcdata_iter_array_elem_size(KCDATA_ITEM_ITER(item))
+#define KCDATA_CONTAINER_ID(item)              kcdata_iter_container_id(KCDATA_ITEM_ITER(item))
+#define KCDATA_ITEM_NEXT_HEADER(itemx)   (kcdata_iter_next(KCDATA_ITEM_ITER(itemx)).item)
+#define KCDATA_ITEM_FOREACH(head)       for (; KCDATA_ITEM_TYPE(head) != KCDATA_TYPE_BUFFER_END; (head) = KCDATA_ITEM_NEXT_HEADER(head))
+#define KCDATA_ITEM_DATA_PTR(item)      kcdata_iter_payload(KCDATA_ITEM_ITER(item))
+#define KCDATA_ITEM_FIND_TYPE(itemx, type) (kcdata_iter_find_type(KCDATA_ITEM_ITER(itemx), type).item)
+#define kcdata_get_container_type(buffer) kcdata_iter_container_type(KCDATA_ITEM_ITER(buffer))
+#define kcdata_get_data_with_desc(buf,desc,data) kcdata_iter_get_data_with_desc(KCDATA_ITEM_ITER(buf),desc,data,NULL)
+/* Do not use these macros! */
 
 
 
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/kpc.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/kpc.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/kpc.h	2015-08-27 01:55:19.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/kpc.h	2016-06-03 22:55:06.000000000 +0200
@@ -2,7 +2,7 @@
  * Copyright (c) 2012 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
- * 
+ *
  * This file contains Original Code and/or Modifications of Original Code
  * as defined in and that are subject to the Apple Public Source License
  * Version 2.0 (the 'License'). You may not use this file except in
@@ -11,10 +11,10 @@
  * unlawful or unlicensed copies of an Apple operating system, or to
  * circumvent, violate, or enable the circumvention or violation of, any
  * terms of an Apple operating system software license agreement.
- * 
+ *
  * Please obtain a copy of the License at
  * http://www.opensource.apple.com/apsl/ and read it before using this file.
- * 
+ *
  * The Original Code and all software distributed under the License are
  * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
  * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
@@ -22,18 +22,20 @@
  * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
  * Please see the License for the specific language governing rights and
  * limitations under the License.
- * 
+ *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_END@
  */
 
-#ifndef __KERN_KPC_H__
-#define __KERN_KPC_H__
+#ifndef KERN_KPC_H
+#define KERN_KPC_H
 
 /* Kernel interfaces to KPC PMC infrastructure. */
 
 #include <machine/machine_kpc.h>
 #include <kern/thread.h> /* thread_* */
 
+__BEGIN_DECLS
+
 /* cross-platform class constants */
 #define KPC_CLASS_FIXED         (0)
 #define KPC_CLASS_CONFIGURABLE  (1)
@@ -87,6 +89,7 @@
  */
 struct cpu_data;
 extern boolean_t kpc_register_cpu(struct cpu_data *cpu_data);
+extern void kpc_unregister_cpu(struct cpu_data *cpu_data);
 
 /* bootstrap */
 extern void kpc_init(void);
@@ -159,8 +162,6 @@
 /* AST callback for KPC */
 extern void kpc_thread_ast_handler( thread_t thread );
 
-/* context switch accounting between two threads */
-extern void kpc_switch_context( thread_t old_thread, thread_t new_thread );
 
 /* acquire/release the counters used by the Power Manager */
 extern int kpc_force_all_ctrs( task_t task, int val );
@@ -323,4 +324,6 @@
 	int      (*set_period)(uint32_t classes, uint64_t *period);
 };
 
-#endif /* __KERN_KPC_H__ */
+__END_DECLS
+
+#endif /* !definde(KERN_KPC_H) */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/ledger.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/ledger.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/ledger.h	2015-08-27 01:55:19.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/ledger.h	2016-06-03 22:55:06.000000000 +0200
@@ -32,10 +32,14 @@
 #ifndef _KERN_LEDGER_H_
 #define _KERN_LEDGER_H_
 
+#include <mach/mach_types.h>	/* ledger_t */
+
 #define	LEDGER_INFO		0
 #define	LEDGER_ENTRY_INFO	1
 #define	LEDGER_TEMPLATE_INFO	2
 #define	LEDGER_LIMIT		3
+/* LEDGER_MAX_CMD always tracks the index of the last ledger command. */
+#define	LEDGER_MAX_CMD		LEDGER_LIMIT
 
 #define	LEDGER_NAME_MAX	32
 
@@ -52,11 +56,11 @@
 };
 
 struct ledger_entry_info {
-        int64_t		lei_balance;
-        int64_t		lei_credit;
-        int64_t		lei_debit;
-        uint64_t	lei_limit;
-	uint64_t	lei_refill_period;	/* In milliseconds */
+	int64_t		lei_balance;
+	int64_t		lei_credit;
+	int64_t		lei_debit;
+	uint64_t	lei_limit;
+	uint64_t	lei_refill_period;	/* In nanoseconds */
 	uint64_t	lei_last_refill;	/* Time since last refill */
 };
 
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/locks.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/locks.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/locks.h	2015-08-27 01:55:19.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/locks.h	2016-06-03 22:55:07.000000000 +0200
@@ -187,10 +187,25 @@
 									lck_mtx_t		*lck,
 									unsigned int	type);
 
+#if MACH_ASSERT
+#define LCK_MTX_ASSERT(lck,type) lck_mtx_assert((lck),(type))
+#else /* MACH_ASSERT */
+#define LCK_MTX_ASSERT(lck,type)
+#endif /* MACH_ASSERT */
+
+#if DEBUG
+#define LCK_MTX_ASSERT_DEBUG(lck,type) lck_mtx_assert((lck),(type))
+#else /* DEBUG */
+#define LCK_MTX_ASSERT_DEBUG(lck,type)
+#endif /* DEBUG */
+
 __END_DECLS
 
-#define	LCK_MTX_ASSERT_OWNED	0x01
-#define	LCK_MTX_ASSERT_NOTOWNED	0x02
+#define	LCK_ASSERT_OWNED		1
+#define	LCK_ASSERT_NOTOWNED		2
+
+#define	LCK_MTX_ASSERT_OWNED	LCK_ASSERT_OWNED
+#define	LCK_MTX_ASSERT_NOTOWNED	LCK_ASSERT_NOTOWNED
 
 
 #define decl_lck_rw_data(class,name)     class lck_rw_t name;
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/policy_internal.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/policy_internal.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/policy_internal.h	1970-01-01 01:00:00.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/policy_internal.h	2016-06-03 22:55:08.000000000 +0200
@@ -0,0 +1,37 @@
+/*
+ * Copyright (c) 2015-2016 Apple Inc. All rights reserved.
+ *
+ * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
+ *
+ * This file contains Original Code and/or Modifications of Original Code
+ * as defined in and that are subject to the Apple Public Source License
+ * Version 2.0 (the 'License'). You may not use this file except in
+ * compliance with the License. The rights granted to you under the License
+ * may not be used to create, or enable the creation or redistribution of,
+ * unlawful or unlicensed copies of an Apple operating system, or to
+ * circumvent, violate, or enable the circumvention or violation of, any
+ * terms of an Apple operating system software license agreement.
+ *
+ * Please obtain a copy of the License at
+ * http://www.opensource.apple.com/apsl/ and read it before using this file.
+ *
+ * The Original Code and all software distributed under the License are
+ * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
+ * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
+ * INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
+ * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
+ * Please see the License for the specific language governing rights and
+ * limitations under the License.
+ *
+ * @APPLE_OSREFERENCE_LICENSE_HEADER_END@
+ */
+
+#ifndef _KERN_POLICY_INTERNAL_H_
+#define _KERN_POLICY_INTERNAL_H_
+
+/*
+ * Interfaces for functionality implemented in task_ or thread_policy subsystem
+ */
+
+
+#endif /* _KERN_POLICY_INTERNAL_H_ */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/queue.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/queue.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/queue.h	2015-08-27 01:55:20.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/queue.h	2016-06-03 22:55:08.000000000 +0200
@@ -136,7 +136,7 @@
  * 		[1] remqueue
  * 		[1] insque
  * 		[1] remque
- * 		[1] re_queue
+ * 		[1] re_queue_head
  * 		[1] re_queue_tail
  * 		[1] movqueue
  * 		[1] qe_element
@@ -492,6 +492,7 @@
 	     &((elt)->field) != (head); \
 	     elt = _nelt, _nelt = qe_element((elt)->field.next, typeof(*(elt)), field)) \
 
+
 /*
  *	Macro:		queue_init
  *	Function:
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/sched_prim.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/sched_prim.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/sched_prim.h	2015-08-27 01:55:20.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/sched_prim.h	2016-06-03 22:55:08.000000000 +0200
@@ -126,13 +126,6 @@
 							boolean_t			one_thread,
 							wait_result_t			result);
 
-extern kern_return_t    thread_wakeup_prim_internal(
-	                                                event_t				event,
-							boolean_t			one_thread,
-							wait_result_t			result,
-							int				priority);
-
-
 #define thread_wakeup(x)					\
 			thread_wakeup_prim((x), FALSE, THREAD_AWAKENED)
 #define thread_wakeup_with_result(x, z)		\
@@ -140,8 +133,10 @@
 #define thread_wakeup_one(x)				\
 			thread_wakeup_prim((x), TRUE, THREAD_AWAKENED)
 
+/* Wakeup the specified thread if it is waiting on this event */
+extern kern_return_t thread_wakeup_thread(event_t event, thread_t thread);
 
-extern boolean_t		preemption_enabled(void);
+extern boolean_t preemption_enabled(void);
 
 
 __END_DECLS
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/task.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/task.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/task.h	2015-08-27 01:55:20.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/task.h	2016-06-03 22:55:09.000000000 +0200
@@ -97,13 +97,14 @@
 
 
 
-
 __BEGIN_DECLS
 
 extern task_t	current_task(void);
 
 extern void		task_reference(task_t	task);
 
+#define TF_NONE                 0
+
 __END_DECLS
 
 
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/telemetry.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/telemetry.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/telemetry.h	2015-08-27 01:55:20.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/telemetry.h	2016-06-03 22:55:09.000000000 +0200
@@ -37,17 +37,14 @@
 __BEGIN_DECLS
 
 extern volatile boolean_t telemetry_needs_record;
-extern volatile boolean_t telemetry_window_enabled;
 
 extern void telemetry_init(void);
 
 extern void compute_telemetry(void *);
-extern void compute_telemetry_windowed(void);
 
-extern void telemetry_ast(thread_t, boolean_t interrupted_userspace, boolean_t is_windowed);
+extern void telemetry_ast(thread_t, boolean_t interrupted_userspace, boolean_t io_telemetry);
 
 extern int telemetry_gather(user_addr_t buffer, uint32_t *length, boolean_t mark);
-extern int telemetry_gather_windowed(user_addr_t buffer, uint32_t *length);
 
 extern void telemetry_mark_curthread(boolean_t interrupted_userspace);
 
@@ -55,9 +52,6 @@
 extern void telemetry_task_ctl_locked(task_t task, uint32_t reason, int enable_disable);
 extern void telemetry_global_ctl(int enable_disable);
 
-extern kern_return_t telemetry_enable_window(void);
-extern void telemetry_disable_window(void);
-
 extern int telemetry_timer_event(uint64_t deadline, uint64_t interval, uint64_t leeway);
 
 #define TELEMETRY_CMD_TIMER_EVENT 1
@@ -67,6 +61,7 @@
 
 extern void bootprofile_init(void);
 extern void bootprofile_wake_from_sleep(void);
+extern void bootprofile_get(void **buffer, uint32_t *length);
 extern int bootprofile_gather(user_addr_t buffer, uint32_t *length);
 
 __END_DECLS
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/thread.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/thread.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/thread.h	2015-08-27 01:55:20.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/thread.h	2016-06-03 22:55:09.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2000-2015 Apple Inc. All rights reserved.
+ * Copyright (c) 2000-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  * 
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/thread_call.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/thread_call.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/thread_call.h	2015-08-27 01:55:20.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/kern/thread_call.h	2016-06-03 22:55:09.000000000 +0200
@@ -64,10 +64,10 @@
  @constant THREAD_CALL_PRIORITY_LOW Very low importance.
  */
 typedef enum {
-	THREAD_CALL_PRIORITY_HIGH 	= 0,
-	THREAD_CALL_PRIORITY_KERNEL 	= 1,
-	THREAD_CALL_PRIORITY_USER 	= 2,
-	THREAD_CALL_PRIORITY_LOW 	= 3
+	THREAD_CALL_PRIORITY_HIGH   = 0,
+	THREAD_CALL_PRIORITY_KERNEL = 1,
+	THREAD_CALL_PRIORITY_USER   = 2,
+	THREAD_CALL_PRIORITY_LOW    = 3
 } thread_call_priority_t;
 
 __BEGIN_DECLS
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/kextd/kextd_mach.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/kextd/kextd_mach.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/kextd/kextd_mach.h	2015-08-27 01:55:26.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/kextd/kextd_mach.h	2016-06-03 22:55:08.000000000 +0200
@@ -12,6 +12,29 @@
 #include <mach/message.h>
 #include <mach/mig_errors.h>
 #include <mach/port.h>
+	
+/* BEGIN MIG_STRNCPY_ZEROFILL CODE */
+
+#if defined(__has_include)
+#if __has_include(<mach/mig_strncpy_zerofill_support.h>)
+#ifndef USING_MIG_STRNCPY_ZEROFILL
+#define USING_MIG_STRNCPY_ZEROFILL
+#endif
+#ifndef __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#define __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#ifdef __cplusplus
+extern "C" {
+#endif
+	extern int mig_strncpy_zerofill(char *dest, const char *src, int len) __attribute__((weak_import));
+#ifdef __cplusplus
+}
+#endif
+#endif /* __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__ */
+#endif /* __has_include(<mach/mig_strncpy_zerofill_support.h>) */
+#endif /* __has_include */
+	
+/* END MIG_STRNCPY_ZEROFILL CODE */
+
 #if	(__MigKernelSpecificCode) || (_MIG_KERNEL_SPECIFIC_CODE_)
 #include <kern/ipc_mig.h>
 #endif /* __MigKernelSpecificCode */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/OSAtomic.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/OSAtomic.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/OSAtomic.h	2015-08-27 01:55:15.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/OSAtomic.h	2016-06-03 22:55:08.000000000 +0200
@@ -336,7 +336,7 @@
  * @discussion
  * The OSBitAndAtomic16 function logically ands the bits of the specified mask into the value at the specified address and returns the original value.
  *
- * This function guarantees atomicity only with main system memory. It is specifically unsuitable for use on noncacheable memory such as that in devices; this function cannot guarantee atomicity, for example, on memory mapped from a PCI device. Additionally, this function incorporates a memory barrier on systems with weakly-ordered memory architectures.
+ * This function guarantees atomicity only with main system memory. It is specifically unsuitable for use on noncacheable memory such as that in devices; this function cannot guarantee atomicity, for example, on memory mapped from a PCI device.
  * @param mask The mask to logically and with the value.
  * @param address The 2-byte aligned address of the value to update atomically.
  * @result The value before the bitwise operation.
@@ -354,7 +354,7 @@
  * @discussion
  * The OSBitAndAtomic8 function logically ands the bits of the specified mask into the value at the specified address and returns the original value.
  *
- * This function guarantees atomicity only with main system memory. It is specifically unsuitable for use on noncacheable memory such as that in devices; this function cannot guarantee atomicity, for example, on memory mapped from a PCI device. Additionally, this function incorporates a memory barrier on systems with weakly-ordered memory architectures.
+ * This function guarantees atomicity only with main system memory. It is specifically unsuitable for use on noncacheable memory such as that in devices; this function cannot guarantee atomicity, for example, on memory mapped from a PCI device.
  * @param mask The mask to logically and with the value.
  * @param address The address of the value to update atomically.
  * @result The value before the bitwise operation.
@@ -372,7 +372,7 @@
  * @discussion
  * The OSBitOrAtomic function logically ors the bits of the specified mask into the value at the specified address and returns the original value.
  *
- * This function guarantees atomicity only with main system memory. It is specifically unsuitable for use on noncacheable memory such as that in devices; this function cannot guarantee atomicity, for example, on memory mapped from a PCI device. Additionally, this function incorporates a memory barrier on systems with weakly-ordered memory architectures.
+ * This function guarantees atomicity only with main system memory. It is specifically unsuitable for use on noncacheable memory such as that in devices; this function cannot guarantee atomicity, for example, on memory mapped from a PCI device.
  * @param mask The mask to logically or with the value.
  * @param address The 4-byte aligned address of the value to update atomically.
  * @result The value before the bitwise operation.
@@ -392,7 +392,7 @@
  * @discussion
  * The OSBitOrAtomic16 function logically ors the bits of the specified mask into the value at the specified address and returns the original value.
  *
- * This function guarantees atomicity only with main system memory. It is specifically unsuitable for use on noncacheable memory such as that in devices; this function cannot guarantee atomicity, for example, on memory mapped from a PCI device. Additionally, this function incorporates a memory barrier on systems with weakly-ordered memory architectures.
+ * This function guarantees atomicity only with main system memory. It is specifically unsuitable for use on noncacheable memory such as that in devices; this function cannot guarantee atomicity, for example, on memory mapped from a PCI device.
  * @param mask The mask to logically or with the value.
  * @param address The 2-byte aligned address of the value to update atomically.
  * @result The value before the bitwise operation.
@@ -407,7 +407,7 @@
  * @abstract
  * 8-bit logical or operation, performed atomically with respect to all devices that participate in the coherency architecture of the platform.
  *
- * This function guarantees atomicity only with main system memory. It is specifically unsuitable for use on noncacheable memory such as that in devices; this function cannot guarantee atomicity, for example, on memory mapped from a PCI device. Additionally, this function incorporates a memory barrier on systems with weakly-ordered memory architectures.
+ * This function guarantees atomicity only with main system memory. It is specifically unsuitable for use on noncacheable memory such as that in devices; this function cannot guarantee atomicity, for example, on memory mapped from a PCI device.
  *
  * @discussion
  * The OSBitOrAtomic8 function logically ors the bits of the specified mask into the value at the specified address and returns the original value.
@@ -425,7 +425,7 @@
  * @abstract
  * 32-bit logical xor operation, performed atomically with respect to all devices that participate in the coherency architecture of the platform.
  *
- * This function guarantees atomicity only with main system memory. It is specifically unsuitable for use on noncacheable memory such as that in devices; this function cannot guarantee atomicity, for example, on memory mapped from a PCI device. Additionally, this function incorporates a memory barrier on systems with weakly-ordered memory architectures.
+ * This function guarantees atomicity only with main system memory. It is specifically unsuitable for use on noncacheable memory such as that in devices; this function cannot guarantee atomicity, for example, on memory mapped from a PCI device.
  *
  * @discussion
  * The OSBitXorAtomic function logically xors the bits of the specified mask into the value at the specified address and returns the original value.
@@ -448,7 +448,7 @@
  * @discussion
  * The OSBitXorAtomic16 function logically xors the bits of the specified mask into the value at the specified address and returns the original value.
  *
- * This function guarantees atomicity only with main system memory. It is specifically unsuitable for use on noncacheable memory such as that in devices; this function cannot guarantee atomicity, for example, on memory mapped from a PCI device. Additionally, this function incorporates a memory barrier on systems with weakly-ordered memory architectures.
+ * This function guarantees atomicity only with main system memory. It is specifically unsuitable for use on noncacheable memory such as that in devices; this function cannot guarantee atomicity, for example, on memory mapped from a PCI device.
  * @param mask The mask to logically or with the value.
  * @param address The 2-byte aligned address of the value to update atomically.
  * @result The value before the bitwise operation.
@@ -463,7 +463,7 @@
  * @abstract
  * 8-bit logical xor operation, performed atomically with respect to all devices that participate in the coherency architecture of the platform.
  *
- * This function guarantees atomicity only with main system memory. It is specifically unsuitable for use on noncacheable memory such as that in devices; this function cannot guarantee atomicity, for example, on memory mapped from a PCI device. Additionally, this function incorporates a memory barrier on systems with weakly-ordered memory architectures.
+ * This function guarantees atomicity only with main system memory. It is specifically unsuitable for use on noncacheable memory such as that in devices; this function cannot guarantee atomicity, for example, on memory mapped from a PCI device.
  *
  * @discussion
  * The OSBitXorAtomic8 function logically xors the bits of the specified mask into the value at the specified address and returns the original value.
@@ -481,7 +481,7 @@
  * @abstract
  * Bit test and set operation, performed atomically with respect to all devices that participate in the coherency architecture of the platform.
  *
- * This function guarantees atomicity only with main system memory. It is specifically unsuitable for use on noncacheable memory such as that in devices; this function cannot guarantee atomicity, for example, on memory mapped from a PCI device. Additionally, this function incorporates a memory barrier on systems with weakly-ordered memory architectures.
+ * This function guarantees atomicity only with main system memory. It is specifically unsuitable for use on noncacheable memory such as that in devices; this function cannot guarantee atomicity, for example, on memory mapped from a PCI device.
  *
  * @discussion
  * The OSTestAndSet function sets a single bit in a byte at a specified address. It returns true if the bit was already set, false otherwise.
@@ -502,7 +502,7 @@
  * @discussion
  * The OSTestAndClear function clears a single bit in a byte at a specified address. It returns true if the bit was already clear, false otherwise.
  *
- * This function guarantees atomicity only with main system memory. It is specifically unsuitable for use on noncacheable memory such as that in devices; this function cannot guarantee atomicity, for example, on memory mapped from a PCI device. Additionally, this function incorporates a memory barrier on systems with weakly-ordered memory architectures.
+ * This function guarantees atomicity only with main system memory. It is specifically unsuitable for use on noncacheable memory such as that in devices; this function cannot guarantee atomicity, for example, on memory mapped from a PCI device.
  * @param bit The bit number in the range 0 through 7. Bit 0 is the most significant.
  * @param startAddress The address of the byte to update atomically.
  * @result true if the bit was already clear, false otherwise.
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/OSKextLib.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/OSKextLib.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/OSKextLib.h	2015-08-27 01:55:14.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/OSKextLib.h	2016-06-03 22:55:07.000000000 +0200
@@ -874,6 +874,32 @@
                   int wait_for_unload,
                   int metadata);
 
+/*!
+ * @function OSKextResetPgoCountersLock
+ *
+ * @abstract
+ * Call this function before trapping into the debugger to call OSKextResetPgoCounters.
+ */
+void
+OSKextResetPgoCountersLock();
+
+/*!
+ * @function OSKextResetPgoCountersUnlock
+ *
+ * @abstract
+ * Call this function after trapping into the debugger to call OSKextResetPgoCounters.
+ */
+void
+OSKextResetPgoCountersUnlock();
+
+/*!
+ * @function OSKextResetPgoCounters
+ *
+ * @abstract Reset the PGO counters for all kexts.  Call only from debugger
+ * context, while holding OSKextResetPgoCountersLock().
+ */
+void
+OSKextResetPgoCounters();
 
 
 #if PRAGMA_MARK
@@ -952,7 +978,7 @@
 // Kernel External Components for FIPS compliance (KEC_FIPS)
 // WARNING - ath_hash is owned by the kernel, do not free
 typedef struct AppleTEXTHash {
-    const int       ath_version;    // version of this structure (value is 1)
+    int       		ath_version;    // version of this structure (value is 1 or 2)
     int             ath_length;     // length of hash data
     void *          ath_hash;       // hash extracted from AppleTextHashes dict 
 } AppleTEXTHash_t;
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/OSMalloc.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/OSMalloc.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/OSMalloc.h	2015-08-27 01:55:15.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/OSMalloc.h	2016-06-03 22:55:08.000000000 +0200
@@ -236,6 +236,7 @@
     uint32_t    size,
     OSMallocTag tag); 
 
+
 __END_DECLS
 
 #endif	/* LIBKERN_OSMALLOC_h */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/c++/OSArray.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/c++/OSArray.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/c++/OSArray.h	2015-08-27 01:55:10.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/c++/OSArray.h	2016-06-03 22:54:59.000000000 +0200
@@ -92,6 +92,16 @@
 
     OSDeclareDefaultStructors(OSArray)
 
+#if APPLE_KEXT_ALIGN_CONTAINERS
+
+protected:
+    unsigned int             count;
+    unsigned int             capacity;
+    unsigned int             capacityIncrement;
+    const OSMetaClassBase ** array;
+
+#else /* APPLE_KEXT_ALIGN_CONTAINERS */
+
 protected:
     const OSMetaClassBase ** array;
     unsigned int             count;
@@ -99,10 +109,12 @@
     unsigned int             capacityIncrement;
 
     struct ExpansionData { };
-    
+
    /* Reserved for future use. (Internal use only) */
     ExpansionData          * reserved;
 
+#endif /* APPLE_KEXT_ALIGN_CONTAINERS */
+
    /* OSCollectionIterator interfaces. */
     virtual unsigned int iteratorSize() const APPLE_KEXT_OVERRIDE;
     virtual bool initIterator(void * iterator) const APPLE_KEXT_OVERRIDE;
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/c++/OSData.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/c++/OSData.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/c++/OSData.h	2015-08-27 01:55:11.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/c++/OSData.h	2016-06-03 22:55:00.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2000 Apple Computer, Inc. All rights reserved.
+ * Copyright (c) 2000-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  * 
@@ -73,15 +73,28 @@
  */
 class OSData : public OSObject
 {
-    OSDeclareDefaultStructors(OSData)
     friend class OSSerialize;
 
+    OSDeclareDefaultStructors(OSData)
+
+#if APPLE_KEXT_ALIGN_CONTAINERS
+
+protected:
+    unsigned int   length;
+    unsigned int   capacity;
+    unsigned int   capacityIncrement;
+    void         * data;
+
+#else /* APPLE_KEXT_ALIGN_CONTAINERS */
+
 protected:
     void         * data;
     unsigned int   length;
     unsigned int   capacity;
     unsigned int   capacityIncrement;
 
+#endif /* APPLE_KEXT_ALIGN_CONTAINERS */
+
 private:
     typedef void (*DeallocFunction)(void * ptr, unsigned int length);
 protected:
@@ -152,7 +165,7 @@
     * @result
     * A instance of OSData that shares the provided byte array,
     * with a reference count of 1;
-    * <code>NULL</coe> on failure.
+    * <code>NULL</code> on failure.
     *
     * @discussion
     * An OSData object created with this function
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/c++/OSDictionary.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/c++/OSDictionary.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/c++/OSDictionary.h	2015-08-27 01:55:11.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/c++/OSDictionary.h	2016-06-03 22:55:00.000000000 +0200
@@ -112,9 +112,24 @@
  */
 class OSDictionary : public OSCollection
 {
-    OSDeclareDefaultStructors(OSDictionary)
     friend class OSSerialize;
 
+    OSDeclareDefaultStructors(OSDictionary)
+
+#if APPLE_KEXT_ALIGN_CONTAINERS
+
+protected:
+    unsigned int   count;
+    unsigned int   capacity;
+    unsigned int   capacityIncrement;
+    struct dictEntry {
+        const OSSymbol        * key;
+        const OSMetaClassBase * value;
+    };
+    dictEntry    * dictionary;
+
+#else /* APPLE_KEXT_ALIGN_CONTAINERS */
+
 protected:
     struct dictEntry {
         const OSSymbol        * key;
@@ -130,6 +145,8 @@
    /* Reserved for future use.  (Internal use only)  */
     ExpansionData * reserved;
 
+#endif /* APPLE_KEXT_ALIGN_CONTAINERS */
+
     // Member functions used by the OSCollectionIterator class.
     virtual unsigned int iteratorSize() const APPLE_KEXT_OVERRIDE;
     virtual bool initIterator(void * iterator) const APPLE_KEXT_OVERRIDE;
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/c++/OSKext.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/c++/OSKext.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/c++/OSKext.h	2015-08-27 01:55:11.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/c++/OSKext.h	2016-06-03 22:55:00.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2008-2012 Apple Inc. All rights reserved.
+ * Copyright (c) 2008-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  * 
@@ -351,6 +351,9 @@
     static  OSDictionary * copyLoadedKextInfo(
         OSArray * kextIdentifiers = NULL,
         OSArray * keys = NULL);
+    static  OSDictionary * copyLoadedKextInfoByUUID(
+        OSArray * kextIdentifiers = NULL,
+        OSArray * keys = NULL);
     virtual OSDictionary * copyInfo(OSArray * keys = NULL);
 
    /* Logging to user space.
@@ -402,6 +405,8 @@
         int          (* printf_func)(const char *fmt, ...),
         bool            lockFlag,
         bool            doUnslide);
+    static void * kextForAddress(
+        const void		  * addr);
     static boolean_t summaryIsInBacktrace(
         OSKextLoadedKextSummary * summary,
         vm_offset_t             * addr,
@@ -425,7 +430,7 @@
     */
     static void updateLoadedKextSummaries(void);
     void updateLoadedKextSummary(OSKextLoadedKextSummary *summary);
-    void updateActiveAccount(OSKextActiveAccount *account);
+    void updateActiveAccount(OSKextActiveAccount *accountp);
 
     /* C++ Initialization.
      */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/c++/OSMetaClass.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/c++/OSMetaClass.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/c++/OSMetaClass.h	2015-08-27 01:55:11.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/c++/OSMetaClass.h	2016-06-03 22:55:01.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2000 Apple Inc. All rights reserved.
+ * Copyright (c) 2000-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  * 
@@ -64,6 +64,8 @@
 #endif /* TARGET_OS_EMBEDDED */
 
 
+#define APPLE_KEXT_ALIGN_CONTAINERS     (0 == APPLE_KEXT_VTABLE_PADDING)
+
 #if defined(__LP64__)
 /*! @parseOnly */
 #define APPLE_KEXT_LEGACY_ABI  0
@@ -285,11 +287,9 @@
 #define OSCheckTypeInst(typeinst, inst) \
     OSMetaClassBase::checkTypeInst(inst, typeinst)
 
-/*! @function OSSafeRelease
- *  @abstract Release an object if not <code>NULL</code>.
- *  @param    inst  Instance of an OSObject, may be <code>NULL</code>.
- */
-#define OSSafeRelease(inst)       do { if (inst) (inst)->release(); } while (0)
+#define OSSafeRelease(inst) \
+  do { int OSSafeRelease __attribute__ ((deprecated("Use OSSafeReleaseNULL"))); (OSSafeRelease); \
+	if (inst) (inst)->release(); } while (0)
 
 /*! @function OSSafeReleaseNULL
  *  @abstract Release an object if not <code>NULL</code>, then set it to <code>NULL</code>.
@@ -779,9 +779,7 @@
  * OSMetaClass manages run-time type information
  * for Libkern and I/O Kit C++ classes.
  *
- * @discussion
- *
- * OSMetaClass manages run-time type information
+ * @discussion OSMetaClass manages run-time type information
  * for Libkern and I/O Kit C++ classes.
  * An instance of OSMetaClass exists for (nearly) every such C++ class,
  * keeping track of inheritance relationships, class lookup by name,
@@ -1097,7 +1095,7 @@
 
     // Needs to be overriden as NULL as all OSMetaClass objects are allocated
     // statically at compile time, don't accidently try to free them.
-    void operator delete(void *, size_t) { };
+    void operator delete(void *, size_t) { }
 
 public:
     static const OSMetaClass * const metaClass;
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/c++/OSNumber.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/c++/OSNumber.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/c++/OSNumber.h	2015-08-27 01:55:11.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/c++/OSNumber.h	2016-06-03 22:55:01.000000000 +0200
@@ -70,9 +70,18 @@
  */
 class OSNumber : public OSObject
 {
-    OSDeclareDefaultStructors(OSNumber)
     friend class OSSerialize;
 
+    OSDeclareDefaultStructors(OSNumber)
+
+#if APPLE_KEXT_ALIGN_CONTAINERS
+
+protected:
+    unsigned int size;
+    unsigned long long value;
+
+#else /* APPLE_KEXT_ALIGN_CONTAINERS */
+
 protected:
     unsigned long long value;
     unsigned int size;
@@ -82,8 +91,9 @@
     /* Reserved for future use.  (Internal use only)  */
     ExpansionData * reserved;
 
-public:
+#endif /* APPLE_KEXT_ALIGN_CONTAINERS */
 
+public:
 
    /*!
     * @function withNumber
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/c++/OSObject.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/c++/OSObject.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/c++/OSObject.h	2015-08-27 01:55:11.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/c++/OSObject.h	2016-06-03 22:55:01.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2000 Apple Computer, Inc. All rights reserved.
+ * Copyright (c) 2000-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  * 
@@ -265,7 +265,7 @@
     * to deallocate or release all dynamic resources held by the instance,
     * then call the superclass's implementation.  
     *
-    * <b>Caution:<b>
+    * <b>Caution:</b>
     * <ol>
     * <li>You can not assume that you have completed initialization
     *     before <code>free</code> is called,
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/c++/OSOrderedSet.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/c++/OSOrderedSet.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/c++/OSOrderedSet.h	2015-08-27 01:55:11.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/c++/OSOrderedSet.h	2016-06-03 22:55:01.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2000 Apple Computer, Inc. All rights reserved.
+ * Copyright (c) 2000-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  * 
@@ -62,7 +62,7 @@
  * <li>Add and remove objects in the set</li>
  * <li>Test whether the set contains a particular object</li>
  * <li>Get the object stored at a particular index.</li>
- * </ol>
+ * </ul>
  *
  * Note that automated ordering is performed only upon addition of objects
  * and depends on the existing objects being properly sorted.
@@ -539,9 +539,6 @@
     * @function getFirstObject
     *
     * @abstract
-    * Returns the object at index 0 in the ordered set if there is one.
-    *
-    * @abstract
     * The object at index 0 in the ordered set if there is one,
     * otherwise <code>NULL</code>.
     *
@@ -560,9 +557,6 @@
     * @function getLastObject
     *
     * @abstract
-    * Returns the last object in the ordered set if there is one.
-    *
-    * @abstract
     * The last object in the ordered set if there is one,
     * otherwise <code>NULL</code>.
     *
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/c++/OSSerialize.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/c++/OSSerialize.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/c++/OSSerialize.h	2015-08-27 01:55:12.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/c++/OSSerialize.h	2016-06-03 22:55:01.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2000 Apple Computer, Inc. All rights reserved.
+ * Copyright (c) 2000-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  * 
@@ -35,6 +35,7 @@
 class OSCollection;
 class OSSet;
 class OSDictionary;
+class OSArray;
 
 /*!
  * @header
@@ -43,6 +44,8 @@
  * This header declares the OSSerialize class.
  */
  
+OSObject *
+OSUnserializeBinary(const void *buffer, size_t bufferSize);
  
 /*!
  * @class OSSerialize
@@ -78,31 +81,21 @@
  * for serializing properties.
  */
  
-OSObject *
-OSUnserializeBinary(const void *buffer, size_t bufferSize);
-
 class OSSerialize : public OSObject
 {
     OSDeclareDefaultStructors(OSSerialize)
     friend class OSBoolean;
 
-protected:
+private:
     char         * data;               // container for serialized data
     unsigned int   length;             // of serialized data (counting NULL)
     unsigned int   capacity;           // of container
     unsigned int   capacityIncrement;  // of container
 
-    unsigned int   tag;
-    OSDictionary * tags;               // tags for all objects seen
-
-    struct ExpansionData { };
-    
-    /* Reserved for future use. (Internal use only)  */
-    ExpansionData *reserved;
+    OSArray * tags;               	   // tags for all objects seen
 
     typedef void * Editor;
 
-private:
     bool   binary;
     bool   endCollection;
     Editor editor;
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/c++/OSSet.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/c++/OSSet.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/c++/OSSet.h	2015-08-27 01:55:12.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/c++/OSSet.h	2016-06-03 22:55:01.000000000 +0200
@@ -84,13 +84,28 @@
  */
 class OSSet : public OSCollection
 {
-    OSDeclareDefaultStructors(OSSet)
     friend class OSSerialize;
 
+    OSDeclareDefaultStructors(OSSet)
+
+#if APPLE_KEXT_ALIGN_CONTAINERS
+
+private:
+    OSArray * members;
+
+#else /* APPLE_KEXT_ALIGN_CONTAINERS */
+
 private:
     OSArray * members;
 
 protected:
+    struct ExpansionData { };
+
+    /* Reserved for future use.  (Internal use only)  */
+    ExpansionData * reserved;
+
+#endif /* APPLE_KEXT_ALIGN_CONTAINERS */
+
     /*
      * OSCollectionIterator interfaces.
      */
@@ -98,11 +113,6 @@
     virtual bool initIterator(void * iterator) const APPLE_KEXT_OVERRIDE;
     virtual bool getNextObjectForIterator(void * iterator, OSObject ** ret) const APPLE_KEXT_OVERRIDE;
 
-    struct ExpansionData { };
-    
-    /* Reserved for future use.  (Internal use only)  */
-    ExpansionData * reserved;
-
 public:
 
 
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/c++/OSString.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/c++/OSString.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/c++/OSString.h	2015-08-27 01:55:12.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/c++/OSString.h	2016-06-03 22:55:01.000000000 +0200
@@ -102,15 +102,29 @@
  */
 class OSString : public OSObject
 {
+
     OSDeclareDefaultStructors(OSString)
 
+    enum { kMaxStringLength  = 262142 };
+
+#if APPLE_KEXT_ALIGN_CONTAINERS
+
+protected:
+
+    unsigned int   flags:14,
+                   length:18;
+    char         * string;
+
+#else /* APPLE_KEXT_ALIGN_CONTAINERS */
+
 protected:
+    char         * string;
     unsigned int   flags;
     unsigned int   length;
-    char         * string;
 
-public:
+#endif /* APPLE_KEXT_ALIGN_CONTAINERS */
 
+public:
 
    /*!
     * @function withString
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/c++/OSSymbol.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/c++/OSSymbol.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/c++/OSSymbol.h	2015-08-27 01:55:12.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/c++/OSSymbol.h	2016-06-03 22:55:01.000000000 +0200
@@ -85,18 +85,9 @@
     OSDeclareAbstractStructors(OSSymbol)
 
 private:
-    struct ExpansionData { };
-    
-    /* Reserved for future use. (Internal use only)  */
-    ExpansionData * reserved;
 
     static void initialize();
 
-    // xx-review: not in xnu, delete?
-    friend void checkModuleForSymbols(void); /* in catalogue? */
-
-    // xx-review: these should be removed from the symbol set.
-
    /*!
     * @function initWithString
     *
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/c++/OSUnserialize.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/c++/OSUnserialize.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/c++/OSUnserialize.h	2015-08-27 01:55:12.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/c++/OSUnserialize.h	2016-06-03 22:55:02.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2000-2012 Apple Computer, Inc. All rights reserved.
+ * Copyright (c) 2000-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  * 
@@ -53,7 +53,7 @@
  *
  * @param buffer      A buffer containing nul-terminated XML data
  *                    representing the object to be recreated.
- * @param errorString If non-</code>NULL</code>, and the XML parser
+ * @param errorString If non-<code>NULL</code>, and the XML parser
  *                    finds an error in <code>buffer</code>,
  *                    <code>*errorString</code> indicates the line number
  *                    and type of error encountered.
@@ -79,7 +79,7 @@
  *                    representing the object to be recreated.
  * @param bufferSize  The size of the block of memory. The function
  *                    never scans beyond the first bufferSize bytes.
- * @param errorString If non-</code>NULL</code>, and the XML parser
+ * @param errorString If non-<code>NULL</code>, and the XML parser
  *                    finds an error in <code>buffer</code>,
  *                    <code>*errorString</code> indicates the line number
  *                    and type of error encountered.
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/libkern.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/libkern.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/libkern.h	2015-08-27 01:55:13.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/libkern.h	2016-06-03 22:54:58.000000000 +0200
@@ -73,6 +73,7 @@
 #include <stdint.h>
 #include <stdarg.h>	/* for platform-specific va_list */
 #include <string.h>
+#include <machine/limits.h>
 #include <sys/cdefs.h>
 #include <sys/types.h>
 #include <mach/vm_param.h>
@@ -161,6 +162,7 @@
 #define printf(x, ...)  do {} while (0)
 #endif
 
+uint16_t	crc16(uint16_t crc, const void *bufp, size_t len);
 uint32_t	crc32(uint32_t crc, const void *bufp, size_t len);
 
 int	copystr(const void *kfaddr, void *kdaddr, size_t len, size_t *done);
@@ -174,6 +176,7 @@
 extern int	vprintf(const char *, va_list);
 extern int	vsnprintf(char *, size_t, const char *, va_list);
 
+
 /* vsprintf() is being deprecated. Please use vsnprintf() instead. */
 extern int	vsprintf(char *bufp, const char *, va_list) __deprecated;
 
@@ -183,18 +186,13 @@
 extern void flush_dcache64(addr64_t, unsigned, int);
 
 
-/*
- * assembly versions of clz... ideally we would just call
- * __builtin_clz(num), unfortunately this one is ill defined
- * by gcc for num=0
- */
-static __inline__ unsigned int
+static inline int
 clz(unsigned int num)
 {
-	return num?__builtin_clz(num):__builtin_clz(0);
+	// On Intel, clz(0) is undefined
+	return num ? __builtin_clz(num) : sizeof(num) * CHAR_BIT;
 }
 
-
 __END_DECLS
 
 #endif /* _LIBKERN_LIBKERN_H_ */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/version.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/version.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/version.h	2016-02-27 07:06:52.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/libkern/version.h	2016-06-03 22:55:09.000000000 +0200
@@ -30,12 +30,12 @@
 /* VERSION_MAJOR, version_major is an integer that represents that major version
  * of the kernel
  */
-#define VERSION_MAJOR		15
+#define VERSION_MAJOR		16
 
 /* VERSION_MINOR, version_minor is an integer that represents the minor version
  * of the kernel
  */
-#define VERSION_MINOR		4
+#define VERSION_MINOR		0
 
 /* VERSION_VARIANT, version_variant is a string that contains the revision,
  * stage, and prerelease level of the kernel
@@ -63,7 +63,7 @@
 #define	OSTYPE		"Darwin"
 
 /* OSRELEASE, osrelease, is a string as returned by uname -r */
-#define OSRELEASE	"15.4.0"
+#define OSRELEASE	"16.0.0"
 
 #ifndef ASSEMBLER
 
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/lockd/lockd_mach.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/lockd/lockd_mach.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/lockd/lockd_mach.h	2015-08-27 01:55:26.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/lockd/lockd_mach.h	2016-06-03 22:55:09.000000000 +0200
@@ -12,6 +12,29 @@
 #include <mach/message.h>
 #include <mach/mig_errors.h>
 #include <mach/port.h>
+	
+/* BEGIN MIG_STRNCPY_ZEROFILL CODE */
+
+#if defined(__has_include)
+#if __has_include(<mach/mig_strncpy_zerofill_support.h>)
+#ifndef USING_MIG_STRNCPY_ZEROFILL
+#define USING_MIG_STRNCPY_ZEROFILL
+#endif
+#ifndef __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#define __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#ifdef __cplusplus
+extern "C" {
+#endif
+	extern int mig_strncpy_zerofill(char *dest, const char *src, int len) __attribute__((weak_import));
+#ifdef __cplusplus
+}
+#endif
+#endif /* __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__ */
+#endif /* __has_include(<mach/mig_strncpy_zerofill_support.h>) */
+#endif /* __has_include */
+	
+/* END MIG_STRNCPY_ZEROFILL CODE */
+
 #if	(__MigKernelSpecificCode) || (_MIG_KERNEL_SPECIFIC_CODE_)
 #include <kern/ipc_mig.h>
 #endif /* __MigKernelSpecificCode */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/audit_triggers_server.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/audit_triggers_server.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/audit_triggers_server.h	2015-08-27 01:55:29.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/audit_triggers_server.h	2016-06-03 22:55:27.000000000 +0200
@@ -12,6 +12,29 @@
 #include <mach/message.h>
 #include <mach/mig_errors.h>
 #include <mach/port.h>
+	
+/* BEGIN MIG_STRNCPY_ZEROFILL CODE */
+
+#if defined(__has_include)
+#if __has_include(<mach/mig_strncpy_zerofill_support.h>)
+#ifndef USING_MIG_STRNCPY_ZEROFILL
+#define USING_MIG_STRNCPY_ZEROFILL
+#endif
+#ifndef __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#define __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#ifdef __cplusplus
+extern "C" {
+#endif
+	extern int mig_strncpy_zerofill(char *dest, const char *src, int len) __attribute__((weak_import));
+#ifdef __cplusplus
+}
+#endif
+#endif /* __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__ */
+#endif /* __has_include(<mach/mig_strncpy_zerofill_support.h>) */
+#endif /* __has_include */
+	
+/* END MIG_STRNCPY_ZEROFILL CODE */
+
 
 #ifdef AUTOTEST
 #ifndef FUNCTION_PTR_T
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/clock.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/clock.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/clock.h	2015-08-27 01:55:27.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/clock.h	2016-05-26 06:17:10.000000000 +0200
@@ -12,6 +12,29 @@
 #include <mach/message.h>
 #include <mach/mig_errors.h>
 #include <mach/port.h>
+	
+/* BEGIN MIG_STRNCPY_ZEROFILL CODE */
+
+#if defined(__has_include)
+#if __has_include(<mach/mig_strncpy_zerofill_support.h>)
+#ifndef USING_MIG_STRNCPY_ZEROFILL
+#define USING_MIG_STRNCPY_ZEROFILL
+#endif
+#ifndef __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#define __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#ifdef __cplusplus
+extern "C" {
+#endif
+	extern int mig_strncpy_zerofill(char *dest, const char *src, int len) __attribute__((weak_import));
+#ifdef __cplusplus
+}
+#endif
+#endif /* __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__ */
+#endif /* __has_include(<mach/mig_strncpy_zerofill_support.h>) */
+#endif /* __has_include */
+	
+/* END MIG_STRNCPY_ZEROFILL CODE */
+
 
 #ifdef AUTOTEST
 #ifndef FUNCTION_PTR_T
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/clock_priv.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/clock_priv.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/clock_priv.h	2015-08-27 01:55:27.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/clock_priv.h	2016-06-03 22:55:25.000000000 +0200
@@ -12,6 +12,29 @@
 #include <mach/message.h>
 #include <mach/mig_errors.h>
 #include <mach/port.h>
+	
+/* BEGIN MIG_STRNCPY_ZEROFILL CODE */
+
+#if defined(__has_include)
+#if __has_include(<mach/mig_strncpy_zerofill_support.h>)
+#ifndef USING_MIG_STRNCPY_ZEROFILL
+#define USING_MIG_STRNCPY_ZEROFILL
+#endif
+#ifndef __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#define __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#ifdef __cplusplus
+extern "C" {
+#endif
+	extern int mig_strncpy_zerofill(char *dest, const char *src, int len) __attribute__((weak_import));
+#ifdef __cplusplus
+}
+#endif
+#endif /* __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__ */
+#endif /* __has_include(<mach/mig_strncpy_zerofill_support.h>) */
+#endif /* __has_include */
+	
+/* END MIG_STRNCPY_ZEROFILL CODE */
+
 
 #ifdef AUTOTEST
 #ifndef FUNCTION_PTR_T
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/clock_reply_server.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/clock_reply_server.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/clock_reply_server.h	2015-08-27 01:55:29.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/clock_reply_server.h	2016-06-03 22:55:27.000000000 +0200
@@ -12,6 +12,29 @@
 #include <mach/message.h>
 #include <mach/mig_errors.h>
 #include <mach/port.h>
+	
+/* BEGIN MIG_STRNCPY_ZEROFILL CODE */
+
+#if defined(__has_include)
+#if __has_include(<mach/mig_strncpy_zerofill_support.h>)
+#ifndef USING_MIG_STRNCPY_ZEROFILL
+#define USING_MIG_STRNCPY_ZEROFILL
+#endif
+#ifndef __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#define __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#ifdef __cplusplus
+extern "C" {
+#endif
+	extern int mig_strncpy_zerofill(char *dest, const char *src, int len) __attribute__((weak_import));
+#ifdef __cplusplus
+}
+#endif
+#endif /* __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__ */
+#endif /* __has_include(<mach/mig_strncpy_zerofill_support.h>) */
+#endif /* __has_include */
+	
+/* END MIG_STRNCPY_ZEROFILL CODE */
+
 
 #ifdef AUTOTEST
 #ifndef FUNCTION_PTR_T
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/coalition_notification_server.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/coalition_notification_server.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/coalition_notification_server.h	2015-08-27 01:55:29.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/coalition_notification_server.h	2016-06-03 22:55:27.000000000 +0200
@@ -12,6 +12,29 @@
 #include <mach/message.h>
 #include <mach/mig_errors.h>
 #include <mach/port.h>
+	
+/* BEGIN MIG_STRNCPY_ZEROFILL CODE */
+
+#if defined(__has_include)
+#if __has_include(<mach/mig_strncpy_zerofill_support.h>)
+#ifndef USING_MIG_STRNCPY_ZEROFILL
+#define USING_MIG_STRNCPY_ZEROFILL
+#endif
+#ifndef __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#define __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#ifdef __cplusplus
+extern "C" {
+#endif
+	extern int mig_strncpy_zerofill(char *dest, const char *src, int len) __attribute__((weak_import));
+#ifdef __cplusplus
+}
+#endif
+#endif /* __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__ */
+#endif /* __has_include(<mach/mig_strncpy_zerofill_support.h>) */
+#endif /* __has_include */
+	
+/* END MIG_STRNCPY_ZEROFILL CODE */
+
 
 #ifdef AUTOTEST
 #ifndef FUNCTION_PTR_T
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/dyld_kernel.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/dyld_kernel.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/dyld_kernel.h	1970-01-01 01:00:00.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/dyld_kernel.h	2016-06-03 22:55:18.000000000 +0200
@@ -0,0 +1,65 @@
+/*
+ * Copyright (c) 2016 Apple Computer, Inc. All rights reserved.
+ *
+ * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
+ *
+ * This file contains Original Code and/or Modifications of Original Code
+ * as defined in and that are subject to the Apple Public Source License
+ * Version 2.0 (the 'License'). You may not use this file except in
+ * compliance with the License. The rights granted to you under the License
+ * may not be used to create, or enable the creation or redistribution of,
+ * unlawful or unlicensed copies of an Apple operating system, or to
+ * circumvent, violate, or enable the circumvention or violation of, any
+ * terms of an Apple operating system software license agreement.
+ *
+ * Please obtain a copy of the License at
+ * http://www.opensource.apple.com/apsl/ and read it before using this file.
+ *
+ * The Original Code and all software distributed under the License are
+ * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
+ * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
+ * INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
+ * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
+ * Please see the License for the specific language governing rights and
+ * limitations under the License.
+ *
+ * @APPLE_OSREFERENCE_LICENSE_HEADER_END@
+ */
+
+#ifndef _MACH_DYLIB_INFO_H_
+#define _MACH_DYLIB_INFO_H_
+
+#include <sys/_types.h>
+#include <sys/_types/_fsid_t.h>
+#include <sys/_types/_u_int32_t.h>
+#include <sys/_types/_fsobj_id_t.h>
+#include <sys/_types/_uuid_t.h>
+
+/* These definitions must be kept in sync with the ones in
+ * osfmk/mach/mach_types.defs.
+ */
+
+struct dyld_kernel_image_info {
+	uuid_t uuid;
+	fsobj_id_t fsobjid;
+	fsid_t fsid;
+	uint64_t load_addr;
+};
+
+struct dyld_kernel_process_info {
+	struct dyld_kernel_image_info cache_image_info;
+	uint64_t timestamp;         // mach_absolute_time of last time dyld change to image list
+	uint32_t imageCount;        // number of images currently loaded into process
+	uint32_t initialImageCount; // number of images statically loaded into process (before any dlopen() calls)
+	uint8_t dyldState;          // one of dyld_process_state_* values
+	boolean_t no_cache;         // process is running without a dyld cache
+	boolean_t private_cache;    // process is using a private copy of its dyld cache
+};
+
+/* typedefs so our MIG is sane */
+
+typedef struct dyld_kernel_image_info dyld_kernel_image_info_t;
+typedef struct dyld_kernel_process_info dyld_kernel_process_info_t;
+typedef dyld_kernel_image_info_t *dyld_kernel_image_info_array_t;
+
+#endif /* _MACH_DYLIB_INFO_H_ */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/exc_server.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/exc_server.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/exc_server.h	2015-08-27 01:55:29.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/exc_server.h	2016-06-03 22:55:27.000000000 +0200
@@ -12,6 +12,29 @@
 #include <mach/message.h>
 #include <mach/mig_errors.h>
 #include <mach/port.h>
+	
+/* BEGIN MIG_STRNCPY_ZEROFILL CODE */
+
+#if defined(__has_include)
+#if __has_include(<mach/mig_strncpy_zerofill_support.h>)
+#ifndef USING_MIG_STRNCPY_ZEROFILL
+#define USING_MIG_STRNCPY_ZEROFILL
+#endif
+#ifndef __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#define __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#ifdef __cplusplus
+extern "C" {
+#endif
+	extern int mig_strncpy_zerofill(char *dest, const char *src, int len) __attribute__((weak_import));
+#ifdef __cplusplus
+}
+#endif
+#endif /* __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__ */
+#endif /* __has_include(<mach/mig_strncpy_zerofill_support.h>) */
+#endif /* __has_include */
+	
+/* END MIG_STRNCPY_ZEROFILL CODE */
+
 
 #ifdef AUTOTEST
 #ifndef FUNCTION_PTR_T
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/host_info.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/host_info.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/host_info.h	2015-08-27 01:55:22.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/host_info.h	2016-06-03 22:55:18.000000000 +0200
@@ -99,8 +99,17 @@
 #define HOST_MACH_MSG_TRAP	8	/* Has mach_msg_trap */
 #define HOST_VM_PURGABLE	9	/* purg'e'able memory info */
 #define HOST_DEBUG_INFO_INTERNAL 10	/* Used for kernel internal development tests only */
+#define HOST_CAN_HAS_DEBUGGER	11 
 
 
+struct host_can_has_debugger_info {
+	boolean_t	can_has_debugger;
+};
+typedef	struct host_can_has_debugger_info	host_can_has_debugger_info_data_t;
+typedef struct host_can_has_debugger_info	*host_can_has_debugger_info_t;
+#define HOST_CAN_HAS_DEBUGGER_COUNT ((mach_msg_type_number_t) \
+		(sizeof(host_can_has_debugger_info_data_t)/sizeof(integer_t)))
+
 #pragma pack(4)
 
 struct host_basic_info {
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/host_notify.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/host_notify.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/host_notify.h	2015-08-27 01:55:22.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/host_notify.h	2016-06-03 22:55:18.000000000 +0200
@@ -30,8 +30,10 @@
 #define	_MACH_HOST_NOTIFY_H_
 
 #define HOST_NOTIFY_CALENDAR_CHANGE		0
-#define HOST_NOTIFY_TYPE_MAX			0
+#define HOST_NOTIFY_CALENDAR_SET		1
+#define HOST_NOTIFY_TYPE_MAX			1
 
 #define HOST_CALENDAR_CHANGED_REPLYID	950
+#define HOST_CALENDAR_SET_REPLYID		951
 
 #endif /* _MACH_HOST_NOTIFY_H_ */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/host_notify_reply.defs /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/host_notify_reply.defs
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/host_notify_reply.defs	2015-08-27 01:55:26.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/host_notify_reply.defs	2016-06-03 22:55:23.000000000 +0200
@@ -37,4 +37,7 @@
 simpleroutine host_calendar_changed(
 		notify_port	: mach_port_move_send_once_t);
 
+simpleroutine host_calendar_set(
+		notify_port	: mach_port_move_send_once_t);
+
 /* vim: set ft=c : */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/host_priv.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/host_priv.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/host_priv.h	2015-08-27 01:55:27.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/host_priv.h	2016-05-26 06:17:04.000000000 +0200
@@ -12,6 +12,29 @@
 #include <mach/message.h>
 #include <mach/mig_errors.h>
 #include <mach/port.h>
+	
+/* BEGIN MIG_STRNCPY_ZEROFILL CODE */
+
+#if defined(__has_include)
+#if __has_include(<mach/mig_strncpy_zerofill_support.h>)
+#ifndef USING_MIG_STRNCPY_ZEROFILL
+#define USING_MIG_STRNCPY_ZEROFILL
+#endif
+#ifndef __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#define __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#ifdef __cplusplus
+extern "C" {
+#endif
+	extern int mig_strncpy_zerofill(char *dest, const char *src, int len) __attribute__((weak_import));
+#ifdef __cplusplus
+}
+#endif
+#endif /* __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__ */
+#endif /* __has_include(<mach/mig_strncpy_zerofill_support.h>) */
+#endif /* __has_include */
+	
+/* END MIG_STRNCPY_ZEROFILL CODE */
+
 
 #ifdef AUTOTEST
 #ifndef FUNCTION_PTR_T
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/host_security.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/host_security.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/host_security.h	2015-08-27 01:55:28.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/host_security.h	2016-05-28 05:52:57.000000000 +0200
@@ -12,6 +12,29 @@
 #include <mach/message.h>
 #include <mach/mig_errors.h>
 #include <mach/port.h>
+	
+/* BEGIN MIG_STRNCPY_ZEROFILL CODE */
+
+#if defined(__has_include)
+#if __has_include(<mach/mig_strncpy_zerofill_support.h>)
+#ifndef USING_MIG_STRNCPY_ZEROFILL
+#define USING_MIG_STRNCPY_ZEROFILL
+#endif
+#ifndef __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#define __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#ifdef __cplusplus
+extern "C" {
+#endif
+	extern int mig_strncpy_zerofill(char *dest, const char *src, int len) __attribute__((weak_import));
+#ifdef __cplusplus
+}
+#endif
+#endif /* __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__ */
+#endif /* __has_include(<mach/mig_strncpy_zerofill_support.h>) */
+#endif /* __has_include */
+	
+/* END MIG_STRNCPY_ZEROFILL CODE */
+
 
 #ifdef AUTOTEST
 #ifndef FUNCTION_PTR_T
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/host_special_ports.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/host_special_ports.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/host_special_ports.h	2015-08-27 01:55:22.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/host_special_ports.h	2016-06-03 22:55:19.000000000 +0200
@@ -85,6 +85,7 @@
 #define HOST_USER_NOTIFICATION_PORT     (3 + HOST_MAX_SPECIAL_KERNEL_PORT)
 #define HOST_AUTOMOUNTD_PORT            (4 + HOST_MAX_SPECIAL_KERNEL_PORT)
 #define HOST_LOCKD_PORT                 (5 + HOST_MAX_SPECIAL_KERNEL_PORT)
+#define HOST_KTRACE_BACKGROUND_PORT     (6 + HOST_MAX_SPECIAL_KERNEL_PORT)
 #define HOST_SEATBELT_PORT              (7 + HOST_MAX_SPECIAL_KERNEL_PORT)
 #define HOST_KEXTD_PORT                 (8 + HOST_MAX_SPECIAL_KERNEL_PORT)
 #define HOST_CHUD_PORT                  (9 + HOST_MAX_SPECIAL_KERNEL_PORT)
@@ -97,8 +98,11 @@
 #define HOST_SYSDIAGNOSE_PORT           (16 + HOST_MAX_SPECIAL_KERNEL_PORT)
 #define HOST_XPC_EXCEPTION_PORT		(17 + HOST_MAX_SPECIAL_KERNEL_PORT)
 #define HOST_CONTAINERD_PORT		(18 + HOST_MAX_SPECIAL_KERNEL_PORT)
-#define HOST_MAX_SPECIAL_PORT		HOST_CONTAINERD_PORT
-                                        /* See rdar://19421223 */
+#define HOST_NODE_PORT			(19 + HOST_MAX_SPECIAL_KERNEL_PORT)
+#define HOST_RESOURCE_NOTIFY_PORT	(20 + HOST_MAX_SPECIAL_KERNEL_PORT)
+
+#define HOST_MAX_SPECIAL_PORT		HOST_RESOURCE_NOTIFY_PORT
+                                        /* MAX = last since rdar://19421223 */
 
 /*
  * Special node identifier to always represent the local node.
@@ -160,6 +164,12 @@
 #define host_set_lockd_port(host, port)	\
 	(host_set_special_port((host), HOST_LOCKD_PORT, (port)))
 
+#define host_get_ktrace_background_port(host, port)	\
+	(host_get_special_port((host),			\
+	HOST_LOCAL_NODE, HOST_KTRACE_BACKGROUND_PORT, (port)))
+#define host_set_ktrace_background_port(host, port)	\
+	(host_set_special_port((host), HOST_KTRACE_BACKGROUND_PORT, (port)))
+
 #define host_get_kextd_port(host, port)	\
 	(host_get_special_port((host), 			\
 	HOST_LOCAL_NODE, HOST_KEXTD_PORT, (port)))
@@ -220,4 +230,14 @@
 #define host_set_container_port(host, port)	\
 	(host_set_special_port((host), HOST_CONTAINERD_PORT, (port)))
 
+#define host_get_node_port(host, port)	\
+	(host_get_special_port((host),			\
+	HOST_LOCAL_NODE, HOST_NODE_PORT, (port)))
+#define host_set_node_port(host, port)	\
+	(host_set_special_port((host), HOST_NODE_PORT, (port)))
+
+/* HOST_RESOURCE_NOTIFY_PORT doesn't #defines these conveniences.
+   All lookups go through send_resource_violation()
+ */
+
 #endif	/* _MACH_HOST_SPECIAL_PORTS_H_ */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/i386/vm_types.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/i386/vm_types.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/i386/vm_types.h	2015-08-27 01:55:08.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/i386/vm_types.h	2016-06-03 22:54:57.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2000-2006 Apple Computer, Inc. All rights reserved.
+ * Copyright (c) 2000-2016 Apple Computer, Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  * 
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/ktrace_background.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/ktrace_background.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/ktrace_background.h	1970-01-01 01:00:00.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/ktrace_background.h	2016-06-03 22:55:25.000000000 +0200
@@ -0,0 +1,152 @@
+#ifndef	_ktrace_background_user_
+#define	_ktrace_background_user_
+
+/* Module ktrace_background */
+
+#include <string.h>
+#include <mach/ndr.h>
+#include <mach/boolean.h>
+#include <mach/kern_return.h>
+#include <mach/notify.h>
+#include <mach/mach_types.h>
+#include <mach/message.h>
+#include <mach/mig_errors.h>
+#include <mach/port.h>
+	
+/* BEGIN MIG_STRNCPY_ZEROFILL CODE */
+
+#if defined(__has_include)
+#if __has_include(<mach/mig_strncpy_zerofill_support.h>)
+#ifndef USING_MIG_STRNCPY_ZEROFILL
+#define USING_MIG_STRNCPY_ZEROFILL
+#endif
+#ifndef __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#define __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#ifdef __cplusplus
+extern "C" {
+#endif
+	extern int mig_strncpy_zerofill(char *dest, const char *src, int len) __attribute__((weak_import));
+#ifdef __cplusplus
+}
+#endif
+#endif /* __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__ */
+#endif /* __has_include(<mach/mig_strncpy_zerofill_support.h>) */
+#endif /* __has_include */
+	
+/* END MIG_STRNCPY_ZEROFILL CODE */
+
+
+#ifdef AUTOTEST
+#ifndef FUNCTION_PTR_T
+#define FUNCTION_PTR_T
+typedef void (*function_ptr_t)(mach_port_t, char *, mach_msg_type_number_t);
+typedef struct {
+        char            *name;
+        function_ptr_t  function;
+} function_table_entry;
+typedef function_table_entry   *function_table_t;
+#endif /* FUNCTION_PTR_T */
+#endif /* AUTOTEST */
+
+#ifndef	ktrace_background_MSG_COUNT
+#define	ktrace_background_MSG_COUNT	1
+#endif	/* ktrace_background_MSG_COUNT */
+
+#include <mach/std_types.h>
+#include <mach/mig.h>
+#include <mach/mig.h>
+#include <mach/mach_types.h>
+
+#ifdef __BeforeMigUserHeader
+__BeforeMigUserHeader
+#endif /* __BeforeMigUserHeader */
+
+#include <sys/cdefs.h>
+__BEGIN_DECLS
+
+
+/* SimpleRoutine ktrace_background_available */
+#ifdef	mig_external
+mig_external
+#else
+extern
+#endif	/* mig_external */
+kern_return_t send_ktrace_background_available
+(
+	mach_port_t ktrace_background_port
+);
+
+__END_DECLS
+
+/********************** Caution **************************/
+/* The following data types should be used to calculate  */
+/* maximum message sizes only. The actual message may be */
+/* smaller, and the position of the arguments within the */
+/* message layout may vary from what is presented here.  */
+/* For example, if any of the arguments are variable-    */
+/* sized, and less than the maximum is sent, the data    */
+/* will be packed tight in the actual message to reduce  */
+/* the presence of holes.                                */
+/********************** Caution **************************/
+
+/* typedefs for all requests */
+
+#ifndef __Request__ktrace_background_subsystem__defined
+#define __Request__ktrace_background_subsystem__defined
+
+#ifdef  __MigPackStructs
+#pragma pack(4)
+#endif
+	typedef struct {
+		mach_msg_header_t Head;
+	} __Request__ktrace_background_available_t __attribute__((unused));
+#ifdef  __MigPackStructs
+#pragma pack()
+#endif
+#endif /* !__Request__ktrace_background_subsystem__defined */
+
+/* union of all requests */
+
+#ifndef __RequestUnion__send_ktrace_background_subsystem__defined
+#define __RequestUnion__send_ktrace_background_subsystem__defined
+union __RequestUnion__send_ktrace_background_subsystem {
+	__Request__ktrace_background_available_t Request_send_ktrace_background_available;
+};
+#endif /* !__RequestUnion__send_ktrace_background_subsystem__defined */
+/* typedefs for all replies */
+
+#ifndef __Reply__ktrace_background_subsystem__defined
+#define __Reply__ktrace_background_subsystem__defined
+
+#ifdef  __MigPackStructs
+#pragma pack(4)
+#endif
+	typedef struct {
+		mach_msg_header_t Head;
+		NDR_record_t NDR;
+		kern_return_t RetCode;
+	} __Reply__ktrace_background_available_t __attribute__((unused));
+#ifdef  __MigPackStructs
+#pragma pack()
+#endif
+#endif /* !__Reply__ktrace_background_subsystem__defined */
+
+/* union of all replies */
+
+#ifndef __ReplyUnion__send_ktrace_background_subsystem__defined
+#define __ReplyUnion__send_ktrace_background_subsystem__defined
+union __ReplyUnion__send_ktrace_background_subsystem {
+	__Reply__ktrace_background_available_t Reply_send_ktrace_background_available;
+};
+#endif /* !__RequestUnion__send_ktrace_background_subsystem__defined */
+
+#ifndef subsystem_to_name_map_ktrace_background
+#define subsystem_to_name_map_ktrace_background \
+    { "ktrace_background_available", 670 }
+#endif
+
+#ifdef __AfterMigUserHeader
+__AfterMigUserHeader
+#endif /* __AfterMigUserHeader */
+
+#endif	 /* _ktrace_background_user_ */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/lock_set.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/lock_set.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/lock_set.h	2015-08-27 01:55:28.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/lock_set.h	2016-05-26 06:17:13.000000000 +0200
@@ -12,6 +12,29 @@
 #include <mach/message.h>
 #include <mach/mig_errors.h>
 #include <mach/port.h>
+	
+/* BEGIN MIG_STRNCPY_ZEROFILL CODE */
+
+#if defined(__has_include)
+#if __has_include(<mach/mig_strncpy_zerofill_support.h>)
+#ifndef USING_MIG_STRNCPY_ZEROFILL
+#define USING_MIG_STRNCPY_ZEROFILL
+#endif
+#ifndef __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#define __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#ifdef __cplusplus
+extern "C" {
+#endif
+	extern int mig_strncpy_zerofill(char *dest, const char *src, int len) __attribute__((weak_import));
+#ifdef __cplusplus
+}
+#endif
+#endif /* __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__ */
+#endif /* __has_include(<mach/mig_strncpy_zerofill_support.h>) */
+#endif /* __has_include */
+	
+/* END MIG_STRNCPY_ZEROFILL CODE */
+
 
 #ifdef AUTOTEST
 #ifndef FUNCTION_PTR_T
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/mach_exc_server.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/mach_exc_server.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/mach_exc_server.h	2015-08-27 01:55:29.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/mach_exc_server.h	2016-06-03 22:55:27.000000000 +0200
@@ -12,6 +12,29 @@
 #include <mach/message.h>
 #include <mach/mig_errors.h>
 #include <mach/port.h>
+	
+/* BEGIN MIG_STRNCPY_ZEROFILL CODE */
+
+#if defined(__has_include)
+#if __has_include(<mach/mig_strncpy_zerofill_support.h>)
+#ifndef USING_MIG_STRNCPY_ZEROFILL
+#define USING_MIG_STRNCPY_ZEROFILL
+#endif
+#ifndef __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#define __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#ifdef __cplusplus
+extern "C" {
+#endif
+	extern int mig_strncpy_zerofill(char *dest, const char *src, int len) __attribute__((weak_import));
+#ifdef __cplusplus
+}
+#endif
+#endif /* __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__ */
+#endif /* __has_include(<mach/mig_strncpy_zerofill_support.h>) */
+#endif /* __has_include */
+	
+/* END MIG_STRNCPY_ZEROFILL CODE */
+
 
 #ifdef AUTOTEST
 #ifndef FUNCTION_PTR_T
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/mach_host.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/mach_host.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/mach_host.h	2016-02-27 07:07:09.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/mach_host.h	2016-06-03 22:55:26.000000000 +0200
@@ -12,6 +12,29 @@
 #include <mach/message.h>
 #include <mach/mig_errors.h>
 #include <mach/port.h>
+	
+/* BEGIN MIG_STRNCPY_ZEROFILL CODE */
+
+#if defined(__has_include)
+#if __has_include(<mach/mig_strncpy_zerofill_support.h>)
+#ifndef USING_MIG_STRNCPY_ZEROFILL
+#define USING_MIG_STRNCPY_ZEROFILL
+#endif
+#ifndef __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#define __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#ifdef __cplusplus
+extern "C" {
+#endif
+	extern int mig_strncpy_zerofill(char *dest, const char *src, int len) __attribute__((weak_import));
+#ifdef __cplusplus
+}
+#endif
+#endif /* __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__ */
+#endif /* __has_include(<mach/mig_strncpy_zerofill_support.h>) */
+#endif /* __has_include */
+	
+/* END MIG_STRNCPY_ZEROFILL CODE */
+
 
 #ifdef AUTOTEST
 #ifndef FUNCTION_PTR_T
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/mach_port.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/mach_port.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/mach_port.h	2015-08-27 01:55:28.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/mach_port.h	2016-06-03 22:55:26.000000000 +0200
@@ -12,6 +12,29 @@
 #include <mach/message.h>
 #include <mach/mig_errors.h>
 #include <mach/port.h>
+	
+/* BEGIN MIG_STRNCPY_ZEROFILL CODE */
+
+#if defined(__has_include)
+#if __has_include(<mach/mig_strncpy_zerofill_support.h>)
+#ifndef USING_MIG_STRNCPY_ZEROFILL
+#define USING_MIG_STRNCPY_ZEROFILL
+#endif
+#ifndef __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#define __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#ifdef __cplusplus
+extern "C" {
+#endif
+	extern int mig_strncpy_zerofill(char *dest, const char *src, int len) __attribute__((weak_import));
+#ifdef __cplusplus
+}
+#endif
+#endif /* __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__ */
+#endif /* __has_include(<mach/mig_strncpy_zerofill_support.h>) */
+#endif /* __has_include */
+	
+/* END MIG_STRNCPY_ZEROFILL CODE */
+
 
 #ifdef AUTOTEST
 #ifndef FUNCTION_PTR_T
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/mach_time.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/mach_time.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/mach_time.h	2015-08-27 01:55:22.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/mach_time.h	2016-06-03 22:55:19.000000000 +0200
@@ -30,8 +30,8 @@
 #define	_MACH_MACH_TIME_H_
 
 #include <mach/mach_types.h>
-
 #include <sys/cdefs.h>
+#include <Availability.h>
 
 struct mach_timebase_info {
 	uint32_t	numer;
@@ -44,7 +44,21 @@
 __BEGIN_DECLS
 
 uint64_t			mach_absolute_time(void);
+
+__OSX_AVAILABLE_STARTING(__MAC_10_9, __IPHONE_8_0)
 uint64_t			mach_approximate_time(void);
+
+__OSX_AVAILABLE_STARTING(__MAC_10_12, __IPHONE_10_0) 
+__TVOS_AVAILABLE(__TVOS_10_0) 
+__WATCHOS_AVAILABLE(__WATCHOS_3_0)
+uint64_t			mach_continuous_time(void);
+
+__OSX_AVAILABLE_STARTING(__MAC_10_12, __IPHONE_10_0)
+__TVOS_AVAILABLE(__TVOS_10_0)
+__WATCHOS_AVAILABLE(__WATCHOS_3_0)
+uint64_t			mach_continuous_approximate_time(void);
+
+
 __END_DECLS
 
 #endif /* _MACH_MACH_TIME_H_ */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/mach_types.defs /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/mach_types.defs
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/mach_types.defs	2015-08-27 01:55:25.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/mach_types.defs	2016-06-03 22:55:23.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2000-2010, 2015 Apple Inc. All rights reserved.
+ * Copyright (c) 2000-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  * 
@@ -434,7 +434,7 @@
 
 type mach_vm_read_entry_t = array[512] of mach_vm_offset_t;
 type vm_read_entry_t = array[512] of vm_offset_t;
-#if VM32_SUPPORT
+#ifdef VM32_SUPPORT
 type vm32_read_entry_t = array[512] of vm32_offset_t;
 #endif
 
@@ -546,6 +546,11 @@
 type io_master_t = mach_port_t;
 type UNDServerRef = mach_port_t;
 
+/* These must be kept in sync with definitions in osfmk/mach/dyld_kernel.h */
+type dyld_kernel_image_info_t = struct[40] of MACH_MSG_TYPE_BYTE;
+type dyld_kernel_image_info_array_t = ^array[] of dyld_kernel_image_info_t;
+type dyld_kernel_process_info_t = struct[64] of MACH_MSG_TYPE_BYTE;
+
 #if KERNEL_SERVER
 
 simport <kern/ipc_mig.h>;	/* pick up kernel-specific MIG things */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/mach_types.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/mach_types.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/mach_types.h	2015-08-27 01:55:22.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/mach_types.h	2016-06-03 22:55:19.000000000 +0200
@@ -107,6 +107,7 @@
 #include <mach/vm_types.h>
 #include <mach/vm_region.h>
 #include <mach/kmod.h>
+#include <mach/dyld_kernel.h>
 
 
 #include <mach/vm_param.h>
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/mach_vm.defs /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/mach_vm.defs
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/mach_vm.defs	2015-08-27 01:55:26.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/mach_vm.defs	2016-06-03 22:55:24.000000000 +0200
@@ -452,9 +452,9 @@
  *	definition of the routine.
  */
 #if !defined(_MACH_VM_PUBLISH_AS_LOCAL_)
-routine mach_vm_purgable_control(
+routine PREFIX(mach_vm_purgable_control) (
 #else
-routine vm_purgable_control(
+routine PREFIX(vm_purgable_control) (
 #endif
 		target_task	: vm_map_t;
 		address		: mach_vm_address_t;
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/mach_vm.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/mach_vm.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/mach_vm.h	2015-08-27 01:55:28.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/mach_vm.h	2016-06-03 22:55:26.000000000 +0200
@@ -12,6 +12,29 @@
 #include <mach/message.h>
 #include <mach/mig_errors.h>
 #include <mach/port.h>
+	
+/* BEGIN MIG_STRNCPY_ZEROFILL CODE */
+
+#if defined(__has_include)
+#if __has_include(<mach/mig_strncpy_zerofill_support.h>)
+#ifndef USING_MIG_STRNCPY_ZEROFILL
+#define USING_MIG_STRNCPY_ZEROFILL
+#endif
+#ifndef __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#define __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#ifdef __cplusplus
+extern "C" {
+#endif
+	extern int mig_strncpy_zerofill(char *dest, const char *src, int len) __attribute__((weak_import));
+#ifdef __cplusplus
+}
+#endif
+#endif /* __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__ */
+#endif /* __has_include(<mach/mig_strncpy_zerofill_support.h>) */
+#endif /* __has_include */
+	
+/* END MIG_STRNCPY_ZEROFILL CODE */
+
 
 #ifdef AUTOTEST
 #ifndef FUNCTION_PTR_T
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/mach_voucher.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/mach_voucher.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/mach_voucher.h	2015-08-27 01:55:28.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/mach_voucher.h	2016-05-26 06:25:21.000000000 +0200
@@ -12,6 +12,29 @@
 #include <mach/message.h>
 #include <mach/mig_errors.h>
 #include <mach/port.h>
+	
+/* BEGIN MIG_STRNCPY_ZEROFILL CODE */
+
+#if defined(__has_include)
+#if __has_include(<mach/mig_strncpy_zerofill_support.h>)
+#ifndef USING_MIG_STRNCPY_ZEROFILL
+#define USING_MIG_STRNCPY_ZEROFILL
+#endif
+#ifndef __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#define __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#ifdef __cplusplus
+extern "C" {
+#endif
+	extern int mig_strncpy_zerofill(char *dest, const char *src, int len) __attribute__((weak_import));
+#ifdef __cplusplus
+}
+#endif
+#endif /* __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__ */
+#endif /* __has_include(<mach/mig_strncpy_zerofill_support.h>) */
+#endif /* __has_include */
+	
+/* END MIG_STRNCPY_ZEROFILL CODE */
+
 
 #ifdef AUTOTEST
 #ifndef FUNCTION_PTR_T
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/mach_voucher_attr_control.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/mach_voucher_attr_control.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/mach_voucher_attr_control.h	2015-08-27 01:55:28.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/mach_voucher_attr_control.h	2016-06-03 22:55:26.000000000 +0200
@@ -12,6 +12,29 @@
 #include <mach/message.h>
 #include <mach/mig_errors.h>
 #include <mach/port.h>
+	
+/* BEGIN MIG_STRNCPY_ZEROFILL CODE */
+
+#if defined(__has_include)
+#if __has_include(<mach/mig_strncpy_zerofill_support.h>)
+#ifndef USING_MIG_STRNCPY_ZEROFILL
+#define USING_MIG_STRNCPY_ZEROFILL
+#endif
+#ifndef __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#define __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#ifdef __cplusplus
+extern "C" {
+#endif
+	extern int mig_strncpy_zerofill(char *dest, const char *src, int len) __attribute__((weak_import));
+#ifdef __cplusplus
+}
+#endif
+#endif /* __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__ */
+#endif /* __has_include(<mach/mig_strncpy_zerofill_support.h>) */
+#endif /* __has_include */
+	
+/* END MIG_STRNCPY_ZEROFILL CODE */
+
 
 #ifdef AUTOTEST
 #ifndef FUNCTION_PTR_T
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/mach_voucher_types.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/mach_voucher_types.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/mach_voucher_types.h	2016-02-27 07:07:02.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/mach_voucher_types.h	2016-06-03 22:55:19.000000000 +0200
@@ -92,6 +92,7 @@
 #define MACH_VOUCHER_ATTR_KEY_ATM		((mach_voucher_attr_key_t)1)
 #define MACH_VOUCHER_ATTR_KEY_IMPORTANCE	((mach_voucher_attr_key_t)2)
 #define MACH_VOUCHER_ATTR_KEY_BANK		((mach_voucher_attr_key_t)3)
+#define MACH_VOUCHER_ATTR_KEY_PTHPRIORITY	((mach_voucher_attr_key_t)4)
 
 #define MACH_VOUCHER_ATTR_KEY_USER_DATA		((mach_voucher_attr_key_t)7)
 #define MACH_VOUCHER_ATTR_KEY_BITS		MACH_VOUCHER_ATTR_KEY_USER_DATA /* deprecated */
@@ -236,4 +237,9 @@
 #define MACH_VOUCHER_IMPORTANCE_ATTR_DROP_EXTERNAL      2  /* Drop some number of external refs */
 typedef uint32_t mach_voucher_attr_importance_refs;
 
+/*
+ * Activity id Generation defines
+ */
+#define MACH_ACTIVITY_ID_COUNT_MAX 16
+
 #endif	/* _MACH_VOUCHER_TYPES_H_ */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/machine/sdt.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/machine/sdt.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/machine/sdt.h	2015-08-27 01:55:12.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/machine/sdt.h	2016-06-03 22:55:01.000000000 +0200
@@ -150,7 +150,20 @@
 	DTRACE_CALL10ARGS(provider, name)								\
 }
 
+#else
+#define DTRACE_PROBE(provider, name) do {} while(0)
+#define DTRACE_PROBE1(provider, name, arg0) do {} while(0)
+#define DTRACE_PROBE2(provider, name, arg0, arg1) do {} while(0)
+#define DTRACE_PROBE3(provider, name, arg0, arg1, arg2) do {} while(0)
+#define DTRACE_PROBE4(provider, name, arg0, arg1, arg2, arg3) do {} while(0)
+#define DTRACE_PROBE5(provider, name, arg0, arg1, arg2, arg3, arg4) do {} while(0)
+#define DTRACE_PROBE6(provider, name, arg0, arg1, arg2, arg3, arg4, arg5) do {} while(0)
+#define DTRACE_PROBE7(provider, name, arg0, arg1, arg2, arg3, arg4, arg5, arg6) do {} while(0)
+#define DTRACE_PROBE8(provider, name, arg0, arg1, arg2, arg3, arg4, arg5, arg6, arg7) do {} while(0)
+#define DTRACE_PROBE9(provider, name, arg0, arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8) do {} while(0)
+#define DTRACE_PROBE10(provider, name, arg0, arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8, arg9) do {} while(0)
 
+#endif /* CONFIG_DTRACE */
 
 #define	DTRACE_SCHED(name)						\
 	DTRACE_PROBE(__sched_, name);
@@ -242,6 +255,10 @@
     type3, arg3, type4, arg4, type5, arg5)				\
 	DTRACE_PROBE5(__vminfo_, name, arg1, arg2, arg3, arg4, arg5)
 
+#define	DTRACE_VM6(name, type1, arg1, type2, arg2, 			\
+    type3, arg3, type4, arg4, type5, arg5, type6, arg6)	\
+	DTRACE_PROBE6(__vminfo_, name, arg1, arg2, arg3, arg4, arg5, arg6)
+
 #define DTRACE_IP(name)							\
 	DTRACE_PROBE(__ip_, name)
 
@@ -350,71 +367,6 @@
     type3, arg3, type4, arg4, type5, arg5, type6, arg6)			\
 	DTRACE_PROBE6(__boost_, name, arg1, arg2, arg3, arg4, arg5, arg6);
 
-#else /* CONFIG_DTRACE */
-
-#define	DTRACE_SCHED(name) do {} while (0)
-#define	DTRACE_SCHED1(name, type1, arg1) do {} while (0)
-#define	DTRACE_SCHED2(name, type1, arg1, type2, arg2) do {} while (0)
-#define	DTRACE_SCHED3(name, type1, arg1, type2, arg2, type3, arg3) do {} while (0)
-#define	DTRACE_SCHED4(name, type1, arg1, type2, arg2, type3, arg3, type4, arg4) do {} while (0)
-
-#define DTRACE_PROC(name) do {} while(0)
-#define DTRACE_PROC1(name, type1, arg1) do {} while(0)
-#define	DTRACE_PROC2(name, type1, arg1, type2, arg2) do {} while (0)
-#define	DTRACE_PROC3(name, type1, arg1, type2, arg2, type3, arg3) do {} while (0)
-#define	DTRACE_PROC4(name, type1, arg1, type2, arg2, type3, arg3, type4, arg4) do {} while(0)
-#define	DTRACE_IO(name) do {} while(0)
-#define	DTRACE_IO1(name, type1, arg1) do {} while(0)
-#define	DTRACE_IO2(name, type1, arg1, type2, arg2) do {} while(0)
-#define	DTRACE_IO3(name, type1, arg1, type2, arg2, type3, arg3) do {} while(0)
-#define	DTRACE_IO4(name, type1, arg1, type2, arg2, type3, arg3, type4, arg4) do {} while(0)
-#define	DTRACE_INT5(name, type1, arg1, type2, arg2, type3, arg3, type4, arg4, type5, arg5) do {} while(0)
-#define	DTRACE_TMR3(name, type1, arg1, type2, arg2, type3, arg3) do {} while(0)
-
-#define DTRACE_VM(name) do {} while(0)
-#define DTRACE_VM1(name, type1, arg1) do {} while(0)
-#define DTRACE_VM2(name, type1, arg1, type2, arg2) do {} while(0)
-#define DTRACE_VM3(name, type1, arg1, type2, arg2, type3, arg3) do {} while(0)
-#define DTRACE_VM4(name, type1, arg1, type2, arg2, type3, arg3, type4, arg4) do {} while(0)
-#define DTRACE_VM5(name, type1, arg1, type2, arg2, type3, arg3, type4, arg4, type5, arg5) do {} while(0)
-#define DTRACE_IP(name) do {} while(0)
-#define DTRACE_IP1(name, type1, arg1) do {} while(0)
-#define DTRACE_IP2(name, type1, arg1, type2, arg2) do {} while(0)
-#define DTRACE_IP3(name, type1, arg1, type2, arg2, type3, arg3) do {} while(0)
-#define DTRACE_IP4(name, type1, arg1, type2, arg2, type3, arg3, type4, arg4) do {} while(0)
-#define DTRACE_IP5(name, type1, arg1, type2, arg2, type3, arg3, type4, arg4, type5, arg5) do {} while(0)
-#define DTRACE_IP6(name, type1, arg1, type2, arg2, type3, arg3, type4, arg4, type5, arg5, type6, arg6) do {} while(0)
-#define DTRACE_IP7(name, type1, arg1, type2, arg2, type3, arg3, type4, arg4, type5, arg5, \
-	type6, arg6, type7, arg7) do {} while(0)
-
-#define DTRACE_TCP(name) do {} while(0)
-#define DTRACE_TCP1(name, type1, arg1) do {} while(0)
-#define DTRACE_TCP2(name, type1, arg1, type2, arg2) do {} while(0)
-#define DTRACE_TCP3(name, type1, arg1, type2, arg2, type3, arg3) do {} while(0)
-#define DTRACE_TCP4(name, type1, arg1, type2, arg2, type3, arg3, type4, arg4) do {} while(0)
-#define DTRACE_TCP5(name, type1, arg1, type2, arg2, type3, arg3, type4, arg4, type5, arg5) do {} while(0)
-
-#define DTRACE_MPTCP(name) do {} while(0)
-#define DTRACE_MPTCP1(name, type1, arg1) do {} while(0)
-#define DTRACE_MPTCP2(name, type1, arg1, type2, arg2) do {} while(0)
-#define DTRACE_MPTCP3(name, type1, arg1, type2, arg2, type3, arg3) do {} while(0)
-#define DTRACE_MPTCP4(name, type1, arg1, type2, arg2, type3, arg3, type4, arg4) do {} while(0)
-#define DTRACE_MPTCP5(name, type1, arg1, type2, arg2, type3, arg3, type4, arg4, type5, arg5) do {} while(0)
-#define DTRACE_MPTCP6(name, type1, arg1, type2, arg2, type3, arg3, type4, arg4, type5, arg5, type6, arg6) do {} while(0)
-#define DTRACE_MPTCP7(name, type1, arg1, type2, arg2, type3, arg3, type4, arg4, type5, arg5, type6, arg6, type7, arg7) do {} while(0)
-
-#define DTRACE_FSINFO(name, type, vp) do {} while(0)
-#define DTRACE_FSINFO_IO(name, type1, vp, type2, size) do {} while (0)
-
-#define DTRACE_BOOST(name) do {} while(0)
-#define DTRACE_BOOST1(name, type1, arg1) do {} while(0)
-#define DTRACE_BOOST2(name, type1, arg1, type2, arg2) do {} while(0)
-#define DTRACE_BOOST3(name, type1, arg1, type2, arg2, type3, arg3) do {} while(0)
-#define DTRACE_BOOST4(name, type1, arg1, type2, arg2, type3, arg3, type4, arg4) do {} while(0)
-#define DTRACE_BOOST5(name, type1, arg1, type2, arg2, type3, arg3, type4, arg4, type5, arg5) do {} while(0)
-#define DTRACE_BOOST6(name, type1, arg1, type2, arg2, type3, arg3, type4, arg4, type5, arg5, type6, arg6) do {} while(0)
-
-#endif /* CONFIG_DTRACE */
 
 
 #endif	/* _MACH_MACHINE_SYS_SDT_H */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/machine.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/machine.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/machine.h	2015-11-11 07:59:55.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/machine.h	2016-06-03 22:55:19.000000000 +0200
@@ -354,7 +354,7 @@
 #define CPUFAMILY_ARM_9			0xe73283ae
 #define CPUFAMILY_ARM_11		0x8ff620d8
 #define CPUFAMILY_ARM_XSCALE		0x53b005f5
-#define CPUFAMILY_ARM_12		0xbd1b0ae9
+#define CPUFAMILY_ARM_12                0xbd1b0ae9
 #define CPUFAMILY_ARM_13		0x0cc90e64
 #define CPUFAMILY_ARM_14		0x96077ef1
 #define CPUFAMILY_ARM_15		0xa8511bca
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/memory_object_control.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/memory_object_control.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/memory_object_control.h	2015-08-27 01:55:28.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/memory_object_control.h	2016-06-03 22:55:26.000000000 +0200
@@ -12,6 +12,29 @@
 #include <mach/message.h>
 #include <mach/mig_errors.h>
 #include <mach/port.h>
+	
+/* BEGIN MIG_STRNCPY_ZEROFILL CODE */
+
+#if defined(__has_include)
+#if __has_include(<mach/mig_strncpy_zerofill_support.h>)
+#ifndef USING_MIG_STRNCPY_ZEROFILL
+#define USING_MIG_STRNCPY_ZEROFILL
+#endif
+#ifndef __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#define __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#ifdef __cplusplus
+extern "C" {
+#endif
+	extern int mig_strncpy_zerofill(char *dest, const char *src, int len) __attribute__((weak_import));
+#ifdef __cplusplus
+}
+#endif
+#endif /* __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__ */
+#endif /* __has_include(<mach/mig_strncpy_zerofill_support.h>) */
+#endif /* __has_include */
+	
+/* END MIG_STRNCPY_ZEROFILL CODE */
+
 
 #ifdef AUTOTEST
 #ifndef FUNCTION_PTR_T
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/memory_object_default_server.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/memory_object_default_server.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/memory_object_default_server.h	2015-08-27 01:55:29.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/memory_object_default_server.h	2016-06-03 22:55:27.000000000 +0200
@@ -12,6 +12,29 @@
 #include <mach/message.h>
 #include <mach/mig_errors.h>
 #include <mach/port.h>
+	
+/* BEGIN MIG_STRNCPY_ZEROFILL CODE */
+
+#if defined(__has_include)
+#if __has_include(<mach/mig_strncpy_zerofill_support.h>)
+#ifndef USING_MIG_STRNCPY_ZEROFILL
+#define USING_MIG_STRNCPY_ZEROFILL
+#endif
+#ifndef __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#define __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#ifdef __cplusplus
+extern "C" {
+#endif
+	extern int mig_strncpy_zerofill(char *dest, const char *src, int len) __attribute__((weak_import));
+#ifdef __cplusplus
+}
+#endif
+#endif /* __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__ */
+#endif /* __has_include(<mach/mig_strncpy_zerofill_support.h>) */
+#endif /* __has_include */
+	
+/* END MIG_STRNCPY_ZEROFILL CODE */
+
 
 #ifdef AUTOTEST
 #ifndef FUNCTION_PTR_T
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/memory_object_server.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/memory_object_server.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/memory_object_server.h	2015-08-27 01:55:29.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/memory_object_server.h	1970-01-01 01:00:00.000000000 +0100
@@ -1,525 +0,0 @@
-#ifndef	_memory_object_server_
-#define	_memory_object_server_
-
-/* Module memory_object */
-
-#include <string.h>
-#include <mach/ndr.h>
-#include <mach/boolean.h>
-#include <mach/kern_return.h>
-#include <mach/notify.h>
-#include <mach/mach_types.h>
-#include <mach/message.h>
-#include <mach/mig_errors.h>
-#include <mach/port.h>
-
-#ifdef AUTOTEST
-#ifndef FUNCTION_PTR_T
-#define FUNCTION_PTR_T
-typedef void (*function_ptr_t)(mach_port_t, char *, mach_msg_type_number_t);
-typedef struct {
-        char            *name;
-        function_ptr_t  function;
-} function_table_entry;
-typedef function_table_entry   *function_table_t;
-#endif /* FUNCTION_PTR_T */
-#endif /* AUTOTEST */
-
-#ifndef	memory_object_MSG_COUNT
-#define	memory_object_MSG_COUNT	10
-#endif	/* memory_object_MSG_COUNT */
-
-#include <mach/std_types.h>
-#include <mach/mig.h>
-#include <mach/mig.h>
-#include <mach/mach_types.h>
-
-#ifdef __BeforeMigServerHeader
-__BeforeMigServerHeader
-#endif /* __BeforeMigServerHeader */
-
-
-/* Routine memory_object_init */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t memory_object_init
-(
-	memory_object_t memory_object,
-	memory_object_control_t memory_control,
-	memory_object_cluster_size_t memory_object_page_size
-);
-
-/* Routine memory_object_terminate */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t memory_object_terminate
-(
-	memory_object_t memory_object
-);
-
-/* Routine memory_object_data_request */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t memory_object_data_request
-(
-	memory_object_t memory_object,
-	memory_object_offset_t offset,
-	memory_object_cluster_size_t length,
-	vm_prot_t desired_access,
-	memory_object_fault_info_t fault_info
-);
-
-/* Routine memory_object_data_return */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t memory_object_data_return
-(
-	memory_object_t memory_object,
-	memory_object_offset_t offset,
-	memory_object_cluster_size_t size,
-	memory_object_offset_t *resid_offset,
-	int *io_error,
-	boolean_t dirty,
-	boolean_t kernel_copy,
-	int upl_flags
-);
-
-/* Routine memory_object_data_initialize */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t memory_object_data_initialize
-(
-	memory_object_t memory_object,
-	memory_object_offset_t offset,
-	memory_object_cluster_size_t size
-);
-
-/* Routine memory_object_data_unlock */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t memory_object_data_unlock
-(
-	memory_object_t memory_object,
-	memory_object_offset_t offset,
-	memory_object_size_t size,
-	vm_prot_t desired_access
-);
-
-/* Routine memory_object_synchronize */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t memory_object_synchronize
-(
-	memory_object_t memory_object,
-	memory_object_offset_t offset,
-	memory_object_size_t size,
-	vm_sync_t sync_flags
-);
-
-/* Routine memory_object_map */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t memory_object_map
-(
-	memory_object_t memory_object,
-	vm_prot_t prot
-);
-
-/* Routine memory_object_last_unmap */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t memory_object_last_unmap
-(
-	memory_object_t memory_object
-);
-
-/* Routine memory_object_data_reclaim */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t memory_object_data_reclaim
-(
-	memory_object_t memory_object,
-	boolean_t reclaim_backing_store
-);
-
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-boolean_t memory_object_server(
-		mach_msg_header_t *InHeadP,
-		mach_msg_header_t *OutHeadP);
-
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-mig_routine_t memory_object_server_routine(
-		mach_msg_header_t *InHeadP);
-
-
-/* Description of this subsystem, for use in direct RPC */
-extern const struct memory_object_subsystem {
-	mig_server_routine_t	server;	/* Server routine */
-	mach_msg_id_t	start;	/* Min routine number */
-	mach_msg_id_t	end;	/* Max routine number + 1 */
-	unsigned int	maxsize;	/* Max msg size */
-	vm_address_t	reserved;	/* Reserved */
-	struct routine_descriptor	/*Array of routine descriptors */
-		routine[10];
-} memory_object_subsystem;
-
-/* typedefs for all requests */
-
-#ifndef __Request__memory_object_subsystem__defined
-#define __Request__memory_object_subsystem__defined
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_port_descriptor_t memory_control;
-		/* end of the kernel processed data */
-		NDR_record_t NDR;
-		memory_object_cluster_size_t memory_object_page_size;
-	} __Request__memory_object_init_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-	} __Request__memory_object_terminate_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		memory_object_offset_t offset;
-		memory_object_cluster_size_t length;
-		vm_prot_t desired_access;
-		memory_object_fault_info_t fault_info;
-	} __Request__memory_object_data_request_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		memory_object_offset_t offset;
-		memory_object_cluster_size_t size;
-		boolean_t dirty;
-		boolean_t kernel_copy;
-		int upl_flags;
-	} __Request__memory_object_data_return_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		memory_object_offset_t offset;
-		memory_object_cluster_size_t size;
-	} __Request__memory_object_data_initialize_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		memory_object_offset_t offset;
-		memory_object_size_t size;
-		vm_prot_t desired_access;
-	} __Request__memory_object_data_unlock_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		memory_object_offset_t offset;
-		memory_object_size_t size;
-		vm_sync_t sync_flags;
-	} __Request__memory_object_synchronize_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		vm_prot_t prot;
-	} __Request__memory_object_map_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-	} __Request__memory_object_last_unmap_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		boolean_t reclaim_backing_store;
-	} __Request__memory_object_data_reclaim_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-#endif /* !__Request__memory_object_subsystem__defined */
-
-
-/* union of all requests */
-
-#ifndef __RequestUnion__memory_object_subsystem__defined
-#define __RequestUnion__memory_object_subsystem__defined
-union __RequestUnion__memory_object_subsystem {
-	__Request__memory_object_init_t Request_memory_object_init;
-	__Request__memory_object_terminate_t Request_memory_object_terminate;
-	__Request__memory_object_data_request_t Request_memory_object_data_request;
-	__Request__memory_object_data_return_t Request_memory_object_data_return;
-	__Request__memory_object_data_initialize_t Request_memory_object_data_initialize;
-	__Request__memory_object_data_unlock_t Request_memory_object_data_unlock;
-	__Request__memory_object_synchronize_t Request_memory_object_synchronize;
-	__Request__memory_object_map_t Request_memory_object_map;
-	__Request__memory_object_last_unmap_t Request_memory_object_last_unmap;
-	__Request__memory_object_data_reclaim_t Request_memory_object_data_reclaim;
-};
-#endif /* __RequestUnion__memory_object_subsystem__defined */
-/* typedefs for all replies */
-
-#ifndef __Reply__memory_object_subsystem__defined
-#define __Reply__memory_object_subsystem__defined
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-	} __Reply__memory_object_init_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-	} __Reply__memory_object_terminate_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-	} __Reply__memory_object_data_request_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-		memory_object_offset_t resid_offset;
-		int io_error;
-	} __Reply__memory_object_data_return_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-	} __Reply__memory_object_data_initialize_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-	} __Reply__memory_object_data_unlock_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-	} __Reply__memory_object_synchronize_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-	} __Reply__memory_object_map_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-	} __Reply__memory_object_last_unmap_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-	} __Reply__memory_object_data_reclaim_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-#endif /* !__Reply__memory_object_subsystem__defined */
-
-
-/* union of all replies */
-
-#ifndef __ReplyUnion__memory_object_subsystem__defined
-#define __ReplyUnion__memory_object_subsystem__defined
-union __ReplyUnion__memory_object_subsystem {
-	__Reply__memory_object_init_t Reply_memory_object_init;
-	__Reply__memory_object_terminate_t Reply_memory_object_terminate;
-	__Reply__memory_object_data_request_t Reply_memory_object_data_request;
-	__Reply__memory_object_data_return_t Reply_memory_object_data_return;
-	__Reply__memory_object_data_initialize_t Reply_memory_object_data_initialize;
-	__Reply__memory_object_data_unlock_t Reply_memory_object_data_unlock;
-	__Reply__memory_object_synchronize_t Reply_memory_object_synchronize;
-	__Reply__memory_object_map_t Reply_memory_object_map;
-	__Reply__memory_object_last_unmap_t Reply_memory_object_last_unmap;
-	__Reply__memory_object_data_reclaim_t Reply_memory_object_data_reclaim;
-};
-#endif /* __RequestUnion__memory_object_subsystem__defined */
-
-#ifndef subsystem_to_name_map_memory_object
-#define subsystem_to_name_map_memory_object \
-    { "memory_object_init", 2200 },\
-    { "memory_object_terminate", 2201 },\
-    { "memory_object_data_request", 2202 },\
-    { "memory_object_data_return", 2203 },\
-    { "memory_object_data_initialize", 2204 },\
-    { "memory_object_data_unlock", 2205 },\
-    { "memory_object_synchronize", 2206 },\
-    { "memory_object_map", 2207 },\
-    { "memory_object_last_unmap", 2208 },\
-    { "memory_object_data_reclaim", 2209 }
-#endif
-
-#ifdef __AfterMigServerHeader
-__AfterMigServerHeader
-#endif /* __AfterMigServerHeader */
-
-#endif	 /* _memory_object_server_ */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/memory_object_types.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/memory_object_types.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/memory_object_types.h	2015-08-27 01:55:23.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/memory_object_types.h	2016-06-03 22:55:19.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2000-2006 Apple Computer, Inc. All rights reserved.
+ * Copyright (c) 2000-2016 Apple Computer, Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  * 
@@ -263,6 +263,7 @@
 			& 0xFF000000) | ((flags) & 0xFFFFFF));
 
 /* leave room for vm_prot bits */
+#define MAP_MEM_GRAB_SECLUDED	0x008000 /* can grab secluded pages */
 #define MAP_MEM_ONLY		0x010000 /* change processor caching  */
 #define MAP_MEM_NAMED_CREATE	0x020000 /* create extant object      */
 #define MAP_MEM_PURGABLE	0x040000 /* create a purgable VM object */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/message.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/message.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/message.h	2015-08-27 01:55:23.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/message.h	2016-06-03 22:55:19.000000000 +0200
@@ -222,20 +222,23 @@
 typedef	natural_t mach_msg_size_t;
 typedef integer_t mach_msg_id_t;
 
-
 #define MACH_MSG_SIZE_NULL (mach_msg_size_t *) 0
 
+typedef unsigned int mach_msg_priority_t;
+
+#define MACH_MSG_PRIORITY_UNSPECIFIED (mach_msg_priority_t) 0
+
 typedef unsigned int mach_msg_type_name_t;
 
-#define MACH_MSG_TYPE_MOVE_RECEIVE	16	/* Must hold receive right */
-#define MACH_MSG_TYPE_MOVE_SEND		17	/* Must hold send right(s) */
-#define MACH_MSG_TYPE_MOVE_SEND_ONCE	18	/* Must hold sendonce right */
-#define MACH_MSG_TYPE_COPY_SEND		19	/* Must hold send right(s) */
-#define MACH_MSG_TYPE_MAKE_SEND		20	/* Must hold receive right */
-#define MACH_MSG_TYPE_MAKE_SEND_ONCE	21	/* Must hold receive right */
-#define MACH_MSG_TYPE_COPY_RECEIVE	22	/* NOT VALID */
-#define MACH_MSG_TYPE_DISPOSE_RECEIVE	24	/* must hold receive right */
-#define MACH_MSG_TYPE_DISPOSE_SEND	25	/* must hold send right(s) */
+#define MACH_MSG_TYPE_MOVE_RECEIVE      16	/* Must hold receive right */
+#define MACH_MSG_TYPE_MOVE_SEND         17	/* Must hold send right(s) */
+#define MACH_MSG_TYPE_MOVE_SEND_ONCE    18	/* Must hold sendonce right */
+#define MACH_MSG_TYPE_COPY_SEND         19	/* Must hold send right(s) */
+#define MACH_MSG_TYPE_MAKE_SEND         20	/* Must hold receive right */
+#define MACH_MSG_TYPE_MAKE_SEND_ONCE    21	/* Must hold receive right */
+#define MACH_MSG_TYPE_COPY_RECEIVE      22	/* NOT VALID */
+#define MACH_MSG_TYPE_DISPOSE_RECEIVE   24	/* must hold receive right */
+#define MACH_MSG_TYPE_DISPOSE_SEND      25	/* must hold send right(s) */
 #define MACH_MSG_TYPE_DISPOSE_SEND_ONCE 26	/* must hold sendonce right */
 
 typedef unsigned int mach_msg_copy_options_t;
@@ -656,6 +659,7 @@
 #define MACH_RCV_LARGE_IDENTITY	0x00000008	/* identify source of large messages */
 
 #define MACH_SEND_TIMEOUT	0x00000010	/* timeout value applies to send */
+#define MACH_SEND_OVERRIDE  0x00000020  /* priority override for send */
 #define MACH_SEND_INTERRUPT	0x00000040	/* don't restart interrupted sends */
 #define MACH_SEND_NOTIFY	0x00000080	/* arm send-possible notify */
 #define MACH_SEND_ALWAYS	0x00010000	/* ignore qlimits - kernel only */
@@ -671,6 +675,7 @@
 #define MACH_RCV_VOUCHER	0x00000800	/* willing to receive voucher port */
 #define MACH_RCV_OVERWRITE	0x00001000	/* scatter receive (deprecated) */
 
+
 /* 
  * NOTE: a 0x00------ RCV mask implies to ask for
  * a MACH_MSG_TRAILER_FORMAT_0 with 0 Elements, 
@@ -819,6 +824,7 @@
                 /* Waiting for receive with timeout. (Internal use only.) */
 
 
+
 __BEGIN_DECLS
 
 /*
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/mig.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/mig.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/mig.h	2015-08-27 01:55:23.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/mig.h	2016-06-03 22:55:20.000000000 +0200
@@ -154,6 +154,7 @@
 
 /* Bounded string copy */
 extern int mig_strncpy(char	*dest, const char *src,	int	len);
+extern int mig_strncpy_zerofill(char	*dest, const char *src,	int	len);
 
 
 /* Allocate memory for out-of-line mig structures */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/mig_strncpy_zerofill_support.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/mig_strncpy_zerofill_support.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/mig_strncpy_zerofill_support.h	1970-01-01 01:00:00.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/mig_strncpy_zerofill_support.h	2016-06-03 22:55:20.000000000 +0200
@@ -0,0 +1,8 @@
+//This dummy header file is created for mig to check when to call mig_strncpy_zerofill.
+//Mig checks if this file is available to include and knows that Libsyscall has the new mig_strncpy_zerofill symbols to link to.
+//Do not delete this file, mig will stop calling mig_strncpy_zerofill.
+
+#ifndef __MACH_MIG_STRNCPY_ZEROFILL_SUPPORT__
+#define __MACH_MIG_STRNCPY_ZEROFILL_SUPPORT__
+
+#endif // __MACH_MIG_STRNCPY_ZEROFILL_SUPPORT__
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/notify_server.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/notify_server.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/notify_server.h	2015-08-27 01:55:29.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/notify_server.h	2016-06-03 22:55:27.000000000 +0200
@@ -12,6 +12,29 @@
 #include <mach/message.h>
 #include <mach/mig_errors.h>
 #include <mach/port.h>
+	
+/* BEGIN MIG_STRNCPY_ZEROFILL CODE */
+
+#if defined(__has_include)
+#if __has_include(<mach/mig_strncpy_zerofill_support.h>)
+#ifndef USING_MIG_STRNCPY_ZEROFILL
+#define USING_MIG_STRNCPY_ZEROFILL
+#endif
+#ifndef __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#define __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#ifdef __cplusplus
+extern "C" {
+#endif
+	extern int mig_strncpy_zerofill(char *dest, const char *src, int len) __attribute__((weak_import));
+#ifdef __cplusplus
+}
+#endif
+#endif /* __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__ */
+#endif /* __has_include(<mach/mig_strncpy_zerofill_support.h>) */
+#endif /* __has_include */
+	
+/* END MIG_STRNCPY_ZEROFILL CODE */
+
 
 #ifdef AUTOTEST
 #ifndef FUNCTION_PTR_T
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/processor.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/processor.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/processor.h	2015-08-27 01:55:28.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/processor.h	2016-05-28 05:52:57.000000000 +0200
@@ -12,6 +12,29 @@
 #include <mach/message.h>
 #include <mach/mig_errors.h>
 #include <mach/port.h>
+	
+/* BEGIN MIG_STRNCPY_ZEROFILL CODE */
+
+#if defined(__has_include)
+#if __has_include(<mach/mig_strncpy_zerofill_support.h>)
+#ifndef USING_MIG_STRNCPY_ZEROFILL
+#define USING_MIG_STRNCPY_ZEROFILL
+#endif
+#ifndef __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#define __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#ifdef __cplusplus
+extern "C" {
+#endif
+	extern int mig_strncpy_zerofill(char *dest, const char *src, int len) __attribute__((weak_import));
+#ifdef __cplusplus
+}
+#endif
+#endif /* __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__ */
+#endif /* __has_include(<mach/mig_strncpy_zerofill_support.h>) */
+#endif /* __has_include */
+	
+/* END MIG_STRNCPY_ZEROFILL CODE */
+
 
 #ifdef AUTOTEST
 #ifndef FUNCTION_PTR_T
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/processor_set.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/processor_set.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/processor_set.h	2015-08-27 01:55:28.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/processor_set.h	2016-05-26 06:17:04.000000000 +0200
@@ -12,6 +12,29 @@
 #include <mach/message.h>
 #include <mach/mig_errors.h>
 #include <mach/port.h>
+	
+/* BEGIN MIG_STRNCPY_ZEROFILL CODE */
+
+#if defined(__has_include)
+#if __has_include(<mach/mig_strncpy_zerofill_support.h>)
+#ifndef USING_MIG_STRNCPY_ZEROFILL
+#define USING_MIG_STRNCPY_ZEROFILL
+#endif
+#ifndef __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#define __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#ifdef __cplusplus
+extern "C" {
+#endif
+	extern int mig_strncpy_zerofill(char *dest, const char *src, int len) __attribute__((weak_import));
+#ifdef __cplusplus
+}
+#endif
+#endif /* __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__ */
+#endif /* __has_include(<mach/mig_strncpy_zerofill_support.h>) */
+#endif /* __has_include */
+	
+/* END MIG_STRNCPY_ZEROFILL CODE */
+
 
 #ifdef AUTOTEST
 #ifndef FUNCTION_PTR_T
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/shared_region.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/shared_region.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/shared_region.h	2015-08-27 01:55:24.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/shared_region.h	2016-06-03 22:55:21.000000000 +0200
@@ -44,8 +44,8 @@
 
 #define SHARED_REGION_BASE_X86_64		0x00007FFF70000000ULL
 #define SHARED_REGION_SIZE_X86_64		0x000000008FE00000ULL
-#define SHARED_REGION_NESTING_BASE_X86_64	0x00007FFF80000000ULL
-#define SHARED_REGION_NESTING_SIZE_X86_64	0x0000000040000000ULL
+#define SHARED_REGION_NESTING_BASE_X86_64 	0x00007FFF70000000ULL
+#define SHARED_REGION_NESTING_SIZE_X86_64	0x000000008FE00000ULL
 #define SHARED_REGION_NESTING_MIN_X86_64	0x0000000000200000ULL
 #define SHARED_REGION_NESTING_MAX_X86_64	0xFFFFFFFFFFE00000ULL
 
@@ -63,17 +63,17 @@
 #define SHARED_REGION_NESTING_MIN_PPC64		0x0000000010000000ULL
 #define SHARED_REGION_NESTING_MAX_PPC64		0x0000000010000000ULL
 
-#define SHARED_REGION_BASE_ARM			0x20000000ULL
-#define SHARED_REGION_SIZE_ARM			0x20000000ULL
-#define SHARED_REGION_NESTING_BASE_ARM		0x20000000ULL
-#define SHARED_REGION_NESTING_SIZE_ARM		0x20000000ULL
+#define SHARED_REGION_BASE_ARM			0x1A000000ULL
+#define SHARED_REGION_SIZE_ARM			0x26000000ULL
+#define SHARED_REGION_NESTING_BASE_ARM		0x1A000000ULL
+#define SHARED_REGION_NESTING_SIZE_ARM		0x26000000ULL
 #define SHARED_REGION_NESTING_MIN_ARM		?
 #define SHARED_REGION_NESTING_MAX_ARM		?
 
 #define SHARED_REGION_BASE_ARM64		0x180000000ULL
-#define SHARED_REGION_SIZE_ARM64		0x28000000ULL
+#define SHARED_REGION_SIZE_ARM64		0x40000000ULL
 #define SHARED_REGION_NESTING_BASE_ARM64	0x180000000ULL
-#define SHARED_REGION_NESTING_SIZE_ARM64	0x28000000ULL
+#define SHARED_REGION_NESTING_SIZE_ARM64	0x40000000ULL
 #define SHARED_REGION_NESTING_MIN_ARM64		?
 #define SHARED_REGION_NESTING_MAX_ARM64		?
 
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/std_types.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/std_types.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/std_types.h	2015-08-27 01:55:24.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/std_types.h	2016-06-03 22:55:21.000000000 +0200
@@ -69,4 +69,7 @@
 #include <mach/port.h>
 #include <mach/vm_types.h>
 
+#include <sys/_types.h>
+#include <sys/_types/_uuid_t.h>
+
 #endif	/* _MACH_STD_TYPES_H_ */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/sysdiagnose_notification_server.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/sysdiagnose_notification_server.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/sysdiagnose_notification_server.h	2015-08-27 01:55:30.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/sysdiagnose_notification_server.h	2016-06-03 22:55:27.000000000 +0200
@@ -12,6 +12,29 @@
 #include <mach/message.h>
 #include <mach/mig_errors.h>
 #include <mach/port.h>
+	
+/* BEGIN MIG_STRNCPY_ZEROFILL CODE */
+
+#if defined(__has_include)
+#if __has_include(<mach/mig_strncpy_zerofill_support.h>)
+#ifndef USING_MIG_STRNCPY_ZEROFILL
+#define USING_MIG_STRNCPY_ZEROFILL
+#endif
+#ifndef __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#define __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#ifdef __cplusplus
+extern "C" {
+#endif
+	extern int mig_strncpy_zerofill(char *dest, const char *src, int len) __attribute__((weak_import));
+#ifdef __cplusplus
+}
+#endif
+#endif /* __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__ */
+#endif /* __has_include(<mach/mig_strncpy_zerofill_support.h>) */
+#endif /* __has_include */
+	
+/* END MIG_STRNCPY_ZEROFILL CODE */
+
 
 #ifdef AUTOTEST
 #ifndef FUNCTION_PTR_T
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/task.defs /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/task.defs
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/task.defs	2015-08-27 01:55:27.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/task.defs	2016-06-03 22:55:25.000000000 +0200
@@ -450,5 +450,45 @@
 		new_voucher	: ipc_voucher_t;
 	inout	old_voucher	: ipc_voucher_t);
 
+routine task_generate_corpse(
+		task		:task_t;
+	out	corpse_task_port:mach_port_t);
+
+routine task_map_corpse_info(
+		task		:task_t;
+		corspe_task	:task_t;
+	out	kcd_addr_begin	:vm_address_t;
+	out	kcd_size	:uint32_t);
+
+routine task_register_dyld_image_infos(
+        task            :task_t;
+        dyld_images     :dyld_kernel_image_info_array_t);
+
+routine task_unregister_dyld_image_infos(
+        task            :task_t;
+        dyld_images     :dyld_kernel_image_info_array_t);
+
+routine task_get_dyld_image_infos(
+        task            :task_t;
+    out dyld_images     :dyld_kernel_image_info_array_t);
+
+routine task_register_dyld_shared_cache_image_info(
+        task                :task_t;
+        dyld_cache_image    :dyld_kernel_image_info_t);
+
+routine task_register_dyld_set_dyld_state(
+        task           :task_t;
+        dyld_state     :uint8_t);
+
+routine task_register_dyld_get_process_state(
+        task                :task_t;
+    out dyld_process_state  :dyld_kernel_process_info_t);
+
+routine task_map_corpse_info_64(
+		task		:task_t;
+		corspe_task	:task_t;
+	out	kcd_addr_begin	:mach_vm_address_t;
+	out	kcd_size	:mach_vm_size_t);
+
 /* vim: set ft=c : */
 
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/task.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/task.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/task.h	2015-08-27 01:55:28.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/task.h	2016-06-03 22:55:26.000000000 +0200
@@ -12,6 +12,29 @@
 #include <mach/message.h>
 #include <mach/mig_errors.h>
 #include <mach/port.h>
+	
+/* BEGIN MIG_STRNCPY_ZEROFILL CODE */
+
+#if defined(__has_include)
+#if __has_include(<mach/mig_strncpy_zerofill_support.h>)
+#ifndef USING_MIG_STRNCPY_ZEROFILL
+#define USING_MIG_STRNCPY_ZEROFILL
+#endif
+#ifndef __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#define __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#ifdef __cplusplus
+extern "C" {
+#endif
+	extern int mig_strncpy_zerofill(char *dest, const char *src, int len) __attribute__((weak_import));
+#ifdef __cplusplus
+}
+#endif
+#endif /* __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__ */
+#endif /* __has_include(<mach/mig_strncpy_zerofill_support.h>) */
+#endif /* __has_include */
+	
+/* END MIG_STRNCPY_ZEROFILL CODE */
+
 
 #ifdef AUTOTEST
 #ifndef FUNCTION_PTR_T
@@ -26,7 +49,7 @@
 #endif /* AUTOTEST */
 
 #ifndef	task_MSG_COUNT
-#define	task_MSG_COUNT	42
+#define	task_MSG_COUNT	51
 #endif	/* task_MSG_COUNT */
 
 #include <mach/std_types.h>
@@ -610,6 +633,121 @@
 	ipc_voucher_t *old_voucher
 );
 
+/* Routine task_generate_corpse */
+#ifdef	mig_external
+mig_external
+#else
+extern
+#endif	/* mig_external */
+kern_return_t task_generate_corpse
+(
+	task_t task,
+	mach_port_t *corpse_task_port
+);
+
+/* Routine task_map_corpse_info */
+#ifdef	mig_external
+mig_external
+#else
+extern
+#endif	/* mig_external */
+kern_return_t task_map_corpse_info
+(
+	task_t task,
+	task_t corspe_task,
+	vm_address_t *kcd_addr_begin,
+	uint32_t *kcd_size
+);
+
+/* Routine task_register_dyld_image_infos */
+#ifdef	mig_external
+mig_external
+#else
+extern
+#endif	/* mig_external */
+kern_return_t task_register_dyld_image_infos
+(
+	task_t task,
+	dyld_kernel_image_info_array_t dyld_images,
+	mach_msg_type_number_t dyld_imagesCnt
+);
+
+/* Routine task_unregister_dyld_image_infos */
+#ifdef	mig_external
+mig_external
+#else
+extern
+#endif	/* mig_external */
+kern_return_t task_unregister_dyld_image_infos
+(
+	task_t task,
+	dyld_kernel_image_info_array_t dyld_images,
+	mach_msg_type_number_t dyld_imagesCnt
+);
+
+/* Routine task_get_dyld_image_infos */
+#ifdef	mig_external
+mig_external
+#else
+extern
+#endif	/* mig_external */
+kern_return_t task_get_dyld_image_infos
+(
+	task_t task,
+	dyld_kernel_image_info_array_t *dyld_images,
+	mach_msg_type_number_t *dyld_imagesCnt
+);
+
+/* Routine task_register_dyld_shared_cache_image_info */
+#ifdef	mig_external
+mig_external
+#else
+extern
+#endif	/* mig_external */
+kern_return_t task_register_dyld_shared_cache_image_info
+(
+	task_t task,
+	dyld_kernel_image_info_t dyld_cache_image
+);
+
+/* Routine task_register_dyld_set_dyld_state */
+#ifdef	mig_external
+mig_external
+#else
+extern
+#endif	/* mig_external */
+kern_return_t task_register_dyld_set_dyld_state
+(
+	task_t task,
+	uint8_t dyld_state
+);
+
+/* Routine task_register_dyld_get_process_state */
+#ifdef	mig_external
+mig_external
+#else
+extern
+#endif	/* mig_external */
+kern_return_t task_register_dyld_get_process_state
+(
+	task_t task,
+	dyld_kernel_process_info_t *dyld_process_state
+);
+
+/* Routine task_map_corpse_info_64 */
+#ifdef	mig_external
+mig_external
+#else
+extern
+#endif	/* mig_external */
+kern_return_t task_map_corpse_info_64
+(
+	task_t task,
+	task_t corspe_task,
+	mach_vm_address_t *kcd_addr_begin,
+	mach_vm_size_t *kcd_size
+);
+
 __END_DECLS
 
 /********************** Caution **************************/
@@ -1181,6 +1319,121 @@
 #ifdef  __MigPackStructs
 #pragma pack()
 #endif
+
+#ifdef  __MigPackStructs
+#pragma pack(4)
+#endif
+	typedef struct {
+		mach_msg_header_t Head;
+	} __Request__task_generate_corpse_t __attribute__((unused));
+#ifdef  __MigPackStructs
+#pragma pack()
+#endif
+
+#ifdef  __MigPackStructs
+#pragma pack(4)
+#endif
+	typedef struct {
+		mach_msg_header_t Head;
+		/* start of the kernel processed data */
+		mach_msg_body_t msgh_body;
+		mach_msg_port_descriptor_t corspe_task;
+		/* end of the kernel processed data */
+	} __Request__task_map_corpse_info_t __attribute__((unused));
+#ifdef  __MigPackStructs
+#pragma pack()
+#endif
+
+#ifdef  __MigPackStructs
+#pragma pack(4)
+#endif
+	typedef struct {
+		mach_msg_header_t Head;
+		/* start of the kernel processed data */
+		mach_msg_body_t msgh_body;
+		mach_msg_ool_descriptor_t dyld_images;
+		/* end of the kernel processed data */
+		NDR_record_t NDR;
+		mach_msg_type_number_t dyld_imagesCnt;
+	} __Request__task_register_dyld_image_infos_t __attribute__((unused));
+#ifdef  __MigPackStructs
+#pragma pack()
+#endif
+
+#ifdef  __MigPackStructs
+#pragma pack(4)
+#endif
+	typedef struct {
+		mach_msg_header_t Head;
+		/* start of the kernel processed data */
+		mach_msg_body_t msgh_body;
+		mach_msg_ool_descriptor_t dyld_images;
+		/* end of the kernel processed data */
+		NDR_record_t NDR;
+		mach_msg_type_number_t dyld_imagesCnt;
+	} __Request__task_unregister_dyld_image_infos_t __attribute__((unused));
+#ifdef  __MigPackStructs
+#pragma pack()
+#endif
+
+#ifdef  __MigPackStructs
+#pragma pack(4)
+#endif
+	typedef struct {
+		mach_msg_header_t Head;
+	} __Request__task_get_dyld_image_infos_t __attribute__((unused));
+#ifdef  __MigPackStructs
+#pragma pack()
+#endif
+
+#ifdef  __MigPackStructs
+#pragma pack(4)
+#endif
+	typedef struct {
+		mach_msg_header_t Head;
+		NDR_record_t NDR;
+		dyld_kernel_image_info_t dyld_cache_image;
+	} __Request__task_register_dyld_shared_cache_image_info_t __attribute__((unused));
+#ifdef  __MigPackStructs
+#pragma pack()
+#endif
+
+#ifdef  __MigPackStructs
+#pragma pack(4)
+#endif
+	typedef struct {
+		mach_msg_header_t Head;
+		NDR_record_t NDR;
+		uint8_t dyld_state;
+		char dyld_statePad[3];
+	} __Request__task_register_dyld_set_dyld_state_t __attribute__((unused));
+#ifdef  __MigPackStructs
+#pragma pack()
+#endif
+
+#ifdef  __MigPackStructs
+#pragma pack(4)
+#endif
+	typedef struct {
+		mach_msg_header_t Head;
+	} __Request__task_register_dyld_get_process_state_t __attribute__((unused));
+#ifdef  __MigPackStructs
+#pragma pack()
+#endif
+
+#ifdef  __MigPackStructs
+#pragma pack(4)
+#endif
+	typedef struct {
+		mach_msg_header_t Head;
+		/* start of the kernel processed data */
+		mach_msg_body_t msgh_body;
+		mach_msg_port_descriptor_t corspe_task;
+		/* end of the kernel processed data */
+	} __Request__task_map_corpse_info_64_t __attribute__((unused));
+#ifdef  __MigPackStructs
+#pragma pack()
+#endif
 #endif /* !__Request__task_subsystem__defined */
 
 /* union of all requests */
@@ -1230,6 +1483,15 @@
 	__Request__task_get_mach_voucher_t Request_task_get_mach_voucher;
 	__Request__task_set_mach_voucher_t Request_task_set_mach_voucher;
 	__Request__task_swap_mach_voucher_t Request_task_swap_mach_voucher;
+	__Request__task_generate_corpse_t Request_task_generate_corpse;
+	__Request__task_map_corpse_info_t Request_task_map_corpse_info;
+	__Request__task_register_dyld_image_infos_t Request_task_register_dyld_image_infos;
+	__Request__task_unregister_dyld_image_infos_t Request_task_unregister_dyld_image_infos;
+	__Request__task_get_dyld_image_infos_t Request_task_get_dyld_image_infos;
+	__Request__task_register_dyld_shared_cache_image_info_t Request_task_register_dyld_shared_cache_image_info;
+	__Request__task_register_dyld_set_dyld_state_t Request_task_register_dyld_set_dyld_state;
+	__Request__task_register_dyld_get_process_state_t Request_task_register_dyld_get_process_state;
+	__Request__task_map_corpse_info_64_t Request_task_map_corpse_info_64;
 };
 #endif /* !__RequestUnion__task_subsystem__defined */
 /* typedefs for all replies */
@@ -1802,6 +2064,125 @@
 #ifdef  __MigPackStructs
 #pragma pack()
 #endif
+
+#ifdef  __MigPackStructs
+#pragma pack(4)
+#endif
+	typedef struct {
+		mach_msg_header_t Head;
+		/* start of the kernel processed data */
+		mach_msg_body_t msgh_body;
+		mach_msg_port_descriptor_t corpse_task_port;
+		/* end of the kernel processed data */
+	} __Reply__task_generate_corpse_t __attribute__((unused));
+#ifdef  __MigPackStructs
+#pragma pack()
+#endif
+
+#ifdef  __MigPackStructs
+#pragma pack(4)
+#endif
+	typedef struct {
+		mach_msg_header_t Head;
+		NDR_record_t NDR;
+		kern_return_t RetCode;
+		vm_address_t kcd_addr_begin;
+		uint32_t kcd_size;
+	} __Reply__task_map_corpse_info_t __attribute__((unused));
+#ifdef  __MigPackStructs
+#pragma pack()
+#endif
+
+#ifdef  __MigPackStructs
+#pragma pack(4)
+#endif
+	typedef struct {
+		mach_msg_header_t Head;
+		NDR_record_t NDR;
+		kern_return_t RetCode;
+	} __Reply__task_register_dyld_image_infos_t __attribute__((unused));
+#ifdef  __MigPackStructs
+#pragma pack()
+#endif
+
+#ifdef  __MigPackStructs
+#pragma pack(4)
+#endif
+	typedef struct {
+		mach_msg_header_t Head;
+		NDR_record_t NDR;
+		kern_return_t RetCode;
+	} __Reply__task_unregister_dyld_image_infos_t __attribute__((unused));
+#ifdef  __MigPackStructs
+#pragma pack()
+#endif
+
+#ifdef  __MigPackStructs
+#pragma pack(4)
+#endif
+	typedef struct {
+		mach_msg_header_t Head;
+		/* start of the kernel processed data */
+		mach_msg_body_t msgh_body;
+		mach_msg_ool_descriptor_t dyld_images;
+		/* end of the kernel processed data */
+		NDR_record_t NDR;
+		mach_msg_type_number_t dyld_imagesCnt;
+	} __Reply__task_get_dyld_image_infos_t __attribute__((unused));
+#ifdef  __MigPackStructs
+#pragma pack()
+#endif
+
+#ifdef  __MigPackStructs
+#pragma pack(4)
+#endif
+	typedef struct {
+		mach_msg_header_t Head;
+		NDR_record_t NDR;
+		kern_return_t RetCode;
+	} __Reply__task_register_dyld_shared_cache_image_info_t __attribute__((unused));
+#ifdef  __MigPackStructs
+#pragma pack()
+#endif
+
+#ifdef  __MigPackStructs
+#pragma pack(4)
+#endif
+	typedef struct {
+		mach_msg_header_t Head;
+		NDR_record_t NDR;
+		kern_return_t RetCode;
+	} __Reply__task_register_dyld_set_dyld_state_t __attribute__((unused));
+#ifdef  __MigPackStructs
+#pragma pack()
+#endif
+
+#ifdef  __MigPackStructs
+#pragma pack(4)
+#endif
+	typedef struct {
+		mach_msg_header_t Head;
+		NDR_record_t NDR;
+		kern_return_t RetCode;
+		dyld_kernel_process_info_t dyld_process_state;
+	} __Reply__task_register_dyld_get_process_state_t __attribute__((unused));
+#ifdef  __MigPackStructs
+#pragma pack()
+#endif
+
+#ifdef  __MigPackStructs
+#pragma pack(4)
+#endif
+	typedef struct {
+		mach_msg_header_t Head;
+		NDR_record_t NDR;
+		kern_return_t RetCode;
+		mach_vm_address_t kcd_addr_begin;
+		mach_vm_size_t kcd_size;
+	} __Reply__task_map_corpse_info_64_t __attribute__((unused));
+#ifdef  __MigPackStructs
+#pragma pack()
+#endif
 #endif /* !__Reply__task_subsystem__defined */
 
 /* union of all replies */
@@ -1851,6 +2232,15 @@
 	__Reply__task_get_mach_voucher_t Reply_task_get_mach_voucher;
 	__Reply__task_set_mach_voucher_t Reply_task_set_mach_voucher;
 	__Reply__task_swap_mach_voucher_t Reply_task_swap_mach_voucher;
+	__Reply__task_generate_corpse_t Reply_task_generate_corpse;
+	__Reply__task_map_corpse_info_t Reply_task_map_corpse_info;
+	__Reply__task_register_dyld_image_infos_t Reply_task_register_dyld_image_infos;
+	__Reply__task_unregister_dyld_image_infos_t Reply_task_unregister_dyld_image_infos;
+	__Reply__task_get_dyld_image_infos_t Reply_task_get_dyld_image_infos;
+	__Reply__task_register_dyld_shared_cache_image_info_t Reply_task_register_dyld_shared_cache_image_info;
+	__Reply__task_register_dyld_set_dyld_state_t Reply_task_register_dyld_set_dyld_state;
+	__Reply__task_register_dyld_get_process_state_t Reply_task_register_dyld_get_process_state;
+	__Reply__task_map_corpse_info_64_t Reply_task_map_corpse_info_64;
 };
 #endif /* !__RequestUnion__task_subsystem__defined */
 
@@ -1897,7 +2287,16 @@
     { "task_purgable_info", 3438 },\
     { "task_get_mach_voucher", 3439 },\
     { "task_set_mach_voucher", 3440 },\
-    { "task_swap_mach_voucher", 3441 }
+    { "task_swap_mach_voucher", 3441 },\
+    { "task_generate_corpse", 3442 },\
+    { "task_map_corpse_info", 3443 },\
+    { "task_register_dyld_image_infos", 3444 },\
+    { "task_unregister_dyld_image_infos", 3445 },\
+    { "task_get_dyld_image_infos", 3446 },\
+    { "task_register_dyld_shared_cache_image_info", 3447 },\
+    { "task_register_dyld_set_dyld_state", 3448 },\
+    { "task_register_dyld_get_process_state", 3449 },\
+    { "task_map_corpse_info_64", 3450 }
 #endif
 
 #ifdef __AfterMigUserHeader
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/task_access.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/task_access.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/task_access.h	2015-08-27 01:55:28.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/task_access.h	2016-06-03 22:55:26.000000000 +0200
@@ -12,6 +12,29 @@
 #include <mach/message.h>
 #include <mach/mig_errors.h>
 #include <mach/port.h>
+	
+/* BEGIN MIG_STRNCPY_ZEROFILL CODE */
+
+#if defined(__has_include)
+#if __has_include(<mach/mig_strncpy_zerofill_support.h>)
+#ifndef USING_MIG_STRNCPY_ZEROFILL
+#define USING_MIG_STRNCPY_ZEROFILL
+#endif
+#ifndef __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#define __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#ifdef __cplusplus
+extern "C" {
+#endif
+	extern int mig_strncpy_zerofill(char *dest, const char *src, int len) __attribute__((weak_import));
+#ifdef __cplusplus
+}
+#endif
+#endif /* __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__ */
+#endif /* __has_include(<mach/mig_strncpy_zerofill_support.h>) */
+#endif /* __has_include */
+	
+/* END MIG_STRNCPY_ZEROFILL CODE */
+
 
 #ifdef AUTOTEST
 #ifndef FUNCTION_PTR_T
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/task_access_server.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/task_access_server.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/task_access_server.h	2015-08-27 01:55:29.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/task_access_server.h	2016-06-03 22:55:27.000000000 +0200
@@ -12,6 +12,29 @@
 #include <mach/message.h>
 #include <mach/mig_errors.h>
 #include <mach/port.h>
+	
+/* BEGIN MIG_STRNCPY_ZEROFILL CODE */
+
+#if defined(__has_include)
+#if __has_include(<mach/mig_strncpy_zerofill_support.h>)
+#ifndef USING_MIG_STRNCPY_ZEROFILL
+#define USING_MIG_STRNCPY_ZEROFILL
+#endif
+#ifndef __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#define __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#ifdef __cplusplus
+extern "C" {
+#endif
+	extern int mig_strncpy_zerofill(char *dest, const char *src, int len) __attribute__((weak_import));
+#ifdef __cplusplus
+}
+#endif
+#endif /* __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__ */
+#endif /* __has_include(<mach/mig_strncpy_zerofill_support.h>) */
+#endif /* __has_include */
+	
+/* END MIG_STRNCPY_ZEROFILL CODE */
+
 
 #ifdef AUTOTEST
 #ifndef FUNCTION_PTR_T
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/task_info.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/task_info.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/task_info.h	2015-08-27 01:55:24.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/task_info.h	2016-06-03 22:55:21.000000000 +0200
@@ -324,14 +324,20 @@
 
 	/* added for rev1 */
 	mach_vm_size_t	phys_footprint;
+
+	/* added for rev2 */
+	mach_vm_address_t	min_address;
+	mach_vm_address_t	max_address;
 };
 typedef struct task_vm_info	task_vm_info_data_t;
 typedef struct task_vm_info	*task_vm_info_t;
 #define TASK_VM_INFO_COUNT	((mach_msg_type_number_t) \
 		(sizeof (task_vm_info_data_t) / sizeof (natural_t)))
+#define TASK_VM_INFO_REV2_COUNT TASK_VM_INFO_COUNT
+#define TASK_VM_INFO_REV1_COUNT /* doesn't include min and max address */ \
+	((mach_msg_type_number_t) (TASK_VM_INFO_REV2_COUNT - 4))
 #define TASK_VM_INFO_REV0_COUNT /* doesn't include phys_footprint */ \
-		((mach_msg_type_number_t) \
-		(TASK_VM_INFO_COUNT - 2))
+	((mach_msg_type_number_t) (TASK_VM_INFO_REV1_COUNT - 2))
 
 typedef struct vm_purgeable_info	task_purgable_info_t;
 
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/task_special_ports.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/task_special_ports.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/task_special_ports.h	2015-08-27 01:55:24.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/task_special_ports.h	2016-06-03 22:55:21.000000000 +0200
@@ -88,7 +88,9 @@
 
 #define TASK_ACCESS_PORT	9	/* Permission check for task_for_pid. */
 
-#define TASK_DEBUG_CONTROL_PORT 10 /* debug control port */
+#define TASK_DEBUG_CONTROL_PORT 10 	/* debug control port */
+
+#define TASK_RESOURCE_NOTIFY_PORT   11	/* overrides host special RN port */
 
 /*
  *	Definitions for ease of use
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/telemetry_notification_server.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/telemetry_notification_server.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/telemetry_notification_server.h	2015-08-27 01:55:30.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/telemetry_notification_server.h	2016-06-03 22:55:27.000000000 +0200
@@ -12,6 +12,29 @@
 #include <mach/message.h>
 #include <mach/mig_errors.h>
 #include <mach/port.h>
+	
+/* BEGIN MIG_STRNCPY_ZEROFILL CODE */
+
+#if defined(__has_include)
+#if __has_include(<mach/mig_strncpy_zerofill_support.h>)
+#ifndef USING_MIG_STRNCPY_ZEROFILL
+#define USING_MIG_STRNCPY_ZEROFILL
+#endif
+#ifndef __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#define __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#ifdef __cplusplus
+extern "C" {
+#endif
+	extern int mig_strncpy_zerofill(char *dest, const char *src, int len) __attribute__((weak_import));
+#ifdef __cplusplus
+}
+#endif
+#endif /* __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__ */
+#endif /* __has_include(<mach/mig_strncpy_zerofill_support.h>) */
+#endif /* __has_include */
+	
+/* END MIG_STRNCPY_ZEROFILL CODE */
+
 
 #ifdef AUTOTEST
 #ifndef FUNCTION_PTR_T
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/thread_act.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/thread_act.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/thread_act.h	2015-08-27 01:55:28.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/thread_act.h	2016-06-03 22:55:26.000000000 +0200
@@ -12,6 +12,29 @@
 #include <mach/message.h>
 #include <mach/mig_errors.h>
 #include <mach/port.h>
+	
+/* BEGIN MIG_STRNCPY_ZEROFILL CODE */
+
+#if defined(__has_include)
+#if __has_include(<mach/mig_strncpy_zerofill_support.h>)
+#ifndef USING_MIG_STRNCPY_ZEROFILL
+#define USING_MIG_STRNCPY_ZEROFILL
+#endif
+#ifndef __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#define __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#ifdef __cplusplus
+extern "C" {
+#endif
+	extern int mig_strncpy_zerofill(char *dest, const char *src, int len) __attribute__((weak_import));
+#ifdef __cplusplus
+}
+#endif
+#endif /* __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__ */
+#endif /* __has_include(<mach/mig_strncpy_zerofill_support.h>) */
+#endif /* __has_include */
+	
+/* END MIG_STRNCPY_ZEROFILL CODE */
+
 
 #ifdef AUTOTEST
 #ifndef FUNCTION_PTR_T
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/thread_policy.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/thread_policy.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/thread_policy.h	2015-08-27 01:55:24.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/thread_policy.h	2016-06-03 22:55:21.000000000 +0200
@@ -225,6 +225,8 @@
 	integer_t	priority;
 };
 
+#define THREAD_BACKGROUND_POLICY_DARWIN_BG 0x1000
+
 typedef struct thread_background_policy		thread_background_policy_data_t;
 typedef struct thread_background_policy 	*thread_background_policy_t;
 
@@ -259,4 +261,6 @@
 	    (sizeof (thread_throughput_qos_policy_data_t) / sizeof (integer_t)))
 
 
+
+
 #endif	/* _MACH_THREAD_POLICY_H_ */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/upl.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/upl.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/upl.h	2015-08-27 01:55:29.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/upl.h	2016-06-03 22:55:27.000000000 +0200
@@ -12,6 +12,29 @@
 #include <mach/message.h>
 #include <mach/mig_errors.h>
 #include <mach/port.h>
+	
+/* BEGIN MIG_STRNCPY_ZEROFILL CODE */
+
+#if defined(__has_include)
+#if __has_include(<mach/mig_strncpy_zerofill_support.h>)
+#ifndef USING_MIG_STRNCPY_ZEROFILL
+#define USING_MIG_STRNCPY_ZEROFILL
+#endif
+#ifndef __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#define __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#ifdef __cplusplus
+extern "C" {
+#endif
+	extern int mig_strncpy_zerofill(char *dest, const char *src, int len) __attribute__((weak_import));
+#ifdef __cplusplus
+}
+#endif
+#endif /* __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__ */
+#endif /* __has_include(<mach/mig_strncpy_zerofill_support.h>) */
+#endif /* __has_include */
+	
+/* END MIG_STRNCPY_ZEROFILL CODE */
+
 
 #ifdef AUTOTEST
 #ifndef FUNCTION_PTR_T
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/vm_map.defs /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/vm_map.defs
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/vm_map.defs	2015-08-27 01:55:27.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/vm_map.defs	2016-06-03 22:55:25.000000000 +0200
@@ -473,7 +473,7 @@
  *	specified.  See the routine implementation for a complete
  *	definition of the routine.
  */
-routine vm_purgable_control(
+routine PREFIX(vm_purgable_control) (
 		target_task	: vm_map_t;
 		address		: vm_address_t;
 		control		: vm_purgable_t;
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/vm_map.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/vm_map.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/vm_map.h	2015-08-27 01:55:29.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/vm_map.h	2016-06-03 22:55:27.000000000 +0200
@@ -12,6 +12,29 @@
 #include <mach/message.h>
 #include <mach/mig_errors.h>
 #include <mach/port.h>
+	
+/* BEGIN MIG_STRNCPY_ZEROFILL CODE */
+
+#if defined(__has_include)
+#if __has_include(<mach/mig_strncpy_zerofill_support.h>)
+#ifndef USING_MIG_STRNCPY_ZEROFILL
+#define USING_MIG_STRNCPY_ZEROFILL
+#endif
+#ifndef __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#define __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__
+#ifdef __cplusplus
+extern "C" {
+#endif
+	extern int mig_strncpy_zerofill(char *dest, const char *src, int len) __attribute__((weak_import));
+#ifdef __cplusplus
+}
+#endif
+#endif /* __MIG_STRNCPY_ZEROFILL_FORWARD_TYPE_DECLS__ */
+#endif /* __has_include(<mach/mig_strncpy_zerofill_support.h>) */
+#endif /* __has_include */
+	
+/* END MIG_STRNCPY_ZEROFILL CODE */
+
 
 #ifdef AUTOTEST
 #ifndef FUNCTION_PTR_T
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/vm_param.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/vm_param.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/vm_param.h	2015-08-27 01:55:25.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/vm_param.h	2016-06-03 22:55:22.000000000 +0200
@@ -74,6 +74,9 @@
 #include <mach/vm_types.h>
 #endif	/* ASSEMBLER */
 
+#include <os/base.h>
+#include <os/overflow.h>
+
 /*
  *	The machine independent pages are refered to as PAGES.  A page
  *	is some number of hardware pages, depending on the target machine.
@@ -118,6 +121,18 @@
 #define mach_vm_round_page(x) (((mach_vm_offset_t)(x) + PAGE_MASK) & ~((signed)PAGE_MASK))
 #define mach_vm_trunc_page(x) ((mach_vm_offset_t)(x) & ~((signed)PAGE_MASK))
 
+#define round_page_overflow(in, out) __os_warn_unused(({ \
+		bool __ovr = os_add_overflow(in, (__typeof__(*out))PAGE_MASK, out); \
+		*out &= ~((__typeof__(*out))PAGE_MASK); \
+		__ovr; \
+	}))
+
+static inline int OS_WARN_RESULT
+mach_vm_round_page_overflow(mach_vm_offset_t in, mach_vm_offset_t *out)
+{
+	return round_page_overflow(in, out);
+}
+
 #define memory_object_round_page(x) (((memory_object_offset_t)(x) + PAGE_MASK) & ~((signed)PAGE_MASK))
 #define memory_object_trunc_page(x) ((memory_object_offset_t)(x) & ~((signed)PAGE_MASK))
 
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/vm_prot.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/vm_prot.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/vm_prot.h	2015-08-27 01:55:25.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/vm_prot.h	2016-06-03 22:55:22.000000000 +0200
@@ -137,6 +137,18 @@
  */
 #define VM_PROT_IS_MASK		((vm_prot_t) 0x40)
 
+/*
+ * Another invalid protection value to support execute-only protection.
+ * VM_PROT_STRIP_READ is a special marker that tells mprotect to not
+ * set VM_PROT_READ. We have to do it this way because existing code
+ * expects the system to set VM_PROT_READ if VM_PROT_EXECUTE is set.
+ * VM_PROT_EXECUTE_ONLY is just a convenience value to indicate that
+ * the memory should be executable and explicitly not readable. It will
+ * be ignored on platforms that do not support this type of protection.
+ */
+#define VM_PROT_STRIP_READ		((vm_prot_t) 0x80)
+#define VM_PROT_EXECUTE_ONLY	(VM_PROT_EXECUTE|VM_PROT_STRIP_READ)
+
 
 #define VM_PROT_MEMORY_TAG_MASK		0xFF000000
 #define VM_PROT_MEMORY_TAG_SHIFT	24
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/vm_region.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/vm_region.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/vm_region.h	2015-08-27 01:55:25.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/vm_region.h	2016-06-03 22:55:22.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2000-2006 Apple Computer, Inc. All rights reserved.
+ * Copyright (c) 2000-2016 Apple Computer, Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  * 
@@ -301,7 +301,7 @@
 	vm_size_t	size;
 };
 
-#if VM32_SUPPORT
+#ifdef VM32_SUPPORT
 struct vm32_read_entry {
 	vm32_address_t	address;
 	vm32_size_t	size;
@@ -313,7 +313,7 @@
 
 typedef struct mach_vm_read_entry	mach_vm_read_entry_t[VM_MAP_ENTRY_MAX];
 typedef struct vm_read_entry		vm_read_entry_t[VM_MAP_ENTRY_MAX];
-#if VM32_SUPPORT
+#ifdef VM32_SUPPORT
 typedef struct vm32_read_entry		vm32_read_entry_t[VM_MAP_ENTRY_MAX];
 #endif
 
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/vm_statistics.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/vm_statistics.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/vm_statistics.h	2015-08-27 01:55:25.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach/vm_statistics.h	2016-06-03 22:55:22.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2000-2009 Apple Inc. All rights reserved.
+ * Copyright (c) 2000-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  * 
@@ -256,6 +256,7 @@
 #define VM_FLAGS_FIXED		0x0000
 #define VM_FLAGS_ANYWHERE	0x0001
 #define VM_FLAGS_PURGABLE	0x0002
+#define VM_FLAGS_RANDOM_ADDR	0x0008
 #define VM_FLAGS_NO_CACHE	0x0010
 #define VM_FLAGS_RESILIENT_CODESIGN	0x0020
 #define VM_FLAGS_RESILIENT_MEDIA	0x0040
@@ -279,6 +280,7 @@
 #define VM_FLAGS_USER_ALLOCATE	(VM_FLAGS_FIXED |		\
 				 VM_FLAGS_ANYWHERE |		\
 				 VM_FLAGS_PURGABLE |		\
+				 VM_FLAGS_RANDOM_ADDR |		\
 				 VM_FLAGS_NO_CACHE |		\
 				 VM_FLAGS_OVERWRITE |		\
 				 VM_FLAGS_SUPERPAGE_MASK |	\
@@ -288,6 +290,7 @@
 				 VM_FLAGS_RETURN_DATA_ADDR)
 #define VM_FLAGS_USER_REMAP	(VM_FLAGS_FIXED |    \
 				 VM_FLAGS_ANYWHERE | \
+				 VM_FLAGS_RANDOM_ADDR | \
 				 VM_FLAGS_OVERWRITE| \
 				 VM_FLAGS_RETURN_DATA_ADDR |\
 				 VM_FLAGS_RESILIENT_CODESIGN)
@@ -356,6 +359,9 @@
 /* Window backing stores, custom shadow data, and compressed backing stores */
 #define VM_MEMORY_COREGRAPHICS_BACKINGSTORES	57
 
+/* x-alloc'd memory */
+#define VM_MEMORY_COREGRAPHICS_XALLOC 58
+
 /* catch-all for other uses, such as the read-only shared data page */
 #define VM_MEMORY_COREGRAPHICS_MISC VM_MEMORY_COREGRAPHICS
 
@@ -421,6 +427,22 @@
 /* Apple System Logger (ASL) messages */
 #define VM_MEMORY_ASL 81
 
+/* Swift runtime */
+#define VM_MEMORY_SWIFT_RUNTIME 82
+
+/* Swift metadata */
+#define VM_MEMORY_SWIFT_METADATA 83
+
+/* DHMM data */
+#define VM_MEMORY_DHMM 84
+
+
+/* memory allocated by SceneKit.framework */
+#define VM_MEMORY_SCENEKIT 86
+
+/* memory allocated by skywalk networking */
+#define VM_MEMORY_SKYWALK 87
+
 /* Reserve 240-255 for application */
 #define VM_MEMORY_APPLICATION_SPECIFIC_1 240
 #define VM_MEMORY_APPLICATION_SPECIFIC_16 255
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach_debug/zone_info.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach_debug/zone_info.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach_debug/zone_info.h	2015-08-27 01:55:17.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/mach_debug/zone_info.h	2016-06-03 22:55:04.000000000 +0200
@@ -140,7 +140,8 @@
     uint64_t size;
     uint64_t free;
     uint64_t largest;
-    uint64_t _resv[3];
+	uint64_t collectable_bytes;
+    uint64_t _resv[2];
 } mach_memory_info_t;
 
 typedef mach_memory_info_t *mach_memory_info_array_t;
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/math.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/math.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/math.h	2015-08-27 02:08:40.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/math.h	2016-06-03 23:05:47.000000000 +0200
@@ -84,7 +84,7 @@
 #   define FP_FAST_FMA     1
 #   define FP_FAST_FMAF    1
 #   define FP_FAST_FMAL    1
-#elif (defined __i386__ || defined __x86_64__) && defined __FMA__
+#elif (defined __i386__ || defined __x86_64__) && (defined __FMA__)
 /*  When targeting the FMA ISA extension, fma() and fmaf( ) are generally
     about as fast as (or faster than) separate multiply and add of the same
     operands, but fmal( ) may be more costly.                                 */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/net/bpf.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/net/bpf.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/net/bpf.h	2015-08-27 01:55:21.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/net/bpf.h	2016-06-03 22:55:07.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2000-2014 Apple Inc. All rights reserved.
+ * Copyright (c) 2000-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  * 
@@ -1231,7 +1231,7 @@
 		link type are specified. The callback is responsible for
 		releasing the mbuf whether or not it returns an error.
 	@param interface The interface the packet is being sent on.
-	@param dlt The data link type the bpf device is attached to.
+	@param data_link_type The data link type the bpf device is attached to.
 	@param packet The packet to be sent.
  */
 typedef errno_t (*bpf_send_func)(ifnet_t interface, u_int32_t data_link_type,
@@ -1249,7 +1249,7 @@
 		decreasing (tap in or out is stopping), the error will be
 		ignored.
 	@param interface The interface being tapped.
-	@param dlt The data link type being tapped.
+	@param data_link_type The data link type being tapped.
 	@param direction The direction of the tap.
  */
 typedef errno_t (*bpf_tap_func)(ifnet_t interface, u_int32_t data_link_type,
@@ -1299,7 +1299,7 @@
 	@param dlt The data link type of the packet.
 	@param packet The packet received.
 	@param header An optional pointer to a header that will be prepended.
-	@param headerlen If the header was specified, the length of the header.
+	@param header_len If the header was specified, the length of the header.
  */
 extern void bpf_tap_in(ifnet_t interface, u_int32_t dlt, mbuf_t packet,
     void *header, size_t header_len);
@@ -1313,7 +1313,7 @@
 	@param dlt The data link type of the packet.
 	@param packet The packet received.
 	@param header An optional pointer to a header that will be prepended.
-	@param headerlen If the header was specified, the length of the header.
+	@param header_len If the header was specified, the length of the header.
  */
 extern void bpf_tap_out(ifnet_t interface, u_int32_t dlt, mbuf_t packet,
     void *header, size_t header_len);
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/net/dlil.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/net/dlil.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/net/dlil.h	2015-08-27 01:55:21.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/net/dlil.h	2016-06-03 22:55:07.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 1999-2013 Apple Inc. All rights reserved.
+ * Copyright (c) 1999-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  *
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/net/if.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/net/if.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/net/if.h	2015-08-27 01:55:21.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/net/if.h	2016-06-03 22:55:07.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2000-2015 Apple Inc. All rights reserved.
+ * Copyright (c) 2000-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  *
@@ -64,47 +64,13 @@
 #define	_NET_IF_H_
 
 #include <sys/cdefs.h>
+#include <net/net_kev.h>
 
 #define	IF_NAMESIZE	16
 
 #if !defined(_POSIX_C_SOURCE) || defined(_DARWIN_C_SOURCE)
 #include <sys/appleapiopts.h>
 #ifdef __APPLE__
-/*
- * Define Data-Link event subclass, and associated
- * events.
- */
-
-#define	KEV_DL_SUBCLASS 2
-
-#define	KEV_DL_SIFFLAGS				1
-#define	KEV_DL_SIFMETRICS			2
-#define	KEV_DL_SIFMTU				3
-#define	KEV_DL_SIFPHYS				4
-#define	KEV_DL_SIFMEDIA				5
-#define	KEV_DL_SIFGENERIC			6
-#define	KEV_DL_ADDMULTI				7
-#define	KEV_DL_DELMULTI				8
-#define	KEV_DL_IF_ATTACHED			9
-#define	KEV_DL_IF_DETACHING			10
-#define	KEV_DL_IF_DETACHED			11
-#define	KEV_DL_LINK_OFF				12
-#define	KEV_DL_LINK_ON				13
-#define	KEV_DL_PROTO_ATTACHED			14
-#define	KEV_DL_PROTO_DETACHED			15
-#define	KEV_DL_LINK_ADDRESS_CHANGED		16
-#define	KEV_DL_WAKEFLAGS_CHANGED		17
-#define	KEV_DL_IF_IDLE_ROUTE_REFCNT		18
-#define	KEV_DL_IFCAP_CHANGED			19
-#define	KEV_DL_LINK_QUALITY_METRIC_CHANGED	20
-#define	KEV_DL_NODE_PRESENCE			21
-#define	KEV_DL_NODE_ABSENCE			22
-#define	KEV_DL_MASTER_ELECTED			23
-#define	KEV_DL_ISSUES				24
-#define	KEV_DL_IFDELEGATE_CHANGED		25
-#define	KEV_DL_AWDL_RESTRICTED			26
-#define	KEV_DL_AWDL_UNRESTRICTED		27
-#define	KEV_DL_RRC_STATE_CHANGED		28
 
 #include <net/if_var.h>
 #include <sys/types.h>
@@ -167,12 +133,16 @@
 #define	IFCAP_LRO		0x00080	/* can do Large Receive Offload */
 #define	IFCAP_AV		0x00100	/* can do 802.1 AV Bridging */
 #define	IFCAP_TXSTATUS		0x00200	/* can return linklevel xmit status */
+#define	IFCAP_SKYWALK		0x00400	/* Skywalk mode supported/enabled */
+#define	IFCAP_HW_TIMESTAMP	0x00800	/* Time stamping in hardware */
+#define	IFCAP_SW_TIMESTAMP	0x01000	/* Time stamping in software */
 
 #define	IFCAP_HWCSUM	(IFCAP_RXCSUM | IFCAP_TXCSUM)
 #define	IFCAP_TSO	(IFCAP_TSO4 | IFCAP_TSO6)
 
 #define	IFCAP_VALID (IFCAP_HWCSUM | IFCAP_TSO | IFCAP_LRO | IFCAP_VLAN_MTU | \
-	IFCAP_VLAN_HWTAGGING | IFCAP_JUMBO_MTU | IFCAP_AV | IFCAP_TXSTATUS)
+	IFCAP_VLAN_HWTAGGING | IFCAP_JUMBO_MTU | IFCAP_AV | IFCAP_TXSTATUS | \
+	IFCAP_SKYWALK | IFCAP_SW_TIMESTAMP | IFCAP_HW_TIMESTAMP)
 
 #define	IFQ_MAXLEN	128
 #define	IFNET_SLOWHZ	1	/* granularity is 1 second */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/net/if_utun.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/net/if_utun.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/net/if_utun.h	2015-08-27 01:55:21.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/net/if_utun.h	2016-06-03 22:55:09.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2008-2013 Apple Inc. All rights reserved.
+ * Copyright (c) 2008-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  * 
@@ -31,7 +31,6 @@
 #define	_NET_IF_UTUN_H_
 
 
-
 /*
  * Name registered by the utun kernel control
  */
@@ -50,7 +49,8 @@
 #define UTUN_OPT_SET_DELEGATE_INTERFACE			15      /* set the delegate interface (char[]) */
 #define UTUN_OPT_MAX_PENDING_PACKETS			16      /* the number of packets that can be waiting to be read
 															from the control socket at a time */
-
+#define UTUN_OPT_ENABLE_CHANNEL				17
+#define UTUN_OPT_GET_CHANNEL_UUID			18
 /*
  * Flags for by UTUN_OPT_FLAGS 
  */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/net/if_var.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/net/if_var.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/net/if_var.h	2015-08-27 01:55:21.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/net/if_var.h	2016-06-03 22:55:09.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2000-2015 Apple Inc. All rights reserved.
+ * Copyright (c) 2000-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  *
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/net/kpi_interface.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/net/kpi_interface.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/net/kpi_interface.h	2015-08-27 01:55:22.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/net/kpi_interface.h	2016-06-03 22:55:10.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2004-2015 Apple Inc. All rights reserved.
+ * Copyright (c) 2004-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  *
@@ -58,7 +58,6 @@
 /*!
 	@enum Interface Families
 	@abstract Constants defining interface families.
-	@discussion
 	@constant IFNET_FAMILY_ANY Match interface of any family type.
 	@constant IFNET_FAMILY_LOOPBACK A software loopback interface.
 	@constant IFNET_FAMILY_ETHERNET An Ethernet interface.
@@ -107,7 +106,6 @@
 /*!
 	@enum BPF tap mode
 	@abstract Constants defining interface families.
-	@discussion
 	@constant BPF_MODE_DISABLED Disable bpf.
 	@constant BPF_MODE_INPUT Enable input only.
 	@constant BPF_MODE_OUTPUT Enable output only.
@@ -136,7 +134,6 @@
 /*!
 	@enum Interface Abilities
 	@abstract Constants defining interface offload support.
-	@discussion
 	@constant IFNET_CSUM_IP Hardware will calculate IPv4 checksums.
 	@constant IFNET_CSUM_TCP Hardware will calculate TCP checksums.
 	@constant IFNET_CSUM_UDP Hardware will calculate UDP checksums.
@@ -192,7 +189,9 @@
 	IFNET_MULTIPAGES	= 0x00100000,
 	IFNET_TSO_IPV4		= 0x00200000,
 	IFNET_TSO_IPV6		= 0x00400000,
-	IFNET_TX_STATUS		= 0x00800000
+	IFNET_TX_STATUS		= 0x00800000,
+	IFNET_HW_TIMESTAMP	= 0x01000000,
+	IFNET_SW_TIMESTAMP	= 0x02000000
 };
 /*!
 	@typedef ifnet_offload_t
@@ -242,8 +241,6 @@
 		you need to communicate with your kext using an ioctl, please
 		use SIOCSIFKPI and SIOCGIFKPI.
 	@param interface The interface the ioctl is being sent to.
-	@param proto_family The protocol family to handle the ioctl, may be
-		zero for no protocol_family.
 	@param cmd The ioctl command.
 	@param data A pointer to any data related to the ioctl.
  */
@@ -304,8 +301,6 @@
 	@discussion ifnet_event_func is called when an event occurs on a
 		specific interface.
 	@param interface The interface the event occurred on.
-	@param event_ptr Pointer to a kern_event structure describing the
-		event.
  */
 typedef void (*ifnet_event_func)(ifnet_t interface, const struct kev_msg *msg);
 
@@ -324,9 +319,9 @@
 		protocol's pre-output function.
 	@param frame_type The frame type as determined by the protocol's
 		pre-output function.
-	@param prepend_len The length of prepended bytes to the mbuf.
+	@discussion prepend_len The length of prepended bytes to the mbuf.
 		(ONLY used if KPI_INTERFACE_EMBEDDED is defined to 1)
-	@param postpend_len The length of the postpended bytes to the mbuf.
+	@discussion postpend_len The length of the postpended bytes to the mbuf.
 		(ONLY used if KPI_INTERFACE_EMBEDDED is defined to 1)
 	@result
 		If the result is zero, processing will continue normally.
@@ -390,7 +385,7 @@
 		To prevent an address from being added to your multicast list,
 		return EADDRNOTAVAIL. If you don't know how to parse/translate
 		the address, return EOPNOTSUPP.
-	@param The interface.
+	@param interface The interface.
 	@param mcast The multicast address.
 	@result
 		Zero upon success, EADDRNOTAVAIL on invalid multicast,
@@ -405,7 +400,7 @@
 		a specific protocol on a specific interface. This function is
 		registered on an interface using ifnet_attach_protocol.
 	@param ifp The interface the packet was received on.
-	@param protocol_family The protocol of the packet received.
+	@param protocol The protocol of the packet received.
 	@param packet The packet being input.
 	@param header The frame header.
 	@result
@@ -427,7 +422,7 @@
 		individual packet. The frame header can be retrieved using
 		mbuf_pkthdr_header.
 	@param ifp The interface the packet was received on.
-	@param protocol_family The protocol of the packet received.
+	@param protocol The protocol of the packet received.
 	@param packet The packet being input.
 	@result
 		If the result is zero, the caller will assume the packets were
@@ -445,7 +440,7 @@
 		opportunity to specify the media specific frame type and
 		destination.
 	@param ifp The interface the packet will be sent on.
-	@param protocol_family The protocol of the packet being sent
+	@param protocol The protocol of the packet being sent
 		(PF_INET/etc...).
 	@param packet The packet being sent.
 	@param dest The protocol level destination address.
@@ -467,8 +462,8 @@
 	@discussion proto_media_event is called to notify this layer of
 		interface specific events.
 	@param ifp The interface.
-	@param protocol_family The protocol family.
-	@param kev_msg The event.
+	@param protocol The protocol family.
+	@param event The event.
  */
 typedef void (*proto_media_event)(ifnet_t ifp, protocol_family_t protocol,
     const struct kev_msg *event);
@@ -488,7 +483,7 @@
 		you need to communicate with your kext using an ioctl, please
 		use SIOCSIFKPI and SIOCGIFKPI.
 	@param ifp The interface.
-	@param protocol_family The protocol family.
+	@param protocol The protocol family.
 	@param command The ioctl command.
 	@param argument The argument to the ioctl.
 	@result
@@ -502,7 +497,7 @@
 	@discussion proto_media_detached notifies you that your protocol
 		has been detached.
 	@param ifp The interface.
-	@param protocol_family The protocol family.
+	@param protocol The protocol family.
 	@result
 		See the discussion.
  */
@@ -530,8 +525,6 @@
 		function should inspect the parameters and transmit an arp
 		packet using the information passed in.
 	@param ifp The interface the arp packet should be sent on.
-	@param protocol_family The protocol family of the addresses
-		(PF_INET).
 	@param arpop The arp operation (usually ARPOP_REQUEST or
 		ARPOP_REPLY).
 	@param sender_hw The value to use for the sender hardware
@@ -1054,7 +1047,6 @@
 /*!
 	@enum Interface wake properties
 	@abstract Constants defining Interface wake properties.
-	@discussion
 	@constant IFNET_WAKE_ON_MAGIC_PACKET Wake on Magic Packet.
 */
 enum {
@@ -1427,7 +1419,7 @@
 		The one exception would be the case where a kext wants to zero
 		all of the counters.
 	@param interface The interface.
-	@param counts The new stats values.
+	@param stats The new stats values.
 	@result 0 on success otherwise the errno error.
  */
 extern errno_t ifnet_set_stat(ifnet_t interface,
@@ -1550,11 +1542,10 @@
 	@param interface The interface.
 	@param addr A buffer to copy the broadcast address in to.
 	@param bufferlen The length of the buffer at addr.
-	@param addr_len On return, the length of the broadcast address.
-	@param lladdr_len The length, in bytes, of the link layer address.
+	@param out_len On return, the length of the broadcast address.
  */
 extern errno_t ifnet_llbroadcast_copy_bytes(ifnet_t interface, void *addr,
-    size_t bufferlen, size_t *addr_len);
+    size_t bufferlen, size_t *out_len);
 
 
 /*!
@@ -1562,7 +1553,7 @@
 	@discussion Resolves a multicast address for an attached protocol to
 		a link-layer address. If a link-layer address is passed in, the
 		interface will verify that it is a valid multicast address.
-	@param interface The interface.
+	@param ifp The interface.
 	@param proto_addr A protocol address to be converted to a link-layer
 		address.
 	@param ll_addr Storage for the resulting link-layer address.
@@ -1626,7 +1617,7 @@
 		ifnet_free_multicast_list will decrement the reference counts
 		and free the array.
 	@param interface The interface.
-	@param multicasts A pointer to a NULL terminated array of references
+	@param addresses A pointer to a NULL terminated array of references
 		to the multicast addresses.
 	@result 0 on success otherwise the errno error.
  */
@@ -1639,7 +1630,6 @@
 		ifnet_get_multicast_list. Decrements the refcount on each
 		multicast address and frees the array.
 	@param multicasts An array of references to the multicast addresses.
-	@result 0 on success otherwise the errno error.
  */
 extern void ifnet_free_multicast_list(ifmultiaddr_t *multicasts);
 
@@ -1648,7 +1638,7 @@
 	@discussion Find an interface by the name including the unit number.
 		Caller must call ifnet_release on any non-null interface return
 		value.
-	@param name The name of the interface, including any unit number
+	@param ifname The name of the interface, including any unit number
 		(i.e. "en0").
 	@param interface A pointer to an interface reference. This will be
 		filled in if a matching interface is found.
@@ -1881,4 +1871,3 @@
 __END_DECLS
 
 #endif /* __KPI_INTERFACE__ */
-
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/net/kpi_protocol.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/net/kpi_protocol.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/net/kpi_protocol.h	2015-08-27 01:55:22.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/net/kpi_protocol.h	2016-06-03 22:55:10.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2008-2012 Apple Inc. All rights reserved.
+ * Copyright (c) 2008-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  *
@@ -80,7 +80,7 @@
 		interface. A typical protocol plumb function would fill out an
 		ifnet_attach_proto_param and call ifnet_attach_protocol.
 	@param ifp The interface the protocol should be attached to.
-	@param protocol_family The protocol that should be attached to the
+	@param protocol The protocol that should be attached to the
 		interface.
 	@result
 		A non-zero value of the attach failed.
@@ -93,7 +93,7 @@
 		from an interface. A typical unplumb function would call
 		ifnet_detach_protocol and perform any necessary cleanup.
 	@param ifp The interface the protocol should be detached from.
-	@param protocol_family The protocol that should be detached from the
+	@param protocol The protocol that should be detached from the
 		interface.
  */
 typedef void (*proto_unplumb_handler)(ifnet_t ifp, protocol_family_t protocol);
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/net/net_kev.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/net/net_kev.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/net/net_kev.h	1970-01-01 01:00:00.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/net/net_kev.h	2016-06-03 22:55:10.000000000 +0200
@@ -0,0 +1,93 @@
+/*
+ * Copyright (c) 2016 Apple Inc. All rights reserved.
+ *
+ * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
+ *
+ * This file contains Original Code and/or Modifications of Original Code
+ * as defined in and that are subject to the Apple Public Source License
+ * Version 2.0 (the 'License'). You may not use this file except in
+ * compliance with the License. The rights granted to you under the License
+ * may not be used to create, or enable the creation or redistribution of,
+ * unlawful or unlicensed copies of an Apple operating system, or to
+ * circumvent, violate, or enable the circumvention or violation of, any
+ * terms of an Apple operating system software license agreement.
+ *
+ * Please obtain a copy of the License at
+ * http://www.opensource.apple.com/apsl/ and read it before using this file.
+ *
+ * The Original Code and all software distributed under the License are
+ * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
+ * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
+ * INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
+ * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
+ * Please see the License for the specific language governing rights and
+ * limitations under the License.
+ *
+ * @APPLE_OSREFERENCE_LICENSE_HEADER_END@
+ */
+
+#ifndef _NET_NETKEV_H_
+#define _NET_NETKEV_H_
+
+/* Kernel event subclass identifiers for KEV_NETWORK_CLASS */
+#define	KEV_INET_SUBCLASS	1 	/* inet subclass */
+/* KEV_INET_SUBCLASS event codes */
+#define	KEV_INET_NEW_ADDR               1 /* Userland configured IP address */
+#define	KEV_INET_CHANGED_ADDR           2 /* Address changed event */
+#define	KEV_INET_ADDR_DELETED           3 /* IPv6 address was deleted */
+#define	KEV_INET_SIFDSTADDR             4 /* Dest. address was set */
+#define	KEV_INET_SIFBRDADDR             5 /* Broadcast address was set */
+#define	KEV_INET_SIFNETMASK             6 /* Netmask was set */
+#define	KEV_INET_ARPCOLLISION           7 /* ARP collision detected */
+#ifdef __APPLE_API_PRIVATE
+#define	KEV_INET_PORTINUSE              8 /* use ken_in_portinuse */
+#endif
+#define	KEV_INET_ARPRTRFAILURE          9 /* ARP resolution failed for router */
+#define	KEV_INET_ARPRTRALIVE            10 /* ARP resolution succeeded for router */
+
+#define	KEV_DL_SUBCLASS	2		/* Data Link subclass */
+/*
+ * Define Data-Link event subclass, and associated
+ * events.
+ */
+#define	KEV_DL_SIFFLAGS                         1
+#define	KEV_DL_SIFMETRICS                       2
+#define	KEV_DL_SIFMTU                           3
+#define	KEV_DL_SIFPHYS                          4
+#define	KEV_DL_SIFMEDIA                         5
+#define	KEV_DL_SIFGENERIC                       6
+#define	KEV_DL_ADDMULTI                         7
+#define	KEV_DL_DELMULTI                         8
+#define	KEV_DL_IF_ATTACHED                      9
+#define	KEV_DL_IF_DETACHING                     10
+#define	KEV_DL_IF_DETACHED                      11
+#define	KEV_DL_LINK_OFF                         12
+#define	KEV_DL_LINK_ON                          13
+#define	KEV_DL_PROTO_ATTACHED                   14
+#define	KEV_DL_PROTO_DETACHED                   15
+#define	KEV_DL_LINK_ADDRESS_CHANGED             16
+#define	KEV_DL_WAKEFLAGS_CHANGED                17
+#define	KEV_DL_IF_IDLE_ROUTE_REFCNT             18
+#define	KEV_DL_IFCAP_CHANGED                    19
+#define	KEV_DL_LINK_QUALITY_METRIC_CHANGED      20
+#define	KEV_DL_NODE_PRESENCE                    21
+#define	KEV_DL_NODE_ABSENCE                     22
+#define	KEV_DL_MASTER_ELECTED                   23
+#define	KEV_DL_ISSUES                           24
+#define	KEV_DL_IFDELEGATE_CHANGED               25
+#define	KEV_DL_AWDL_RESTRICTED                  26
+#define	KEV_DL_AWDL_UNRESTRICTED                27
+#define	KEV_DL_RRC_STATE_CHANGED                28
+#define	KEV_DL_QOS_MODE_CHANGED			29
+
+
+#define	KEV_INET6_SUBCLASS      6       /* inet6 subclass */
+/* KEV_INET6_SUBCLASS event codes */
+#define	KEV_INET6_NEW_USER_ADDR         1 /* Userland configured IPv6 address */
+#define	KEV_INET6_CHANGED_ADDR          2 /* Address changed event (future) */
+#define	KEV_INET6_ADDR_DELETED          3 /* IPv6 address was deleted */
+#define	KEV_INET6_NEW_LL_ADDR           4 /* Autoconf LL address appeared */
+#define	KEV_INET6_NEW_RTADV_ADDR        5 /* Autoconf address has appeared */
+#define	KEV_INET6_DEFROUTER             6 /* Default router detected */
+
+#endif /* _NET_NETKEV_H_ */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/net/route.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/net/route.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/net/route.h	2015-08-27 01:55:22.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/net/route.h	2016-06-03 22:55:10.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2000-2015 Apple Inc. All rights reserved.
+ * Copyright (c) 2000-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  *
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/netinet/icmp6.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/netinet/icmp6.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/netinet/icmp6.h	2015-08-27 01:55:22.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/netinet/icmp6.h	2016-06-03 22:55:01.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2000-2013 Apple Inc. All rights reserved.
+ * Copyright (c) 2000-2015 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  * 
@@ -309,6 +309,7 @@
 #define ND_OPT_PREFIX_INFORMATION	3
 #define ND_OPT_REDIRECTED_HEADER	4
 #define ND_OPT_MTU			5
+#define ND_OPT_NONCE			14	/* RFC 3971 */
 #define ND_OPT_RDNSS			25	/* RFC 5006 */
 #define ND_OPT_DNSSL			31	/* RFC 6106 */
 
@@ -328,6 +329,17 @@
 #define ND_OPT_PI_FLAG_ONLINK		0x80
 #define ND_OPT_PI_FLAG_AUTO		0x40
 
+#define	ND_OPT_NONCE_LEN	((1 * 8) - 2)
+#if ((ND_OPT_NONCE_LEN + 2) % 8) != 0
+#error "(ND_OPT_NONCE_LEN + 2) must be a multiple of 8."
+#endif
+
+struct nd_opt_nonce {		/* nonce option */
+	u_int8_t	nd_opt_nonce_type;
+	u_int8_t	nd_opt_nonce_len;
+	u_int8_t	nd_opt_nonce[ND_OPT_NONCE_LEN];
+} __attribute__((__packed__));
+
 struct nd_opt_rd_hdr {		/* redirected header */
 	u_int8_t	nd_opt_rh_type;
 	u_int8_t	nd_opt_rh_len;
@@ -616,6 +628,7 @@
 	u_quad_t icp6s_badrs;		/* bad router advertisement */
 	u_quad_t icp6s_badra;		/* bad router advertisement */
 	u_quad_t icp6s_badredirect;	/* bad redirect message */
+	u_quad_t icp6s_rfc6980_drop;    /* NDP packet dropped based on RFC 6980 */
 };
 
 /*
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/netinet/in_pcb.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/netinet/in_pcb.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/netinet/in_pcb.h	2015-08-27 01:55:23.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/netinet/in_pcb.h	2016-06-03 22:55:02.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2000-2014 Apple Inc. All rights reserved.
+ * Copyright (c) 2000-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  *
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/netinet/in_var.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/netinet/in_var.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/netinet/in_var.h	2015-08-27 01:55:23.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/netinet/in_var.h	2016-06-03 22:55:02.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2000-2015 Apple Inc. All rights reserved.
+ * Copyright (c) 2000-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  *
@@ -66,6 +66,7 @@
 
 #include <sys/queue.h>
 #include <sys/kern_event.h>
+#include <net/net_kev.h>
 
 
 struct in_aliasreq {
@@ -114,25 +115,6 @@
 };
 #endif /* __APPLE_API_PRIVATE */
 
-/*
- * Define inet event subclass and specific inet events.
- */
-#define	KEV_INET_SUBCLASS		1 /* inet subclass identifier */
-
-#define	KEV_INET_NEW_ADDR		1 /* Userland configured IP address */
-#define	KEV_INET_CHANGED_ADDR		2 /* Address changed event */
-#define	KEV_INET_ADDR_DELETED		3 /* IPv6 address was deleted */
-#define	KEV_INET_SIFDSTADDR		4 /* Dest. address was set */
-#define	KEV_INET_SIFBRDADDR		5 /* Broadcast address was set */
-#define	KEV_INET_SIFNETMASK		6 /* Netmask was set */
-#define	KEV_INET_ARPCOLLISION		7 /* ARP collision detected */
-#ifdef __APPLE_API_PRIVATE
-#define	KEV_INET_PORTINUSE		8 /* use ken_in_portinuse */
-#endif
-#define	KEV_INET_ARPRTRFAILURE		9 /* ARP resolution failed for router */
-#define	KEV_INET_ARPRTRALIVE		10 /* ARP resolution succeeded for 
-					      router */
-
 /* INET6 stuff */
 #include <netinet6/in6_var.h>
 #endif /* _NETINET_IN_VAR_H_ */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/netinet/ip.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/netinet/ip.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/netinet/ip.h	2015-08-27 01:55:23.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/netinet/ip.h	2016-06-03 22:55:02.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2000-2012 Apple Inc. All rights reserved.
+ * Copyright (c) 2000-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  * 
@@ -127,6 +127,8 @@
 #define	IPTOS_ECT		0x02
 #endif
 
+#define	IPTOS_DSCP_SHIFT	2
+
 /*
  * ECN (Explicit Congestion Notification) codepoints in RFC3168
  * mapped to the lower 2 bits of the TOS field.
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/netinet/ip6.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/netinet/ip6.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/netinet/ip6.h	2015-08-27 01:55:23.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/netinet/ip6.h	2016-06-03 22:55:02.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2000-2013 Apple Inc. All rights reserved.
+ * Copyright (c) 2000-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  * 
@@ -140,6 +140,12 @@
 #endif
 
 /*
+ * To access the 6 bits of the DSCP value in the 32 bits ip6_flow field
+ */
+#define	IP6FLOW_DSCP_MASK	0x0fc00000
+#define	IP6FLOW_DSCP_SHIFT	22
+
+/*
  * Extension Headers
  */
 
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/netinet/ip_var.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/netinet/ip_var.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/netinet/ip_var.h	2015-08-27 01:55:23.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/netinet/ip_var.h	2016-06-03 22:55:02.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2000-2014 Apple Inc. All rights reserved.
+ * Copyright (c) 2000-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  *
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/netinet/tcp.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/netinet/tcp.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/netinet/tcp.h	2015-08-27 01:55:23.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/netinet/tcp.h	2016-06-03 22:55:02.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2000-2014 Apple Inc. All rights reserved.
+ * Copyright (c) 2000-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  *
@@ -252,18 +252,21 @@
         u_int32_t	tcpi_srtt;      /* average RTT in ms */
         u_int32_t	tcpi_rttvar;    /* RTT variance */
 	u_int32_t
-			/* Client-side information */
 			tcpi_tfo_cookie_req:1, /* Cookie requested? */
 			tcpi_tfo_cookie_rcv:1, /* Cookie received? */
 			tcpi_tfo_syn_loss:1,   /* Fallback to reg. TCP after SYN-loss */
 			tcpi_tfo_syn_data_sent:1, /* SYN+data has been sent out */
 			tcpi_tfo_syn_data_acked:1, /* SYN+data has been fully acknowledged */
-			/* And the following are for server-side information (must be set on the listener socket) */
 			tcpi_tfo_syn_data_rcv:1, /* Server received SYN+data with a valid cookie */
 			tcpi_tfo_cookie_req_rcv:1, /* Server received cookie-request */
 			tcpi_tfo_cookie_sent:1, /* Server announced cookie */
 			tcpi_tfo_cookie_invalid:1, /* Server received an invalid cookie */
-			__pad2:23;
+			tcpi_tfo_cookie_wrong:1, /* Our sent cookie was wrong */
+			tcpi_tfo_no_cookie_rcv:1, /* We did not receive a cookie upon our request */
+			tcpi_tfo_heuristics_disable:1, /* TFO-heuristics disabled it */
+			tcpi_tfo_send_blackhole:1, /* A sending-blackhole got detected */
+			tcpi_tfo_recv_blackhole:1, /* A receiver-blackhole got detected */
+			__pad2:18;
         u_int64_t	tcpi_txpackets __attribute__((aligned(8)));
         u_int64_t	tcpi_txbytes __attribute__((aligned(8)));
         u_int64_t	tcpi_txretransmitbytes __attribute__((aligned(8)));
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/netinet/tcp_var.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/netinet/tcp_var.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/netinet/tcp_var.h	2016-02-27 07:06:53.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/netinet/tcp_var.h	2016-06-03 22:55:02.000000000 +0200
@@ -1,8 +1,8 @@
 /*
- * Copyright (c) 2000-2015 Apple Inc. All rights reserved.
+ * Copyright (c) 2000-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
- * 
+ *
  * This file contains Original Code and/or Modifications of Original Code
  * as defined in and that are subject to the Apple Public Source License
  * Version 2.0 (the 'License'). You may not use this file except in
@@ -11,10 +11,10 @@
  * unlawful or unlicensed copies of an Apple operating system, or to
  * circumvent, violate, or enable the circumvention or violation of, any
  * terms of an Apple operating system software license agreement.
- * 
+ *
  * Please obtain a copy of the License at
  * http://www.opensource.apple.com/apsl/ and read it before using this file.
- * 
+ *
  * The Original Code and all software distributed under the License are
  * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
  * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
@@ -22,7 +22,7 @@
  * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
  * Please see the License for the specific language governing rights and
  * limitations under the License.
- * 
+ *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_END@
  */
 /*
@@ -75,7 +75,7 @@
 #define _TCPCB_LIST_HEAD(name, type)	\
 struct name {				\
 	u_int32_t	lh_first;	\
-};
+}
 #else
 #define _TCPCB_PTR(x)			x
 #define _TCPCB_LIST_HEAD(name, type)	LIST_HEAD(name, type)
@@ -400,6 +400,13 @@
 	u_int32_t	tcps_tfo_syn_data_acked;/* SYN+data has been acknowledged */
 	u_int32_t	tcps_tfo_syn_loss;	/* SYN+TFO has been lost and we fallback */
 	u_int32_t	tcps_tfo_blackhole;	/* TFO got blackholed by a middlebox. */
+	u_int32_t	tcps_tfo_cookie_wrong;	/* TFO-cookie we sent was wrong */
+	u_int32_t	tcps_tfo_no_cookie_rcv;	/* We asked for a cookie but didn't get one */
+	u_int32_t	tcps_tfo_heuristics_disable; /* TFO got disabled due to heuristics */
+	u_int32_t	tcps_tfo_sndblackhole;	/* TFO got blackholed in the sending direction */
+	u_int32_t	tcps_mss_to_default;	/* Change MSS to default using link status report */
+	u_int32_t	tcps_mss_to_medium;	/* Change MSS to medium using link status report */
+	u_int32_t	tcps_mss_to_low;	/* Change MSS to low using link status report */
 };
 
 
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/netinet/udp_var.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/netinet/udp_var.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/netinet/udp_var.h	2015-08-27 01:55:24.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/netinet/udp_var.h	2016-06-03 22:55:03.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2008-2013 Apple Inc. All rights reserved.
+ * Copyright (c) 2008-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  * 
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/netinet6/in6_var.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/netinet6/in6_var.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/netinet6/in6_var.h	2015-08-27 01:55:22.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/netinet6/in6_var.h	2016-06-03 22:55:02.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2000-2015 Apple Inc. All rights reserved.
+ * Copyright (c) 2000-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  *
@@ -93,6 +93,7 @@
 #ifndef _NETINET6_IN6_VAR_H_
 #define	_NETINET6_IN6_VAR_H_
 #include <sys/appleapiopts.h>
+#include <net/net_kev.h>
 
 #include <netinet6/scope6_var.h>
 #include <sys/kern_event.h>
@@ -153,6 +154,7 @@
 	u_quad_t ifs6_reass_ok;		/* # of reassembled packets */
 					/* NOTE: this is # after reass */
 					/* NOTE: increment on final dst if */
+	u_quad_t ifs6_atmfrag_rcvd;	/* # of atomic fragments received */
 	u_quad_t ifs6_reass_fail;	/* # of reass failures */
 					/* NOTE: may not be packet count */
 					/* NOTE: increment on final dst if */
@@ -374,18 +376,6 @@
 	uint8_t	ia_mac[ETHER_ADDR_LEN];
 };
 
-/*
- * Define inet6 event subclass and specific inet6 events.
- */
-#define	KEV_INET6_SUBCLASS		6 /* inet6 subclass identifier */
-
-#define	KEV_INET6_NEW_USER_ADDR		1 /* Userland configured IPv6 address */
-#define	KEV_INET6_CHANGED_ADDR		2 /* Address changed event (future) */
-#define	KEV_INET6_ADDR_DELETED		3 /* IPv6 address was deleted */
-#define	KEV_INET6_NEW_LL_ADDR		4 /* Autoconf LL address appeared */
-#define	KEV_INET6_NEW_RTADV_ADDR	5 /* Autoconf address has appeared */
-#define	KEV_INET6_DEFROUTER		6 /* Default router detected */
-
 
 #define	SIOCSIFADDR_IN6		 _IOW('i', 12, struct in6_ifreq)
 #define	SIOCGIFADDR_IN6		_IOWR('i', 33, struct in6_ifreq)
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/netinet6/nd6.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/netinet6/nd6.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/netinet6/nd6.h	2015-08-27 01:55:22.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/netinet6/nd6.h	2016-06-03 22:55:02.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2000-2015 Apple Inc. All rights reserved.
+ * Copyright (c) 2000-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  *
@@ -57,6 +57,7 @@
 #ifndef _NETINET6_ND6_H_
 #define	_NETINET6_ND6_H_
 #include <sys/appleapiopts.h>
+#include <net/net_kev.h>
 
 /* see net/route.h, or net/if_inarp.h */
 #ifndef RTF_ANNOUNCE
@@ -103,6 +104,7 @@
 #define	ND6_IFF_PROXY_PREFIXES		0x20
 #define	ND6_IFF_IGNORE_NA		0x40
 #define	ND6_IFF_REPLICATED		0x100	/* sleep proxy registered */
+#define	ND6_IFF_DAD			0x200	/* Perform DAD on the interface */
 
 struct in6_nbrinfo {
 	char ifname[IFNAMSIZ];	/* if name, e.g. "en0" */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/os/base.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/os/base.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/os/base.h	1970-01-01 01:00:00.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/os/base.h	2016-06-03 22:54:59.000000000 +0200
@@ -0,0 +1,240 @@
+/*
+ * Copyright (c) 2008-2016 Apple Inc. All rights reserved.
+ *
+ * @APPLE_APACHE_LICENSE_HEADER_START@
+ *
+ * Licensed under the Apache License, Version 2.0 (the "License");
+ * you may not use this file except in compliance with the License.
+ * You may obtain a copy of the License at
+ *
+ *     http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ *
+ * @APPLE_APACHE_LICENSE_HEADER_END@
+ */
+
+#ifndef __OS_BASE__
+#define __OS_BASE__
+
+#include <sys/cdefs.h>
+
+#ifndef __has_builtin
+#define __has_builtin(x) 0
+#endif
+#ifndef __has_include
+#define __has_include(x) 0
+#endif
+#ifndef __has_feature
+#define __has_feature(x) 0
+#endif
+#ifndef __has_attribute
+#define __has_attribute(x) 0
+#endif
+#ifndef __has_extension
+#define __has_extension(x) 0
+#endif
+
+#undef OS_INLINE // <sys/_types/_os_inline.h>
+#if __GNUC__
+#define OS_NORETURN __attribute__((__noreturn__))
+#define OS_NOTHROW __attribute__((__nothrow__))
+#define OS_NONNULL1 __attribute__((__nonnull__(1)))
+#define OS_NONNULL2 __attribute__((__nonnull__(2)))
+#define OS_NONNULL3 __attribute__((__nonnull__(3)))
+#define OS_NONNULL4 __attribute__((__nonnull__(4)))
+#define OS_NONNULL5 __attribute__((__nonnull__(5)))
+#define OS_NONNULL6 __attribute__((__nonnull__(6)))
+#define OS_NONNULL7 __attribute__((__nonnull__(7)))
+#define OS_NONNULL8 __attribute__((__nonnull__(8)))
+#define OS_NONNULL9 __attribute__((__nonnull__(9)))
+#define OS_NONNULL10 __attribute__((__nonnull__(10)))
+#define OS_NONNULL11 __attribute__((__nonnull__(11)))
+#define OS_NONNULL12 __attribute__((__nonnull__(12)))
+#define OS_NONNULL13 __attribute__((__nonnull__(13)))
+#define OS_NONNULL14 __attribute__((__nonnull__(14)))
+#define OS_NONNULL15 __attribute__((__nonnull__(15)))
+#define OS_NONNULL_ALL __attribute__((__nonnull__))
+#define OS_SENTINEL __attribute__((__sentinel__))
+#define OS_PURE __attribute__((__pure__))
+#define OS_CONST __attribute__((__const__))
+#define OS_WARN_RESULT __attribute__((__warn_unused_result__))
+#define OS_MALLOC __attribute__((__malloc__))
+#define OS_USED __attribute__((__used__))
+#define OS_UNUSED __attribute__((__unused__))
+#define OS_COLD __attribute__((__cold__))
+#define OS_WEAK __attribute__((__weak__))
+#define OS_WEAK_IMPORT __attribute__((__weak_import__))
+#define OS_NOINLINE __attribute__((__noinline__))
+#define OS_ALWAYS_INLINE __attribute__((__always_inline__))
+#define OS_TRANSPARENT_UNION __attribute__((__transparent_union__))
+#define OS_ALIGNED(n) __attribute__((__aligned__((n))))
+#define OS_FORMAT_PRINTF(x,y) __attribute__((__format__(printf,x,y)))
+#define OS_EXPORT extern __attribute__((__visibility__("default")))
+#define OS_INLINE static __inline__
+#define OS_EXPECT(x, v) __builtin_expect((x), (v))
+#else
+#define OS_NORETURN
+#define OS_NOTHROW
+#define OS_NONNULL1
+#define OS_NONNULL2
+#define OS_NONNULL3
+#define OS_NONNULL4
+#define OS_NONNULL5
+#define OS_NONNULL6
+#define OS_NONNULL7
+#define OS_NONNULL8
+#define OS_NONNULL9
+#define OS_NONNULL10
+#define OS_NONNULL11
+#define OS_NONNULL12
+#define OS_NONNULL13
+#define OS_NONNULL14
+#define OS_NONNULL15
+#define OS_NONNULL_ALL
+#define OS_SENTINEL
+#define OS_PURE
+#define OS_CONST
+#define OS_WARN_RESULT
+#define OS_MALLOC
+#define OS_USED
+#define OS_UNUSED
+#define OS_COLD
+#define OS_WEAK
+#define OS_WEAK_IMPORT
+#define OS_NOINLINE
+#define OS_ALWAYS_INLINE
+#define OS_TRANSPARENT_UNION
+#define OS_ALIGNED(n)
+#define OS_FORMAT_PRINTF(x,y)
+#define OS_EXPORT extern
+#define OS_INLINE static inline
+#define OS_EXPECT(x, v) (x)
+#endif
+
+#if __has_attribute(noescape)
+#define OS_NOESCAPE __attribute__((__noescape__))
+#else
+#define OS_NOESCAPE
+#endif
+
+#if __has_feature(assume_nonnull)
+#define OS_ASSUME_NONNULL_BEGIN _Pragma("clang assume_nonnull begin")
+#define OS_ASSUME_NONNULL_END   _Pragma("clang assume_nonnull end")
+#else
+#define OS_ASSUME_NONNULL_BEGIN
+#define OS_ASSUME_NONNULL_END
+#endif
+
+#if __has_builtin(__builtin_assume)
+#define OS_COMPILER_CAN_ASSUME(expr) __builtin_assume(expr)
+#else
+#define OS_COMPILER_CAN_ASSUME(expr) ((void)(expr))
+#endif
+
+#if __has_extension(attribute_overloadable)
+#define OS_OVERLOADABLE __attribute__((__overloadable__))
+#else
+#define OS_OVERLOADABLE
+#endif
+
+#if __has_feature(objc_fixed_enum) || __has_extension(cxx_strong_enums)
+#define OS_ENUM(_name, _type, ...) \
+		typedef enum : _type { __VA_ARGS__ } _name##_t
+#else
+#define OS_ENUM(_name, _type, ...) \
+		enum { __VA_ARGS__ }; typedef _type _name##_t
+#endif
+
+#if __has_feature(attribute_availability_swift)
+// equivalent to __SWIFT_UNAVAILABLE from Availability.h
+#define OS_SWIFT_UNAVAILABLE(_msg) \
+		__attribute__((__availability__(swift, unavailable, message=_msg)))
+#else
+#define OS_SWIFT_UNAVAILABLE(_msg)
+#endif
+
+#if __has_attribute(swift_private)
+# define OS_REFINED_FOR_SWIFT __attribute__((__swift_private__))
+#else
+# define OS_REFINED_FOR_SWIFT
+#endif
+
+#if __has_attribute(swift_name)
+# define OS_SWIFT_NAME(_name) __attribute__((__swift_name__(#_name)))
+#else
+# define OS_SWIFT_NAME(_name)
+#endif
+
+#define __OS_STRINGIFY(s) #s
+#define OS_STRINGIFY(s) __OS_STRINGIFY(s)
+#define __OS_CONCAT(x, y) x ## y
+#define OS_CONCAT(x, y) __OS_CONCAT(x, y)
+
+#ifdef __GNUC__
+#define os_prevent_tail_call_optimization()  __asm__("")
+#define os_is_compile_time_constant(expr)  __builtin_constant_p(expr)
+#define os_compiler_barrier()  __asm__ __volatile__("" ::: "memory")
+#else
+#define os_prevent_tail_call_optimization()  do { } while (0)
+#define os_is_compile_time_constant(expr)  0
+#define os_compiler_barrier()  do { } while (0)
+#endif
+
+#if __has_attribute(not_tail_called)
+#define OS_NOT_TAIL_CALLED __attribute__((__not_tail_called__))
+#else
+#define OS_NOT_TAIL_CALLED
+#endif
+
+typedef void (*os_function_t)(void *_Nullable);
+
+#ifdef __BLOCKS__
+/*!
+ * @typedef os_block_t
+ *
+ * @abstract
+ * Generic type for a block taking no arguments and returning no value.
+ *
+ * @discussion
+ * When not building with Objective-C ARC, a block object allocated on or
+ * copied to the heap must be released with a -[release] message or the
+ * Block_release() function.
+ *
+ * The declaration of a block literal allocates storage on the stack.
+ * Therefore, this is an invalid construct:
+ * <code>
+ * os_block_t block;
+ * if (x) {
+ *     block = ^{ printf("true\n"); };
+ * } else {
+ *     block = ^{ printf("false\n"); };
+ * }
+ * block(); // unsafe!!!
+ * </code>
+ *
+ * What is happening behind the scenes:
+ * <code>
+ * if (x) {
+ *     struct Block __tmp_1 = ...; // setup details
+ *     block = &__tmp_1;
+ * } else {
+ *     struct Block __tmp_2 = ...; // setup details
+ *     block = &__tmp_2;
+ * }
+ * </code>
+ *
+ * As the example demonstrates, the address of a stack variable is escaping the
+ * scope in which it is allocated. That is a classic C bug.
+ *
+ * Instead, the block literal must be copied to the heap with the Block_copy()
+ * function or by sending it a -[copy] message.
+ */
+typedef void (^os_block_t)(void);
+#endif
+
+#endif // __OS_BASE__
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/os/log.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/os/log.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/os/log.h	1970-01-01 01:00:00.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/os/log.h	2016-06-03 22:54:59.000000000 +0200
@@ -0,0 +1,501 @@
+/*
+ * Copyright (c) 2015 Apple Inc. All rights reserved.
+ *
+ * @APPLE_LICENSE_HEADER_START@
+ *
+ * This file contains Original Code and/or Modifications of Original Code
+ * as defined in and that are subject to the Apple Public Source License
+ * Version 2.0 (the 'License'). You may not use this file except in
+ * compliance with the License. Please obtain a copy of the License at
+ * http://www.opensource.apple.com/apsl/ and read it before using this
+ * file.
+ *
+ * The Original Code and all software distributed under the License are
+ * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
+ * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
+ * INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
+ * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
+ * Please see the License for the specific language governing rights and
+ * limitations under the License.
+ *
+ * @APPLE_LICENSE_HEADER_END@
+ */
+
+#ifndef __os_log_h
+#define __os_log_h
+
+#include <os/object.h>
+#include <stdint.h>
+#include <stdbool.h>
+
+#ifndef __has_attribute
+#define __has_attribute(x) 0
+#endif
+
+#ifndef __has_builtin
+#define __has_builtin(x) 0
+#endif
+
+#if __has_attribute(not_tail_called)
+#define OS_LOG_NOTAILCALL __attribute__((not_tail_called))
+#define OS_LOG_NOTAILCALL_MARKER
+#else
+#define OS_LOG_NOTAILCALL
+#define OS_LOG_NOTAILCALL_MARKER __asm__("")
+#endif
+
+__BEGIN_DECLS
+
+extern void *__dso_handle;
+
+OS_ALWAYS_INLINE static inline void _os_log_verify_format_str(__unused const char *msg, ...) __attribute__((format(os_trace, 1, 2)));
+OS_ALWAYS_INLINE static inline void _os_log_verify_format_str(__unused const char *msg, ...) { /* placeholder */ }
+
+#if OS_OBJECT_USE_OBJC
+OS_OBJECT_DECL(os_log);
+#else
+typedef struct os_log_s *os_log_t;
+#endif /* OS_OBJECT_USE_OBJC */
+
+/*!
+ * @const OS_LOG_DISABLED
+ *
+ * @discussion
+ * Use this to disable a specific log message.
+ */
+#define OS_LOG_DISABLED NULL
+
+/*!
+ * @const OS_LOG_DEFAULT
+ *
+ * @discussion
+ * Use this to log a message in accordance with current system settings.
+ */
+#define OS_LOG_DEFAULT OS_OBJECT_GLOBAL_OBJECT(os_log_t, _os_log_default)
+__OSX_AVAILABLE_STARTING(__MAC_10_12,__IPHONE_10_0)
+OS_EXPORT
+struct os_log_s _os_log_default;
+
+/*!
+ * @enum os_log_type_t
+ *
+ * @discussion
+ * Supported log message types.
+ *
+ * @constant OS_LOG_TYPE_DEFAULT
+ * Equivalent type for "os_log()" messages, i.e., default messages that are always
+ * captured to memory or disk.
+ *
+ * @constant OS_LOG_TYPE_INFO
+ * Equivalent type for "os_log_info()" messages, i.e., Additional informational messages.
+ *
+ * @constant OS_LOG_TYPE_DEBUG
+ * Equivalent type for "os_log_debug()" messages, i.e., Debug messages.
+ *
+ * @constant OS_LOG_TYPE_ERROR
+ * Equivalent type for "os_log_error()" messages, i.e., local process error messages.
+ *
+ * @constant OS_LOG_TYPE_FAULT
+ * Equivalent type for "os_log_fault()" messages, i.e., a system error that involves
+ * potentially more than one process, usually used by daemons and services.
+ */
+OS_ENUM(os_log_type, uint8_t,
+        OS_LOG_TYPE_DEFAULT = 0x00,
+        OS_LOG_TYPE_INFO    = 0x01,
+        OS_LOG_TYPE_DEBUG   = 0x02,
+        OS_LOG_TYPE_ERROR   = 0x10,
+        OS_LOG_TYPE_FAULT   = 0x11);
+
+/*!
+ * @function os_log_create
+ *
+ * @abstract
+ * Creates a log object to be used with other log related functions.
+ *
+ * @discussion
+ * Creates a log object to be used with other log related functions.  The
+ * log object serves two purposes:  (1) tag related messages by subsystem
+ * and category name for easy filtering, and (2) control logging system
+ * behavior for messages.
+ *
+ * A log object may customize logging system behavior for its messages by
+ * adding a configuration file in /Library/LogPreferences. Most options 
+ * accept 3 values: "Default", "Yes" or "No" as strings, where "Default"
+ * signifies follow system behavior for the level of messages.
+ *
+ * For log:
+ *
+ *      os_log_create("com.company.mysubsystem", "connections");
+ *
+ * System-provided preferences are located in /System/Library/LogPreferences/<subsystem>.plist
+ *
+ *	<dict>
+ *
+ *          <!-- Default options applied to message types in each category, which can be overriden. -->
+ *          <key>DEFAULT-OPTIONS</key>
+ *          <dict>
+ *              <key>Enabled</key>              <!-- Enabled state follows system defaults -->
+ *              <string>Default</string>
+ *              <key>Persist</key>              <!-- Do not persist to disk, use memory-only buffer if enabled -->
+ *              <string>No</string>
+ *              <key>TTL</key>          	<!-- Follow system default behavior if persistence is enabled -->
+ *              <string>Default</string>        <!-- Can specify in days with "d" or hours "h" (e.g., "4h" = 4 hours) -->
+ *          </dict>
+ *
+ *          <!-- category named connections -->
+ *          <key>connections</key>
+ *          <dict>
+ *
+ *              <!-- Options that control "os_log()" behavior.  The "Enabled" option is ignored. -->
+ *              <key>Default</key>
+ *              <dict>
+ *                  <key>Persist</key>          <!-- Always persist to disk -->
+ *                  <string>Yes</string>
+ *                  <key>TTL</key>              <!-- Store default messages for maximum 4 days -->
+ *                  <integer>4d</integer>
+ *              </dict>
+ *
+ *              <!-- Subdictionary of options that control "os_log_info()" behavior -->
+ *              <key>Info</key>
+ *              <dict>
+ *                  <key>Persist</key>          <!-- If enabled persist to disk -->
+ *                  <string>Yes</string>
+ *                  <key>TTL</key>          	<!-- Store Info messages for 2 days -->
+ *                  <string>2d</string>
+ *              </dict>
+ *
+ *              <!-- Subdictionary of options that control "os_log_debug()" behavior -->
+ *              <key>Debug</key>
+ *              <dict>
+ *                  <key>Enabled</key>          <!-- Not enabled, must be enabled specifically -->
+ *                  <string>No</string>
+ *              </dict>
+ *          </dict>
+ *      </dict>
+ *
+ * All other preferences and system-overrides are stored in /Library/LogPreferences/.
+ *
+ * @param subsystem
+ * The identifier of the given subsystem should be in reverse DNS form
+ * (i.e., com.company.mysubsystem).  This string must be a constant string,
+ * not dynamically generated.
+ *
+ * @param category
+ * The category within the given subsystem that specifies the settings for
+ * the log object.  This string must be a constant string, not dynamically
+ * generated.
+ *
+ * @result
+ * Returns an os_log_t value to be passed to other os_log API calls.  This
+ * should be called once at log initialization and rely on system to detect
+ * changes to settings.  This object should be released when no longer used
+ * via os_release or -[release] method.
+ *
+ * A value will always be returned to allow for dynamic enablement.
+ */
+__OSX_AVAILABLE_STARTING(__MAC_10_12,__IPHONE_10_0)
+OS_EXPORT OS_NOTHROW OS_WARN_RESULT OS_OBJECT_RETURNS_RETAINED
+os_log_t
+os_log_create(const char *subsystem, const char *category);
+
+/*!
+ * @function os_log_info_enabled
+ *
+ * @abstract
+ * Returns if development log messages are enabled for a particular log object.
+ *
+ * @discussion
+ * Returns if development log messages are enabled for a particular log object.
+ *
+ * @param log
+ * Pass OS_LOG_DEFAULT or a log object previously created with os_log_create.
+ *
+ * @result
+ * Returns true if debug log messages are enabled.
+ */
+__WATCHOS_AVAILABLE(3.0) __OSX_AVAILABLE(10.12) __IOS_AVAILABLE(10.0) __TVOS_AVAILABLE(10.0)
+OS_EXPORT OS_NOTHROW OS_WARN_RESULT
+bool
+os_log_info_enabled(os_log_t log);
+
+/*!
+ * @function os_log_debug_enabled
+ *
+ * @abstract
+ * Returns if debug log messages are enabled for a particular log object.
+ *
+ * @discussion
+ * Returns if debug log messages are enabled for a particular log object.
+ *
+ * @param log
+ * Pass OS_LOG_DEFAULT or a log object previously created with os_log_create.
+ *
+ * @result
+ * Returns true if debug log messages are enabled.
+ */
+__WATCHOS_AVAILABLE(3.0) __OSX_AVAILABLE(10.12) __IOS_AVAILABLE(10.0) __TVOS_AVAILABLE(10.0)
+OS_EXPORT OS_NOTHROW OS_WARN_RESULT
+bool
+os_log_debug_enabled(os_log_t log);
+
+/*!
+ * @function os_log
+ *
+ * @abstract
+ * Insert a log message into the Unified Logging and Tracing system.
+ *
+ * @discussion
+ * Insert a log message into the Unified Logging and Tracing system in 
+ * accordance with the preferences specified by the provided log object.
+ * These messages cannot be disabled and therefore always captured either
+ * to memory or disk.
+ *
+ * When an os_activity_id_t is present, the log message will also be scoped by
+ * that identifier.  Activities provide granular filtering of log messages
+ * across threads and processes.
+ *
+ * There is a physical cap of 256 bytes per entry for dynamic content,
+ * i.e., %s and %@, that can be written to the persistence store.  As such,
+ * all content exceeding the limit will be truncated before written to disk.
+ * Live streams will continue to show the full content.
+ *
+ * @param log
+ * Pass OS_LOG_DEFAULT or a log object previously created with os_log_create.
+ *
+ * @param format
+ * A format string to generate a human-readable log message when the log
+ * line is decoded.  This string must be a constant string, not dynamically
+ * generated.  Supports all standard printf types and %@ (objects).
+ */
+#define os_log(log, format, ...) __extension__({                                                \
+    _Static_assert(__builtin_constant_p(format), "format string must be constant");             \
+    __attribute__((section("__TEXT,__os_log"))) static const char _os_log_fmt[] = format;       \
+    _os_log_verify_format_str(format, ##__VA_ARGS__);                                           \
+    _os_log_internal(&__dso_handle, log, OS_LOG_TYPE_DEFAULT, _os_log_fmt, ##__VA_ARGS__);      \
+    __asm__(""); /* avoid tailcall */                                                           \
+})
+
+/*!
+ * @function os_log_info
+ *
+ * @abstract
+ * Insert a development log message into the Unified Logging and Tracing system.
+ *
+ * @discussion
+ * Insert a log message into the Unified Logging and Tracing system in 
+ * accordance with the preferences specified by the provided log object.
+ *
+ * When an os_activity_id_t is present, the log message will also be scoped by
+ * that identifier.  Activities provide granular filtering of log messages
+ * across threads and processes.
+ *
+ * There is a physical cap of 256 bytes per entry for dynamic content,
+ * i.e., %s and %@, that can be written to the persistence store.  As such,
+ * all content exceeding the limit will be truncated before written to disk.
+ * Live streams will continue to show the full content.
+ *
+ * @param log
+ * Pass OS_LOG_DEFAULT or a log object previously created with os_log_create.
+ *
+ * @param format
+ * A format string to generate a human-readable log message when the log
+ * line is decoded.  This string must be a constant string, not dynamically
+ * generated.  Supports all standard printf types and %@ (objects).
+ */
+#define os_log_info(log, format, ...) __extension__({                                       \
+    _Static_assert(__builtin_constant_p(format), "format string must be constant");         \
+    __attribute__((section("__TEXT,__os_log"))) static const char _os_log_fmt[] = format;   \
+    _os_log_verify_format_str(format, ##__VA_ARGS__);                                       \
+    _os_log_internal(&__dso_handle, log, OS_LOG_TYPE_INFO, _os_log_fmt, ##__VA_ARGS__);     \
+    __asm__(""); /* avoid tailcall */                                                       \
+})
+
+/*!
+ * @function os_log_debug
+ *
+ * @abstract
+ * Insert a debug log message into the Unified Logging and Tracing system.
+ *
+ * @discussion
+ * Insert a debug log message into the Unified Logging and Tracing system in
+ * accordance with the preferences specified by the provided log object.
+ *
+ * When an os_activity_id_t is present, the log message will also be scoped by
+ * that identifier.  Activities provide granular filtering of log messages
+ * across threads and processes.
+ *
+ * There is a physical cap of 256 bytes per entry for dynamic content,
+ * i.e., %s and %@, that can be written to the persistence store.  As such,
+ * all content exceeding the limit will be truncated before written to disk.
+ * Live streams will continue to show the full content.
+ *
+ * @param log
+ * Pass OS_LOG_DEFAULT or a log object previously created with os_log_create.
+ *
+ * @param format
+ * A format string to generate a human-readable log message when the log
+ * line is decoded.  This string must be a constant string, not dynamically
+ * generated.  Supports all standard printf types and %@ (objects).
+ */
+#define os_log_debug(log, format, ...) __extension__({                                          \
+    _Static_assert(__builtin_constant_p(format), "format string must be constant");             \
+    __attribute__((section("__TEXT,__os_log"))) static const char _os_log_fmt[] = format;       \
+    _os_log_verify_format_str(format, ##__VA_ARGS__);                                           \
+    _os_log_internal(&__dso_handle, log, OS_LOG_TYPE_DEBUG, _os_log_fmt, ##__VA_ARGS__);        \
+    __asm__(""); /* avoid tailcall */                                                           \
+})
+
+/*!
+ * @function os_log_error
+ *
+ * @abstract
+ * Insert an error log message into the Unified Logging and Tracing system.
+ *
+ * @discussion
+ * Insert an error log message into the Unified Logging and Tracing system.
+ *
+ * When an os_activity_id_t is present, the log message will also be scoped by
+ * that identifier.  Activities provide granular filtering of log messages
+ * across threads and processes.
+ *
+ * There is a physical cap of 256 bytes per entry for dynamic content,
+ * i.e., %s and %@, that can be written to the persistence store.  As such,
+ * all content exceeding the limit will be truncated before written to disk.
+ * Live streams will continue to show the full content.
+ *
+ * @param log
+ * Pass OS_LOG_DEFAULT or a log object previously created with os_log_create.
+ *
+ * @param format
+ * A format string to generate a human-readable log message when the log
+ * line is decoded.  This string must be a constant string, not dynamically
+ * generated.  Supports all standard printf types and %@ (objects).
+ */
+#define os_log_error(log, format, ...) __extension__({                                          \
+    _Static_assert(__builtin_constant_p(format), "format string must be constant");             \
+    __attribute__((section("__TEXT,__os_log"))) static const char _os_log_fmt[] = format;       \
+    _os_log_verify_format_str(format, ##__VA_ARGS__);                                           \
+    _os_log_internal(&__dso_handle, log, OS_LOG_TYPE_ERROR, _os_log_fmt, ##__VA_ARGS__);        \
+    __asm__(""); /* avoid tailcall */                                                           \
+})
+
+/*!
+ * @function os_log_fault
+ *
+ * @abstract
+ * Insert a fault log message into the Unified Logging and Tracing system.
+ *
+ * @discussion
+ * Log a fault message issue into the Unified Logging and Tracing system
+ * signifying a multi-process (i.e., system error) related issue, either
+ * due to interaction via IPC or some other.  Faults will gather information 
+ * from the entire process chain and record it for later inspection.
+ *
+ * When an os_activity_id_t is present, the log message will also be scoped by
+ * that identifier.  Activities provide granular filtering of log messages
+ * across threads and processes.
+ *
+ * There is a physical cap of 256 bytes per entry for dynamic content,
+ * i.e., %s and %@, that can be written to the persistence store.  As such,
+ * all content exceeding the limit will be truncated before written to disk.
+ * Live streams will continue to show the full content.
+ *
+ * @param log
+ * Pass OS_LOG_DEFAULT or a log object previously created with os_log_create.
+ *
+ * @param format
+ * A format string to generate a human-readable log message when the log
+ * line is decoded.  This string must be a constant string, not dynamically
+ * generated.  Supports all standard printf types and %@ (objects).
+ */
+#define os_log_fault(log, format, ...) __extension__({                                          \
+    _Static_assert(__builtin_constant_p(format), "format string must be constant");             \
+    __attribute__((section("__TEXT,__os_log"))) static const char _os_log_fmt[] = format;       \
+    _os_log_verify_format_str(format, ##__VA_ARGS__);                                           \
+    _os_log_internal(&__dso_handle, log, OS_LOG_TYPE_FAULT, _os_log_fmt, ##__VA_ARGS__);        \
+    __asm__(""); /* avoid tailcall */                                                           \
+})
+
+/*!
+ * @function os_log_with_type
+ *
+ * @abstract
+ * Log a message using a specific type.
+ *
+ * @discussion
+ * Will log a message with the provided os_log_type_t.
+ *
+ * @param log
+ * Pass OS_LOG_DEFAULT or a log object previously created with os_log_create.
+ *
+ * @param type
+ * Pass a valid type from os_log_type_t.
+ *
+ * @param format
+ * A format string to generate a human-readable log message when the log
+ * line is decoded.  This string must be a constant string, not dynamically
+ * generated.  Supports all standard printf types and %@ (objects).
+ */
+#define os_log_with_type(log, type, format, ...) __extension__({                            \
+    _Static_assert(__builtin_constant_p(format), "format string must be constant");         \
+    __attribute__((section("__TEXT,__os_log"))) static const char _os_log_fmt[] = format;   \
+    _os_log_verify_format_str(format, ##__VA_ARGS__);                                       \
+    _os_log_internal(&__dso_handle, log, type, _os_log_fmt, ##__VA_ARGS__);                 \
+    __asm__(""); /* avoid tailcall */                                                       \
+})
+
+/*!
+ * @function os_log_sensitive_debug
+ *
+ * @abstract
+ * Insert a debug log message containing sensitive content (i.e., personal
+ * identifying information).
+ *
+ * @discussion
+ * Insert a debug log message containing sensitive content (i.e., personal
+ * identifying information) in accordance with the preferences specified by
+ * the provided log object.
+ *
+ * All strings are considered potentially sensitive, though this call
+ * specifically signifies the message as containing sensitive content.
+ * The message will be stored separately from other messages.
+ *
+ * When an os_activity_id_t is present, the log message will also be scoped by
+ * that identifier.  Activities provide granular filtering of log messages
+ * across threads and processes.
+ *
+ * There is a physical cap of 256 bytes per entry for dynamic content,
+ * i.e., %s and %@, that can be written to the persistence store.  As such,
+ * all content exceeding the limit will be truncated before written to disk.
+ * Live streams will continue to show the full content.
+ *
+ * @param log
+ * Pass OS_LOG_DEFAULT or a log object previously created with os_log_create.
+ *
+ * @param format
+ * A format string to generate a human-readable log message when the log
+ * line is decoded.  This string must be a constant string, not dynamically
+ * generated.  Supports all standard printf types and %@ (objects).
+ */
+#define os_log_sensitive_debug(log, format, ...) __extension__({                                                      \
+    _Static_assert(__builtin_constant_p(format), "format string must be constant");                                   \
+    __attribute__((section("__TEXT,__os_log_sens"))) static const char _os_log_fmt[] = format;                        \
+    _os_log_verify_format_str(format, ##__VA_ARGS__);                                                                 \
+    _os_log_sensitive(&__dso_handle, log, OS_LOG_TYPE_DEBUG, _os_log_fmt, ##__VA_ARGS__);                             \
+    __asm__(""); /* avoid tailcall */                                                                                 \
+})
+
+/*!
+ * @function _os_log_internal
+ *
+ * @abstract
+ * Internal function used by macros.
+ */
+__WATCHOS_AVAILABLE(3.0) __OSX_AVAILABLE(10.12) __IOS_AVAILABLE(10.0) __TVOS_AVAILABLE(10.0)
+OS_EXPORT OS_NOTHROW
+void
+_os_log_internal(void *dso, os_log_t log, os_log_type_t type, const char *message, ...);
+
+__END_DECLS
+
+#endif /* __os_log_h */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/os/object.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/os/object.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/os/object.h	1970-01-01 01:00:00.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/os/object.h	2016-06-03 22:54:59.000000000 +0200
@@ -0,0 +1,202 @@
+/*
+ * Copyright (c) 2011-2014 Apple Inc. All rights reserved.
+ *
+ * @APPLE_APACHE_LICENSE_HEADER_START@
+ *
+ * Licensed under the Apache License, Version 2.0 (the "License");
+ * you may not use this file except in compliance with the License.
+ * You may obtain a copy of the License at
+ *
+ *     http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ *
+ * @APPLE_APACHE_LICENSE_HEADER_END@
+ */
+
+#ifndef __OS_OBJECT__
+#define __OS_OBJECT__
+
+#ifdef __APPLE__
+#include <Availability.h>
+#endif
+#include <os/base.h>
+
+/*!
+ * @header
+ *
+ * @preprocinfo
+ * By default, libSystem objects such as GCD and XPC objects are declared as
+ * Objective-C types when building with an Objective-C compiler. This allows
+ * them to participate in ARC, in RR management by the Blocks runtime and in
+ * leaks checking by the static analyzer, and enables them to be added to Cocoa
+ * collections.
+ *
+ * NOTE: this requires explicit cancellation of dispatch sources and xpc
+ *       connections whose handler blocks capture the source/connection object,
+ *       resp. ensuring that such captures do not form retain cycles (e.g. by
+ *       declaring the source as __weak).
+ *
+ * To opt-out of this default behavior, add -DOS_OBJECT_USE_OBJC=0 to your
+ * compiler flags.
+ *
+ * This mode requires a platform with the modern Objective-C runtime, the
+ * Objective-C GC compiler option to be disabled, and at least a Mac OS X 10.8
+ * or iOS 6.0 deployment target.
+ */
+
+#ifndef OS_OBJECT_HAVE_OBJC_SUPPORT
+#if defined(__OBJC__) && defined(__OBJC2__) && !defined(__OBJC_GC__) && ( \
+		__MAC_OS_X_VERSION_MIN_REQUIRED >= __MAC_10_8 || \
+		__IPHONE_OS_VERSION_MIN_REQUIRED >= __IPHONE_6_0)
+#define OS_OBJECT_HAVE_OBJC_SUPPORT 1
+#else
+#define OS_OBJECT_HAVE_OBJC_SUPPORT 0
+#endif
+#endif
+
+#if OS_OBJECT_HAVE_OBJC_SUPPORT
+#ifndef OS_OBJECT_USE_OBJC
+#define OS_OBJECT_USE_OBJC 1
+#endif
+#elif defined(OS_OBJECT_USE_OBJC) && OS_OBJECT_USE_OBJC
+/* Unsupported platform for OS_OBJECT_USE_OBJC=1 */
+#undef OS_OBJECT_USE_OBJC
+#define OS_OBJECT_USE_OBJC 0
+#else
+#define OS_OBJECT_USE_OBJC 0
+#endif
+
+#if OS_OBJECT_USE_OBJC
+#import <objc/NSObject.h>
+#if defined(__has_attribute)
+#if __has_attribute(objc_independent_class)
+#define OS_OBJC_INDEPENDENT_CLASS __attribute__((objc_independent_class))
+#endif
+#endif // __has_attribute(objc_independent_class)
+#ifndef OS_OBJC_INDEPENDENT_CLASS
+#define OS_OBJC_INDEPENDENT_CLASS
+#endif
+#define OS_OBJECT_CLASS(name) OS_##name
+#define OS_OBJECT_DECL_IMPL(name, ...) \
+		@protocol OS_OBJECT_CLASS(name) __VA_ARGS__ \
+		@end \
+		typedef NSObject<OS_OBJECT_CLASS(name)> \
+				* OS_OBJC_INDEPENDENT_CLASS name##_t
+#define OS_OBJECT_DECL(name, ...) \
+		OS_OBJECT_DECL_IMPL(name, <NSObject>)
+#define OS_OBJECT_DECL_SUBCLASS(name, super) \
+		OS_OBJECT_DECL_IMPL(name, <OS_OBJECT_CLASS(super)>)
+#if defined(__has_attribute)
+#if __has_attribute(ns_returns_retained)
+#define OS_OBJECT_RETURNS_RETAINED __attribute__((__ns_returns_retained__))
+#else
+#define OS_OBJECT_RETURNS_RETAINED
+#endif
+#if __has_attribute(ns_consumed)
+#define OS_OBJECT_CONSUMED __attribute__((__ns_consumed__))
+#else
+#define OS_OBJECT_CONSUMED
+#endif
+#else
+#define OS_OBJECT_RETURNS_RETAINED
+#define OS_OBJECT_CONSUMED
+#endif
+#if defined(__has_feature)
+#if __has_feature(objc_arc)
+#define OS_OBJECT_BRIDGE __bridge
+#define OS_WARN_RESULT_NEEDS_RELEASE
+#else
+#define OS_OBJECT_BRIDGE
+#define OS_WARN_RESULT_NEEDS_RELEASE OS_WARN_RESULT
+#endif
+#else
+#define OS_OBJECT_BRIDGE
+#define OS_WARN_RESULT_NEEDS_RELEASE OS_WARN_RESULT
+#endif
+#ifndef OS_OBJECT_USE_OBJC_RETAIN_RELEASE
+#if defined(__clang_analyzer__)
+#define OS_OBJECT_USE_OBJC_RETAIN_RELEASE 1
+#elif defined(__has_feature)
+#if __has_feature(objc_arc)
+#define OS_OBJECT_USE_OBJC_RETAIN_RELEASE 1
+#else
+#define OS_OBJECT_USE_OBJC_RETAIN_RELEASE 0
+#endif
+#else
+#define OS_OBJECT_USE_OBJC_RETAIN_RELEASE 0
+#endif
+#endif
+#else
+/*! @parseOnly */
+#define OS_OBJECT_RETURNS_RETAINED
+/*! @parseOnly */
+#define OS_OBJECT_CONSUMED
+/*! @parseOnly */
+#define OS_OBJECT_BRIDGE
+/*! @parseOnly */
+#define OS_WARN_RESULT_NEEDS_RELEASE OS_WARN_RESULT
+#define OS_OBJECT_USE_OBJC_RETAIN_RELEASE 0
+#endif
+
+#define OS_OBJECT_GLOBAL_OBJECT(type, object) ((OS_OBJECT_BRIDGE type)&(object))
+
+__BEGIN_DECLS
+
+/*!
+ * @function os_retain
+ *
+ * @abstract
+ * Increment the reference count of an os_object.
+ *
+ * @discussion
+ * On a platform with the modern Objective-C runtime this is exactly equivalent
+ * to sending the object the -[retain] message.
+ *
+ * @param object
+ * The object to retain.
+ *
+ * @result
+ * The retained object.
+ */
+__OSX_AVAILABLE_STARTING(__MAC_10_12,__IPHONE_10_0)
+OS_EXPORT
+void*
+os_retain(void *object);
+#if OS_OBJECT_USE_OBJC
+#undef os_retain
+#define os_retain(object) [object retain]
+#endif
+
+/*!
+ * @function os_release
+ *
+ * @abstract
+ * Decrement the reference count of a os_object.
+ *
+ * @discussion
+ * On a platform with the modern Objective-C runtime this is exactly equivalent
+ * to sending the object the -[release] message.
+ *
+ * @param object
+ * The object to release.
+ */
+__OSX_AVAILABLE_STARTING(__MAC_10_12,__IPHONE_10_0)
+OS_EXPORT
+void
+os_release(void *object);
+#if OS_OBJECT_USE_OBJC
+#undef os_release
+#define os_release(object) [object release]
+#endif
+
+#define fastpath(x) ((typeof(x))__builtin_expect((long)(x), ~0l))
+#define slowpath(x) ((typeof(x))__builtin_expect((long)(x), 0l))
+
+__END_DECLS
+
+#endif
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/os/overflow.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/os/overflow.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/os/overflow.h	2016-02-27 07:06:43.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/os/overflow.h	2016-06-03 22:54:59.000000000 +0200
@@ -42,12 +42,38 @@
 #define _OS_OVERFLOW_H
 
 #include <sys/cdefs.h>
+#include <stdbool.h>
+#include <os/base.h>
+
+bool __header_always_inline OS_WARN_RESULT
+__os_warn_unused(__const bool x)
+{
+	return x;
+}
+
+#if __has_builtin(__builtin_add_overflow) && \
+    __has_builtin(__builtin_sub_overflow) && \
+    __has_builtin(__builtin_mul_overflow)
+
+#define os_add_overflow(a, b, res) __os_warn_unused(__builtin_add_overflow((a), (b), (res)))
+#define os_sub_overflow(a, b, res) __os_warn_unused(__builtin_sub_overflow((a), (b), (res)))
+#define os_mul_overflow(a, b, res) __os_warn_unused(__builtin_mul_overflow((a), (b), (res)))
+
+#else
 
 /* compile-time assertion that 'x' and 'y' are equivalent types */
+#ifdef __cplusplus
+#define __OS_TYPE_CHECK(x, y) do { \
+	__typeof__(x) _x; \
+	__typeof__(y) _y; \
+	(void)(&_x == &_y, "overflow arithmetic: incompatible types"); \
+} while (0)
+#else
 #define __OS_TYPE_CHECK(x, y) do { \
-	_Static_assert(__builtin_types_compatible_p(typeof(x),typeof(y)), \
+	_Static_assert(__builtin_types_compatible_p(__typeof(x),__typeof(y)), \
 			"overflow arithmetic: incompatible types"); \
 } while (0)
+#endif
 
 #define __os_add_overflow_func(T,U,V) _Generic((T), \
 		unsigned:           __builtin_uadd_overflow, \
@@ -76,36 +102,51 @@
 		long long:          __builtin_smulll_overflow \
 	)(T,U,V)
 
-int __header_always_inline __attribute__((__warn_unused_result__))
-__os_warn_unused(const int x)
-{
-	return x;
-}
-
-#define os_add_overflow(a, b, res) __os_warn_unused(({ \
+#define os_add_overflow(a, b, res) __os_warn_unused(__extension__({ \
 	__OS_TYPE_CHECK((a), (b)); \
 	__OS_TYPE_CHECK((b), *(res)); \
 	__os_add_overflow_func((a), (b), (res)); \
 }))
 
-#define os_add3_overflow(a, b, c, res) __os_warn_unused(({ \
-	typeof(a) _tmp; \
-	int _s, _t; \
-	_s = os_add_overflow((a), (b), &_tmp); \
-	_t = os_add_overflow((c), _tmp, (res)); \
-	_s | _t; \
-}))
-
-#define os_sub_overflow(a, b, res) __os_warn_unused(({ \
+#define os_sub_overflow(a, b, res) __os_warn_unused(__extension__({ \
 	__OS_TYPE_CHECK((a), (b)); \
 	__OS_TYPE_CHECK((b), *(res)); \
 	__os_sub_overflow_func((a), (b), (res)); \
 }))
 
-#define os_mul_overflow(a, b, res) __os_warn_unused(({ \
+#define os_mul_overflow(a, b, res) __os_warn_unused(__extension__({ \
 	__OS_TYPE_CHECK((a), (b)); \
 	__OS_TYPE_CHECK((b), *(res)); \
 	__os_mul_overflow_func((a), (b), (res)); \
 }))
 
+#endif /* __has_builtin(...) */
+
+/* os_add3_overflow(a, b, c) -> (a + b + c) */
+#define os_add3_overflow(a, b, c, res) __os_warn_unused(__extension__({ \
+	__typeof(*(res)) _tmp; \
+	bool _s, _t; \
+	_s = os_add_overflow((a), (b), &_tmp); \
+	_t = os_add_overflow((c), _tmp, (res)); \
+	_s | _t; \
+}))
+
+/* os_add_and_mul_overflow(a, b, x) -> (a + b)*x */
+#define os_add_and_mul_overflow(a, b, x, res) __os_warn_unused(__extension__({ \
+	__typeof(*(res)) _tmp; \
+	bool _s, _t; \
+	_s = os_add_overflow((a), (b), &_tmp); \
+	_t = os_mul_overflow((x), _tmp, (res)); \
+	_s | _t; \
+}))
+
+/* os_mul_and_add_overflow(a, x, b) -> a*x + b */
+#define os_mul_and_add_overflow(a, x, b, res) __os_warn_unused(__extension__({ \
+	__typeof(*(res)) _tmp; \
+	bool _s, _t; \
+	_s = os_mul_overflow((a), (x), &_tmp); \
+	_t = os_add_overflow((b), _tmp, (res)); \
+	_s | _t; \
+}))
+
 #endif /* _OS_OVERFLOW_H */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/os/trace.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/os/trace.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/os/trace.h	1970-01-01 01:00:00.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/os/trace.h	2016-06-03 22:54:59.000000000 +0200
@@ -0,0 +1,893 @@
+/*
+ * Copyright (c) 2013-2015 Apple Inc. All rights reserved.
+ *
+ * @APPLE_LICENSE_HEADER_START@
+ * 
+ * This file contains Original Code and/or Modifications of Original Code
+ * as defined in and that are subject to the Apple Public Source License
+ * Version 2.0 (the 'License'). You may not use this file except in
+ * compliance with the License. Please obtain a copy of the License at
+ * http://www.opensource.apple.com/apsl/ and read it before using this
+ * file.
+ * 
+ * The Original Code and all software distributed under the License are
+ * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
+ * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
+ * INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
+ * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
+ * Please see the License for the specific language governing rights and
+ * limitations under the License.
+ * 
+ * @APPLE_LICENSE_HEADER_END@
+ */
+
+#ifndef __OS_TRACE_H__
+#define __OS_TRACE_H__
+
+#include <Availability.h>
+#include <os/base.h>
+#include <sys/types.h>
+#include <stdint.h>
+#include <stdbool.h>
+#include <stdarg.h>
+#if __has_include(<xpc/xpc.h>)
+#include <xpc/xpc.h>
+#else
+typedef void *xpc_object_t;
+#endif
+
+#if !__GNUC__
+#error "must be GNU C compatible"
+#endif
+
+__BEGIN_DECLS
+
+extern void *__dso_handle;
+
+OS_ALWAYS_INLINE
+static inline void
+_os_trace_verify_printf(const char *msg, ...) __attribute__((format(printf, 1, 2)))
+{
+#pragma unused(msg)
+}
+
+#if !defined OS_COUNT_ARGS
+#define OS_COUNT_ARGS(...) OS_COUNT_ARGS1(, ##__VA_ARGS__, _8, _7, _6, _5, _4, _3, _2, _1, _0)
+#define OS_COUNT_ARGS1(z, a, b, c, d, e, f, g, h, cnt, ...) cnt
+#endif
+
+/* use old macros for anything less than iOS 10 and MacOS 10.12 */
+#if (defined(__IPHONE_OS_VERSION_MIN_REQUIRED) &&  __IPHONE_OS_VERSION_MIN_REQUIRED < __IPHONE_10_0) \
+     || (defined(__WATCH_OS_VERSION_MIN_REQUIRED) &&  __WATCH_OS_VERSION_MIN_REQUIRED < __WATCHOS_3_0) \
+     || (defined(__TV_OS_VERSION_MIN_REQUIRED) && __TV_OS_VERSION_MIN_REQUIRED < __TVOS_10_0) \
+     || (defined(__MAC_OS_X_VERSION_MIN_REQUIRED) && __MAC_OS_X_VERSION_MIN_REQUIRED < __MAC_10_12)
+
+#define _os_trace_0(_l, _m, _t) __extension__({ \
+	_os_trace_verify_printf(_l); \
+	_os_trace_with_buffer(&__dso_handle, _m, _t, NULL, 0, NULL); \
+	__asm__(""); /* avoid tailcall */ \
+})
+
+#define _os_trace_1(_l, _m, _t, _1) __extension__({ \
+        _Pragma("clang diagnostic push") \
+        _Pragma("clang diagnostic ignored \"-Wpacked\"") \
+	const __typeof__(_1) _c1 = _1; \
+	_os_trace_verify_printf(_l, _c1); \
+	const struct __attribute__((packed)) { \
+		__typeof__(_c1) _f1; \
+		uint8_t _s[1]; \
+                uint8_t _cnt; \
+	} _buf = { \
+		._f1 = _c1, ._s[0] = sizeof(_c1), \
+		._cnt = 1, \
+	}; \
+	_os_trace_with_buffer(&__dso_handle, _m, _t, &_buf, sizeof(_buf), NULL); \
+	__asm__(""); /* avoid tailcall */ \
+        _Pragma("clang diagnostic pop") \
+})
+
+#define _os_trace_2(_l, _m, _t, _1, _2) __extension__({ \
+        _Pragma("clang diagnostic push") \
+        _Pragma("clang diagnostic ignored \"-Wpacked\"") \
+	const __typeof__(_1) _c1 = _1; \
+	const __typeof__(_2) _c2 = _2; \
+	_os_trace_verify_printf(_l, _c1, _c2); \
+	const struct __attribute__((packed)) { \
+		__typeof__(_c1) _f1; \
+		__typeof__(_c2) _f2; \
+		uint8_t _s[2]; \
+                uint8_t _cnt; \
+	} _buf = { \
+		._f1 = _c1, ._s[0] = sizeof(_c1), \
+		._f2 = _c2, ._s[1] = sizeof(_c2), \
+		._cnt = 2, \
+	}; \
+	_os_trace_with_buffer(&__dso_handle, _m, _t, &_buf, sizeof(_buf), NULL); \
+	__asm__(""); /* avoid tailcall */ \
+        _Pragma("clang diagnostic pop") \
+})
+
+#define _os_trace_3(_l, _m, _t, _1, _2, _3) __extension__({ \
+        _Pragma("clang diagnostic push") \
+        _Pragma("clang diagnostic ignored \"-Wpacked\"") \
+	const __typeof__(_1) _c1 = _1; \
+	const __typeof__(_2) _c2 = _2; \
+	const __typeof__(_3) _c3 = _3; \
+	_os_trace_verify_printf(_l, _c1, _c2, _c3); \
+	const struct __attribute__((packed)) { \
+		__typeof__(_c1) _f1; \
+		__typeof__(_c2) _f2; \
+		__typeof__(_c3) _f3; \
+		uint8_t _s[3]; \
+                uint8_t _cnt; \
+	} _buf = { \
+		._f1 = _c1, ._s[0] = sizeof(_c1), \
+		._f2 = _c2, ._s[1] = sizeof(_c2), \
+		._f3 = _c3, ._s[2] = sizeof(_c3), \
+		._cnt = 3, \
+	}; \
+	_os_trace_with_buffer(&__dso_handle, _m, _t, &_buf, sizeof(_buf), NULL); \
+	__asm__(""); /* avoid tailcall */ \
+        _Pragma("clang diagnostic pop") \
+})
+
+#define _os_trace_4(_l, _m, _t, _1, _2, _3, _4) __extension__({ \
+        _Pragma("clang diagnostic push") \
+        _Pragma("clang diagnostic ignored \"-Wpacked\"") \
+	const __typeof__(_1) _c1 = _1; \
+	const __typeof__(_2) _c2 = _2; \
+	const __typeof__(_3) _c3 = _3; \
+	const __typeof__(_4) _c4 = _4; \
+	_os_trace_verify_printf(_l, _c1, _c2, _c3, _c4); \
+	const struct __attribute__((packed)) { \
+		__typeof__(_c1) _f1; \
+		__typeof__(_c2) _f2; \
+		__typeof__(_c3) _f3; \
+		__typeof__(_c4) _f4; \
+		uint8_t _s[4]; \
+                uint8_t _cnt; \
+	} _buf = { \
+		._f1 = _c1, ._s[0] = sizeof(_c1), \
+		._f2 = _c2, ._s[1] = sizeof(_c2), \
+		._f3 = _c3, ._s[2] = sizeof(_c3), \
+		._f4 = _c4, ._s[3] = sizeof(_c4), \
+		._cnt = 4, \
+	}; \
+	_os_trace_with_buffer(&__dso_handle, _m, _t, &_buf, sizeof(_buf), NULL); \
+	__asm__(""); /* avoid tailcall */ \
+        _Pragma("clang diagnostic pop") \
+})
+
+#define _os_trace_5(_l, _m, _t, _1, _2, _3, _4, _5) __extension__({ \
+        _Pragma("clang diagnostic push") \
+        _Pragma("clang diagnostic ignored \"-Wpacked\"") \
+	const __typeof__(_1) _c1 = _1; \
+	const __typeof__(_2) _c2 = _2; \
+	const __typeof__(_3) _c3 = _3; \
+	const __typeof__(_4) _c4 = _4; \
+	const __typeof__(_5) _c5 = _5; \
+	_os_trace_verify_printf(_l, _c1, _c2, _c3, _c4, _c5); \
+	const struct __attribute__((packed)) { \
+		__typeof__(_c1) _f1; \
+		__typeof__(_c2) _f2; \
+		__typeof__(_c3) _f3; \
+		__typeof__(_c4) _f4; \
+		__typeof__(_c5) _f5; \
+		uint8_t _s[5]; \
+                uint8_t _cnt; \
+	} _buf = { \
+		._f1 = _c1, ._s[0] = sizeof(_c1), \
+		._f2 = _c2, ._s[1] = sizeof(_c2), \
+		._f3 = _c3, ._s[2] = sizeof(_c3), \
+		._f4 = _c4, ._s[3] = sizeof(_c4), \
+		._f5 = _c5, ._s[4] = sizeof(_c5), \
+		._cnt = 5, \
+	}; \
+	_os_trace_with_buffer(&__dso_handle, _m, _t, &_buf, sizeof(_buf), NULL); \
+	__asm__(""); /* avoid tailcall */ \
+        _Pragma("clang diagnostic pop") \
+})
+
+#define _os_trace_6(_l, _m, _t, _1, _2, _3, _4, _5, _6) __extension__({ \
+        _Pragma("clang diagnostic push") \
+        _Pragma("clang diagnostic ignored \"-Wpacked\"") \
+	const __typeof__(_1) _c1 = _1; \
+	const __typeof__(_2) _c2 = _2; \
+	const __typeof__(_3) _c3 = _3; \
+	const __typeof__(_4) _c4 = _4; \
+	const __typeof__(_5) _c5 = _5; \
+	const __typeof__(_6) _c6 = _6; \
+	_os_trace_verify_printf(_l, _c1, _c2, _c3, _c4, _c5, _c6); \
+	const struct __attribute__((packed)) { \
+		__typeof__(_c1) _f1; \
+		__typeof__(_c2) _f2; \
+		__typeof__(_c3) _f3; \
+		__typeof__(_c4) _f4; \
+		__typeof__(_c5) _f5; \
+		__typeof__(_c6) _f6; \
+		uint8_t _s[6]; \
+                uint8_t _cnt; \
+	} _buf = { \
+		._f1 = _c1, ._s[0] = sizeof(_c1), \
+		._f2 = _c2, ._s[1] = sizeof(_c2), \
+		._f3 = _c3, ._s[2] = sizeof(_c3), \
+		._f4 = _c4, ._s[3] = sizeof(_c4), \
+		._f5 = _c5, ._s[4] = sizeof(_c5), \
+		._f6 = _c6, ._s[5] = sizeof(_c6), \
+		._cnt = 6, \
+	}; \
+	_os_trace_with_buffer(&__dso_handle, _m, _t, &_buf, sizeof(_buf), NULL); \
+	__asm__(""); /* avoid tailcall */ \
+        _Pragma("clang diagnostic pop") \
+})
+
+#define _os_trace_7(_l, _m, _t, _1, _2, _3, _4, _5, _6, _7) __extension__({ \
+        _Pragma("clang diagnostic push") \
+        _Pragma("clang diagnostic ignored \"-Wpacked\"") \
+	const __typeof__(_1) _c1 = _1; \
+	const __typeof__(_2) _c2 = _2; \
+	const __typeof__(_3) _c3 = _3; \
+	const __typeof__(_4) _c4 = _4; \
+	const __typeof__(_5) _c5 = _5; \
+	const __typeof__(_6) _c6 = _6; \
+	const __typeof__(_7) _c7 = _7; \
+	_os_trace_verify_printf(_l, _c1, _c2, _c3, _c4, _c5, _c6, _c7); \
+	const struct __attribute__((packed)) { \
+		__typeof__(_c1) _f1; \
+		__typeof__(_c2) _f2; \
+		__typeof__(_c3) _f3; \
+		__typeof__(_c4) _f4; \
+		__typeof__(_c5) _f5; \
+		__typeof__(_c6) _f6; \
+		__typeof__(_c7) _f7; \
+		uint8_t _s[7]; \
+                uint8_t _cnt; \
+	} _buf = { \
+		._f1 = _c1, ._s[0] = sizeof(_c1), \
+		._f2 = _c2, ._s[1] = sizeof(_c2), \
+		._f3 = _c3, ._s[2] = sizeof(_c3), \
+		._f4 = _c4, ._s[3] = sizeof(_c4), \
+		._f5 = _c5, ._s[4] = sizeof(_c5), \
+		._f6 = _c6, ._s[5] = sizeof(_c6), \
+		._f7 = _c7, ._s[6] = sizeof(_c7), \
+		._cnt = 7, \
+	}; \
+	_os_trace_with_buffer(&__dso_handle, _m, _t, &_buf, sizeof(_buf), NULL); \
+	__asm__(""); /* avoid tailcall */ \
+        _Pragma("clang diagnostic pop") \
+})
+
+#define _os_trace_with_payload_1(_l, _m, _t, _payload) __extension__({ \
+	_os_trace_verify_printf(_l); \
+	_os_trace_with_buffer(&__dso_handle, _m, _t, NULL, 0, _payload); \
+	__asm__(""); /* avoid tailcall */ \
+})
+
+#define _os_trace_with_payload_2(_l, _m, _t, _1, _payload) __extension__({ \
+        _Pragma("clang diagnostic push") \
+        _Pragma("clang diagnostic ignored \"-Wpacked\"") \
+	const __typeof__(_1) _c1 = _1; \
+	_os_trace_verify_printf(_l, _c1); \
+	const struct __attribute__((packed)) { \
+		__typeof__(_c1) _f1; \
+		uint8_t _s[1]; \
+                uint8_t _cnt; \
+	} _buf = { \
+		._f1 = _c1, ._s[0] = sizeof(_c1), \
+		._cnt = 1, \
+	}; \
+	_os_trace_with_buffer(&__dso_handle, _m, _t, &_buf, sizeof(_buf), _payload); \
+	__asm__(""); /* avoid tailcall */ \
+        _Pragma("clang diagnostic pop") \
+})
+
+#define _os_trace_with_payload_3(_l, _m, _t, _1, _2, _payload) __extension__({ \
+        _Pragma("clang diagnostic push") \
+        _Pragma("clang diagnostic ignored \"-Wpacked\"") \
+	const __typeof__(_1) _c1 = _1; \
+	const __typeof__(_2) _c2 = _2; \
+	_os_trace_verify_printf(_l, _c1, _c2); \
+	const struct __attribute__((packed)) { \
+		__typeof__(_c1) _f1; \
+		__typeof__(_c2) _f2; \
+		uint8_t _s[2]; \
+                uint8_t _cnt; \
+	} _buf = { \
+		._f1 = _c1, ._s[0] = sizeof(_c1), \
+		._f2 = _c2, ._s[1] = sizeof(_c2), \
+                ._cnt = 2, \
+	}; \
+	_os_trace_with_buffer(&__dso_handle, _m, _t, &_buf, sizeof(_buf), _payload); \
+	__asm__(""); /* avoid tailcall */ \
+        _Pragma("clang diagnostic pop") \
+})
+
+#define _os_trace_with_payload_4(_l, _m, _t, _1, _2, _3, _payload) __extension__({ \
+        _Pragma("clang diagnostic push") \
+        _Pragma("clang diagnostic ignored \"-Wpacked\"") \
+	const __typeof__(_1) _c1 = _1; \
+	const __typeof__(_2) _c2 = _2; \
+	const __typeof__(_3) _c3 = _3; \
+	_os_trace_verify_printf(_l, _c1, _c2, _c3); \
+	const struct __attribute__((packed)) { \
+		__typeof__(_c1) _f1; \
+		__typeof__(_c2) _f2; \
+		__typeof__(_c3) _f3; \
+		uint8_t _s[3]; \
+                uint8_t _cnt; \
+	} _buf = { \
+		._f1 = _c1, ._s[0] = sizeof(_c1), \
+		._f2 = _c2, ._s[1] = sizeof(_c2), \
+		._f3 = _c3, ._s[2] = sizeof(_c3), \
+                ._cnt = 3, \
+	}; \
+	_os_trace_with_buffer(&__dso_handle, _m, _t, &_buf, sizeof(_buf), _payload); \
+	__asm__(""); /* avoid tailcall */ \
+        _Pragma("clang diagnostic pop") \
+})
+
+#define _os_trace_with_payload_5(_l, _m, _t, _1, _2, _3, _4, _payload) __extension__({ \
+        _Pragma("clang diagnostic push") \
+        _Pragma("clang diagnostic ignored \"-Wpacked\"") \
+	const __typeof__(_1) _c1 = _1; \
+	const __typeof__(_2) _c2 = _2; \
+	const __typeof__(_3) _c3 = _3; \
+	const __typeof__(_4) _c4 = _4; \
+	_os_trace_verify_printf(_l, _c1, _c2, _c3, _c4); \
+	const struct __attribute__((packed)) { \
+		__typeof__(_c1) _f1; \
+		__typeof__(_c2) _f2; \
+		__typeof__(_c3) _f3; \
+		__typeof__(_c4) _f4; \
+		uint8_t _s[4]; \
+                uint8_t _cnt; \
+	} _buf = { \
+		._f1 = _c1, ._s[0] = sizeof(_c1), \
+		._f2 = _c2, ._s[1] = sizeof(_c2), \
+		._f3 = _c3, ._s[2] = sizeof(_c3), \
+		._f4 = _c4, ._s[3] = sizeof(_c4), \
+		._cnt = 4, \
+	}; \
+	_os_trace_with_buffer(&__dso_handle, _m, _t, &_buf, sizeof(_buf), _payload); \
+	__asm__(""); /* avoid tailcall */ \
+        _Pragma("clang diagnostic pop") \
+})
+
+#define _os_trace_with_payload_6(_l, _m, _t, _1, _2, _3, _4, _5, _payload) __extension__({ \
+        _Pragma("clang diagnostic push") \
+        _Pragma("clang diagnostic ignored \"-Wpacked\"") \
+	const __typeof__(_1) _c1 = _1; \
+	const __typeof__(_2) _c2 = _2; \
+	const __typeof__(_3) _c3 = _3; \
+	const __typeof__(_4) _c4 = _4; \
+	const __typeof__(_4) _c5 = _5; \
+	_os_trace_verify_printf(_l, _c1, _c2, _c3, _c4, _c5); \
+	const struct __attribute__((packed)) { \
+		__typeof__(_c1) _f1; \
+		__typeof__(_c2) _f2; \
+		__typeof__(_c3) _f3; \
+		__typeof__(_c4) _f4; \
+		__typeof__(_c5) _f5; \
+		uint8_t _s[5]; \
+                uint8_t _cnt; \
+	} _buf = { \
+		._f1 = _c1, ._s[0] = sizeof(_c1), \
+		._f2 = _c2, ._s[1] = sizeof(_c2), \
+		._f3 = _c3, ._s[2] = sizeof(_c3), \
+		._f4 = _c4, ._s[3] = sizeof(_c4), \
+		._f5 = _c5, ._s[4] = sizeof(_c5), \
+		._cnt = 5, \
+	}; \
+	_os_trace_with_buffer(&__dso_handle, _m, _t, &_buf, sizeof(_buf), _payload); \
+	__asm__(""); /* avoid tailcall */ \
+        _Pragma("clang diagnostic pop") \
+})
+
+#define _os_trace_with_payload_7(_l, _m, _t, _1, _2, _3, _4, _5, _6, _payload) __extension__({ \
+        _Pragma("clang diagnostic push") \
+        _Pragma("clang diagnostic ignored \"-Wpacked\"") \
+	const __typeof__(_1) _c1 = _1; \
+	const __typeof__(_2) _c2 = _2; \
+	const __typeof__(_3) _c3 = _3; \
+	const __typeof__(_4) _c4 = _4; \
+	const __typeof__(_5) _c5 = _5; \
+	const __typeof__(_6) _c6 = _6; \
+	_os_trace_verify_printf(_l, _c1, _c2, _c3, _c4, _c5, _c6); \
+	const struct __attribute__((packed)) { \
+		__typeof__(_c1) _f1; \
+		__typeof__(_c2) _f2; \
+		__typeof__(_c3) _f3; \
+		__typeof__(_c4) _f4; \
+		__typeof__(_c5) _f5; \
+		__typeof__(_c6) _f6; \
+		uint8_t _s[6]; \
+                uint8_t _cnt; \
+	} _buf = { \
+		._f1 = _c1, ._s[0] = sizeof(_c1), \
+		._f2 = _c2, ._s[1] = sizeof(_c2), \
+		._f3 = _c3, ._s[2] = sizeof(_c3), \
+		._f4 = _c4, ._s[3] = sizeof(_c4), \
+		._f5 = _c5, ._s[4] = sizeof(_c5), \
+		._f6 = _c6, ._s[5] = sizeof(_c6), \
+		._cnt = 6, \
+	}; \
+	_os_trace_with_buffer(&__dso_handle, _m, _t, &_buf, sizeof(_buf), _payload); \
+	__asm__(""); /* avoid tailcall */ \
+        _Pragma("clang diagnostic pop") \
+})
+
+#define _os_trace_with_payload_8(_l, _m, _t, _1, _2, _3, _4, _5, _6, _7, _payload) __extension__({ \
+        _Pragma("clang diagnostic push") \
+        _Pragma("clang diagnostic ignored \"-Wpacked\"") \
+	const __typeof__(_1) _c1 = _1; \
+	const __typeof__(_2) _c2 = _2; \
+	const __typeof__(_3) _c3 = _3; \
+	const __typeof__(_4) _c4 = _4; \
+	const __typeof__(_5) _c5 = _5; \
+	const __typeof__(_6) _c6 = _6; \
+	const __typeof__(_7) _c7 = _7; \
+	_os_trace_verify_printf(_l, _c1, _c2, _c3, _c4, _c5, _c6, _c7); \
+	const struct __attribute__((packed)) { \
+		__typeof__(_c1) _f1; \
+		__typeof__(_c2) _f2; \
+		__typeof__(_c3) _f3; \
+		__typeof__(_c4) _f4; \
+		__typeof__(_c5) _f5; \
+		__typeof__(_c6) _f6; \
+		__typeof__(_c7) _f7; \
+		uint8_t _s[7]; \
+                uint8_t _cnt; \
+	} _buf = { \
+		._f1 = _c1, ._s[0] = sizeof(_c1), \
+		._f2 = _c2, ._s[1] = sizeof(_c2), \
+		._f3 = _c3, ._s[2] = sizeof(_c3), \
+		._f4 = _c4, ._s[3] = sizeof(_c4), \
+		._f5 = _c5, ._s[4] = sizeof(_c5), \
+		._f6 = _c6, ._s[5] = sizeof(_c6), \
+		._f7 = _c7, ._s[6] = sizeof(_c7), \
+                ._cnt = 7, \
+	}; \
+	_os_trace_with_buffer(&__dso_handle, _m, _t, &_buf, sizeof(_buf), _payload); \
+	__asm__(""); /* avoid tailcall */ \
+        _Pragma("clang diagnostic pop") \
+})
+
+#define OS_TRACE_CALL(format, _m, _t, ...) __extension__({                              \
+    _Pragma("clang diagnostic push")                                                    \
+    _Pragma("clang diagnostic ignored \"-Wc++98-compat-pedantic\"")                     \
+    OS_CONCAT(_os_trace, OS_COUNT_ARGS(__VA_ARGS__))(format, _m, _t, ##__VA_ARGS__);    \
+    _Pragma("clang diagnostic pop")                                                     \
+})
+
+#else
+
+// Use a new layout in Mac OS 10.12+ and iOS 10.0+
+#define OS_TRACE_CALL(_l, _m, _t, ...) __extension__({                          \
+    uint8_t buf[1024];                                                          \
+    _os_trace_verify_printf(_l, ##__VA_ARGS__);                                 \
+    size_t buf_size = _os_trace_encode(buf, sizeof(buf), _m, ##__VA_ARGS__);    \
+    _os_trace_internal(&__dso_handle, _t, _m, buf, buf_size, NULL);             \
+    __asm__(""); /* avoid tailcall */                                           \
+})
+
+#define _os_trace_with_payload_1(_l, _m, _t, _payload) __extension__({  \
+    _os_trace_verify_printf(_l);                                        \
+    _os_trace_internal(&__dso_handle, _t, _m, NULL, 0, _payload);       \
+    __asm__(""); /* avoid tailcall */                                   \
+})
+
+#define _os_trace_with_payload_2(_l, _m, _t, _1, _payload) __extension__({  \
+    _os_trace_verify_printf(_l, _1);                                        \
+    uint8_t buf[1024];                                                      \
+    size_t buf_size = _os_trace_encode(buf, sizeof(buf), _m, _1);           \
+    _os_trace_internal(&__dso_handle, _t, _m, buf, buf_size, _payload);     \
+    __asm__(""); /* avoid tailcall */                                       \
+})
+
+#define _os_trace_with_payload_3(_l, _m, _t, _1, _2, _payload) __extension__({  \
+    _os_trace_verify_printf(_l, _1, _2);                                        \
+    uint8_t buf[1024];                                                          \
+    size_t buf_size = _os_trace_encode(buf, sizeof(buf), _m, _1, _2);           \
+    _os_trace_internal(&__dso_handle, _t, _m, buf, buf_size, _payload);         \
+    __asm__(""); /* avoid tailcall */                                           \
+})
+
+#define _os_trace_with_payload_4(_l, _m, _t, _1, _2, _3, _payload) __extension__({  \
+    _os_trace_verify_printf(_l, _1, _2, _3);                                        \
+    uint8_t buf[1024];                                                              \
+    size_t buf_size = _os_trace_encode(buf, sizeof(buf), _m, _1, _2, _3);           \
+    _os_trace_internal(&__dso_handle, _t, _m, buf, buf_size, _payload);             \
+    __asm__(""); /* avoid tailcall */                                               \
+})
+
+#define _os_trace_with_payload_5(_l, _m, _t, _1, _2, _3, _4, _payload) __extension__({  \
+    _os_trace_verify_printf(_l, _1, _2, _3, _4);                                        \
+    uint8_t buf[1024];                                                                  \
+    size_t buf_size = _os_trace_encode(buf, sizeof(buf), _m, _1, _2, _3, _4);           \
+    _os_trace_internal(&__dso_handle, _t, _m, buf, buf_size, _payload);                 \
+    __asm__(""); /* avoid tailcall */                                                   \
+})
+
+#define _os_trace_with_payload_6(_l, _m, _t, _1, _2, _3, _4, _5, _payload) __extension__({  \
+    _os_trace_verify_printf(_l, _1, _2, _3, _4, _5);                                        \
+    uint8_t buf[1024];                                                                      \
+    size_t buf_size = _os_trace_encode(buf, sizeof(buf), _m, _1, _2, _3, _4, _5);           \
+    _os_trace_internal(&__dso_handle, _t, _m, buf, buf_size, _payload);                     \
+    __asm__(""); /* avoid tailcall */                                                       \
+})
+
+#define _os_trace_with_payload_7(_l, _m, _t, _1, _2, _3, _4, _5, _6, _payload) __extension__({  \
+    _os_trace_verify_printf(_l, _1, _2, _3, _4, _5, _6);                                        \
+    uint8_t buf[1024];                                                                          \
+    size_t buf_size = _os_trace_encode(buf, sizeof(buf), _m, _1, _2, _3, _4, _5, _6);           \
+    _os_trace_internal(&__dso_handle, _t, _m, buf, buf_size, _payload);                         \
+    __asm__(""); /* avoid tailcall */                                                           \
+})
+
+#define _os_trace_with_payload_8(_l, _m, _t, _1, _2, _3, _4, _5, _6, _7, _payload) __extension__({  \
+    _os_trace_verify_printf(_l, _1, _2, _3, _4, _5, _6, _7);                                        \
+    uint8_t buf[1024];                                                                              \
+    size_t buf_size = _os_trace_encode(buf, sizeof(buf), _m, _1, _2, _3, _4, _5, _6, _7);           \
+    _os_trace_internal(&__dso_handle, _t, _m, buf, buf_size, _payload);                             \
+    __asm__(""); /* avoid tailcall */                                                               \
+})
+
+#endif /* if Mac OS >= 10.12 or iPhone OS >= 10.0 */
+
+/*!
+ *
+ * @abstract
+ * Hashtags in trace messages
+ *
+ * @discussion
+ * Developers are encouraged to include hashtags in log messages, regardless of what API you use.
+ * A hashtag is composed of a hash (#) symbol, followed by at least three non-whitespace characters,
+ * terminated by whitespace or the end of the message. Hashtags may not begin with a number.
+ *
+ * Below is the list of predefined tags:
+ *   #System     - Message in the context of a system process.
+ *   #User       - Message in the context of a user process.
+ *   #Developer  - Message in the context of software development. For example, deprecated APIs and debugging messages.
+ *   #Attention  - Message that should be investigated by a system administrator, because it may be a sign of a larger issue.
+ *     For example, errors from a hard drive controller that typically occur when the drive is about to fail.
+ *   #Critical   - Message in the context of a critical event or critical failure.
+ *   #Error      - Message that is a noncritical error.
+ *   #Comment    - Message that is a comment.
+ *   #Marker     - Message that marks a change to divide the messages around it into those before and those after the change.
+ *   #Clue       - Message containing extra key/value pairs with additional information to help reconstruct the context.
+ *   #Security   - Message related to security concerns.
+ *   #Filesystem - Message describing a file system related event.
+ *   #Network    - Message describing a network-related event.
+ *   #Hardware   - Message describing a hardware-related event.
+ *   #CPU        - Message describing CPU related event, e.g., initiating heavy work load
+ *   #State      - Message describing state changed, e.g., global state, preference, etc.
+ *   #Graphics   - Message describing significant graphics event
+ *   #Disk       - Message describing disk activity
+ *
+ */
+
+#pragma mark - Other defines
+
+/*!
+ * @define OS_TRACE_TYPE_RELEASE
+ * Trace messages to be captured on a typical user install.  These should be
+ * limited to things which improve diagnosis of a failure/crash/hang. Trace
+ * buffers are generally smaller on a production system.
+ */
+#define OS_TRACE_TYPE_RELEASE (1u << 0)
+
+/*!
+ * @define OS_TRACE_TYPE_DEBUG
+ * Trace messages to be captured while debugger or other development tool is
+ * attached to the originator.
+ */
+#define OS_TRACE_TYPE_DEBUG (1u << 1)
+
+/*!
+ * @define OS_TRACE_TYPE_INFO
+ * Trace messages that are captured when a debugger is attached, system or
+ * Application mode has been increased to include additional information.
+ */
+#define OS_TRACE_TYPE_INFO (1u << 2)
+
+/*!
+ * @define OS_TRACE_TYPE_ERROR
+ * Trace the message as an error and force a collection as a failure may be
+ * imminent.
+ */
+#define OS_TRACE_TYPE_ERROR ((1u << 6) | (1u << 0))
+
+/*!
+ * @define OS_TRACE_TYPE_FAULT
+ * Trace the message as a fatal error which forces a collection and a diagnostic
+ * to be initiated.
+ */
+#define OS_TRACE_TYPE_FAULT ((1u << 7) | (1u << 6) | (1u << 0))
+
+/*!
+ * @typedef os_trace_payload_t
+ * A block that populates an xpc_object_t of type XPC_TYPE_DICTIONARY to represent
+ * complex data. This block will only be invoked under conditions where tools
+ * have attached to the process. The payload can be used to send arbitrary data 
+ * via the trace call. Tools may use the data to validate state for integration 
+ * tests or provide other introspection services. No assumptions are made about 
+ * the format or structure of the data.
+ */
+typedef void (^os_trace_payload_t)(xpc_object_t xdict);
+
+#pragma mark - function declarations
+
+/*!
+ * @function os_trace
+ *
+ * @abstract
+ * Always inserts a trace message into a buffer pool for later decoding.
+ *
+ * @discussion
+ * Trace message that will be recorded on a typical user install. These should
+ * be limited to things which help diagnose a failure during postmortem
+ * analysis. Trace buffers are generally smaller on a production system.
+ *
+ * @param format
+ * A printf-style format string to generate a human-readable log message when
+ * the trace line is decoded.  Only scalar types are supported, attempts
+ * to pass arbitrary strings will store a pointer that is unresolvable and
+ * will generate an error during decode.
+ *
+ *		os_trace("network event: %ld, last seen: %ld, avg: %g", event_id, last_seen, avg);
+ */
+#define os_trace(format, ...) __extension__({                                           \
+    _Static_assert(__builtin_constant_p(format), "format must be a constant string");   \
+    __attribute__((section("__TEXT,__os_trace"))) static const char _m[] = format;      \
+   OS_TRACE_CALL(format, _m, OS_TRACE_TYPE_RELEASE, ##__VA_ARGS__);                     \
+})
+
+
+#if (defined(__IPHONE_OS_VERSION_MIN_REQUIRED) &&  __IPHONE_OS_VERSION_MIN_REQUIRED >= __IPHONE_10_0) \
+     || (defined(__WATCH_OS_VERSION_MIN_REQUIRED) &&  __WATCH_OS_VERSION_MIN_REQUIRED >= __WATCHOS_3_0) \
+     || (defined(__TV_OS_VERSION_MIN_REQUIRED) && __TV_OS_VERSION_MIN_REQUIRED >= __TVOS_10_0) \
+     || (defined(__MAC_OS_X_VERSION_MIN_REQUIRED) && __MAC_OS_X_VERSION_MIN_REQUIRED >= __MAC_10_12)
+
+/*!
+ * @function os_trace_info
+ *
+ * @abstract
+ * Optionally inserts a trace message containing additional information into a
+ * buffer pool for later decoding.
+ *
+ * @discussion
+ * Trace messages that will be captured when additional information is needed
+ * and are not captured by default.  They will only be captured if the
+ * system/process/activity mode has been increased or if a Development tool has
+ * been attached to the process.
+ *
+ * @param format
+ * A printf-style format string that represents a human-readable message when
+ * the trace line is decoded.  Only scalar types are supported, attempts
+ * to pass arbitrary strings will store a pointer that is unresolvable and
+ * will generate an error during decode.
+ *
+ *		os_trace_info("network interface status %ld", status);
+ */
+#define os_trace_info(format, ...) __extension__({                                      \
+    _Static_assert(__builtin_constant_p(format), "format must be a constant string");   \
+    __attribute__((section("__TEXT,__os_trace"))) static const char _m[] = format;      \
+   OS_TRACE_CALL(format, _m, OS_TRACE_TYPE_INFO, ##__VA_ARGS__);                        \
+})
+
+#endif
+
+/*!
+ * @function os_trace_debug
+ *
+ * @abstract
+ * Insert debug trace message into a buffer pool for later decoding.
+ *
+ * @discussion
+ * Debug trace message to be recorded while debugger or other development tool is
+ * attached to the originator.  This is transported interprocess to help
+ * diagnose the entire call chain including external helpers.
+ *
+ * @param format
+ * A printf-style format string that represents a human-readable message when
+ * the trace line is decoded.  Only scalar types are supported, attempts
+ * to pass arbitrary strings will store a pointer that is unresolvable and
+ * will generate an error during decode.
+ *
+ *		os_trace_debug("network interface status %ld", status);
+ */
+#define os_trace_debug(format, ...) __extension__({                                     \
+    _Static_assert(__builtin_constant_p(format), "format must be a constant string");   \
+    __attribute__((section("__TEXT,__os_trace"))) static const char _m[] = format;      \
+   OS_TRACE_CALL(format, _m, OS_TRACE_TYPE_DEBUG, ##__VA_ARGS__);                       \
+})
+
+/*!
+ * @function os_trace_info_enabled
+ *
+ * @abstract
+ * Avoid unnecessary work for a trace point by checking if additional information
+ * is enabled.
+ *
+ * @discussion
+ * Avoid unnecessary work for a trace point by checking if additional information
+ * is enabled. Generally trace points should not involve expensive operations, but some
+ * circumstances warrant it.  Use this function to avoid doing the work unless
+ * debug level trace messages are requested.
+ *
+ *	if (os_trace_info_enabled()) {
+ *		os_trace_info("value = %d, average = %d",
+ *                            [[dict objectForKey: @"myKey"] intValue],
+ *			      (int) [self getAverage: dict]);
+ *	}
+ *
+ * @result
+ * Returns true if development mode is enabled.
+ */
+__OSX_AVAILABLE_STARTING(__MAC_10_12, __IPHONE_10_0)
+OS_EXPORT OS_NOTHROW OS_WARN_RESULT
+bool
+os_trace_info_enabled(void);
+
+/*!
+ * @function os_trace_debug_enabled
+ *
+ * @abstract
+ * Avoid unnecessary work for a trace point by checking if debug level is enabled.
+ *
+ * @discussion
+ * Avoid unnecessary work for a trace point by checking if debug level is enabled.
+ * Generally trace points should not involve expensive operations, but some
+ * circumstances warrant it.  Use this function to avoid doing the work unless
+ * debug level trace messages are requested.
+ *
+ *	if (os_trace_debug_enabled()) {
+ *		os_trace_debug("value = %d, average = %d",
+ *				[[dict objectForKey: @"myKey"] intValue],
+ *				(int) [self getAverage: dict]);
+ *	}
+ *
+ * @result
+ * Returns true if debug mode is enabled.
+ */
+__OSX_AVAILABLE(10.10) __IOS_AVAILABLE(8.0) __WATCHOS_AVAILABLE(1.0) __TVOS_AVAILABLE(9.0)
+OS_EXPORT OS_NOTHROW OS_WARN_RESULT
+bool
+os_trace_debug_enabled(void);
+
+/*!
+ * @function os_trace_error
+ *
+ * @abstract
+ * Trace the message as an error and force a collection of the trace buffer as a
+ * failure may be imminent.
+ *
+ * @discussion
+ * Trace the message as an error and force a collection of the trace buffer as a
+ * failure may be imminent.
+ *
+ * @param format
+ * A printf-style format string to generate a human-readable log message when
+ * the trace line is decoded.  Only scalar types are supported, attempts
+ * to pass arbitrary strings will store a pointer that is unresolvable and
+ * will generate an error during decode.
+ *
+ *		os_trace_error("socket %d connection timeout %ld", fd, secs);
+ */
+#define os_trace_error(format, ...) __extension__({                                     \
+    _Static_assert(__builtin_constant_p(format), "format must be a constant string");   \
+    __attribute__((section("__TEXT,__os_trace"))) static const char _m[] = format;      \
+   OS_TRACE_CALL(format, _m, OS_TRACE_TYPE_ERROR, ##__VA_ARGS__);                       \
+})
+
+/*!
+ * @function os_trace_fault
+ *
+ * @abstract
+ * Trace the message as a fault which forces a collection of the trace buffer
+ * and diagnostic of the activity.
+ *
+ * @discussion
+ * Trace the message as a fault which forces a collection of the trace buffer
+ * and diagnostic of the activity.
+ *
+ * @param format
+ * A printf-style format string to generate a human-readable log message when
+ * the trace line is decoded.  Only scalar types are supported, attempts
+ * to pass arbitrary strings will store a pointer that is unresolvable and
+ * will generate an error during decode.
+ *
+ *		os_trace_fault("failed to lookup uid %d - aborting", uid);
+ */
+#define os_trace_fault(format, ...) __extension__({                                     \
+    _Static_assert(__builtin_constant_p(format), "format must be a constant string");   \
+    __attribute__((section("__TEXT,__os_trace"))) static const char _m[] = format;      \
+    OS_TRACE_CALL(format, _m, OS_TRACE_TYPE_FAULT, ##__VA_ARGS__);                      \
+})
+
+#if __has_include(<xpc/xpc.h>)
+/*!
+ * @function os_trace_with_payload
+ *
+ * @abstract
+ * Add a trace entry containing the provided values and call the block if
+ * appropriate.
+ *
+ * @discussion
+ * Will insert a trace entry into a limited ring buffer for an activity or
+ * process.  Trace points are for recording interesting data that would improve
+ * diagnosis of unexpected crashes, failures and hangs.  The block will only be
+ * called under the required conditions.
+ *
+ * @param trace_msg
+ * A printf-style format string to generate a human-readable log message when
+ * the trace line is decoded.  Only scalar types are supported. Attempts
+ * to pass arbitrary strings will store a pointer that is unresolvable and
+ * will generate an error during decode.
+ *
+ * The final parameter must be a block of type os_trace_payload_t.
+ *
+ *   os_trace_with_payload("network event %ld", event, ^(xpc_object_t xdict) {
+ *
+ *		// validate the network interface and address where what was expected
+ *		xpc_dictionary_set_string(xdict, "network", ifp->ifa_name);
+ *		xpc_dictionary_set_string(xdict, "ip_address", _get_address(ifp));
+ *   });
+ */
+#define os_trace_with_payload(format, ...) __extension__({                                                              \
+    _Static_assert(__builtin_constant_p(format), "format must be a constant string");                                   \
+    __attribute__((section("__TEXT,__os_trace"))) static const char _m[] = format;                                      \
+    OS_CONCAT(_os_trace_with_payload, OS_COUNT_ARGS(__VA_ARGS__))(format, _m, OS_TRACE_TYPE_RELEASE, ##__VA_ARGS__);    \
+})
+
+#define os_trace_info_with_payload(format, ...) __extension__({                                                     \
+    _Static_assert(__builtin_constant_p(format), "format must be a constant string");                               \
+    __attribute__((section("__TEXT,__os_trace"))) static const char _m[] = format;                                  \
+    OS_CONCAT(_os_trace_with_payload, OS_COUNT_ARGS(__VA_ARGS__))(format, _m, OS_TRACE_TYPE_INFO, ##__VA_ARGS__);   \
+})
+
+#define os_trace_debug_with_payload(format, ...) __extension__({                                                    \
+    _Static_assert(__builtin_constant_p(format), "format must be a constant string");                               \
+    __attribute__((section("__TEXT,__os_trace"))) static const char _m[] = format;                                  \
+    OS_CONCAT(_os_trace_with_payload, OS_COUNT_ARGS(__VA_ARGS__))(format, _m, OS_TRACE_TYPE_DEBUG, ##__VA_ARGS__);  \
+})
+
+#define os_trace_error_with_payload(format, ...) __extension__({                                                    \
+    _Static_assert(__builtin_constant_p(format), "format must be a constant string");                               \
+    __attribute__((section("__TEXT,__os_trace"))) static const char _m[] = format;                                  \
+    OS_CONCAT(_os_trace_with_payload, OS_COUNT_ARGS(__VA_ARGS__))(format, _m, OS_TRACE_TYPE_ERROR, ##__VA_ARGS__);  \
+})
+
+#define os_trace_fault_with_payload(format, ...) __extension__({                                                    \
+    _Static_assert(__builtin_constant_p(format), "format must be a constant string");                               \
+    __attribute__((section("__TEXT,__os_trace"))) static const char _m[] = format;                                  \
+    OS_CONCAT(_os_trace_with_payload, OS_COUNT_ARGS(__VA_ARGS__))(format, _m, OS_TRACE_TYPE_FAULT, ##__VA_ARGS__);  \
+})
+
+#endif // __has_include(<xpc/xpc.h>)
+
+// TODO: change this once we have compiler support
+__OSX_AVAILABLE_STARTING(__MAC_10_12, __IPHONE_10_0)
+OS_EXPORT OS_NOTHROW
+size_t
+_os_trace_encode(uint8_t *buf, size_t buf_size, const char *format, ...);
+
+__OSX_AVAILABLE_STARTING(__MAC_10_12, __IPHONE_10_0)
+OS_EXPORT OS_NOTHROW
+void
+_os_trace_internal(void *dso, uint8_t type, const char *format, const uint8_t *buf, size_t buf_size, os_trace_payload_t payload);
+
+/*!
+ * @function _os_trace_with_buffer
+ *
+ * @abstract
+ * Internal function to support pre-encoded buffer.
+ */
+__OSX_AVAILABLE(10.10) __IOS_AVAILABLE(8.0) __WATCHOS_AVAILABLE(1.0) __TVOS_AVAILABLE(9.0)
+OS_EXPORT OS_NOTHROW
+void
+_os_trace_with_buffer(void *dso, const char *message, uint8_t type, const void *buffer, size_t buffer_size, os_trace_payload_t payload);
+
+__END_DECLS
+
+#endif // __OS_TRACE_H__
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/pexpert/pexpert.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/pexpert/pexpert.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/pexpert/pexpert.h	2015-08-27 01:55:11.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/pexpert/pexpert.h	2016-06-03 22:55:00.000000000 +0200
@@ -250,6 +250,7 @@
 	void    	*arg_ptr,
 	int			max_arg);
 
+
 extern boolean_t PE_get_default(
 	const char	*property_name,
 	void		*property_ptr,
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/security/mac_framework.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/security/mac_framework.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/security/mac_framework.h	2015-08-27 01:55:10.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/security/mac_framework.h	2016-06-03 22:54:59.000000000 +0200
@@ -80,6 +80,7 @@
 struct auditinfo;
 struct bpf_d;
 struct componentname;
+struct cs_blob;
 struct devnode;
 struct flock;
 struct fdescnode;
@@ -195,6 +196,9 @@
 	    unsigned int cmd);
 int	mac_file_check_lock(kauth_cred_t cred, struct fileglob *fg, int op,
 	    struct flock *fl);
+int	mac_file_check_library_validation(struct proc *proc,
+	    struct fileglob *fg, off_t slice_offset,
+	    user_long_t error_message, size_t error_message_size);
 int	mac_file_check_mmap(kauth_cred_t cred, struct fileglob *fg,
 	    int prot, int flags, uint64_t file_pos, int *maxprot);
 void	mac_file_check_mmap_downgrade(kauth_cred_t cred, struct fileglob *fg,
@@ -259,6 +263,10 @@
 int	mac_mount_check_label_update(vfs_context_t ctx, struct mount *mp);
 int	mac_mount_check_mount(vfs_context_t ctx, struct vnode *vp,
 	    struct componentname *cnp, const char *vfc_name);
+int	mac_mount_check_snapshot_create(vfs_context_t ctx, struct mount *mp,
+	    const char *name);
+int	mac_mount_check_snapshot_delete(vfs_context_t ctx, struct mount *mp,
+	    const char *name);
 int	mac_mount_check_remount(vfs_context_t ctx, struct mount *mp);
 int	mac_mount_check_setattr(vfs_context_t ctx, struct mount *mp,
 	    struct vfs_attr *vfa);
@@ -327,6 +335,8 @@
 int	mac_proc_check_debug(proc_t proc1, proc_t proc2);
 int	mac_proc_check_cpumon(proc_t curp);
 int	mac_proc_check_proc_info(proc_t curp, proc_t target, int callnum, int flavor);
+int	mac_proc_check_get_cs_info(proc_t curp, proc_t target, unsigned int op);
+int	mac_proc_check_set_cs_info(proc_t curp, proc_t target, unsigned int op);
 int	mac_proc_check_fork(proc_t proc);
 int	mac_proc_check_suspend_resume(proc_t proc, int sr);
 int	mac_proc_check_get_task_name(kauth_cred_t cred, struct proc *p);
@@ -456,6 +466,8 @@
 int	mac_vnode_check_chdir(vfs_context_t ctx, struct vnode *dvp);
 int	mac_vnode_check_chroot(vfs_context_t ctx, struct vnode *dvp,
 	    struct componentname *cnp);
+int	mac_vnode_check_clone(vfs_context_t ctx, struct vnode *dvp,
+	    struct vnode *vp, struct componentname *cnp);
 int	mac_vnode_check_create(vfs_context_t ctx, struct vnode *dvp,
 	    struct componentname *cnp, struct vnode_attr *vap);
 int	mac_vnode_check_deleteextattr(vfs_context_t ctx, struct vnode *vp,
@@ -465,9 +477,10 @@
 int	mac_vnode_check_exec(vfs_context_t ctx, struct vnode *vp,
 	    struct image_params *imgp);
 int	mac_vnode_check_fsgetpath(vfs_context_t ctx, struct vnode *vp);
-int	mac_vnode_check_signature(struct vnode *vp, off_t macho_offset,
-	    unsigned char *sha1, const void * signature, size_t size, 
-	    int flags, int *is_platform_binary);
+int	mac_vnode_check_signature(struct vnode *vp,
+		struct cs_blob *cs_blob, struct image_params *imgp,
+		unsigned int *cs_flags,
+		int flags);
 int     mac_vnode_check_getattrlist(vfs_context_t ctx, struct vnode *vp,
 	    struct attrlist *alist);
 int	mac_vnode_check_getextattr(vfs_context_t ctx, struct vnode *vp,
@@ -497,6 +510,8 @@
 	    struct attrlist *alist);
 int     mac_vnode_check_select(vfs_context_t ctx, struct vnode *vp,
 	    int which);
+int	mac_vnode_check_setacl(vfs_context_t ctx, struct vnode *vp,
+	    struct kauth_acl *acl);
 int     mac_vnode_check_setattrlist(vfs_context_t ctxd, struct vnode *vp,
 	    struct attrlist *alist);
 int	mac_vnode_check_setextattr(vfs_context_t ctx, struct vnode *vp,
@@ -515,7 +530,7 @@
 	    kauth_cred_t file_cred, struct vnode *vp);
 int	mac_vnode_check_uipc_bind(vfs_context_t ctx, struct vnode *dvp,
 	    struct componentname *cnp, struct vnode_attr *vap);
-int	mac_vnode_check_uipc_connect(vfs_context_t ctx, struct vnode *vp);
+int	mac_vnode_check_uipc_connect(vfs_context_t ctx, struct vnode *vp, struct socket *so);
 int	mac_vnode_check_unlink(vfs_context_t ctx, struct vnode *dvp,
 	    struct vnode *vp, struct componentname *cnp);
 int	mac_vnode_check_write(vfs_context_t ctx,
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/security/mac_policy.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/security/mac_policy.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/security/mac_policy.h	2015-08-27 01:55:10.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/security/mac_policy.h	2016-06-03 22:55:00.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2007-2010 Apple Inc. All rights reserved.
+ * Copyright (c) 2007-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  * 
@@ -87,6 +87,7 @@
 struct attrlist;
 struct auditinfo;
 struct bpf_d;
+struct cs_blob;
 struct devnode;
 struct fileglob;
 struct ifnet;
@@ -300,7 +301,7 @@
   @param vnodelabel Label corresponding to vp
   @param scriptvnodelabel Script vnode label
   @param execlabel Userspace provided execution label
-  @param proc Object process
+  @param p Object process
   @param macpolicyattr MAC policy-specific spawn attribute data
   @param macpolicyattrlen Length of policy-specific spawn attribute data
   @see mac_execve
@@ -858,6 +859,31 @@
 	struct flock *fl
 );
 /**
+  @brief Check with library validation if a macho slice is allowed to be combined into a proc.
+  @param p Subject process
+  @param fg Fileglob structure
+  @param slice_offset offset of the code slice
+  @param error_message error message returned to user-space in case of error (userspace pointer)
+  @param error_message_size error message size
+
+  Its a little odd that the MAC/kext writes into userspace since this
+  implies there is only one MAC module that implements this, however
+  the alterantive is to allocate memory in xnu, on the hope that
+  the MAC module will use it, or allocated in the MAC module and then
+  free it in xnu. Either of these are very appeling, so lets go with
+  the slightly more hacky way.
+
+  @return Return 0 if access is granted, otherwise an appropriate value for
+  errno should be returned.
+*/
+typedef int mpo_file_check_library_validation_t(
+	struct proc *p,
+	struct fileglob *fg,
+	off_t slice_offset,
+	user_long_t error_message,
+	size_t error_message_size
+);
+/**
   @brief Access control check for mapping a file
   @param cred Subject credential
   @param fg fileglob representing file to map
@@ -1217,8 +1243,6 @@
 /**
   @brief Device hardware access control
   @param devtype Type of device connected
-  @param properties XML-formatted property list
-  @param proplen Length of the property list
 
   This is the MAC Framework device access control, which is called by the I/O
   Kit when a new device is connected to the system to determine whether that
@@ -1242,7 +1266,6 @@
 /**
   @brief Access control check for opening an I/O Kit device
   @param cred Subject credential
-  @param device_path Device path
   @param user_client User client instance
   @param user_client_type User client type
 
@@ -1608,7 +1631,7 @@
   @param cred Subject credential
   @param mp The mount point
   @param label Label associated with the mount point
-  @param com Filesystem-dependent request code; see fsctl(2)
+  @param cmd Filesystem-dependent request code; see fsctl(2)
 
   Determine whether the subject identified by the credential can perform
   the volume operation indicated by com.
@@ -1687,6 +1710,41 @@
 	const char *vfc_name
 );
 /**
+  @brief Access control check for fs_snapshot_create
+  @param cred Subject credential
+  @mp Filesystem mount point to create snapshot of
+  @name Name of snapshot to create
+
+  Determine whether the subject identified by the credential can
+  create a snapshot of the filesystem at the given mount point.
+
+  @return Return 0 if access is granted, otherwise an appropriate value
+  for errno should be returned.
+*/
+typedef int mpo_mount_check_snapshot_create_t(
+	kauth_cred_t cred,
+	struct mount *mp,
+	const char *name
+);
+/**
+  @brief Access control check for fs_snapshot_delete
+  @param cred Subject credential
+  @mp Filesystem mount point to delete snapshot of
+  @name Name of snapshot to delete
+
+  Determine whether the subject identified by the credential can
+  delete the named snapshot from the filesystem at the given
+  mount point.
+
+  @return Return 0 if access is granted, otherwise an appropriate value
+  for errno should be returned.
+*/
+typedef int mpo_mount_check_snapshot_delete_t(
+	kauth_cred_t cred,
+	struct mount *mp,
+	const char *name
+);
+/**
   @brief Access control check remounting a filesystem
   @param cred Subject credential
   @param mp The mount point
@@ -2039,7 +2097,7 @@
   @brief Create a pipe label
   @param cred Subject credential
   @param cpipe object to be labeled
-  @param label Label for the pipe object
+  @param pipelabel Label for the pipe object
 
   Create a label for the pipe object being created by the supplied
   user credential. This call is made when the pipe is being created
@@ -2614,7 +2672,7 @@
 /**
   @brief Access control check for setting host exception ports.
   @param cred Subject credential
-  @param exceptions Exception port to set
+  @param exception Exception port to set
 
   @return Return 0 if access is granted, otherwise an appropriate value for
   errno should be returned.
@@ -2737,6 +2795,40 @@
 	int flavor
 );
 /**
+  @brief Access control check for retrieving code signing information.
+  @param cred Subject credential
+  @param target Target process
+  @param op Code signing operation being performed
+
+  Determine whether the subject identified by the credential should be
+  allowed to get code signing information about the target process.
+
+  @return Return 0 if access is granted, otherwise an appropriate value for
+  errno should be returned.
+*/
+typedef int mpo_proc_check_get_cs_info_t(
+	kauth_cred_t cred,
+	struct proc *target,
+	unsigned int op
+);
+/**
+  @brief Access control check for setting code signing information.
+  @param cred Subject credential
+  @param target Target process
+  @param op Code signing operation being performed.
+
+  Determine whether the subject identified by the credential should be
+  allowed to set code signing information about the target process.
+
+  @return Return 0 if permission is granted, otherwise an appropriate
+  value of errno should be returned.
+*/
+typedef int mpo_proc_check_set_cs_info_t(
+	kauth_cred_t cred,
+	struct proc *target,
+	unsigned int op
+);
+/**
   @brief Access control check for mmap MAP_ANON
   @param proc User process requesting the memory
   @param cred Subject credential
@@ -2931,7 +3023,7 @@
 /**
   @brief Access control check for socket accept
   @param cred Subject credential
-  @param socket Object socket
+  @param so Object socket
   @param socklabel Policy label for socket
 
   Determine whether the subject identified by the credential can accept()
@@ -3142,9 +3234,9 @@
 /**                                                                                               
   @brief Access control check for socket receive                                                  
   @param cred Subject credential                                                                  
-  @param socket Object socket                                                                     
+  @param sock Object socket                                                                     
   @param socklabel Policy label for socket                                                        
-  @param addr Name of the remote socket                                                           
+  @param saddr Name of the remote socket                                                           
                                                                                                   
   Determine whether the subject identified by the credential can                                  
   receive data from the remote host specified by addr.                                            
@@ -3734,7 +3826,7 @@
 /**
   @brief Create a System V message label
   @param cred Subject credential
-  @param msqkptr The message queue the message will be placed in
+  @param msqptr The message queue the message will be placed in
   @param msqlabel The label of the message queue
   @param msgptr The message
   @param msglabel The label of the message
@@ -3786,7 +3878,7 @@
   @param cred Subject credential
   @param msgptr The message
   @param msglabel The message's label
-  @param msqkptr The message queue
+  @param msqptr The message queue
   @param msqlabel The message queue's label
 
   Determine whether the subject identified by the credential can add the
@@ -3910,7 +4002,7 @@
 /**
   @brief Create a System V message queue label
   @param cred Subject credential
-  @param msqkptr The message queue
+  @param msqptr The message queue
   @param msqlabel The label of the message queue
 
 */
@@ -4190,7 +4282,7 @@
 /**
   @brief Access control check for getting a process's task name
   @param cred Subject credential
-  @param proc Object process
+  @param p Object process
 
   Determine whether the subject identified by the credential can get
   the passed process's task name port.
@@ -4207,7 +4299,7 @@
 /**
   @brief Access control check for getting a process's task port
   @param cred Subject credential
-  @param proc Object process
+  @param p Object process
 
   Determine whether the subject identified by the credential can get
   the passed process's task control port.
@@ -4225,7 +4317,7 @@
 /**
   @brief Access control check for exposing a process's task port
   @param cred Subject credential
-  @param proc Object process
+  @param p Object process
 
   Determine whether the subject identified by the credential can expose
   the passed process's task control port.
@@ -4243,7 +4335,7 @@
 
 /**
  @brief Check whether task's IPC may inherit across process exec
- @param proc current process instance
+ @param p current process instance
  @param cur_vp vnode pointer to current instance
  @param cur_offset offset of binary of currently executing image
  @param img_vp vnode pointer to to be exec'ed image
@@ -4264,7 +4356,7 @@
 
 /**
  @brief Privilege check for a process to run invalid
- @param proc Object process
+ @param p Object process
  
  Determine whether the process may execute even though the system determined
  that it is untrusted (eg unidentified / modified code).
@@ -4349,6 +4441,29 @@
 	struct componentname *cnp
 );
 /**
+  @brief Access control check for creating clone
+  @param cred Subject credential
+  @param dvp Vnode of directory to create the clone in
+  @param dlabel Policy label associated with dvp
+  @param vp Vnode of the file to clone from
+  @param label Policy label associated with vp
+  @param cnp Component name for the clone being created
+
+  Determine whether the subject identified by the credential should be
+  allowed to create a clone of the vnode vp with the name specified by cnp.
+
+  @return Return 0 if access is granted, otherwise an appropriate value for
+  errno should be returned.
+*/
+typedef int mpo_vnode_check_clone_t(
+	kauth_cred_t cred,
+	struct vnode *dvp,
+	struct label *dlabel,
+	struct vnode *vp,
+	struct label *label,
+	struct componentname *cnp
+);
+/**
   @brief Access control check for creating vnode
   @param cred Subject credential
   @param dvp Directory vnode
@@ -4421,7 +4536,7 @@
   @param vp Object vnode to execute
   @param scriptvp Script being executed by interpreter, if any.
   @param vnodelabel Label corresponding to vp
-  @param scriptvnodelabel Script vnode label
+  @param scriptlabel Script vnode label
   @param execlabel Userspace provided execution label
   @param cnp Component name for file being executed
   @param macpolicyattr MAC policy-specific spawn attribute data.
@@ -4471,12 +4586,24 @@
 );
 /**
   @brief Access control check after determining the code directory hash
- */
-typedef int mpo_vnode_check_signature_t(struct vnode *vp,  struct label *label, 
-					off_t macho_offset, unsigned char *sha1, 
-					const void *signature, int size,
-					int flags, int *is_platform_binary);
+  @param vp vnode vnode to combine into proc
+  @param label label associated with the vnode
+  @param cs_blob the code signature to check
+  @param cs_flags update code signing flags if needed
+  @param flags operational flag to mpo_vnode_check_signature
+  @param fatal_failure_desc description of fatal failure
+  @param fatal_failure_desc_len failure description len, failure is fatal if non-0
 
+  @return Return 0 if access is granted, otherwise an appropriate value for
+  errno should be returned.
+ */
+typedef int mpo_vnode_check_signature_t(
+	struct vnode *vp,
+	struct label *label,
+	struct cs_blob *cs_blob,
+	unsigned int *cs_flags,
+	int flags,
+	char **fatal_failure_desc, size_t *fatal_failure_desc_len);
 /**
   @brief Access control check for retrieving file attributes
   @param cred Subject credential
@@ -4530,7 +4657,7 @@
   @param cred Subject credential
   @param vp Object vnode
   @param label Policy label for vp
-  @param com Device-dependent request code; see ioctl(2)
+  @param cmd Device-dependent request code; see ioctl(2)
 
   Determine whether the subject identified by the credential can perform
   the ioctl operation indicated by com.
@@ -4551,7 +4678,7 @@
 );
 /**
   @brief Access control check for vnode kqfilter
-  @param cred Subject credential
+  @param active_cred Subject credential
   @param kn Object knote
   @param vp Object vnode
   @param label Policy label for vp
@@ -4888,6 +5015,26 @@
 	int which
 );
 /**
+  @brief Access control check for setting ACL
+  @param cred Subject credential
+  @param vp Object node
+  @param label Policy label for vp
+  @param acl ACL structure pointer
+
+  Determine whether the subject identified by the credential can set an ACL
+  on the specified vnode.  The ACL pointer will be NULL when removing an ACL.
+
+  @return Return 0 if access is granted, otherwise an appropriate value for
+  errno should be returned. Suggested failure: EACCES for label mismatch or
+  EPERM for lack of privilege.
+*/
+typedef int mpo_vnode_check_setacl_t(
+	kauth_cred_t cred,
+	struct vnode *vp,
+	struct label *label,
+	struct kauth_acl *acl
+);
+/**
   @brief Access control check for setting file attributes
   @param cred Subject credential
   @param vp Object vnode
@@ -5097,6 +5244,7 @@
   @param cred Subject credential
   @param vp Object vnode
   @param label Policy label associated with vp
+  @param so Socket
 
   Determine whether the subject identified by the credential can perform a
   connect operation on the passed UNIX domain socket vnode.
@@ -5108,7 +5256,8 @@
 typedef int mpo_vnode_check_uipc_connect_t(
 	kauth_cred_t cred,
 	struct vnode *vp,
-	struct label *label
+	struct label *label,
+	socket_t so
 );
 /**
   @brief Access control check for deleting vnode
@@ -5762,7 +5911,7 @@
  * Please note that this should be kept in sync with the check assumptions
  * policy in bsd/kern/policy_check.c (policy_ops struct).
  */
-#define MAC_POLICY_OPS_VERSION 37 /* inc when new reserved slots are taken */
+#define MAC_POLICY_OPS_VERSION 43 /* inc when new reserved slots are taken */
 struct mac_policy_ops {
 	mpo_audit_check_postselect_t		*mpo_audit_check_postselect;
 	mpo_audit_check_preselect_t		*mpo_audit_check_preselect;
@@ -5837,7 +5986,7 @@
 	mpo_ipq_label_init_t			*mpo_ipq_label_init;
 	mpo_ipq_label_update_t			*mpo_ipq_label_update;
 
-	mpo_reserved_hook_t                     *mpo_reserved1;
+	mpo_file_check_library_validation_t     *mpo_file_check_library_validation;
 	mpo_reserved_hook_t                     *mpo_reserved2;
 	mpo_reserved_hook_t                     *mpo_reserved3;
 	mpo_reserved_hook_t                     *mpo_reserved4;
@@ -6032,11 +6181,11 @@
 	mpo_reserved_hook_t			*mpo_reserved23;
 	mpo_reserved_hook_t			*mpo_reserved24;
 	mpo_reserved_hook_t			*mpo_reserved25;
-	mpo_reserved_hook_t			*mpo_reserved26;
-	mpo_reserved_hook_t			*mpo_reserved27;
-	mpo_reserved_hook_t			*mpo_reserved28;
-	mpo_reserved_hook_t			*mpo_reserved29;
-	mpo_reserved_hook_t			*mpo_reserved30;
+	mpo_mount_check_snapshot_create_t	*mpo_mount_check_snapshot_create;
+	mpo_mount_check_snapshot_delete_t	*mpo_mount_check_snapshot_delete;
+	mpo_vnode_check_clone_t			*mpo_vnode_check_clone;
+	mpo_proc_check_get_cs_info_t		*mpo_proc_check_get_cs_info;
+	mpo_proc_check_set_cs_info_t		*mpo_proc_check_set_cs_info;
 
 	mpo_iokit_check_hid_control_t		*mpo_iokit_check_hid_control;
 
@@ -6120,7 +6269,8 @@
 
 	mpo_vnode_notify_rename_t		*mpo_vnode_notify_rename;
 
-	mpo_reserved_hook_t			*mpo_reserved32;
+	mpo_vnode_check_setacl_t		*mpo_vnode_check_setacl;
+
 	mpo_reserved_hook_t			*mpo_reserved33;
 
 	mpo_system_check_kas_info_t		*mpo_system_check_kas_info;
@@ -6222,6 +6372,46 @@
 			  size_t *);
 int	mac_vnop_removexattr(struct vnode *, const char *);
 
+/**
+   @brief Set an extended attribute on a vnode-based fileglob.
+   @param fg fileglob representing file to attach the extended attribute
+   @param name extended attribute name
+   @param buf buffer of data to use as the extended attribute value
+   @param len size of buffer
+
+   Sets the value of an extended attribute on a file.
+
+   Caller must hold an iocount on the vnode represented by the fileglob.
+*/
+int	mac_file_setxattr(struct fileglob *fg, const char *name, char *buf, size_t len);
+
+/**
+	@brief Get an extended attribute from a vnode-based fileglob.
+	@param fg fileglob representing file to read the extended attribute
+	@param name extended attribute name
+	@param buf buffer of data to hold the extended attribute value
+	@param len size of buffer
+	@param attrlen size of full extended attribute value
+
+	Gets the value of an extended attribute on a file.
+
+	Caller must hold an iocount on the vnode represented by the fileglob.
+*/
+int	mac_file_getxattr(struct fileglob *fg, const char *name, char *buf, size_t len,
+			  size_t *attrlen);
+
+/**
+	@brief Remove an extended attribute from a vnode-based fileglob.
+	@param fg fileglob representing file to remove the extended attribute
+	@param name extended attribute name
+
+	Removes the named extended attribute from the file.
+
+	Caller must hold an iocount on the vnode represented by the fileglob.
+*/
+int	mac_file_removexattr(struct fileglob *fg, const char *name);
+
+
 /*
  * Arbitrary limit on how much data will be logged by the audit
  * entry points above.
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/_types/_fd_def.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/_types/_fd_def.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/_types/_fd_def.h	2015-08-27 01:55:32.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/_types/_fd_def.h	2016-06-03 22:55:19.000000000 +0200
@@ -52,11 +52,11 @@
 static __inline int
 __darwin_fd_isset(int _n, const struct fd_set *_p)
 {
-	return (_p->fds_bits[(unsigned long)_n/__DARWIN_NFDBITS] & ((__int32_t)(1<<((unsigned long)_n % __DARWIN_NFDBITS))));
+	return (_p->fds_bits[(unsigned long)_n/__DARWIN_NFDBITS] & ((__int32_t)(((unsigned long)1)<<((unsigned long)_n % __DARWIN_NFDBITS))));
 }
 
-#define	__DARWIN_FD_SET(n, p)	do { int __fd = (n); ((p)->fds_bits[(unsigned long)__fd/__DARWIN_NFDBITS] |= ((__int32_t)(1<<((unsigned long)__fd % __DARWIN_NFDBITS)))); } while(0)
-#define	__DARWIN_FD_CLR(n, p)	do { int __fd = (n); ((p)->fds_bits[(unsigned long)__fd/__DARWIN_NFDBITS] &= ~((__int32_t)(1<<((unsigned long)__fd % __DARWIN_NFDBITS)))); } while(0)
+#define	__DARWIN_FD_SET(n, p)	do { int __fd = (n); ((p)->fds_bits[(unsigned long)__fd/__DARWIN_NFDBITS] |= ((__int32_t)(((unsigned long)1)<<((unsigned long)__fd % __DARWIN_NFDBITS)))); } while(0)
+#define	__DARWIN_FD_CLR(n, p)	do { int __fd = (n); ((p)->fds_bits[(unsigned long)__fd/__DARWIN_NFDBITS] &= ~((__int32_t)(((unsigned long)1)<<((unsigned long)__fd % __DARWIN_NFDBITS)))); } while(0)
 #define	__DARWIN_FD_ISSET(n, p)	__darwin_fd_isset((n), (p))
 
 #if __GNUC__ > 3 || __GNUC__ == 3 && __GNUC_MINOR__ >= 3
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/_types/_fsobj_id_t.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/_types/_fsobj_id_t.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/_types/_fsobj_id_t.h	1970-01-01 01:00:00.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/_types/_fsobj_id_t.h	2016-06-03 22:55:20.000000000 +0200
@@ -0,0 +1,36 @@
+/*
+ * Copyright (c) 2016 Apple Inc. All rights reserved.
+ *
+ * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
+ *
+ * This file contains Original Code and/or Modifications of Original Code
+ * as defined in and that are subject to the Apple Public Source License
+ * Version 2.0 (the 'License'). You may not use this file except in
+ * compliance with the License. The rights granted to you under the License
+ * may not be used to create, or enable the creation or redistribution of,
+ * unlawful or unlicensed copies of an Apple operating system, or to
+ * circumvent, violate, or enable the circumvention or violation of, any
+ * terms of an Apple operating system software license agreement.
+ *
+ * Please obtain a copy of the License at
+ * http://www.opensource.apple.com/apsl/ and read it before using this file.
+ *
+ * The Original Code and all software distributed under the License are
+ * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
+ * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
+ * INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
+ * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
+ * Please see the License for the specific language governing rights and
+ * limitations under the License.
+ *
+ * @APPLE_OSREFERENCE_LICENSE_HEADER_END@
+ */
+#ifndef _FSOBJ_ID_T
+#define _FSOBJ_ID_T
+
+typedef struct fsobj_id {
+	u_int32_t fid_objno;
+	u_int32_t fid_generation;
+} fsobj_id_t;
+
+#endif /* _FSOBJ_ID_T */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/_types/_u_int16_t.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/_types/_u_int16_t.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/_types/_u_int16_t.h	1970-01-01 01:00:00.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/_types/_u_int16_t.h	2016-06-03 22:55:24.000000000 +0200
@@ -0,0 +1,31 @@
+/*
+ * Copyright (c) 2012 Apple Inc. All rights reserved.
+ *
+ * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
+ * 
+ * This file contains Original Code and/or Modifications of Original Code
+ * as defined in and that are subject to the Apple Public Source License
+ * Version 2.0 (the 'License'). You may not use this file except in
+ * compliance with the License. The rights granted to you under the License
+ * may not be used to create, or enable the creation or redistribution of,
+ * unlawful or unlicensed copies of an Apple operating system, or to
+ * circumvent, violate, or enable the circumvention or violation of, any
+ * terms of an Apple operating system software license agreement.
+ * 
+ * Please obtain a copy of the License at
+ * http://www.opensource.apple.com/apsl/ and read it before using this file.
+ * 
+ * The Original Code and all software distributed under the License are
+ * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
+ * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
+ * INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
+ * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
+ * Please see the License for the specific language governing rights and
+ * limitations under the License.
+ * 
+ * @APPLE_OSREFERENCE_LICENSE_HEADER_END@
+ */
+#ifndef _U_INT16_T
+#define _U_INT16_T
+typedef	unsigned short			u_int16_t;
+#endif /* _U_INT16_T */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/_types/_u_int32_t.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/_types/_u_int32_t.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/_types/_u_int32_t.h	1970-01-01 01:00:00.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/_types/_u_int32_t.h	2016-06-03 22:55:24.000000000 +0200
@@ -0,0 +1,31 @@
+/*
+ * Copyright (c) 2012 Apple Inc. All rights reserved.
+ *
+ * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
+ * 
+ * This file contains Original Code and/or Modifications of Original Code
+ * as defined in and that are subject to the Apple Public Source License
+ * Version 2.0 (the 'License'). You may not use this file except in
+ * compliance with the License. The rights granted to you under the License
+ * may not be used to create, or enable the creation or redistribution of,
+ * unlawful or unlicensed copies of an Apple operating system, or to
+ * circumvent, violate, or enable the circumvention or violation of, any
+ * terms of an Apple operating system software license agreement.
+ * 
+ * Please obtain a copy of the License at
+ * http://www.opensource.apple.com/apsl/ and read it before using this file.
+ * 
+ * The Original Code and all software distributed under the License are
+ * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
+ * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
+ * INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
+ * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
+ * Please see the License for the specific language governing rights and
+ * limitations under the License.
+ * 
+ * @APPLE_OSREFERENCE_LICENSE_HEADER_END@
+ */
+#ifndef _U_INT32_T
+#define _U_INT32_T
+typedef	unsigned int		u_int32_t;
+#endif /* _U_INT32_T */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/_types/_u_int64_t.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/_types/_u_int64_t.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/_types/_u_int64_t.h	1970-01-01 01:00:00.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/_types/_u_int64_t.h	2016-06-03 22:55:24.000000000 +0200
@@ -0,0 +1,31 @@
+/*
+ * Copyright (c) 2012 Apple Inc. All rights reserved.
+ *
+ * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
+ * 
+ * This file contains Original Code and/or Modifications of Original Code
+ * as defined in and that are subject to the Apple Public Source License
+ * Version 2.0 (the 'License'). You may not use this file except in
+ * compliance with the License. The rights granted to you under the License
+ * may not be used to create, or enable the creation or redistribution of,
+ * unlawful or unlicensed copies of an Apple operating system, or to
+ * circumvent, violate, or enable the circumvention or violation of, any
+ * terms of an Apple operating system software license agreement.
+ * 
+ * Please obtain a copy of the License at
+ * http://www.opensource.apple.com/apsl/ and read it before using this file.
+ * 
+ * The Original Code and all software distributed under the License are
+ * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
+ * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
+ * INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
+ * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
+ * Please see the License for the specific language governing rights and
+ * limitations under the License.
+ * 
+ * @APPLE_OSREFERENCE_LICENSE_HEADER_END@
+ */
+#ifndef _U_INT64_T
+#define _U_INT64_T
+typedef	unsigned long long	u_int64_t;
+#endif /* _U_INT64_T */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/_types/_u_int8_t.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/_types/_u_int8_t.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/_types/_u_int8_t.h	1970-01-01 01:00:00.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/_types/_u_int8_t.h	2016-06-03 22:55:24.000000000 +0200
@@ -0,0 +1,31 @@
+/*
+ * Copyright (c) 2016 Apple Inc. All rights reserved.
+ *
+ * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
+ * 
+ * This file contains Original Code and/or Modifications of Original Code
+ * as defined in and that are subject to the Apple Public Source License
+ * Version 2.0 (the 'License'). You may not use this file except in
+ * compliance with the License. The rights granted to you under the License
+ * may not be used to create, or enable the creation or redistribution of,
+ * unlawful or unlicensed copies of an Apple operating system, or to
+ * circumvent, violate, or enable the circumvention or violation of, any
+ * terms of an Apple operating system software license agreement.
+ * 
+ * Please obtain a copy of the License at
+ * http://www.opensource.apple.com/apsl/ and read it before using this file.
+ * 
+ * The Original Code and all software distributed under the License are
+ * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
+ * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
+ * INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
+ * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
+ * Please see the License for the specific language governing rights and
+ * limitations under the License.
+ * 
+ * @APPLE_OSREFERENCE_LICENSE_HEADER_END@
+ */
+#ifndef _U_INT8_T
+#define _U_INT8_T
+typedef	unsigned char		u_int8_t;
+#endif /* _U_INT8_T */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/attr.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/attr.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/attr.h	2015-08-27 01:55:54.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/attr.h	2016-06-03 22:55:48.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2000-2010 Apple Computer, Inc. All rights reserved.
+ * Copyright (c) 2000-2016 Apple Computer, Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  * 
@@ -69,10 +69,7 @@
 
 typedef u_int32_t fsvolid_t;
 
-typedef struct fsobj_id {
-	u_int32_t		fid_objno;
-	u_int32_t		fid_generation;
-} fsobj_id_t;
+#include <sys/_types/_fsobj_id_t.h> /* file object id type */
 
 typedef u_int32_t attrgroup_t;
 
@@ -217,6 +214,15 @@
  * only legitimate attributes for obtaining object IDs from this volume and the
  * 32-bit fid_objno fields of the fsobj_id_t returned by ATTR_CMN_OBJID,
  * ATTR_CMN_OBJPERMID, and ATTR_CMN_PAROBJID are undefined.
+ *
+ * VOL_CAP_FMT_DIR_HARDLINKS: When set, the volume supports directory
+ * hard links.
+ *
+ * VOL_CAP_FMT_DOCUMENT_ID: When set, the volume supports document IDs
+ * (an ID which persists across object ID changes) for document revisions.
+ *
+ * VOL_CAP_FMT_WRITE_GENERATION_COUNT: When set, the volume supports write
+ * generation counts (a count of how many times an object has been modified)
  */
 #define VOL_CAP_FMT_PERSISTENTOBJECTIDS		0x00000001
 #define VOL_CAP_FMT_SYMBOLICLINKS 		0x00000002
@@ -236,6 +242,9 @@
 #define VOL_CAP_FMT_NO_VOLUME_SIZES		0x00008000
 #define VOL_CAP_FMT_DECMPFS_COMPRESSION		0x00010000
 #define VOL_CAP_FMT_64BIT_OBJECT_IDS		0x00020000
+#define VOL_CAP_FMT_DIR_HARDLINKS		0x00040000
+#define VOL_CAP_FMT_DOCUMENT_ID			0x00080000
+#define VOL_CAP_FMT_WRITE_GENERATION_COUNT	0x00100000
 
 
 /*
@@ -294,6 +303,15 @@
  *
  * VOL_CAP_INT_NAMEDSTREAMS: When set, the volume supports
  * native named streams.
+ *
+ * VOL_CAP_INT_CLONE: When set, the volume supports clones.
+ *
+ * VOL_CAP_INT_RENAME_SWAP: When set, the volume supports swapping
+ * file system objects.
+ *
+ * VOL_CAP_INT_RENAME_EXCL: When set, the volume supports an
+ * exclusive rename operation.
+ *
  */
 #define VOL_CAP_INT_SEARCHFS			0x00000001
 #define VOL_CAP_INT_ATTRLIST			0x00000002
@@ -310,6 +328,9 @@
 #define VOL_CAP_INT_MANLOCK			0x00001000
 #define VOL_CAP_INT_NAMEDSTREAMS		0x00002000
 #define VOL_CAP_INT_EXTENDED_ATTR		0x00004000
+#define VOL_CAP_INT_CLONE			0x00010000
+#define VOL_CAP_INT_RENAME_SWAP			0x00040000
+#define VOL_CAP_INT_RENAME_EXCL			0x00080000
 
 typedef struct vol_attributes_attr {
 	attribute_set_t validattr;
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/buf.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/buf.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/buf.h	2015-08-27 01:55:54.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/buf.h	2016-06-03 22:55:48.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2000-2014 Apple Computer, Inc. All rights reserved.
+ * Copyright (c) 2000-2016 Apple Computer, Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  * 
@@ -106,14 +106,14 @@
  @abstract Mark a buffer as "aged," i.e. as a good candidate to be discarded and reused after buf_brelse().
  @param bp Buffer to mark.
  */
-void	buf_markaged(buf_t);
+void	buf_markaged(buf_t bp);
 
 /*!
  @function buf_markinvalid
  @abstract Mark a buffer as not having valid data and being ready for immediate reuse after buf_brelse().
  @param bp Buffer to mark.
  */
-void	buf_markinvalid(buf_t);
+void	buf_markinvalid(buf_t bp);
 
 /*!
  @function buf_markdelayed
@@ -122,7 +122,7 @@
  or pressure necessitating reuse of the buffer will cause it to be written back to disk.
  @param bp Buffer to mark.
  */
-void	buf_markdelayed(buf_t);
+void	buf_markdelayed(buf_t bp);
 
 void	buf_markclean(buf_t);
 
@@ -133,14 +133,14 @@
  buf_markeintr does not itself do a wakeup.
  @param bp Buffer to mark.
  */
-void	buf_markeintr(buf_t);
+void	buf_markeintr(buf_t bp);
 
 /*!
  @function buf_markfua
  @abstract Mark a buffer for write through disk cache, if disk supports it.
  @param bp Buffer to mark.
  */
-void	buf_markfua(buf_t);
+void	buf_markfua(buf_t bp);
 
 /*!
  @function buf_fua
@@ -148,7 +148,7 @@
  @param bp Buffer to test.
  @return Nonzero if buffer is marked for write-through, 0 if not.
  */
-int	buf_fua(buf_t);
+int	buf_fua(buf_t bp);
 
 /*!
  @function buf_valid
@@ -156,7 +156,7 @@
  @param bp Buffer to test.
  @return Nonzero if buffer has valid data, 0 if not.
  */
-int	buf_valid(buf_t);
+int	buf_valid(buf_t bp);
 
 /*!
  @function buf_fromcache
@@ -166,7 +166,7 @@
  @param bp Buffer to test.
  @return Nonzero if we got this buffer's data without doing I/O, 0 if not.
  */
-int	buf_fromcache(buf_t);
+int	buf_fromcache(buf_t bp);
 
 /*!
  @function buf_upl
@@ -176,7 +176,7 @@
  @param bp Buffer whose upl to grab.
  @return Buffer's upl if it has one, else NULL.
  */
-void *	buf_upl(buf_t);
+void *	buf_upl(buf_t bp);
 
 /*!
  @function buf_uploffset
@@ -185,7 +185,7 @@
  @param bp Buffer whose uploffset to grab.
  @return Buffer's uploffset--does not check whether that value makes sense for this buffer.
  */
-uint32_t buf_uploffset(buf_t);
+uint32_t buf_uploffset(buf_t bp);
 
 /*!
  @function buf_rcred
@@ -195,7 +195,7 @@
  @param bp Buffer whose credential to grab.
  @return Credential if it exists, else NULL.
  */
-kauth_cred_t buf_rcred(buf_t);
+kauth_cred_t buf_rcred(buf_t bp);
 
 /*!
  @function buf_wcred
@@ -205,7 +205,7 @@
  @param bp Buffer whose credential to grab.
  @return Credential if it exists, else NULL.
  */
-kauth_cred_t buf_wcred(buf_t);
+kauth_cred_t buf_wcred(buf_t bp);
 
 /*!
  @function buf_proc
@@ -215,7 +215,7 @@
  @param bp Buffer whose associated process to find.
  @return Associated process, possibly NULL.
  */
-proc_t	buf_proc(buf_t);
+proc_t	buf_proc(buf_t bp);
 
 /*!
  @function buf_dirtyoff
@@ -224,7 +224,7 @@
  @param bp Buffer whose dirty offset to get.
  @return Dirty offset (0 if not explicitly changed).
  */
-uint32_t buf_dirtyoff(buf_t);
+uint32_t buf_dirtyoff(buf_t bp);
 
 /*!
  @function buf_dirtyend
@@ -234,16 +234,15 @@
  @param bp Buffer whose dirty end to get.
  @return 0 if buffer is found clean; size of buffer if found dirty.  Can be set to any value by callers of buf_setdirtyend().
  */
-uint32_t buf_dirtyend(buf_t);
+uint32_t buf_dirtyend(buf_t bp);
 
 /*!
  @function buf_setdirtyoff
  @abstract Set the starting offset of the dirty region associated with a buffer.
  @discussion This value is zero unless someone set it explicitly.
  @param bp Buffer whose dirty end to set.
- @return void.
  */
-void	buf_setdirtyoff(buf_t, uint32_t);
+void	buf_setdirtyoff(buf_t bp, uint32_t);
 
 /*!
  @function buf_setdirtyend
@@ -251,9 +250,8 @@
  @discussion If the buffer's data was found incore and dirty, the dirty end is the size of the block; otherwise, unless
  someone outside of xnu explicitly changes it by calling buf_setdirtyend(), it will be zero.
  @param bp Buffer whose dirty end to set.
- @return void.
  */
-void	buf_setdirtyend(buf_t, uint32_t);
+void	buf_setdirtyend(buf_t bp, uint32_t);
 
 /*!
  @function buf_error
@@ -262,15 +260,14 @@
  @param bp Buffer whose error value to retrieve.
  @return Error value, directly.
  */
-errno_t	buf_error(buf_t);
+errno_t	buf_error(buf_t bp);
 
 /*!
  @function buf_seterror
  @abstract Set an error value on a buffer.
  @param bp Buffer whose error value to set.
- @return void.
  */
-void	buf_seterror(buf_t, errno_t);
+void	buf_seterror(buf_t bp, errno_t);
 
 /*!
  @function buf_setflags
@@ -278,9 +275,8 @@
  @discussion buffer_flags |= flags
  @param bp Buffer whose flags to set.
  @param flags Flags to add to buffer's mask. B_LOCKED/B_NOCACHE/B_ASYNC/B_READ/B_WRITE/B_PAGEIO/B_FUA
- @return void.
  */
-void	buf_setflags(buf_t, int32_t);
+void	buf_setflags(buf_t bp, int32_t flags);
 
 /*!
  @function buf_clearflags
@@ -288,9 +284,8 @@
  @discussion buffer_flags &= ~flags
  @param bp Buffer whose flags to clear.
  @param flags Flags to remove from buffer's mask. B_LOCKED/B_NOCACHE/B_ASYNC/B_READ/B_WRITE/B_PAGEIO/B_FUA
- @return void.
  */
-void	buf_clearflags(buf_t, int32_t);
+void	buf_clearflags(buf_t bp, int32_t flags);
 
 /*!
  @function buf_flags
@@ -299,7 +294,7 @@
  @param bp Buffer whose flags to grab.
  @return flags.
  */
-int32_t	buf_flags(buf_t);
+int32_t	buf_flags(buf_t bp);
 
 /*!
  @function buf_reset
@@ -308,9 +303,8 @@
  Used perhaps to prepare an iobuf for reuse.
  @param bp Buffer whose flags to grab.  
  @param flags Flags to set on buffer: B_READ, B_WRITE, B_ASYNC, B_NOCACHE.
- @return void.
  */
-void	buf_reset(buf_t, int32_t);
+void	buf_reset(buf_t bp, int32_t flags);
 
 /*!
  @function buf_map
@@ -327,7 +321,7 @@
  @param io_addr Destination for mapping address.
  @return 0 for success, ENOMEM if unable to map the buffer.
  */
-errno_t	buf_map(buf_t, caddr_t *);
+errno_t	buf_map(buf_t bp, caddr_t *io_addr);
 
 /*!
  @function buf_unmap
@@ -340,19 +334,17 @@
  buf_setupl() was subsequently called; buf_map() created the mapping.  In this case, buf_unmap() will
  unmap the buffer.
  @param bp Buffer whose mapping to find or create.
- @param io_addr Destination for mapping address.
  @return 0 for success, EINVAL if unable to unmap buffer.
  */
-errno_t	buf_unmap(buf_t);
+errno_t	buf_unmap(buf_t bp);
 
 /*!
  @function buf_setdrvdata
  @abstract Set driver-specific data on a buffer.
  @param bp Buffer whose driver-data to set.
  @param drvdata Opaque driver data.
- @return void.
  */
-void 	buf_setdrvdata(buf_t, void *);
+void 	buf_setdrvdata(buf_t bp, void *drvdata);
 
 /*!
  @function buf_setdrvdata
@@ -360,16 +352,15 @@
  @param bp Buffer whose driver data to get.
  @return Opaque driver data.
  */
-void *	buf_drvdata(buf_t);
+void *	buf_drvdata(buf_t bp);
 
 /*!
  @function buf_setfsprivate
  @abstract Set filesystem-specific data on a buffer.
  @param bp Buffer whose filesystem data to set.
  @param fsprivate Opaque filesystem data.
- @return void.
  */
-void 	buf_setfsprivate(buf_t, void *);
+void 	buf_setfsprivate(buf_t bp, void *fsprivate);
 
 /*!
  @function buf_fsprivate
@@ -377,7 +368,7 @@
  @param bp Buffer whose filesystem data to get.
  @return Opaque filesystem data.
  */
-void *	buf_fsprivate(buf_t);
+void *	buf_fsprivate(buf_t bp);
 
 /*!
  @function buf_blkno
@@ -389,7 +380,7 @@
  @param bp Buffer whose physical block number to get.
  @return Block number.
  */
-daddr64_t buf_blkno(buf_t);
+daddr64_t buf_blkno(buf_t bp);
 
 /*!
  @function buf_lblkno
@@ -399,7 +390,7 @@
  @param bp Buffer whose logical block number to get.
  @return Block number.
  */
-daddr64_t buf_lblkno(buf_t);
+daddr64_t buf_lblkno(buf_t bp);
 
 /*!
  @function buf_setblkno
@@ -407,9 +398,8 @@
  @discussion Physical block number is generally set by the cluster layer or by buf_getblk().
  @param bp Buffer whose physical block number to set.
  @param blkno Block number to set.
- @return void.
  */
-void	buf_setblkno(buf_t, daddr64_t);
+void	buf_setblkno(buf_t bp, daddr64_t blkno);
 
 /*!
  @function buf_setlblkno
@@ -418,9 +408,8 @@
  for example by buf_bread().
  @param bp Buffer whose logical block number to set.
  @param lblkno Block number to set.
- @return void.
  */
-void	buf_setlblkno(buf_t, daddr64_t);
+void	buf_setlblkno(buf_t bp, daddr64_t lblkno);
 
 /*!
  @function buf_count
@@ -428,7 +417,7 @@
  @param bp Buffer whose byte count to get.
  @return Byte count.
  */
-uint32_t buf_count(buf_t);
+uint32_t buf_count(buf_t bp);
 
 /*!
  @function buf_size
@@ -437,7 +426,7 @@
  @param bp Buffer whose size to get.
  @return Size.
  */
-uint32_t buf_size(buf_t);
+uint32_t buf_size(buf_t bp);
 
 /*!
  @function buf_resid
@@ -446,16 +435,15 @@
  @param bp Buffer whose outstanding count to get.
  @return Count of unwritten/unread bytes.
  */
-uint32_t buf_resid(buf_t);
+uint32_t buf_resid(buf_t bp);
 
 /*!
  @function buf_setcount
  @abstract Set count of valid bytes in a buffer.  This may be less than the space allocated to the buffer.
  @param bp Buffer whose byte count to set.
  @param bcount Count to set.
- @return void.
  */
-void	buf_setcount(buf_t, uint32_t);
+void	buf_setcount(buf_t bp, uint32_t bcount);
 
 /*!
  @function buf_setsize
@@ -463,9 +451,8 @@
  @discussion May be larger than amount of valid data in buffer.  Should be used by 
  code which is manually providing storage for an iobuf, one allocated with buf_alloc().
  @param bp Buffer whose size to set.
- @return void.
  */
-void	buf_setsize(buf_t, uint32_t);
+void	buf_setsize(buf_t bp, uint32_t);
 
 /*!
  @function buf_setresid
@@ -474,9 +461,8 @@
  completes, often called on an "original" buffer when using a manipulated buffer to perform I/O 
  on behalf of the first.
  @param bp Buffer whose outstanding count to set.
- @return Count of unwritten/unread bytes.
  */
-void	buf_setresid(buf_t, uint32_t);
+void	buf_setresid(buf_t bp, uint32_t resid);
 
 /*!
  @function buf_setdataptr
@@ -485,9 +471,8 @@
  useful with iobufs (allocated with buf_alloc()).
  @param bp Buffer whose data pointer to set.
  @param data Pointer to data region.
- @return void.
  */
-void	buf_setdataptr(buf_t, uintptr_t);
+void	buf_setdataptr(buf_t bp, uintptr_t data);
 
 /*!
  @function buf_dataptr
@@ -496,7 +481,7 @@
  @param bp Buffer whose data pointer to retrieve.
  @return Data pointer; NULL if unset.
  */
-uintptr_t buf_dataptr(buf_t);
+uintptr_t buf_dataptr(buf_t bp);
 
 /*!
  @function buf_vnode
@@ -507,7 +492,7 @@
  @param bp Buffer whose vnode to retrieve.
  @return Buffer's vnode.
  */
-vnode_t	buf_vnode(buf_t);
+vnode_t	buf_vnode(buf_t bp);
 
 /*!
  @function buf_setvnode
@@ -515,9 +500,8 @@
  @discussion This call need not be used on traditional buffers; it is for use with iobufs.
  @param bp Buffer whose vnode to set.
  @param vp The vnode to attach to the buffer.
- @return void.
  */
-void	buf_setvnode(buf_t, vnode_t);
+void	buf_setvnode(buf_t bp, vnode_t vp);
 
 /*!
  @function buf_device
@@ -528,7 +512,7 @@
  @param bp Buffer whose device ID to retrieve.
  @return Device id.
  */
-dev_t	buf_device(buf_t);
+dev_t	buf_device(buf_t bp);
 
 /*!
  @function buf_setdevice
@@ -539,7 +523,7 @@
  @param vp Device to set on the buffer.
  @return 0 for success, EINVAL if vp is not a device file.
  */
-errno_t	buf_setdevice(buf_t, vnode_t);
+errno_t	buf_setdevice(buf_t bp, vnode_t vp);
 
 /*!
  @function buf_strategy
@@ -554,7 +538,7 @@
  @param ap vnop_strategy_args structure (most importantly, a buffer).
  @return 0 for success, or errors from filesystem or device layers.
  */
-errno_t	buf_strategy(vnode_t, void *);
+errno_t	buf_strategy(vnode_t devvp, void *ap);
 
 /* 
  * Flags for buf_invalblkno() 
@@ -574,13 +558,13 @@
  obtained with a buf_getblk().  If data has been read into core without using
  traditional buffer cache routines, buf_invalblkno() will not be able to invalidate it--this
  includes the use of iobufs.
- @param bp Buffer whose block to invalidate.
+ @param vp vnode whose block to invalidate.
  @param lblkno Logical block number.
  @param flags BUF_WAIT: wait for busy buffers to become unbusy and invalidate them then.  Otherwise,
  just return EBUSY for busy blocks.
  @return 0 for success, EINVAL if vp is not a device file.
  */
-errno_t	buf_invalblkno(vnode_t, daddr64_t, int);
+errno_t	buf_invalblkno(vnode_t vp, daddr64_t lblkno, int flags);
 
 /*!
  @function buf_callback
@@ -589,7 +573,7 @@
  @param bp Buffer whose callback to get.
  @return 0 for success, or errors from filesystem or device layers.
  */
-void * buf_callback(buf_t);
+void * buf_callback(buf_t bp);
 
 /*!
  @function buf_setcallback
@@ -602,7 +586,7 @@
  @param transaction Additional argument to callback function.
  @return 0; always succeeds.
  */
-errno_t	buf_setcallback(buf_t, void (*)(buf_t, void *), void *);
+errno_t	buf_setcallback(buf_t bp, void (*callback)(buf_t, void *), void *transaction);
 
 /*!
  @function buf_setupl
@@ -615,10 +599,10 @@
  buffer.
  @param bp Buffer whose upl to set.
  @param upl UPL to set in the buffer.
- @parma offset Offset within upl at which relevant data begin.
+ @param offset Offset within upl at which relevant data begin.
  @return 0 for success, EINVAL if the buffer was not allocated with buf_alloc().
  */
-errno_t	buf_setupl(buf_t, upl_t, uint32_t);
+errno_t	buf_setupl(buf_t bp, upl_t upl, uint32_t offset);
 
 /*!
  @function buf_clone
@@ -637,7 +621,7 @@
  @param arg Argument to pass to iodone() callback.
  @return NULL if io_offset/io_size combination is invalid for the buffer to be cloned; otherwise, the new buffer.
  */
-buf_t	buf_clone(buf_t, int, int, void (*)(buf_t, void *), void *);
+buf_t	buf_clone(buf_t bp, int io_offset, int io_size, void (*iodone)(buf_t, void *), void *arg);
 
 
 /*!
@@ -674,16 +658,15 @@
  the buffer's associated device will be set. If vp is NULL, it can be set later with buf_setvnode().
  @return New buffer.
  */
-buf_t 	buf_alloc(vnode_t);
+buf_t 	buf_alloc(vnode_t vp);
 
 /*!
  @function buf_free
  @abstract Free a buffer that was allocated with buf_alloc().
  @discussion The storage (UPL, data pointer) associated with an iobuf must be freed manually.
  @param bp The buffer to free.
- @return void.
  */
-void	buf_free(buf_t);
+void	buf_free(buf_t bp);
 
 /*
  * flags for buf_invalidateblks
@@ -699,7 +682,7 @@
  Again, it will only be able to invalidate data which were populated with traditional buffer cache routines,
  i.e. by buf_getblk() and callers thereof. Unlike buf_invalblkno(), it can be made to write dirty data to disk
  rather than casting it aside.
- @param bp The buffer whose data to invalidate.
+ @param vp The vnode whose data to invalidate.
  @param flags BUF_WRITE_DATA: write dirty data to disk with VNOP_BWRITE() before kicking buffer cache entries out.
  BUF_SKIP_META: do not invalidate metadata blocks.
  @param slpflag Flags to pass to "msleep" while waiting to acquire busy buffers. 
@@ -707,7 +690,7 @@
  and re-starting the scan.
  @return 0 for success, error values from msleep().
  */
-int	buf_invalidateblks(vnode_t, int, int, int);
+int	buf_invalidateblks(vnode_t vp, int flags, int slpflag, int slptimeo);
 
 /*
  * flags for buf_flushdirtyblks and buf_iterate
@@ -732,9 +715,8 @@
  BUF_SKIP_NONLOCKED: Skip buffers which are not busy when we encounter them.
  BUF_SKIP_LOCKED: Skip buffers which are busy when we encounter them.
  @param msg String to pass to msleep().
- @return void.
  */
-void	buf_flushdirtyblks(vnode_t, int, int, const char *);
+void	buf_flushdirtyblks(vnode_t vp, int wait, int flags, const char *msg);
 
 /*!
  @function buf_iterate
@@ -745,16 +727,15 @@
  BUF_RETURNED_DONE: buf_iterate() should call buf_brelse() on the buffer and then stop iterating.
  BUF_CLAIMED: buf_iterate() should continue iterating (and not call buf_brelse()).
  BUF_CLAIMED_DONE: buf_iterate() should stop iterating (and not call buf_brelse()).
- @param flag
+ @param flags
  BUF_SKIP_NONLOCKED: Skip buffers which are not busy when we encounter them. BUF_SKIP_LOCKED: Skip buffers which are busy when we encounter them.
  BUF_SCAN_CLEAN: Call out on clean buffers.
  BUF_SCAN_DIRTY: Call out on dirty buffers.
  BUF_NOTIFY_BUSY: If a buffer cannot be acquired, pass a NULL buffer to callout; otherwise,
  that buffer will be silently skipped.
  @param arg Argument to pass to callout in addition to buffer.
- @return void.
  */
-void	buf_iterate(vnode_t, int (*)(buf_t, void *), int, void *);
+void	buf_iterate(vnode_t vp, int (*callout)(buf_t, void *), int flags, void *arg);
 
 /*!
  @function buf_clear
@@ -764,9 +745,8 @@
  UPL into memory; should only be called once during the life cycle of an iobuf (one allocated
  with buf_alloc()).  
  @param bp The buffer to zero out.
- @return void.
  */
-void	buf_clear(buf_t);
+void	buf_clear(buf_t bp);
 
 /*!
  @function buf_bawrite
@@ -775,13 +755,9 @@
  Callers can wait for writes to complete at their discretion using buf_biowait().  When this function is called,
  data should already have been written to the buffer's data region.
  @param bp The buffer on which to initiate I/O.
- @param throttle If "throttle" is nonzero and more than VNODE_ASYNC_THROTTLE writes are in progress on this file,
- buf_bawrite() will block until the write count drops below VNODE_ASYNC_THROTTLE.  If "throttle" is zero and the write
- count is high, it will fail with EWOULDBLOCK; the caller can decide whether to make a blocking call or pursue
- other opportunities.
  @return EWOULDBLOCK if write count is high and "throttle" is zero; otherwise, errors from VNOP_BWRITE.
  */
-errno_t	buf_bawrite(buf_t);
+errno_t	buf_bawrite(buf_t bp);
 
 /*!
  @function buf_bdwrite
@@ -793,11 +769,9 @@
  requested otherwise [see return_error] , buf_bdwrite() will unilaterally launch an asynchronous I/O with buf_bawrite() to keep the pile of
  delayed writes from getting too large.
  @param bp The buffer to mark for delayed write.
- @param return_error If the number of pending delayed writes systemwide is larger than an internal limit,
- return EAGAIN rather than doing an asynchronous write.
  @return EAGAIN for return_error != 0 case, 0 for succeess, errors from buf_bawrite.
  */
-errno_t	buf_bdwrite(buf_t);
+errno_t	buf_bdwrite(buf_t bp);
 
 /*!
  @function buf_bwrite
@@ -808,7 +782,7 @@
  @param bp The buffer to write to disk.
  @return 0 for success; errors from buf_biowait().
  */
-errno_t	buf_bwrite(buf_t);
+errno_t	buf_bwrite(buf_t bp);
 
 /*!
  @function buf_biodone
@@ -821,9 +795,8 @@
  considers itself justified in calling buf_brelse() to return it to free lists--no one is waiting for it.  Finally, 
  waiters on the bp (e.g. in buf_biowait()) are woken up.
  @param bp The buffer to mark as done with I/O.
- @return void.
  */
-void	buf_biodone(buf_t);
+void	buf_biodone(buf_t bp);
 
 /*!
  @function buf_biowait
@@ -832,7 +805,7 @@
  @param bp The buffer to wait on.
  @return 0 for a successful wait; nonzero the buffer has been marked as EINTR or had an error set on it.
  */
-errno_t	buf_biowait(buf_t);
+errno_t	buf_biowait(buf_t bp);
 
 /*!
  @function buf_brelse
@@ -846,9 +819,8 @@
  B_LOCKED buffer will not be available for reuse by other files, though its data may be paged out.
  Note that buf_brelse() is intended for use with traditionally allocated buffers.
  @param bp The buffer to release.
- @retrn void.
  */
-void	buf_brelse(buf_t);
+void	buf_brelse(buf_t bp);
 
 /*!
  @function buf_bread
@@ -865,7 +837,7 @@
  @param bpp Destination pointer for buffer.
  @return 0 for success, or an error from buf_biowait().
  */
-errno_t	buf_bread(vnode_t, daddr64_t, int, kauth_cred_t, buf_t *);
+errno_t	buf_bread(vnode_t vp, daddr64_t blkno, int size, kauth_cred_t cred, buf_t *bpp);
 
 /*!
  @function buf_breadn
@@ -885,7 +857,7 @@
  @param bpp Destination pointer for buffer.
  @return 0 for success, or an error from buf_biowait().
  */
-errno_t	buf_breadn(vnode_t, daddr64_t, int, daddr64_t *, int *, int, kauth_cred_t, buf_t *);
+errno_t	buf_breadn(vnode_t vp, daddr64_t blkno, int size, daddr64_t *rablks, int *rasizes, int nrablks, kauth_cred_t cred, buf_t *bpp);
 
 /*!
  @function buf_meta_bread
@@ -902,7 +874,7 @@
  @param bpp Destination pointer for buffer.
  @return 0 for success, or an error from buf_biowait().
  */
-errno_t	buf_meta_bread(vnode_t, daddr64_t, int, kauth_cred_t, buf_t *);
+errno_t	buf_meta_bread(vnode_t vp, daddr64_t blkno, int size, kauth_cred_t cred, buf_t *bpp);
 
 /*!
  @function buf_meta_breadn
@@ -921,7 +893,7 @@
  @param bpp Destination pointer for buffer.
  @return 0 for success, or an error from buf_biowait().
  */
-errno_t	buf_meta_breadn(vnode_t, daddr64_t, int, daddr64_t *, int *, int, kauth_cred_t, buf_t *);
+errno_t	buf_meta_breadn(vnode_t vp, daddr64_t blkno, int size, daddr64_t *rablks, int *rasizes, int nrablks, kauth_cred_t cred, buf_t *bpp);
 
 /*!
  @function minphys
@@ -949,7 +921,7 @@
  @param blocksize Logical block size for this vnode.
  @return 0 for success; EFAULT for an invalid uio; errors from buf_biowait().
  */
-int	physio(void (*)(buf_t), buf_t, dev_t, int ,  u_int (*)(buf_t), struct uio *, int );
+int	physio(void (*f_strategy)(buf_t), buf_t bp, dev_t dev, int flags, u_int (*f_minphys)(buf_t), struct uio *uio, int blocksize);
 
 
 /*
@@ -987,7 +959,7 @@
  that if a given logical block is found in core with a different size than what is requested, the buffer size will not be modified.
  @return Buffer found in core or newly allocated, either containing valid data or ready for I/O.
  */
-buf_t	buf_getblk(vnode_t, daddr64_t, int, int, int, int);
+buf_t	buf_getblk(vnode_t vp, daddr64_t blkno, int size, int slpflag, int slptimeo, int operation);
 
 /*!
  @function buf_geteblk
@@ -997,7 +969,7 @@
  @param size Size of buffer.
  @return Always returns a new buffer.
  */
-buf_t	buf_geteblk(int);
+buf_t	buf_geteblk(int size);
 
 /*!
  @function buf_clear_redundancy_flags
@@ -1005,9 +977,8 @@
  @discussion buffer_redundancy_flags &= ~flags
  @param bp Buffer whose flags to clear.
  @param flags Flags to remove from buffer's mask
- @return void.
  */
-void	buf_clear_redundancy_flags(buf_t, uint32_t);
+void	buf_clear_redundancy_flags(buf_t bp, uint32_t flags);
 
 /*!
  @function buf_redundancyflags
@@ -1015,7 +986,7 @@
  @param bp Buffer whose redundancy flags to grab.
  @return flags.
  */
-uint32_t	buf_redundancy_flags(buf_t);
+uint32_t	buf_redundancy_flags(buf_t bp);
 
 /*!
  @function buf_setredundancyflags
@@ -1023,9 +994,8 @@
  @discussion buffer_redundancy_flags |= flags
  @param bp Buffer whose flags to set.
  @param flags Flags to add to buffer's redundancy flags
- @return void.
  */
-void	buf_set_redundancy_flags(buf_t, uint32_t);
+void	buf_set_redundancy_flags(buf_t bp, uint32_t flags);
 
 /*!
  @function buf_attr
@@ -1033,15 +1003,14 @@
  @param bp Buffer whose attributes to get.
  @return bufattr_t.
  */
-bufattr_t buf_attr(buf_t);
+bufattr_t buf_attr(buf_t bp);
 
 /*!
  @function buf_markstatic
  @abstract Mark a buffer as being likely to contain static data.
  @param bp Buffer to mark.
- @return void.
  */
- void buf_markstatic(buf_t);
+ void buf_markstatic(buf_t bp);
 
 /*!
  @function buf_static
@@ -1049,7 +1018,7 @@
  @param bp Buffer to test.
  @return Nonzero if buffer has static data, 0 otherwise.
  */
-int	buf_static(buf_t);
+int	buf_static(buf_t bp);
 
 
 __END_DECLS
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/cdefs.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/cdefs.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/cdefs.h	2015-08-27 01:55:54.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/cdefs.h	2016-06-03 22:55:48.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2000-2015 Apple Inc. All rights reserved.
+ * Copyright (c) 2000-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  * 
@@ -223,6 +223,58 @@
 #ifndef __null_unspecified
 #define __null_unspecified
 #endif
+#ifndef _Nullable
+#define _Nullable
+#endif
+#ifndef _Nonnull
+#define _Nonnull
+#endif
+#ifndef _Null_unspecified
+#define _Null_unspecified
+#endif
+#endif
+
+/*
+ * __disable_tail_calls causes the compiler to not perform tail call
+ * optimization inside the marked function.
+ */
+#if __has_attribute(disable_tail_calls)
+#define __disable_tail_calls	__attribute__((__disable_tail_calls__))
+#else
+#define __disable_tail_calls
+#endif
+
+/*
+ * __not_tail_called causes the compiler to prevent tail call optimization
+ * on statically bound calls to the function.  It has no effect on indirect
+ * calls.  Virtual functions, objective-c methods, and functions marked as
+ * "always_inline" cannot be marked as __not_tail_called.
+ */
+#if __has_attribute(not_tail_called)
+#define __not_tail_called	__attribute__((__not_tail_called__))
+#else
+#define __not_tail_called
+#endif
+
+/*
+ * __result_use_check warns callers of a function that not using the function
+ * return value is a bug, i.e. dismissing malloc() return value results in a
+ * memory leak.
+ */
+#if __has_attribute(warn_unused_result)
+#define __result_use_check __attribute__((__warn_unused_result__))
+#else
+#define __result_use_check
+#endif
+
+/*
+ * __swift_unavailable causes the compiler to mark a symbol as specifically
+ * unavailable in Swift, regardless of any other availability in C.
+ */
+#if __has_feature(attribute_availability_swift)
+#define __swift_unavailable(_msg)	__attribute__((__availability__(swift, unavailable, message=_msg)))
+#else
+#define __swift_unavailable(_msg)
 #endif
 
 /* Declaring inline functions within headers is error-prone due to differences
@@ -297,6 +349,8 @@
  */
 #define __printflike(fmtarg, firstvararg) \
 		__attribute__((__format__ (__printf__, fmtarg, firstvararg)))
+#define __printf0like(fmtarg, firstvararg) \
+		__attribute__((__format__ (__printf0__, fmtarg, firstvararg)))
 #define __scanflike(fmtarg, firstvararg) \
 		__attribute__((__format__ (__scanf__, fmtarg, firstvararg)))
 
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/disk.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/disk.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/disk.h	2015-08-27 01:55:55.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/disk.h	2016-06-03 22:55:48.000000000 +0200
@@ -70,6 +70,8 @@
  * DKIOCGETFEATURES                      get device's feature set
  * DKIOCGETPHYSICALBLOCKSIZE             get device's block size
  * DKIOCGETCOMMANDPOOLSIZE               get device's queue depth
+ *
+ * DKIOCGETPROVISIONSTATUS               get device's block provision status
  */
 
 #define DK_FEATURE_BARRIER                    0x00000002
@@ -146,6 +148,27 @@
 #define DK_CORESTORAGE_ENABLE_HOTFILES          0x00000002
 #define DK_CORESTORAGE_PIN_YOUR_SWAPFILE        0x00000004
 
+#define DK_PROVISION_TYPE_MAPPED                0x00
+#define DK_PROVISION_TYPE_DEALLOCATED           0x01
+#define DK_PROVISION_TYPE_ANCHORED              0x02
+
+typedef struct
+{
+	uint64_t           offset;
+	uint64_t           length;
+	uint8_t            provisionType;
+	uint8_t            reserved[7];
+} dk_provision_extent_t;
+
+typedef struct
+{
+	uint64_t                offset;         /* input:        logical byte offset */
+	uint64_t                length;         /* input:        byte length, 0 for whole length */
+	uint64_t                options;        /*               reserved, clear to zero */
+	uint32_t                reserved;       /*               not used */
+	uint32_t                extentsCount;   /* input/output: count for extents */
+	dk_provision_extent_t *	extents;        /* output:       provision extents */
+} dk_provision_status_t;
 
 
 #define DKIOCEJECT                            _IO('d', 21)
@@ -182,6 +205,8 @@
 #define DKIOCGETPHYSICALBLOCKSIZE             _IOR('d', 77, uint32_t)
 #define DKIOCGETCOMMANDPOOLSIZE               _IOR('d', 78, uint32_t)
 
+#define DKIOCGETPROVISIONSTATUS               _IOWR('d', 79, dk_provision_status_t)
+
 #define DKIOCSYNCHRONIZECACHE                 _IO('d', 22)
 
 #define DK_FEATURE_FORCE_UNIT_ACCESS          0x00000001
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/event.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/event.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/event.h	2015-08-27 01:55:55.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/event.h	2016-06-03 22:55:49.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2003-2015 Apple Inc. All rights reserved.
+ * Copyright (c) 2003-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  * 
@@ -73,8 +73,9 @@
 					/* (-11) unused */
 #define EVFILT_VM		(-12)	/* Virtual memory events */
 
+#define EVFILT_EXCEPT		(-15)	/* Exception events */
 
-#define EVFILT_SYSCOUNT		14
+#define EVFILT_SYSCOUNT		15
 #define EVFILT_THREADMARKER	EVFILT_SYSCOUNT /* Internal use only */
 
 #pragma pack(4)
@@ -126,38 +127,44 @@
 
 
 /* kevent system call flags */
-#define KEVENT_FLAG_NONE		0x00	/* no flag value */
-#define KEVENT_FLAG_IMMEDIATE		0x01	/* immediate timeout */
-#define KEVENT_FLAG_ERROR_EVENTS	0x02	/* output events only include change errors */
+#define KEVENT_FLAG_NONE               0x000	/* no flag value */
+#define KEVENT_FLAG_IMMEDIATE          0x001	/* immediate timeout */
+#define KEVENT_FLAG_ERROR_EVENTS       0x002	/* output events only include change errors */
 
 
 /* actions */
-#define EV_ADD			0x0001		/* add event to kq (implies enable) */
-#define EV_DELETE		0x0002		/* delete event from kq */
-#define EV_ENABLE		0x0004		/* enable event */
-#define EV_DISABLE		0x0008		/* disable event (not reported) */
+#define EV_ADD              0x0001		/* add event to kq (implies enable) */
+#define EV_DELETE           0x0002		/* delete event from kq */
+#define EV_ENABLE           0x0004		/* enable event */
+#define EV_DISABLE          0x0008		/* disable event (not reported) */
 
 /* flags */
-#define EV_ONESHOT		0x0010		/* only report one occurrence */
-#define EV_CLEAR		0x0020		/* clear event state after reporting */
-#define EV_RECEIPT		0x0040		/* force EV_ERROR on success, data == 0 */
-#define EV_DISPATCH     0x0080      /* disable event after reporting */
-
-#define EV_UDATA_SPECIFIC	0x0100          /* unique kevent per udata value */
-                                            /* ... in combination with EV_DELETE */
-                                            /* will defer delete until udata-specific */
-                                            /* event enabled. EINPROGRESS will be */
-                                            /* returned to indicate the deferral */
-
-#define EV_DISPATCH2		(EV_DISPATCH | EV_UDATA_SPECIFIC)
-
-#define EV_SYSFLAGS		0xF000		/* reserved by system */
-#define EV_FLAG0		0x1000		/* filter-specific flag */
-#define EV_FLAG1		0x2000		/* filter-specific flag */
+#define EV_ONESHOT          0x0010		/* only report one occurrence */
+#define EV_CLEAR            0x0020		/* clear event state after reporting */
+#define EV_RECEIPT          0x0040		/* force immediate event output */
+                                		/* ... with or without EV_ERROR */
+                                  		/* ... use KEVENT_FLAG_ERROR_EVENTS */
+                                		/*     on syscalls supporting flags */
+
+#define EV_DISPATCH         0x0080		/* disable event after reporting */
+#define EV_UDATA_SPECIFIC   0x0100		/* unique kevent per udata value */
+
+#define EV_DISPATCH2        (EV_DISPATCH | EV_UDATA_SPECIFIC)
+                                  		/* ... in combination with EV_DELETE */
+                                  		/* will defer delete until udata-specific */
+                                  		/* event enabled. EINPROGRESS will be */
+                                  		/* returned to indicate the deferral */
+
+#define EV_VANISHED         0x0200		/* report that source has vanished  */
+                                  		/* ... only valid with EV_DISPATCH2 */
+
+#define EV_SYSFLAGS         0xF000		/* reserved by system */
+#define EV_FLAG0            0x1000		/* filter-specific flag */
+#define EV_FLAG1            0x2000		/* filter-specific flag */
 
 /* returned values */
-#define EV_EOF			0x8000		/* EOF detected */
-#define EV_ERROR		0x4000		/* error, data contains errno */
+#define EV_EOF              0x8000		/* EOF detected */
+#define EV_ERROR            0x4000		/* error, data contains errno */
 
 /*
  * Filter specific flags for EVFILT_READ
@@ -218,6 +225,9 @@
  */
 #define NOTE_LOWAT	0x00000001		/* low water mark */
 
+/* data/hint flags for EVFILT_EXCEPT, shared with userspace */
+#define NOTE_OOB	0x00000002		/* OOB data */
+
 /*
  * data/hint fflags for EVFILT_VNODE, shared with userspace
  */
@@ -229,6 +239,7 @@
 #define	NOTE_RENAME	0x00000020		/* vnode was renamed */
 #define	NOTE_REVOKE	0x00000040		/* vnode access was revoked */
 #define NOTE_NONE	0x00000080		/* No specific vnode event: to test for EVFILT_READ activation*/
+#define NOTE_FUNLOCK	0x00000100		/* vnode was unlocked by flock(2) */
 
 /*
  * data/hint fflags for EVFILT_PROC, shared with userspace
@@ -296,6 +307,7 @@
 #define NOTE_LEEWAY	0x00000010		/* ext[1] holds leeway for power aware timers */
 #define NOTE_CRITICAL	0x00000020		/* system does minimal timer coalescing */
 #define NOTE_BACKGROUND	0x00000040		/* system does maximum timer coalescing */
+#define NOTE_MACH_CONTINUOUS_TIME	0x00000080		/* use continuous time base */
 
 /*
  * data/hint fflags for EVFILT_MACHPORT, shared with userspace.
@@ -346,4 +358,5 @@
 
 
 
+
 #endif /* !_SYS_EVENT_H_ */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/fcntl.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/fcntl.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/fcntl.h	2015-08-27 01:55:55.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/fcntl.h	2016-06-03 22:55:49.000000000 +0200
@@ -297,6 +297,7 @@
 
 
 #define F_ADDFILESIGS_RETURN	97	/* Add signature from same file, return end offset in structure on sucess */
+#define F_CHECK_LV		98	/* Check if Library Validation allows this Mach-O file to be mapped into the calling process */
 
 
 // FS-specific fcntl()'s numbers begin at 0x00010000 and go up
@@ -431,7 +432,7 @@
 	void		*fs_blob_start;
 	size_t		fs_blob_size;
 } fsignatures_t;
-/* LP64 version of fsignatures.  all pointers 
+/* LP64 version of fsignatures.  all pointers
  * grow when we're dealing with a 64-bit process.
  * WARNING - keep in sync with fsignatures
  */
@@ -450,6 +451,41 @@
 	user_size_t	fs_blob_size;	/* size of signature blob             */
 } user_fsignatures_t;
 
+/*
+ * DYLD needs to check if the object is allowed to be combined
+ * into the main binary. This is done between the code signature
+ * is loaded and dyld is doing all the work to process the LOAD commands.
+ *
+ * While this could be done in F_ADDFILESIGS.* family the hook into
+ * the MAC module doesn't say no when LV isn't enabled and then that
+ * is cached on the vnode, and the MAC module never gets change once
+ * a process that library validation enabled.
+ */
+typedef struct fchecklv {
+	off_t		lv_file_start;
+	size_t		lv_error_message_size;
+	void		*lv_error_message;
+} fchecklv_t;
+
+/* LP64 version of fchecklv.  all pointers
+ * grow when we're dealing with a 64-bit process.
+ * WARNING - keep in sync with fsignatures
+ */
+
+typedef struct user32_fchecklv {
+	user32_off_t	lv_file_start;
+	user32_size_t	lv_error_message_size;
+	user32_addr_t	lv_error_message;
+} user32_fchecklv_t;
+
+typedef struct user_fchecklv {
+	off_t		lv_file_start;
+	user_size_t	lv_error_message_size;
+	user_addr_t	lv_error_message;
+} user_fchecklv_t;
+
+
+
 /* lock operations for flock(2) */
 #define	LOCK_SH		0x01		/* shared file lock */
 #define	LOCK_EX		0x02		/* exclusive file lock */
@@ -474,7 +510,7 @@
   void *fbt_buffer;             /* IN: buffer to be read/written */
 } fbootstraptransfer_t;
 
-/* LP64 version of fbootstraptransfer.  all pointers 
+/* LP64 version of fbootstraptransfer.  all pointers
  * grow when we're dealing with a 64-bit process.
  * WARNING - keep in sync with fbootstraptransfer
  */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/filio.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/filio.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/filio.h	2015-08-27 01:55:55.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/filio.h	2016-06-03 22:55:49.000000000 +0200
@@ -81,4 +81,5 @@
 #define	FIOGETOWN	_IOR('f', 123, int)	/* get owner */
 #define	FIODTYPE	_IOR('f', 122, int)	/* get d_type */
 
+
 #endif /* !_SYS_FILIO_H_ */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/imgact.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/imgact.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/imgact.h	2016-02-27 07:07:38.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/imgact.h	2016-06-03 22:55:50.000000000 +0200
@@ -118,6 +118,7 @@
 	void		*ip_px_spa;
 	void		*ip_px_smpx;		/* MAC-specific spawn attrs. */
 	void		*ip_px_persona;		/* persona args */
+	void		*ip_cs_error;		/* codesigning error reason */
 };
 
 /*
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/kauth.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/kauth.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/kauth.h	2015-08-27 01:55:56.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/kauth.h	2016-06-03 22:55:50.000000000 +0200
@@ -260,6 +260,8 @@
 extern int      kauth_cred_guid2ntsid(guid_t *_guid, ntsid_t *_sidp);
 extern int	kauth_cred_ismember_gid(kauth_cred_t _cred, gid_t _gid, int *_resultp);
 extern int	kauth_cred_ismember_guid(kauth_cred_t _cred, guid_t *_guidp, int *_resultp);
+extern int	kauth_cred_nfs4domain2dsnode(char *nfs4domain, char *dsnode);
+extern int	kauth_cred_dsnode2nfs4domain(char *dsnode, char *nfs4domain);
 
 extern int 	groupmember(gid_t gid, kauth_cred_t cred);
 
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/kdebug.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/kdebug.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/kdebug.h	2016-02-27 07:07:38.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/kdebug.h	2016-06-03 22:55:50.000000000 +0200
@@ -49,14 +49,16 @@
 /*
  * Kdebug is a facility for tracing events occurring on a system.
  *
- * All events are tagged with a debugid, consisting of the following:
+ * All events are tagged with a 32-bit debugid:
  *
  * +----------------+----------------+----------------------------+----+
  * |   Class (8)    |  Subclass (8)  |          Code (14)         |Func|
  * |                |                |                            |(2) |
  * +----------------+----------------+----------------------------+----+
- * \______________________________________________________________/
- *                            Eventid
+ * \_________________________________/
+ *         ClassSubclass (CSC)
+ * \________________________________________________________________00_/
+ *                                 Eventid
  * \___________________________________________________________________/
  *                                 Debugid
  *
@@ -77,12 +79,15 @@
 /* class and subclass mask */
 #define KDBG_CSC_MASK   (0xffff0000)
 #define KDBG_CSC_OFFSET (KDBG_SUBCLASS_OFFSET)
+#define KDBG_CSC_MAX    (0xffff)
 
 #define KDBG_CODE_MASK   (0x0000fffc)
 #define KDBG_CODE_OFFSET (2)
 #define KDBG_CODE_MAX    (0x3fff)
 
+
 #define KDBG_EVENTID_MASK (0xfffffffc)
+#define KDBG_FUNC_MASK    (0x00000003)
 
 /* Generate an eventid corresponding to Class, SubClass, and Code. */
 #define KDBG_EVENTID(Class, SubClass, Code)                \
@@ -135,7 +140,9 @@
 #define DBG_ARIADNE             43
 #define DBG_DAEMON              44
 #define DBG_ENERGYTRACE         45
+#define DBG_DISPATCH            46
 #define DBG_IMG                 49
+#define DBG_UMALLOC		51
 
 
 #define DBG_MIG			255
@@ -151,23 +158,26 @@
 #define	DBG_MACH_EXCP_UTRAP_x86	0x07	/* User Traps on x86 */
 #define	DBG_MACH_EXCP_FP	0x08	/* FP Unavail */
 #define	DBG_MACH_EXCP_DECI	0x09	/* Decrementer Interrupt */
-#define	DBG_MACH_CHUD		0x0A	/* CHUD */
+#define	DBG_MACH_CHUD		0x0A	/* deprecated name */
+#define	DBG_MACH_SIGNPOST	0x0A	/* kernel signposts */
 #define	DBG_MACH_EXCP_SC	0x0C	/* System Calls */
 #define	DBG_MACH_EXCP_TRACE	0x0D	/* Trace exception */
 #define	DBG_MACH_EXCP_EMUL	0x0E	/* Instruction emulated */
 #define	DBG_MACH_IHDLR		0x10	/* Interrupt Handlers */
 #define	DBG_MACH_IPC		0x20	/* Inter Process Comm */
-#define	DBG_MACH_VM		0x30	/* Virtual Memory */
-#define	DBG_MACH_LEAKS		0x31    /* alloc/free */
-#define	DBG_MACH_SCHED		0x40	/* Scheduler */
-#define	DBG_MACH_MSGID_INVALID	0x50	/* Messages - invalid */
+#define DBG_MACH_RESOURCE       0x25    /* tracing limits, etc */
+#define DBG_MACH_VM             0x30    /* Virtual Memory */
+#define DBG_MACH_LEAKS          0x31    /* alloc/free */
+#define DBG_MACH_WORKINGSET     0x32    /* private subclass for working set related debugging */
+#define DBG_MACH_SCHED          0x40    /* Scheduler */
+#define DBG_MACH_MSGID_INVALID  0x50    /* Messages - invalid */
 #define DBG_MACH_LOCKS		0x60	/* new lock APIs */
 #define DBG_MACH_PMAP		0x70	/* pmap */
 #define DBG_MACH_CLOCK		0x80	/* clock */
 #define DBG_MACH_MP		0x90	/* MP related */
 #define DBG_MACH_VM_PRESSURE	0xA0	/* Memory Pressure Events */
-#define DBG_MACH_STACKSHOT		0xA1	/* Stackshot/Microstackshot subsystem */
-#define DBG_MACH_SFI			0xA2	/* Selective Forced Idle (SFI) */
+#define DBG_MACH_STACKSHOT	0xA1	/* Stackshot/Microstackshot subsystem */
+#define DBG_MACH_SFI		0xA2	/* Selective Forced Idle (SFI) */
 #define DBG_MACH_ENERGY_PERF	0xA3 /* Energy/performance resource stats */
 #define DBG_MACH_SYSDIAGNOSE	0xA4	/* sysdiagnose keychord */
 #define DBG_MACH_ZALLOC 	0xA5 	/* Zone allocator */
@@ -248,6 +258,8 @@
 #define MACH_IPC_VOUCHER_CREATE			0x7	/* Voucher added to global voucher hashtable */
 #define MACH_IPC_VOUCHER_CREATE_ATTR_DATA	0x8	/* Attr data for newly created voucher */
 #define MACH_IPC_VOUCHER_DESTROY		0x9	/* Voucher removed from global voucher hashtable */
+#define MACH_IPC_KMSG_INFO			0xa	/* Send/Receive info for a kmsg */
+#define MACH_IPC_KMSG_LINK			0xb	/* link a kernel kmsg pointer to user mach_msg_header_t */
 
 /* Codes for pmap (DBG_MACH_PMAP) */
 #define PMAP__CREATE		0x0
@@ -295,6 +307,29 @@
 /* Codes for Zone Allocator (DBG_MACH_ZALLOC) */
 #define ZALLOC_ZCRAM 			0x0
 
+/* Codes for Mach resource management (DBG_MACH_RESOURCE) */
+/* _K32A/B codes start at double the low nibble */
+#define RMON_ENABLE_CPUUSAGE_MONITOR    0x001
+#define RMON_CPUUSAGE_VIOLATED          0x002
+#define RMON_CPUUSAGE_SUSPENDED         0x003
+#define RMON_CPUUSAGE_VIOLATED_K32A     0x004
+#define RMON_CPUUSAGE_VIOLATED_K32B     0x005
+#define RMON_CPUUSAGE_RESUMED           0x006
+#define RMON_DISABLE_CPUUSAGE_MONITOR   0x00f
+
+#define RMON_ENABLE_CPUWAKES_MONITOR    0x011
+#define RMON_CPUWAKES_VIOLATED          0x012
+#define RMON_CPUWAKES_VIOLATED_K32A     0x014
+#define RMON_CPUWAKES_VIOLATED_K32B     0x015
+#define RMON_DISABLE_CPUWAKES_MONITOR   0x01f
+
+#define RMON_ENABLE_IO_MONITOR          0x021
+#define RMON_LOGWRITES_VIOLATED         0x022
+#define RMON_PHYSWRITES_VIOLATED        0x023
+#define RMON_LOGWRITES_VIOLATED_K32A    0x024
+#define RMON_LOGWRITES_VIOLATED_K32B    0x025
+#define RMON_DISABLE_IO_MONITOR         0x02f
+
 /* **** The Kernel Debug Sub Classes for Network (DBG_NETWORK) **** */
 #define DBG_NETIP	1	/* Internet Protocol */
 #define DBG_NETARP	2	/* Address Resolution Protocol */
@@ -385,6 +420,7 @@
 #define DBG_DRVNAND		20	/* NAND drivers and layers */
 #define DBG_SSD			21	/* SSD */
 #define DBG_DRVSPI		22	/* SPI */
+#define DBG_DRVWLAN_802_11	23	/* WLAN 802.11 */
 
 /* Backwards compatibility */
 #define	DBG_DRVPOINTING		DBG_DRVHID	/* OBSOLETE: Use DBG_DRVHID instead */
@@ -434,8 +470,11 @@
 
 
 /* The Codes for BSD subcode class DBG_BSD_PROC */
-#define BSD_PROC_EXIT		1	/* process exit */
-#define BSD_PROC_FRCEXIT 	2	/* Kernel force termination */
+#define BSD_PROC_EXIT              1  /* process exit */
+#define BSD_PROC_FRCEXIT           2  /* Kernel force termination */
+#define BSD_PROC_EXEC              3  /* process spawn / exec */
+#define BSD_PROC_EXITREASON_CREATE 4  /* exit reason creation */
+#define BSD_PROC_EXITREASON_COMMIT 5  /* exit reason commited to a proc */
 
 /* Codes for BSD subcode class DBG_BSD_MEMSTAT */
 #define BSD_MEMSTAT_SCAN             1  /* memorystatus thread awake */
@@ -459,9 +498,13 @@
 #define	TRACE_DATA_NEWTHREAD		(TRACEDBG_CODE(DBG_TRACE_DATA, 1))
 #define	TRACE_DATA_EXEC			(TRACEDBG_CODE(DBG_TRACE_DATA, 2))
 #define	TRACE_DATA_THREAD_TERMINATE	(TRACEDBG_CODE(DBG_TRACE_DATA, 3))
+#define TRACE_DATA_THREAD_TERMINATE_PID	(TRACEDBG_CODE(DBG_TRACE_DATA, 4))
 #define TRACE_STRING_GLOBAL		(TRACEDBG_CODE(DBG_TRACE_STRING, 0))
 #define	TRACE_STRING_NEWTHREAD		(TRACEDBG_CODE(DBG_TRACE_STRING, 1))
 #define	TRACE_STRING_EXEC		(TRACEDBG_CODE(DBG_TRACE_STRING, 2))
+#define TRACE_STRING_PROC_EXIT		(TRACEDBG_CODE(DBG_TRACE_STRING, 3))
+#define TRACE_STRING_THREADNAME		(TRACEDBG_CODE(DBG_TRACE_STRING, 4))
+#define TRACE_STRING_THREADNAME_PREV	(TRACEDBG_CODE(DBG_TRACE_STRING, 5))
 #define	TRACE_PANIC			(TRACEDBG_CODE(DBG_TRACE_INFO, 0))
 #define	TRACE_TIMESTAMPS		(TRACEDBG_CODE(DBG_TRACE_INFO, 1))
 #define	TRACE_LOST_EVENTS		(TRACEDBG_CODE(DBG_TRACE_INFO, 2))
@@ -498,8 +541,9 @@
 /* Kernel Debug Sub Classes for Applications (DBG_APPS) */
 #define DBG_APP_LOGINWINDOW     0x03
 #define DBG_APP_AUDIO           0x04
-#define DBG_APP_SIGPOST         0x0A
+#define DBG_APP_SIGNPOST        0x0A
 #define DBG_APP_APPKIT          0x0C
+#define DBG_APP_DFR             0x0E
 #define DBG_APP_SAMBA           0x80
 
 /* Kernel Debug codes for Throttling (DBG_THROTTLE) */
@@ -574,6 +618,9 @@
 /* Kernel Debug Sub Classes for daemons (DBG_DAEMON) */
 #define DBG_DAEMON_COREDUET			0x1
 
+/* Subclasses for the user space allocator */
+#define DBG_UMALLOC_EXTERNAL			0x1
+#define DBG_UMALLOC_INTERNAL			0x2
 /**********************************************************************/
 
 #define KDBG_MIGCODE(msgid) ((DBG_MIG << KDBG_CLASS_OFFSET) | \
@@ -644,8 +691,8 @@
 
 extern unsigned int kdebug_enable;
 #define KDEBUG_ENABLE_TRACE   0x1
-#define KDEBUG_ENABLE_ENTROPY 0x2		/* Obsolescent */
-#define KDEBUG_ENABLE_CHUD    0x4
+#define KDEBUG_ENABLE_ENTROPY 0x2 /* obsolete */
+#define KDEBUG_ENABLE_CHUD    0x4 /* obsolete */
 #define KDEBUG_ENABLE_PPT     0x8
 #define KDEBUG_ENABLE_SERIAL 0x10
 
@@ -705,8 +752,8 @@
  * Specify KDEBUG_PPT to indicate that the event belongs to the
  * limited PPT set.
  */
-#define KDEBUG_COMMON (KDEBUG_ENABLE_TRACE|KDEBUG_ENABLE_CHUD|KDEBUG_ENABLE_PPT)
-#define KDEBUG_TRACE  (KDEBUG_ENABLE_TRACE|KDEBUG_ENABLE_CHUD)
+#define KDEBUG_COMMON (KDEBUG_ENABLE_TRACE | KDEBUG_ENABLE_PPT)
+#define KDEBUG_TRACE  (KDEBUG_ENABLE_TRACE)
 #define KDEBUG_PPT    (KDEBUG_ENABLE_PPT)
 
 /*
@@ -831,6 +878,9 @@
 #define __kdebug_only __unused
 #endif /* (KDEBUG_LEVEL >= KDEBUG_LEVEL_FULL) */
 
+// KDEBUG COMMPAGE BITs
+#define KDEBUG_COMMPAGE_ENABLE_TRACE      0x1
+#define KDEBUG_COMMPAGE_ENABLE_TYPEFILTER 0x2 /* Forced to false if ENABLE_TRACE is 0 */
 
 // for EnergyTracing user space & clients
 #define kEnTrCompKernel	    2
@@ -863,8 +913,6 @@
 #define kEnTrFlagNoWork		1 << 1
 
 // and now the internal mechanism
-
-
 #endif /* __APPLE_API_UNSTABLE */
 __END_DECLS
 
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/kdebugevents.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/kdebugevents.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/kdebugevents.h	2016-02-27 07:07:43.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/kdebugevents.h	2016-06-03 22:55:54.000000000 +0200
@@ -105,7 +105,7 @@
         {0x10c00a0, "MSC_kern_invalid_#40"},
         {0x10c00a4, "MSC_mach_port_guard_trap"},
         {0x10c00a8, "MSC_mach_port_unguard_trap"},
-        {0x10c00ac, "MSC_kern_invalid_#43"},
+        {0x10c00ac, "MSC_mach_generate_activity_id"},
         {0x10c00b0, "MSC_task_name_for_pid"},
         {0x10c00b4, "MSC_task_for_pid"},
         {0x10c00b8, "MSC_pid_for_task"},
@@ -200,6 +200,17 @@
         {0x120001c, "MACH_IPC_voucher_create"},
         {0x1200020, "MACH_IPC_voucher_create_attr_data"},
         {0x1200024, "MACH_IPC_voucher_destroy"},
+        {0x1200028, "MACH_IPC_kmsg_info"},
+        {0x120002c, "MACH_IPC_kmsg_link"},
+        {0x1250008, "MACH_RMON_CPUUSAGE_VIOLATED"},
+        {0x1250010, "MACH_RMON_CPUUSAGE_VIOLATED_K32A"},
+        {0x1250014, "MACH_RMON_CPUUSAGE_VIOLATED_K32B"},
+        {0x1250048, "MACH_RMON_CPUWAKES_VIOLATED"},
+        {0x1250050, "MACH_RMON_CPUWAKES_VIOLATED_K32A"},
+        {0x1250054, "MACH_RMON_CPUWAKES_VIOLATED_K32B"},
+        {0x1250088, "MACH_RMON_LOGWRITES_VIOLATED"},
+        {0x1250090, "MACH_RMON_LOGWRITES_VIOLATED_K32A"},
+        {0x1250094, "MACH_RMON_LOGWRITES_VIOLATED_K32A"},
         {0x1300004, "MACH_Pageout"},
         {0x1300008, "MACH_vmfault"},
         {0x1300100, "MACH_purgable_token_add"},
@@ -229,6 +240,12 @@
         {0x1300490, "MACH_vm_page_expedite"},
         {0x13004c0, "MACH_vm_pressure_event"},
         {0x1300500, "MACH_vm_data_write"},
+        {0x1320000, "vm_disconnect_all_page_mappings"},
+        {0x1320004, "vm_disconnect_task_page_mappings"},
+        {0x1320008, "RealFaultAddressInternal"},
+        {0x132000c, "RealFaultAddressPurgeable"},
+        {0x1320010, "RealFaultAddressExternal"},
+        {0x1320014, "RealFaultAddressSharedCache"},
         {0x1400000, "MACH_SCHED"},
         {0x1400004, "MACH_STKATTACH"},
         {0x1400008, "MACH_STKHANDOFF"},
@@ -469,6 +486,8 @@
         {0x301017c, "Cl_wait_IO"},
         {0x3010180, "Vnode_Pagein"},
         {0x3010184, "throttle_lowpri_io"},
+        {0x3010198, "rethrottle_wakeup"},
+        {0x301019c, "rethrottle_noted"},
         {0x3010200, "Vnode_Pageout"},
         {0x3010280, "Vnode_WaitForWrites"},
         {0x3010300, "PageoutThrottle"},
@@ -559,6 +578,7 @@
         {0x3011028, "UPL_map_remove_upl"},
         {0x301102c, "UPL_commit_range_speculative"},
         {0x3018000, "HFS_update"},
+        {0x3018004, "HFS_modify_block_end"},
         {0x3020000, "P_WrData"},
         {0x3020004, "P_WrDataDone"},
         {0x3020008, "P_RdData"},
@@ -824,6 +844,9 @@
         {0x3cf0000, "CP_OFFSET_IO"},
         {0x4010004, "proc_exit"},
         {0x4010008, "force_exit"},
+        {0x401000c, "proc_exec"},
+        {0x4010010, "exit_reason_create"},
+        {0x4010014, "exit_reason_commit"},
         {0x4020004, "MEMSTAT_scan"},
         {0x4020008, "MEMSTAT_jetsam"},
         {0x402000c, "MEMSTAT_jetsam_hiwat"},
@@ -837,7 +860,7 @@
         {0x402002c, "MEMSTAT_dirty_clear"},
         {0x4020030, "MEMSTAT_grp_set_properties"},
         {0x4020034, "MEMSTAT_do_kill"},
-        {0x40c0000, "BSC_SysCall"},
+        {0x40c0000, "BSC_indirect_syscall"},
         {0x40c0004, "BSC_exit"},
         {0x40c0008, "BSC_fork"},
         {0x40c000c, "BSC_read"},
@@ -859,7 +882,7 @@
         {0x40c004c, "BSC_obs_lseek"},
         {0x40c0050, "BSC_getpid"},
         {0x40c0054, "BSC_obs_mount"},
-        {0x40c0058, "BSC_obs_unmount"},
+        {0x40c0058, "BSC_obs_umount"},
         {0x40c005c, "BSC_setuid"},
         {0x40c0060, "BSC_getuid"},
         {0x40c0064, "BSC_geteuid"},
@@ -881,7 +904,7 @@
         {0x40c00a4, "BSC_dup"},
         {0x40c00a8, "BSC_pipe"},
         {0x40c00ac, "BSC_getegid"},
-        {0x40c00b0, "BSC_profil"},
+        {0x40c00b0, "BSC_obs_profil"},
         {0x40c00b4, "BSC_obs_ktrace"},
         {0x40c00b8, "BSC_sigaction"},
         {0x40c00bc, "BSC_getgid"},
@@ -900,7 +923,7 @@
         {0x40c00f0, "BSC_umask"},
         {0x40c00f4, "BSC_chroot"},
         {0x40c00f8, "BSC_obs_fstat"},
-        {0x40c00fc, "BSC_#63"},
+        {0x40c00fc, "BSC_used_internally_and_reserved"},
         {0x40c0100, "BSC_obs_getpagesize"},
         {0x40c0104, "BSC_msync"},
         {0x40c0108, "BSC_vfork"},
@@ -1007,14 +1030,14 @@
         {0x40c029c, "BSC_mount"},
         {0x40c02a0, "BSC_obs_ustat"},
         {0x40c02a4, "BSC_csops"},
-        {0x40c02a8, "BSC_obs_table"},
+        {0x40c02a8, "BSC_csops_audittoken"},
         {0x40c02ac, "BSC_obs_wait3"},
         {0x40c02b0, "BSC_obs_rpause"},
         {0x40c02b4, "BSC_waitid"},
         {0x40c02b8, "BSC_obs_getdents"},
         {0x40c02bc, "BSC_obs_gc_control"},
-        {0x40c02c0, "BSC_add_profil"},
-        {0x40c02c4, "BSC_#177"},
+        {0x40c02c0, "BSC_obs_add_profil"},
+        {0x40c02c4, "BSC_kdebug_typefilter"},
         {0x40c02c8, "BSC_kdebug_trace_string"},
         {0x40c02cc, "BSC_kdebug_trace64"},
         {0x40c02d0, "BSC_kdebug_trace"},
@@ -1022,7 +1045,7 @@
         {0x40c02d8, "BSC_setegid"},
         {0x40c02dc, "BSC_seteuid"},
         {0x40c02e0, "BSC_sigreturn"},
-        {0x40c02e4, "BSC_chud"},
+        {0x40c02e4, "BSC_obs_chud"},
         {0x40c02e8, "BSC_#186"},
         {0x40c02ec, "BSC_fdatasync"},
         {0x40c02f0, "BSC_stat"},
@@ -1035,7 +1058,7 @@
         {0x40c030c, "BSC_setrlimit"},
         {0x40c0310, "BSC_getdirentries"},
         {0x40c0314, "BSC_mmap"},
-        {0x40c0318, "BSC_obs__syscall"},
+        {0x40c0318, "BSC_obs___syscall"},
         {0x40c031c, "BSC_lseek"},
         {0x40c0320, "BSC_truncate"},
         {0x40c0324, "BSC_ftruncate"},
@@ -1043,14 +1066,14 @@
         {0x40c032c, "BSC_mlock"},
         {0x40c0330, "BSC_munlock"},
         {0x40c0334, "BSC_undelete"},
-        {0x40c0338, "BSC_ATsocket"},
-        {0x40c033c, "BSC_ATgetmsg"},
-        {0x40c0340, "BSC_ATputmsg"},
-        {0x40c0344, "BSC_ATPsndreq"},
-        {0x40c0348, "BSC_ATPsndrsp"},
-        {0x40c034c, "BSC_ATPgetreq"},
-        {0x40c0350, "BSC_ATPgetrsp"},
-        {0x40c0354, "BSC_#213"},
+        {0x40c0338, "BSC_obs_ATsocket"},
+        {0x40c033c, "BSC_obs_ATgetmsg"},
+        {0x40c0340, "BSC_obs_ATputmsg"},
+        {0x40c0344, "BSC_obs_ATsndreq"},
+        {0x40c0348, "BSC_obs_ATsndrsp"},
+        {0x40c034c, "BSC_obs_ATgetreq"},
+        {0x40c0350, "BSC_obs_ATgetrsp"},
+        {0x40c0354, "BSC_Reserved_for_AppleTalk"},
         {0x40c0358, "BSC_#214"},
         {0x40c035c, "BSC_#215"},
         {0x40c0360, "BSC_open_dprotected_np"},
@@ -1061,9 +1084,9 @@
         {0x40c0374, "BSC_setattrlist"},
         {0x40c0378, "BSC_getdirentriesattr"},
         {0x40c037c, "BSC_exchangedata"},
-        {0x40c0380, "BSC_checkuseraccess"},
+        {0x40c0380, "BSC_obs_checkuseraccess_or_fsgetpath"},
         {0x40c0384, "BSC_searchfs"},
-        {0x40c0388, "BSC_delete_Carbon"},
+        {0x40c0388, "BSC_delete"},
         {0x40c038c, "BSC_copyfile"},
         {0x40c0390, "BSC_fgetattrlist"},
         {0x40c0394, "BSC_fsetattrlist"},
@@ -1094,7 +1117,7 @@
         {0x40c03f8, "BSC_semctl"},
         {0x40c03fc, "BSC_semget"},
         {0x40c0400, "BSC_semop"},
-        {0x40c0404, "BSC_semconfig"},
+        {0x40c0404, "BSC_obs_semconfig"},
         {0x40c0408, "BSC_msgctl"},
         {0x40c040c, "BSC_msgget"},
         {0x40c0410, "BSC_msgsnd"},
@@ -1112,6 +1135,8 @@
         {0x40c0440, "BSC_sem_trywait"},
         {0x40c0444, "BSC_sem_post"},
         {0x40c0448, "BSC_sysctlbyname"},
+        {0x40c044c, "BSC_obs_sem_init"},
+        {0x40c0450, "BSC_obs_sem_destroy"},
         {0x40c0454, "BSC_open_extended"},
         {0x40c0458, "BSC_umask_extended"},
         {0x40c045c, "BSC_stat_extended"},
@@ -1129,8 +1154,8 @@
         {0x40c048c, "BSC_mkfifo_extended"},
         {0x40c0490, "BSC_mkdir_extended"},
         {0x40c0494, "BSC_identitysvc"},
-        {0x40c0498, "BSC_shared_region_chk_np"},
-        {0x40c049c, "BSC_shared_region_map_np"},
+        {0x40c0498, "BSC_shared_region_check_np"},
+        {0x40c049c, "BSC_obs_shared_region_map_np"},
         {0x40c04a0, "BSC_vm_pressure_monitor"},
         {0x40c04a4, "BSC_psynch_rw_longrdlock"},
         {0x40c04a8, "BSC_psynch_rw_yieldwrlock"},
@@ -1156,7 +1181,7 @@
         {0x40c04f8, "BSC_aio_read"},
         {0x40c04fc, "BSC_aio_write"},
         {0x40c0500, "BSC_lio_listio"},
-        {0x40c0504, "BSC_obs_pthread_cond_wait"},
+        {0x40c0504, "BSC_obs___pthread_cond_wait"},
         {0x40c0508, "BSC_iopolicysys"},
         {0x40c050c, "BSC_process_policy"},
         {0x40c0510, "BSC_mlockall"},
@@ -1190,8 +1215,8 @@
         {0x40c0580, "BSC_#352"},
         {0x40c0584, "BSC_getauid"},
         {0x40c0588, "BSC_setauid"},
-        {0x40c058c, "BSC_getaudit"},
-        {0x40c0590, "BSC_setaudit"},
+        {0x40c058c, "BSC_obs_getaudit"},
+        {0x40c0590, "BSC_obs_setaudit"},
         {0x40c0594, "BSC_getaudit_addr"},
         {0x40c0598, "BSC_setaudit_addr"},
         {0x40c059c, "BSC_auditctl"},
@@ -1205,11 +1230,11 @@
         {0x40c05bc, "BSC_workq_open"},
         {0x40c05c0, "BSC_workq_kernreturn"},
         {0x40c05c4, "BSC_kevent64"},
-        {0x40c05c8, "BSC_obs_semwait_signal"},
-        {0x40c05cc, "BSC_obs_semwait_signal_nocancel"},
+        {0x40c05c8, "BSC_old_semwait_signal"},
+        {0x40c05cc, "BSC_old_semwait_signal_nocancel"},
         {0x40c05d0, "BSC_thread_selfid"},
         {0x40c05d4, "BSC_ledger"},
-        {0x40c05d8, "BSC_#374"},
+        {0x40c05d8, "BSC_kevent_qos"},
         {0x40c05dc, "BSC_#375"},
         {0x40c05e0, "BSC_#376"},
         {0x40c05e4, "BSC_#377"},
@@ -1218,6 +1243,7 @@
         {0x40c05f0, "BSC_mac_execve"},
         {0x40c05f4, "BSC_mac_syscall"},
         {0x40c05f8, "BSC_mac_get_file"},
+        {0x40c05fc, "BSC_mac_set_file"},
         {0x40c0600, "BSC_mac_get_link"},
         {0x40c0604, "BSC_mac_set_link"},
         {0x40c0608, "BSC_mac_get_proc"},
@@ -1228,8 +1254,8 @@
         {0x40c061c, "BSC_#391"},
         {0x40c0620, "BSC_#392"},
         {0x40c0624, "BSC_#393"},
-        {0x40c0628, "BSC_#394"},
-        {0x40c062c, "BSC_#395"},
+        {0x40c0628, "BSC_pselect"},
+        {0x40c062c, "BSC_pselect_nocancel"},
         {0x40c0630, "BSC_read_nocancel"},
         {0x40c0634, "BSC_write_nocancel"},
         {0x40c0638, "BSC_open_nocancel"},
@@ -1262,7 +1288,7 @@
         {0x40c06a4, "BSC_mac_get_mount"},
         {0x40c06a8, "BSC_mac_getfsstat"},
         {0x40c06ac, "BSC_fsgetpath"},
-        {0x40c06b0, "BSC_audit_session"},
+        {0x40c06b0, "BSC_audit_session_self"},
         {0x40c06b4, "BSC_audit_session_join"},
         {0x40c06b8, "BSC_fileport_makeport"},
         {0x40c06bc, "BSC_fileport_makefd"},
@@ -1271,7 +1297,7 @@
         {0x40c06c8, "BSC_pid_resume"},
         {0x40c06cc, "BSC_pid_hibernate"},
         {0x40c06d0, "BSC_pid_shutdown_sockets"},
-        {0x40c06d4, "BSC_shared_region_slide_np"},
+        {0x40c06d4, "BSC_obs_shared_region_slide_np"},
         {0x40c06d8, "BSC_shared_region_map_and_slide_np"},
         {0x40c06dc, "BSC_kas_info"},
         {0x40c06e0, "BSC_memorystatus_control"},
@@ -1279,7 +1305,7 @@
         {0x40c06e8, "BSC_guarded_close_np"},
         {0x40c06ec, "BSC_guarded_kqueue_np"},
         {0x40c06f0, "BSC_change_fdguard_np"},
-        {0x40c06f4, "BSC___proc_suppress"},
+        {0x40c06f4, "BSC_usrctl"},
         {0x40c06f8, "BSC_proc_rlimit_control"},
         {0x40c06fc, "BSC_connectx"},
         {0x40c0700, "BSC_disconnectx"},
@@ -1294,12 +1320,15 @@
         {0x40c0724, "BSC_sfi_pidctl"},
         {0x40c0728, "BSC_coalition"},
         {0x40c072c, "BSC_coalition_info"},
+        {0x40c0730, "BSC_necp_match_policy"},
         {0x40c0734, "BSC_getattrlistbulk"},
+        {0x40c0738, "BSC_clonefileat"},
         {0x40c073c, "BSC_openat"},
         {0x40c0740, "BSC_openat_nocancel"},
         {0x40c0744, "BSC_renameat"},
-        {0x40c074c, "BSC_chmodat"},
-        {0x40c0750, "BSC_chownat"},
+        {0x40c0748, "BSC_faccessat"},
+        {0x40c074c, "BSC_fchmodat"},
+        {0x40c0750, "BSC_fchownat"},
         {0x40c0754, "BSC_fstatat"},
         {0x40c0758, "BSC_fstatat64"},
         {0x40c075c, "BSC_linkat"},
@@ -1308,13 +1337,51 @@
         {0x40c0768, "BSC_symlinkat"},
         {0x40c076c, "BSC_mkdirat"},
         {0x40c0770, "BSC_getattrlistat"},
+        {0x40c0774, "BSC_proc_trace_log"},
         {0x40c0778, "BSC_bsdthread_ctl"},
+        {0x40c077c, "BSC_openbyid_np"},
         {0x40c0780, "BSC_recvmsg_x"},
         {0x40c0784, "BSC_sendmsg_x"},
         {0x40c0788, "BSC_thread_selfusage"},
+        {0x40c078c, "BSC_csrctl"},
+        {0x40c0790, "BSC_guarded_open_dprotected_np"},
+        {0x40c0794, "BSC_guarded_write_np"},
+        {0x40c0798, "BSC_guarded_pwrite_np"},
+        {0x40c079c, "BSC_guarded_writev_np"},
+        {0x40c07a0, "BSC_renameatx_np"},
         {0x40c07a4, "BSC_mremap_encrypted"},
+        {0x40c07a8, "BSC_netagent_trigger"},
+        {0x40c07ac, "BSC_stack_snapshot_with_config"},
+        {0x40c07b0, "BSC_microstackshot"},
+        {0x40c07b4, "BSC_grab_pgo_data"},
         {0x40c07b8, "BSC_persona"},
+        {0x40c07bc, "BSC_#495"},
+        {0x40c07c0, "BSC_#496"},
+        {0x40c07c4, "BSC_#497"},
+        {0x40c07c8, "BSC_#498"},
         {0x40c07cc, "BSC_work_interval_ctl"},
+        {0x40c07d0, "BSC_getentropy"},
+        {0x40c07d4, "BSC_necp_open"},
+        {0x40c07d8, "BSC_necp_client_action"},
+        {0x40c07dc, "BSC_nexus_open"},
+        {0x40c07e0, "BSC_nexus_register"},
+        {0x40c07e4, "BSC_nexus_deregister"},
+        {0x40c07e8, "BSC_nexus_create"},
+        {0x40c07ec, "BSC_nexus_destroy"},
+        {0x40c07f0, "BSC_nexus_get_opt"},
+        {0x40c07f4, "BSC_nexus_set_opt"},
+        {0x40c07f8, "BSC_channel_open"},
+        {0x40c07fc, "BSC_channel_get_info"},
+        {0x40c0800, "BSC_channel_sync"},
+        {0x40c0804, "BSC_channel_get_opt"},
+        {0x40c0808, "BSC_channel_set_opt"},
+        {0x40c080c, "BSC_ulock_wait"},
+        {0x40c0810, "BSC_ulock_wake"},
+        {0x40c0814, "BSC_fclonefileat"},
+        {0x40c0818, "BSC_fs_snapshot"},
+        {0x40c081c, "BSC_#519"},
+        {0x40c0820, "BSC_terminate_with_payload"},
+        {0x40c0824, "BSC_abort_with_payload"},
         {0x40e0104, "BSC_msync_extended_info"},
         {0x40e0264, "BSC_pread_extended_info"},
         {0x40e0268, "BSC_pwrite_extended_info"},
@@ -1389,7 +1456,14 @@
         {0x50700c0, "PM_ClientNotify"},
         {0x50700c4, "PM_AppNotify"},
         {0x50700d4, "PM_IdleCancel"},
-        {0x50700d8, "PM_SystemTracePoint"},
+        {0x50700d8, "PM_SleepWakeTracePoint"},
+        {0x50700dc, "PM_QuiescePowerTree"},
+        {0x50700e0, "PM_ComponentWakeProgress"},
+        {0x50700e4, "PM_UserActiveState"},
+        {0x50700e8, "PM_AppResponseDelay"},
+        {0x50700ec, "PM_DriverResponseDelay"},
+        {0x50700ec, "PM_PCIDevChangeDone"},
+        {0x50700f0, "PM_PCIDevChangeStart"},
         {0x5080004, "IOSERVICE_BUSY"},
         {0x5080008, "IOSERVICE_NONBUSY"},
         {0x508000c, "IOSERVICE_MODULESTALL"},
@@ -1590,9 +1664,12 @@
         {0x7000004, "TRACE_DATA_NEWTHREAD"},
         {0x7000008, "TRACE_DATA_EXEC"},
         {0x700000c, "TRACE_DATA_THREAD_TERMINATE"},
+        {0x7000010, "TRACE_DATA_THREAD_TERMINATE_PID"},
         {0x7010000, "TRACE_STRING_GLOBAL"},
         {0x7010004, "TRACE_STRING_NEWTHREAD"},
         {0x7010008, "TRACE_STRING_EXEC"},
+        {0x701000c, "TRACE_STRING_PROC_EXIT"},
+        {0x7010010, "TRACE_STRING_THREADNAME"},
         {0x7020000, "TRACE_PANIC"},
         {0x7020004, "TRACE_TIMESTAMPS"},
         {0x7020008, "TRACE_LOST_EVENTS"},
@@ -1958,7 +2035,6 @@
         {0x21090004, "PHD_DAEMON_FINISH"},
         {0x21090010, "PHD_SYNCNOW_START"},
         {0x21090014, "PHD_SYNCNOW_FINISH"},
-        {0x210a0fac, "DISPATCH_voucher_transport"},
         {0x210b0000, "TAL_APP_LAUNCH_START"},
         {0x210b0004, "TAL_APP_LAUNCH_UNSUSPENDED"},
         {0x210b0008, "TAL_APP_LAUNCH_UNTHROTTLED"},
@@ -1968,19 +2044,6 @@
         {0x210c0000, "NSAPPLICATION_RECEIVED_KEYEVENT"},
         {0x210c0004, "NSWINDOW_FLUSHED"},
         {0x210c0008, "NSTEXTVIEW_PROCESSED_KEYEVENT"},
-        {0x22000004, "LAUNCHD_starting"},
-        {0x22000008, "LAUNCHD_exiting"},
-        {0x2200000c, "LAUNCHD_finding_stray_pg"},
-        {0x22000010, "LAUNCHD_finding_all_strays"},
-        {0x22000014, "LAUNCHD_finding_execless"},
-        {0x22000018, "LAUNCHD_finding_weird_uids"},
-        {0x2200001c, "LAUNCHD_data_pack"},
-        {0x22000020, "LAUNCHD_data_unpack"},
-        {0x22000024, "LAUNCHD_bug"},
-        {0x22000028, "LAUNCHD_mach_ipc"},
-        {0x2200002c, "LAUNCHD_bsd_kevent"},
-        {0x22000030, "LAUNCHD_vproc_trans_incr"},
-        {0x22000034, "LAUNCHD_vproc_trans_decr"},
         {0x25000000, "PERF_Event"},
         {0x25010000, "PERF_THD_Sample"},
         {0x25010004, "PERF_THD_Data"},
@@ -1988,6 +2051,17 @@
         {0x2501000c, "PERF_THD_XPend"},
         {0x25010010, "PERF_THD_XData"},
         {0x25010014, "PERF_THD_CSwitch"},
+        {0x25010018, "PERF_THD_Sched_Sample"},
+        {0x2501001c, "PERF_THD_Sched_Data"},
+        {0x25010020, "PERF_THD_Snap_Sample"},
+        {0x25010024, "PERF_THD_Snap_Data"},
+        {0x25010028, "PERF_THD_Disp_Sample"},
+        {0x2501002c, "PERF_THD_Disp_Data"},
+        {0x25010030, "PERF_THD_Disp_Pend"},
+        {0x25010034, "PERF_THD_Snap_Data_32"},
+        {0x25010038, "PERF_THD_Disp_Data_32"},
+        {0x2501003c, "PERF_THD_Sched_Data1_32"},
+        {0x25010040, "PERF_THD_Sched_Data2_32"},
         {0x25020000, "PERF_STK_KSample"},
         {0x25020004, "PERF_STK_USched"},
         {0x25020008, "PERF_STK_USample"},
@@ -1995,6 +2069,9 @@
         {0x25020010, "PERF_STK_UData"},
         {0x25020014, "PERF_STK_KHdr"},
         {0x25020018, "PERF_STK_UHdr"},
+        {0x2502001c, "PERF_STK_Error"},
+        {0x25020020, "PERF_STK_Backtrace"},
+        {0x25020024, "PERF_STK_Log"},
         {0x25030000, "PERF_TMR_AllSched"},
         {0x25030004, "PERF_TMR_Schedule"},
         {0x25030008, "PERF_TMR_Handler"},
@@ -2004,6 +2081,10 @@
         {0x2504000c, "PERF_ATS_Pause"},
         {0x25040010, "PERF_ATS_Idle"},
         {0x25040014, "PERF_ATS_Sample"},
+        {0x25040018, "PERF_PET_Sched"},
+        {0x2504001c, "PERF_PET_End"},
+        {0x25040020, "PERF_PET_Sample_Task"},
+        {0x25040024, "PERF_PET_Sample_Thread"},
         {0x25050000, "PERF_AST_Handler"},
         {0x25050004, "PERF_AST_Error"},
         {0x25060000, "PERF_KPC_Handler"},
@@ -2016,9 +2097,14 @@
         {0x2506001c, "PERF_KPC_ConfReg32"},
         {0x25060020, "PERF_KPC_Data_Thread"},
         {0x25060024, "PERF_KPC_Data_Thread32"},
+        {0x25060028, "PERF_KPC_CPU_Sample"},
+        {0x2506002c, "PERF_KPC_Thd_Sample"},
         {0x25070000, "PERF_KDBG_Handler"},
-        {0x25080000, "PERF_CS_Handler"},
-        {0x25090000, "PERF_SP_Handler"},
+        {0x25080000, "PERF_TK_Snap_Sample"},
+        {0x25080004, "PERF_TK_Snap_Data1"},
+        {0x25080008, "PERF_TK_Snap_Data2"},
+        {0x2508000c, "PERF_TK_Snap_Data1_32"},
+        {0x25080010, "PERF_TK_Snap_Data2_32"},
         {0x250a0000, "PERF_MI_Sample"},
         {0x250a0004, "PERF_MI_Data"},
         {0x26100008, "imp_assertion_hold"},
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/kern_control.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/kern_control.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/kern_control.h	2015-08-27 01:55:56.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/kern_control.h	2016-06-03 22:55:50.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2000-2004, 2012-2015 Apple Inc. All rights reserved.
+ * Copyright (c) 2000-2004, 2012-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  * 
@@ -444,7 +444,7 @@
 	low-water mark for the socket receive buffer.
  @param kctlref The control reference of the kernel control.
  @param unit The unit number of the kernel control instance.
- @param u_int32_t The address at which to return the current difference
+ @param difference The address at which to return the current difference
 	between the low-water mark for the socket and the number of bytes
 	enqueued. 0 indicates that the socket is readable by the client
 	(the number of bytes in the buffer is above the low-water mark).
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/kpi_mbuf.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/kpi_mbuf.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/kpi_mbuf.h	2015-08-27 01:55:59.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/kpi_mbuf.h	2016-06-03 22:55:54.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2008-2015 Apple Inc. All rights reserved.
+ * Copyright (c) 2008-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  *
@@ -437,6 +437,7 @@
  */
 extern void mbuf_freecluster(caddr_t addr, size_t size);
 
+
 /*!
 	@function mbuf_getcluster
 	@discussion Allocate a cluster of the requested size and attach it to
@@ -512,7 +513,7 @@
 		pointed to by maxchunks.  E.g. a request for 9018 bytes may
 		result in 1 chunk when jumbo clusters are available, or
 		3 chunks otherwise.
-	@param Upon success, *mbuf will be a reference to the new mbuf.
+	@param mbuf Upon success, *mbuf will be a reference to the new mbuf.
 	@result Returns 0 upon success or the following error code:
 		EINVAL - Invalid parameter
 		ENOMEM - Not enough memory available
@@ -551,7 +552,7 @@
 		pointed to by maxchunks.  E.g. a request for 9018 bytes may
 		result in 1 chunk when jumbo clusters are available, or
 		3 chunks otherwise.
-	@param Upon success, *mbuf will be a reference to the new mbuf.
+	@param mbuf Upon success, *mbuf will be a reference to the new mbuf.
 	@result Returns 0 upon success or the following error code:
 		EINVAL - Invalid parameter
 		ENOMEM - Not enough memory available
@@ -855,7 +856,6 @@
 		not set the length over the space available in the mbuf.
 	@param mbuf The mbuf.
 	@param len The new length.
-	@result 0 upon success otherwise the errno error.
  */
 extern void mbuf_setlen(mbuf_t mbuf, size_t len);
 
@@ -922,7 +922,7 @@
 	@function mbuf_copy_pkthdr
 	@discussion Copies the packet header from src to dest.
 	@param src The mbuf from which the packet header will be copied.
-	@param mbuf The mbuf to which the packet header will be copied.
+	@param dest The mbuf to which the packet header will be copied.
 	@result 0 upon success otherwise the errno error.
  */
 extern errno_t mbuf_copy_pkthdr(mbuf_t dest, const mbuf_t src);
@@ -972,7 +972,7 @@
 	@function mbuf_pkthdr_setrcvif
 	@discussion Sets the interface the packet was received on.
 	@param mbuf The mbuf containing the packet header.
-	@param ifnet A reference to an interface.
+	@param ifp A reference to an interface.
 	@result 0 upon success otherwise the errno error.
  */
 extern errno_t mbuf_pkthdr_setrcvif(mbuf_t mbuf, ifnet_t ifp);
@@ -989,8 +989,7 @@
 	@function mbuf_pkthdr_setheader
 	@discussion Sets the pointer to the packet header.
 	@param mbuf The mbuf containing the packet header.
-	@param ifnet A pointer to the header.
-	@result 0 upon success otherwise the errno error.
+	@param header A pointer to the header.
  */
 extern void mbuf_pkthdr_setheader(mbuf_t mbuf, void *header);
 
@@ -1171,7 +1170,7 @@
 
 /*!
 	@function mbuf_inet_cksum
-	@discussions Calculates 16-bit 1's complement Internet checksum of the
+	@discussion Calculates 16-bit 1's complement Internet checksum of the
 		transport segment with or without the pseudo header checksum
 		of a given IPv4 packet.  If the caller specifies a non-zero
 		transport protocol, the checksum returned will also include
@@ -1200,7 +1199,7 @@
 
 /*!
 	@function mbuf_inet6_cksum
-	@discussions Calculates 16-bit 1's complement Internet checksum of the
+	@discussion Calculates 16-bit 1's complement Internet checksum of the
 		transport segment with or without the pseudo header checksum
 		of a given IPv6 packet.  If the caller specifies a non-zero
 		transport protocol, the checksum returned will also include
@@ -1339,7 +1338,7 @@
 	@function mbuf_set_traffic_class
 	@discussion Set the traffic class of an mbuf packet.
 	@param mbuf The mbuf to set the traffic class on.
-	@tc The traffic class
+	@param tc The traffic class
 	@result 0 on success, EINVAL if bad parameter is passed
 */
 extern errno_t mbuf_set_traffic_class(mbuf_t mbuf, mbuf_traffic_class_t tc);
@@ -1355,6 +1354,7 @@
 
 
 
+
 /* IF_QUEUE interaction */
 
 #define IF_ENQUEUE_MBUF(ifq, m) {					\
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/kpi_socket.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/kpi_socket.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/kpi_socket.h	2015-08-27 01:55:59.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/kpi_socket.h	2016-06-03 22:55:54.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2008-2012 Apple Inc. All rights reserved.
+ * Copyright (c) 2008-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  *
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/kpi_socketfilter.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/kpi_socketfilter.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/kpi_socketfilter.h	2015-08-27 01:55:59.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/kpi_socketfilter.h	2016-06-03 22:55:54.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2008 Apple Computer, Inc. All rights reserved.
+ * Copyright (c) 2008-2016 Apple Computer, Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  * 
@@ -182,7 +182,7 @@
 	@param cookie Cookie value specified when the filter attach was
 		called.
 	@param so The socket the filter is attached to.
-	@result If you return a non-zero value, your filter will not be
+	@discussion If you return a non-zero value, your filter will not be
 		attached to this socket.
 */
 typedef	void (*sf_detach_func)(void *cookie, socket_t so);
@@ -285,7 +285,7 @@
 	@param cookie Cookie value specified when the filter attach was
 		called.
 	@param so The socket the filter is attached to.
-	@param from The address the data is from, may be NULL if the socket
+	@param to The address the data is to, may be NULL if the socket
 		is connected.
 	@param data The data being received. Control data may appear in the
 		mbuf chain, be sure to check the mbuf types to find control
@@ -591,7 +591,7 @@
 	@param handle The handle of the registered filter to be attached.
 	@result 0 on success otherwise the errno error.
  */
-extern errno_t sflt_attach(socket_t so, sflt_handle);
+extern errno_t sflt_attach(socket_t socket, sflt_handle handle);
 
 /*!
 	@function sflt_detach
@@ -600,7 +600,7 @@
 	@param handle The handle of the registered filter to be detached.
 	@result 0 on success otherwise the errno error.
  */
-extern errno_t sflt_detach(socket_t so, sflt_handle);
+extern errno_t sflt_detach(socket_t socket, sflt_handle handle);
 
 /* Functions for manipulating sockets */
 /*
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/malloc.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/malloc.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/malloc.h	2015-08-27 01:55:56.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/malloc.h	2016-06-03 22:55:50.000000000 +0200
@@ -87,7 +87,6 @@
 #define	M_IFADDR	9	/* interface address (IOFireWireIP)*/
 #define	M_LOCKF		40	/* Byte-range locking structures (msdos) */ 
 #define	M_TEMP		80	/* misc temporary data buffers */
-#define	M_HFSMNT	75	/* HFS mount structure (afpfs) */
 #define M_KAUTH		100	/* kauth subsystem (smb) */
 #define	M_SONAME	11	/* socket name (smb) */
 #define	M_PCB		4	/* protocol control block (smb) */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/mount.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/mount.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/mount.h	2016-02-27 07:07:38.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/mount.h	2016-06-03 22:55:50.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2000-2014 Apple Inc. All rights reserved.
+ * Copyright (c) 2000-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  * 
@@ -477,11 +477,16 @@
 	u_int32_t	io_maxsegwritesize;	/* Max. segment write size */
 	u_int32_t	io_devblocksize;	/* the underlying device block size */
 	u_int32_t	io_flags;			/* flags for underlying device */
-	void *		io_reserved[2];		/* extended attribute information */
+	union {
+		int64_t	io_max_swappin_available;
+		// On 32 bit architectures, we don't have any spare
+		void *io_reserved[2];
+	};
 };
 
-#define VFS_IOATTR_FLAGS_FUA	0x01	/* Write-through cache supported */
-#define VFS_IOATTR_FLAGS_UNMAP		0x02	/* Unmap (trim) supported */
+#define VFS_IOATTR_FLAGS_FUA				0x00000001	/* Write-through cache supported */
+#define VFS_IOATTR_FLAGS_UNMAP				0x00000002	/* Unmap (trim) supported */
+#define VFS_IOATTR_FLAGS_SWAPPIN_SUPPORTED	0x00000010	/* Pinning swap file supported */
 
 /*
  * Filesystem Registration information
@@ -500,9 +505,8 @@
 #define VFS_TBLVNOP_PAGEINV2		0x2000
 #define VFS_TBLVNOP_PAGEOUTV2		0x4000
 #define VFS_TBLVNOP_NOUPDATEID_RENAME	0x8000	/* vfs should not call vnode_update_ident on rename */
-#if CONFIG_SECLUDED_RENAME
 #define	VFS_TBLVNOP_SECLUDE_RENAME 	0x10000
-#endif
+#define VFS_TBLCANMOUNTROOT		0x20000
 
 
 struct vfs_fsentry {
@@ -681,11 +685,64 @@
 	 @return 0 for success, else an error code.  
 	 */
 	int  (*vfs_setattr)(struct mount *mp, struct vfs_attr *, vfs_context_t context);
-	void *vfs_reserved[7];
+
+	/*!
+	 @function vfs_ioctl
+	 @abstract File system control operations.
+	 @discussion  Unlike vfs_sysctl, this is specific to a particular volume.
+	 @param mp The mount to execute the command on.
+	 @param command Identifier for action to take.  The command used here
+	 should be in the same namespace as VNOP ioctl commands.
+	 @param data Pointer to data; this can be an integer constant (of 32 bits
+	 only) or an address to be read from or written to, depending on "command."
+	 If it is an address, it is valid and resides in the kernel; callers of
+	 VFS_IOCTL() are responsible for copying to and from userland.
+	 @param flags Reserved for future use, set to zero
+	 @param ctx Context against which to authenticate ioctl request.
+	 @return 0 for success, else an error code.
+	 */
+	int  (*vfs_ioctl)(struct mount *mp, u_long command, caddr_t data,
+					  int flags, vfs_context_t context);
+
+	/*!
+	 @function vfs_vget_snapdir
+	 @abstract Get the vnode for the snapshot directory of a filesystem.
+	 @discussion Upon success, should return with an iocount held on the root vnode which the caller will
+	 drop with vnode_put().
+	 @param mp Mount for which to get the root.
+	 @param vpp Destination for snapshot directory vnode.
+	 @param context Context to authenticate for getting the snapshot directory.
+	 @return 0 for success, else an error code.
+	 */
+	int  (*vfs_vget_snapdir)(struct mount *mp, struct vnode **vpp, vfs_context_t context);
+	void *vfs_reserved5;
+	void *vfs_reserved4;
+	void *vfs_reserved3;
+	void *vfs_reserved2;
+	void *vfs_reserved1;
 };
 
 
 /*
+ * Commands for vfs_ioctl. While they are encoded the same way as for ioctl(2),
+ * there is no generic interface for them from userspace like ioctl(2).
+ */
+struct fs_snapshot_mount_args {
+	mount_t sm_mp;
+	struct componentname *sm_cnp;
+};
+
+#define VFSIOC_MOUNT_SNAPSHOT  _IOW('V', 1, struct fs_snapshot_mount_args)
+#define VFSCTL_MOUNT_SNAPSHOT  IOCBASECMD(VFSIOC_MOUNT_SNAPSHOT)
+
+struct fs_snapshot_revert_args {
+    struct componentname *sr_cnp;
+};
+#define VFSIOC_REVERT_SNAPSHOT  _IOW('V', 2, struct fs_snapshot_revert_args)
+#define VFSCTL_REVERT_SNAPSHOT  IOCBASECMD(VFSIOC_REVERT_SNAPSHOT)
+
+
+/*
  * flags passed into vfs_iterate
  */
 
@@ -712,7 +769,7 @@
   @param handle Opaque handle which will be passed to vfs_fsremove.
   @return 0 for success, else an error code.  
   */
-int vfs_fsadd(struct vfs_fsentry *, vfstable_t *);
+int vfs_fsadd(struct vfs_fsentry *vfe, vfstable_t *handle);
 
 /*!
   @function vfs_fsremove
@@ -721,18 +778,18 @@
   @param handle Handle which was returned by vfs_fsadd.
   @return 0 for success, else an error code.  
   */
-int vfs_fsremove(vfstable_t);
+int vfs_fsremove(vfstable_t handle);
 
 /*!
   @function vfs_iterate
   @abstract Iterate over all mountpoints with a callback.  Used, for example, by sync().
   @param flags Unused.
-  @param callback Function which takes a mount and arbitrary passed-in "arg," and returns one of VFS_RETURNED_DONE or VFS_CLAIMED_DONE: end
+  @param callout Function which takes a mount and arbitrary passed-in "arg," and returns one of VFS_RETURNED_DONE or VFS_CLAIMED_DONE: end
   iteration and return success.  VFS_RETURNED or VFS_CLAIMED: continue iterating. Anything else: continue iterating. 
   @param arg Arbitrary data to pass to callback.
   @return 0 for success, else an error code.  
   */
-int	vfs_iterate(int, int (*)(struct mount *, void *), void *);
+int	vfs_iterate(int flags, int (*callout)(struct mount *, void *), void *arg);
 
 /*!
   @function vfs_init_io_attributes
@@ -741,7 +798,7 @@
   @param mp Mountpoint whose I/O parameters to initialize.
   @return 0 for success, else an error code.  
   */
-int	vfs_init_io_attributes(vnode_t, mount_t);
+int	vfs_init_io_attributes(vnode_t devvp, mount_t mp);
 
 /*!
   @function vfs_flags
@@ -750,7 +807,7 @@
   @param mp Mount whose flags to grab.  
   @return Flags.
   */
-uint64_t vfs_flags(mount_t);
+uint64_t vfs_flags(mount_t mp);
 
 /*!
   @function vfs_setflags
@@ -759,9 +816,8 @@
   used by a filesystem as part of the mount process.
   @param mp Mount whose flags to set.
   @param flags Flags to activate.  Must be in the bitwise "OR" of MNT_VISFLAGMASK and MNT_CMDFLAGS.
-  @return Flags.
   */
-void	vfs_setflags(mount_t, uint64_t);
+void	vfs_setflags(mount_t mp, uint64_t flags);
 
 /*!
   @function vfs_clearflags
@@ -769,9 +825,8 @@
   @discussion Sets mount flags to the bitwise "AND" of their current value and the complement of the specified bits.
   @param mp Mount whose flags to set.
   @param flags Flags to deactivate.  Must be in the bitwise "OR" of MNT_VISFLAGMASK and MNT_CMDFLAGS.
-  @return void.
   */
-void	vfs_clearflags(mount_t, uint64_t);
+void	vfs_clearflags(mount_t mp, uint64_t flags);
 
 /*!
   @function vfs_issynchronous
@@ -779,7 +834,7 @@
   @param mp Mount to test.
   @return Nonzero if writes occur synchronously, else 0.
   */
-int	vfs_issynchronous(mount_t);
+int	vfs_issynchronous(mount_t mp);
 
 /*!
   @function vfs_iswriteupgrade
@@ -788,7 +843,7 @@
   @param mp Mount to test.
   @return Nonzero if a request has been made to update from read-only to read-write, else 0.
   */
-int	vfs_iswriteupgrade(mount_t);
+int	vfs_iswriteupgrade(mount_t mp);
 
 /*!
   @function vfs_isupdate
@@ -796,7 +851,7 @@
   @param mp Mount to test.
   @return Nonzero if a mount update is in progress, 0 otherwise.
   */
-int	vfs_isupdate(mount_t); 
+int	vfs_isupdate(mount_t mp); 
 
 /*!
   @function vfs_isreload
@@ -805,7 +860,7 @@
   @param mp Mount to test.
   @return Nonzero if a request has been made to reload data, else 0.
   */
-int	vfs_isreload(mount_t);
+int	vfs_isreload(mount_t mp);
 
 /*!
   @function vfs_isforce
@@ -814,7 +869,7 @@
   @param mp Mount to test.
   @return Nonzero if a request has been made to forcibly unmount, else 0.
   */
-int	vfs_isforce(mount_t);
+int	vfs_isforce(mount_t mp);
 
 /*!
   @function vfs_isunmount
@@ -832,7 +887,7 @@
   @param mp Mount to test.
   @return Nonzero if filesystem is mounted read-only, else 0.
   */
-int	vfs_isrdonly(mount_t);
+int	vfs_isrdonly(mount_t mp);
 
 /*!
   @function vfs_isrdwr
@@ -840,7 +895,7 @@
   @param mp Mount to test.
   @return Nonzero if filesystem is mounted read-write, else 0.
   */
-int	vfs_isrdwr(mount_t);
+int	vfs_isrdwr(mount_t mp);
 
 /*!
   @function vfs_authopaque
@@ -848,7 +903,7 @@
   @param mp Mount to test.
   @return Nonzero if filesystem authorization is controlled remotely, else 0.
   */
-int	vfs_authopaque(mount_t);
+int	vfs_authopaque(mount_t mp);
 
 /*!
   @function vfs_authopaqueaccess
@@ -856,66 +911,59 @@
   @param mp Mount to test.
   @return Nonzero if VNOP_ACCESS is supported remotely, else 0.
   */
-int	vfs_authopaqueaccess(mount_t);
+int	vfs_authopaqueaccess(mount_t mp);
 
 /*!
   @function vfs_setauthopaque
   @abstract Mark a filesystem as having authorization decisions controlled remotely.
   @param mp Mount to mark.
-  @return void.
   */
-void	vfs_setauthopaque(mount_t);
+void	vfs_setauthopaque(mount_t mp);
 
 /*!
   @function vfs_setauthopaqueaccess
   @abstract Mark a filesystem as having remote VNOP_ACCESS support.
   @param mp Mount to mark.
-  @return void.
   */
-void	vfs_setauthopaqueaccess(mount_t);
+void	vfs_setauthopaqueaccess(mount_t mp);
 
 /*!
   @function vfs_clearauthopaque
   @abstract Mark a filesystem as not having remote authorization decisions.
   @param mp Mount to mark.
-  @return void.
   */
-void	vfs_clearauthopaque(mount_t);
+void	vfs_clearauthopaque(mount_t mp);
 
 /*!
   @function vfs_clearauthopaque
   @abstract Mark a filesystem as not having remote VNOP_ACCESS support.
   @param mp Mount to mark.
-  @return void.
   */
-void	vfs_clearauthopaqueaccess(mount_t);
+void	vfs_clearauthopaqueaccess(mount_t mp);
 
 /*!
   @function vfs_setextendedsecurity
   @abstract Mark a filesystem as supporting security controls beyond POSIX permissions.
   @discussion Specific controls include ACLs, file owner UUIDs, and group UUIDs.
   @param mp Mount to test.
-  @return void.
   */
-void	vfs_setextendedsecurity(mount_t);
+void	vfs_setextendedsecurity(mount_t mp);
 
 /*!
   @function vfs_clearextendedsecurity
   @abstract Mark a filesystem as NOT supporting security controls beyond POSIX permissions.
   @discussion Specific controls include ACLs, file owner UUIDs, and group UUIDs.
   @param mp Mount to test.
-  @return void.
   */
-void	vfs_clearextendedsecurity(mount_t);
+void	vfs_clearextendedsecurity(mount_t mp);
 
 /*!
   @function vfs_setlocklocal
   @abstract Mark a filesystem as using VFS-level advisory locking support.
   @discussion Advisory locking operations will not call down to the filesystem if this flag is set.
   @param mp Mount to mark.
-  @return void.
   */
-void	vfs_setlocklocal(mount_t);
+void	vfs_setlocklocal(mount_t mp);
 
 /*!
   @function vfs_authcache_ttl
@@ -926,7 +974,7 @@
   @param mp Mount for which to check cache lifetime.
   @return  Cache lifetime in seconds.  CACHED_RIGHT_INFINITE_TTL indicates that credentials never expire.
   */
-int	vfs_authcache_ttl(mount_t);
+int	vfs_authcache_ttl(mount_t mp);
 
 /*!
   @function vfs_setauthcache_ttl
@@ -935,18 +983,16 @@
   previously-authorized actions from the same vfs_context_t without calling down to the filesystem (though
   it will not deny based on the cache).
   @param mp Mount for which to set cache lifetime.
-  @return void.
   */
-void	vfs_setauthcache_ttl(mount_t, int);
+void	vfs_setauthcache_ttl(mount_t mp, int ttl);
 
 /*!
   @function vfs_clearauthcache_ttl
   @abstract Remove time-to-live controls for cached credentials on a filesytem.  Filesystems with remote authorization
   decisions (opaque) will still have KAUTH_VNODE_SEARCH rights cached for a default of CACHED_LOOKUP_RIGHT_TTL seconds.
   @param mp Mount for which to clear cache lifetime.
-  @return void.
   */
-void	vfs_clearauthcache_ttl(mount_t);
+void	vfs_clearauthcache_ttl(mount_t mp);
 
 /*
  * return value from vfs_cachedrights_ttl if
@@ -962,16 +1008,15 @@
   @param mp Mount from which to get symlink length cap.
   @return Max symlink length.
   */
-uint32_t vfs_maxsymlen(mount_t);
+uint32_t vfs_maxsymlen(mount_t mp);
 
 /*!
   @function vfs_setmaxsymlen
   @abstract Set the maximum length of a symbolic link on a filesystem.
   @param mp Mount on which to set symlink length cap.
   @param symlen Length to set.
-  @return Max symlink length.
   */
-void	vfs_setmaxsymlen(mount_t, uint32_t);
+void	vfs_setmaxsymlen(mount_t mp, uint32_t symlen);
 
 /*!
   @function vfs_fsprivate
@@ -981,7 +1026,7 @@
   @param mp Mount for which to get private data.
   @return Private data.
   */
-void *	vfs_fsprivate(mount_t);
+void *	vfs_fsprivate(mount_t mp);
 
 /*!
   @function vfs_setfsprivate
@@ -989,9 +1034,8 @@
   @discussion A filesystem generally has an internal mount structure which it attaches to the VFS-level mount structure
   as part of the mounting process.
   @param mp Mount for which to set private data.
-  @return Void.
   */
-void	vfs_setfsprivate(mount_t, void *mntdata);
+void	vfs_setfsprivate(mount_t mp, void *mntdata);
 
 /*!
   @function vfs_statfs
@@ -1002,7 +1046,7 @@
   @param mp Mount for which to get vfsstatfs pointer.
   @return Pointer to vfsstatfs.
   */
-struct vfsstatfs *	vfs_statfs(mount_t);
+struct vfsstatfs *	vfs_statfs(mount_t mp);
 #define	VFS_USER_EVENT		0
 #define	VFS_KERNEL_EVENT	1
 
@@ -1018,7 +1062,7 @@
   @return 0 for success, or an error code for authentication failure or problem with call to filesystem to 
   request information.
   */
-int	vfs_update_vfsstat(mount_t, vfs_context_t, int eventtype);
+int	vfs_update_vfsstat(mount_t mp, vfs_context_t ctx, int eventtype);
 
 /*!
   @function vfs_typenum
@@ -1028,7 +1072,7 @@
   @param mp Mount for which to get type number.
   @return Type number.
   */
-int	vfs_typenum(mount_t);
+int	vfs_typenum(mount_t mp);
 
 /*!
   @function vfs_name
@@ -1037,9 +1081,8 @@
   rather than a name specific to the mountpoint.
   @param mp Mount for which to get name.
   @param buffer Destination for name; length should be at least MFSNAMELEN.
-  @return void.
   */
-void	vfs_name(mount_t, char *);
+void	vfs_name(mount_t mp, char *buffer);
 
 /*!
   @function vfs_devblocksize
@@ -1047,25 +1090,23 @@
   @param mp Mount for which to get block size.
   @return Block size.
   */
-int	vfs_devblocksize(mount_t);
+int	vfs_devblocksize(mount_t mp);
 
 /*!
   @function vfs_ioattr
   @abstract Get I/O attributes associated with a mounpoint.
   @param mp Mount for which to get attributes.  If NULL, system defaults are filled into ioattrp.
   @param ioattrp Destination for results.
-  @return void.
   */
-void	vfs_ioattr(mount_t, struct vfsioattr *);
+void	vfs_ioattr(mount_t mp, struct vfsioattr *ioattrp);
 
 /*!
   @function vfs_setioattr
   @abstract Set I/O attributes associated with a mounpoint.
   @param mp Mount for which to set attributes.  
   @param ioattrp Structure containing I/O parameters; all fields must be filled in.
-  @return void.
   */
-void	vfs_setioattr(mount_t, struct vfsioattr *);
+void	vfs_setioattr(mount_t mp, struct vfsioattr *ioattrp);
 
 /*!
   @function vfs_64bitready
@@ -1073,7 +1114,7 @@
   @param mp Mount to test.
   @return Nonzero if filesystem is ready for 64-bit; 0 otherwise.
   */
-int 	vfs_64bitready(mount_t);
+int 	vfs_64bitready(mount_t mp);
 
 
 #define LK_NOWAIT 1
@@ -1089,16 +1130,15 @@
   @param flags LK_NOWAIT: fail with ENOENT if an unmount is in progress.
   @return 0 for success, with a lock held; an error code otherwise, with no lock held.
   */
-int	vfs_busy(mount_t, int);
+int	vfs_busy(mount_t mp, int flags);
 
 /*!
   @function vfs_unbusy
   @abstract "Unbusy" a mountpoint by releasing its read-write lock.
   @discussion A successful vfs_busy() must be followed by a vfs_unbusy() to release the lock on the mount.
   @param mp Mount to unbusy.
-  @return void.
   */
-void	vfs_unbusy(mount_t);
+void	vfs_unbusy(mount_t mp);
 
 /*!
   @function vfs_getnewfsid
@@ -1106,9 +1146,8 @@
   @discussion Filesystem IDs are returned as part of "struct statfs."  This function is typically
   called as part of file-system specific mount code (i.e. through VFS_MOUNT).
   @param mp Mount to set an ID for.
-  @return void.
   */
-void	vfs_getnewfsid(struct mount *);
+void	vfs_getnewfsid(struct mount *mp);
 
 /*!
   @function vfs_getvfs
@@ -1116,7 +1155,7 @@
   @param fsid Filesystem ID to look up.
   @return Mountpoint if found, else NULL.  Note unmounting mountpoints can be returned.
   */
-mount_t	vfs_getvfs(fsid_t *);
+mount_t	vfs_getvfs(fsid_t *fsid);
 
 /*!
   @function vfs_mountedon
@@ -1127,7 +1166,7 @@
   @param vp The vnode to test.
   @return EBUSY if vnode is indeed the source of a filesystem; 0 if it is not.
   */
-int	vfs_mountedon(struct vnode *);
+int	vfs_mountedon(struct vnode *vp);
 
 /*!
   @function vfs_unmountbyfsid
@@ -1138,7 +1177,7 @@
   @param ctx Context against which to authenticate unmount operation.
   @return 0 for succcess, nonero for failure.
   */
-int	vfs_unmountbyfsid(fsid_t *, int, vfs_context_t);
+int	vfs_unmountbyfsid(fsid_t *fsid, int flags, vfs_context_t ctx);
 
 /*!
   @function vfs_event_signal
@@ -1146,14 +1185,15 @@
   @param fsid Unused.
   @param event Events to post.
   @param data Unused.
-  @return void.
   */
-void	vfs_event_signal(fsid_t *, u_int32_t, intptr_t);
+void	vfs_event_signal(fsid_t *fsid, u_int32_t event, intptr_t data);
+
 /*!
   @function vfs_event_init
   @abstract This function should not be called by kexts.
   */
 void	vfs_event_init(void); /* XXX We should not export this */
+
 __END_DECLS
 
 
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/namei.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/namei.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/namei.h	2015-08-27 01:55:56.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/namei.h	2016-06-03 22:55:50.000000000 +0200
@@ -72,4 +72,5 @@
 
 
 
+
 #endif /* !_SYS_NAMEI_H_ */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/proc.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/proc.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/proc.h	2016-02-27 07:07:39.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/proc.h	2016-06-03 22:55:50.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2000-2006 Apple Computer, Inc. All rights reserved.
+ * Copyright (c) 2000-2016 Apple Computer, Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  * 
@@ -155,7 +155,7 @@
  @param p Process whose pgrpid to grab.
  @return pgrpid for "p".
  */
-pid_t proc_pgrpid(proc_t);
+pid_t proc_pgrpid(proc_t p);
 
 
 
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/resource.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/resource.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/resource.h	2015-08-27 01:55:57.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/resource.h	2016-06-03 22:55:51.000000000 +0200
@@ -409,6 +409,8 @@
 	int32_t wm_rate;
 };
 
+
+
 /* I/O type */
 #define IOPOL_TYPE_DISK	0
 
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/socket.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/socket.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/socket.h	2015-08-27 01:55:57.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/socket.h	2016-06-03 22:55:51.000000000 +0200
@@ -1,8 +1,8 @@
 /*
- * Copyright (c) 2000-2015 Apple Inc. All rights reserved.
+ * Copyright (c) 2000-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
- * 
+ *
  * This file contains Original Code and/or Modifications of Original Code
  * as defined in and that are subject to the Apple Public Source License
  * Version 2.0 (the 'License'). You may not use this file except in
@@ -11,10 +11,10 @@
  * unlawful or unlicensed copies of an Apple operating system, or to
  * circumvent, violate, or enable the circumvention or violation of, any
  * terms of an Apple operating system software license agreement.
- * 
+ *
  * Please obtain a copy of the License at
  * http://www.opensource.apple.com/apsl/ and read it before using this file.
- * 
+ *
  * The Original Code and all software distributed under the License are
  * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
  * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
@@ -22,7 +22,7 @@
  * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
  * Please see the License for the specific language governing rights and
  * limitations under the License.
- * 
+ *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_END@
  */
 /* Copyright (c) 1998, 1999 Apple Computer, Inc. All Rights Reserved */
@@ -75,6 +75,7 @@
 #include <sys/types.h>
 #include <sys/cdefs.h>
 #include <machine/_param.h>
+#include <net/net_kev.h>
 
 
 
@@ -94,7 +95,7 @@
 
 /* XXX Not explicitly defined by POSIX, but function return types are */
 #include <sys/_types/_size_t.h>
- 
+
 /* XXX Not explicitly defined by POSIX, but function return types are */
 #include <sys/_types/_ssize_t.h>
 
@@ -103,7 +104,6 @@
  */
 #include <sys/_types/_iovec_t.h>
 
- 
 /*
  * Types
  */
@@ -126,22 +126,22 @@
 #define	SO_BROADCAST	0x0020		/* permit sending of broadcast msgs */
 #if !defined(_POSIX_C_SOURCE) || defined(_DARWIN_C_SOURCE)
 #define	SO_USELOOPBACK	0x0040		/* bypass hardware when possible */
-#define SO_LINGER	0x0080          /* linger on close if data present (in ticks) */
+#define	SO_LINGER	0x0080		/* linger on close if data present (in ticks) */
 #else
-#define SO_LINGER	0x1080          /* linger on close if data present (in seconds) */
+#define	SO_LINGER	0x1080		/* linger on close if data present (in seconds) */
 #endif	/* (!_POSIX_C_SOURCE || _DARWIN_C_SOURCE) */
 #define	SO_OOBINLINE	0x0100		/* leave received OOB data in line */
 #if !defined(_POSIX_C_SOURCE) || defined(_DARWIN_C_SOURCE)
 #define	SO_REUSEPORT	0x0200		/* allow local address & port reuse */
 #define	SO_TIMESTAMP	0x0400		/* timestamp received dgram traffic */
-#define SO_TIMESTAMP_MONOTONIC	0x0800	/* Monotonically increasing timestamp on rcvd dgram */
+#define	SO_TIMESTAMP_MONOTONIC	0x0800	/* Monotonically increasing timestamp on rcvd dgram */
 #ifndef __APPLE__
 #define	SO_ACCEPTFILTER	0x1000		/* there is an accept filter */
 #else
-#define SO_DONTTRUNC	0x2000		/* APPLE: Retain unread data */
+#define	SO_DONTTRUNC	0x2000		/* APPLE: Retain unread data */
 					/*  (ATOMIC proto) */
-#define SO_WANTMORE	0x4000		/* APPLE: Give hint when more data ready */
-#define SO_WANTOOBFLAG	0x8000		/* APPLE: Want OOB in MSG_FLAG on receive */
+#define	SO_WANTMORE	0x4000		/* APPLE: Give hint when more data ready */
+#define	SO_WANTOOBFLAG	0x8000		/* APPLE: Want OOB in MSG_FLAG on receive */
 
 
 #endif  /* (!__APPLE__) */
@@ -150,35 +150,157 @@
 /*
  * Additional options, not kept in so_options.
  */
-#define SO_SNDBUF	0x1001		/* send buffer size */
-#define SO_RCVBUF	0x1002		/* receive buffer size */
-#define SO_SNDLOWAT	0x1003		/* send low-water mark */
-#define SO_RCVLOWAT	0x1004		/* receive low-water mark */
-#define SO_SNDTIMEO	0x1005		/* send timeout */
-#define SO_RCVTIMEO	0x1006		/* receive timeout */
+#define	SO_SNDBUF	0x1001		/* send buffer size */
+#define	SO_RCVBUF	0x1002		/* receive buffer size */
+#define	SO_SNDLOWAT	0x1003		/* send low-water mark */
+#define	SO_RCVLOWAT	0x1004		/* receive low-water mark */
+#define	SO_SNDTIMEO	0x1005		/* send timeout */
+#define	SO_RCVTIMEO	0x1006		/* receive timeout */
 #define	SO_ERROR	0x1007		/* get error status and clear */
 #define	SO_TYPE		0x1008		/* get socket type */
 #if !defined(_POSIX_C_SOURCE) || defined(_DARWIN_C_SOURCE)
-/*efine	SO_PRIVSTATE	0x1009		   get/deny privileged state */
-#define SO_LABEL        0x1010          /* socket's MAC label */
-#define SO_PEERLABEL    0x1011          /* socket's peer MAC label */
+#define	SO_LABEL	0x1010		/* socket's MAC label */
+#define	SO_PEERLABEL    0x1011		/* socket's peer MAC label */
 #ifdef __APPLE__
-#define SO_NREAD	0x1020		/* APPLE: get 1st-packet byte count */
-#define SO_NKE		0x1021		/* APPLE: Install socket-level NKE */
-#define SO_NOSIGPIPE	0x1022		/* APPLE: No SIGPIPE on EPIPE */
-#define SO_NOADDRERR	0x1023		/* APPLE: Returns EADDRNOTAVAIL when src is not available anymore */
-#define SO_NWRITE	0x1024		/* APPLE: Get number of bytes currently in send socket buffer */
-#define SO_REUSESHAREUID	0x1025		/* APPLE: Allow reuse of port/socket by different userids */
+#define	SO_NREAD	0x1020		/* APPLE: get 1st-packet byte count */
+#define	SO_NKE		0x1021		/* APPLE: Install socket-level NKE */
+#define	SO_NOSIGPIPE	0x1022		/* APPLE: No SIGPIPE on EPIPE */
+#define	SO_NOADDRERR	0x1023		/* APPLE: Returns EADDRNOTAVAIL when src is not available anymore */
+#define	SO_NWRITE	0x1024		/* APPLE: Get number of bytes currently in send socket buffer */
+#define	SO_REUSESHAREUID	0x1025		/* APPLE: Allow reuse of port/socket by different userids */
 #ifdef __APPLE_API_PRIVATE
-#define SO_NOTIFYCONFLICT	0x1026	/* APPLE: send notification if there is a bind on a port which is already in use */
+#define	SO_NOTIFYCONFLICT	0x1026	/* APPLE: send notification if there is a bind on a port which is already in use */
 #define	SO_UPCALLCLOSEWAIT	0x1027	/* APPLE: block on close until an upcall returns */
 #endif
-#define SO_LINGER_SEC	0x1080          /* linger on close if data present (in seconds) */
-#define SO_RANDOMPORT   0x1082  /* APPLE: request local port randomization */
-#define SO_NP_EXTENSIONS	0x1083	/* To turn off some POSIX behavior */
+#define	SO_LINGER_SEC	0x1080		/* linger on close if data present (in seconds) */
+#define	SO_RANDOMPORT   0x1082  /* APPLE: request local port randomization */
+#define	SO_NP_EXTENSIONS	0x1083	/* To turn off some POSIX behavior */
 #endif
 
-#define SO_NUMRCVPKT		0x1112	/* number of datagrams in receive socket buffer */
+#define	SO_NUMRCVPKT		0x1112	/* number of datagrams in receive socket buffer */
+
+/*
+ * Network Service Type for option SO_NET_SERVICE_TYPE
+ *
+ * The vast majority of sockets should use Best Effort that is the default
+ * Network Service Type. Other Network Service Types have to be used only if
+ * the traffic actually matches the description of the Network Service Type.
+ *
+ * Network Service Types do not represent priorities but rather describe
+ * different categories of delay, jitter and loss parameters.
+ * Those parameters may influence protocols from layer 4 protocols like TCP
+ * to layer 2 protocols like Wi-Fi. The Network Service Type can determine
+ * how the traffic is queued and scheduled by the host networking stack and
+ * by other entities on the network like switches and routers. For example
+ * for Wi-Fi, the Network Service Type can select the marking of the
+ * layer 2 packet with the appropriate WMM Access Category.
+ *
+ * There is no point in attempting to game the system and use
+ * a Network Service Type that does not correspond to the actual
+ * traffic characteristic but one that seems to have a higher precedence.
+ * The reason is that for service classes that have lower tolerance
+ * for delay and jitter, the queues size is lower than for service
+ * classes that are more tolerant to delay and jitter.
+ *
+ * For example using a voice service type for bulk data transfer will lead
+ * to disastrous results as soon as congestion happens because the voice
+ * queue overflows and packets get dropped. This is not only bad for the bulk
+ * data transfer but it is also bad for VoIP apps that legitimately are using
+ * the voice  service type.
+ *
+ * The characteristics of the Network Service Types are based on the service
+ * classes defined in RFC 4594 "Configuration Guidelines for DiffServ Service
+ * Classes"
+ *
+ * When system detects the outgoing interface belongs to a DiffServ domain
+ * that follows the recommendation of the IETF draft "Guidelines for DiffServ to
+ * IEEE 802.11 Mapping", the packet will marked at layer 3 with a DSCP value
+ * that corresponds to Network Service Type.
+ *
+ * NET_SERVICE_TYPE_BE
+ *	"Best Effort", unclassified/standard.  This is the default service
+ *	class and cover the majority of the traffic.
+ *
+ * NET_SERVICE_TYPE_BK
+ *	"Background", high delay tolerant, loss tolerant. elastic flow,
+ *	variable size & long-lived. E.g: non-interactive network bulk transfer
+ *	like synching or backup.
+ *
+ * NET_SERVICE_TYPE_RD
+ *	"Responsive Data", a notch higher than "Best Effort", medium delay
+ *	tolerant, elastic & inelastic flow, bursty, long-lived. E.g. email,
+ *	instant messaging, for which there is a sense of interactivity and
+ *	urgency (user waiting for output).
+ *
+ * NET_SERVICE_TYPE_OAM
+ *	"Operations, Administration, and Management", medium delay tolerant,
+ *	low-medium loss tolerant, elastic & inelastic flows, variable size.
+ *	E.g. VPN tunnels.
+ *
+ * NET_SERVICE_TYPE_AV
+ *	"Multimedia Audio/Video Streaming", medium delay tolerant, low-medium
+ *	loss tolerant, elastic flow, constant packet interval, variable rate
+ *	and size. E.g. video and audio playback with buffering.
+ *
+ * NET_SERVICE_TYPE_RV
+ *	"Responsive Multimedia Audio/Video", low delay tolerant, low-medium
+ *	loss tolerant, elastic flow, variable packet interval, rate and size.
+ *	E.g. screen sharing.
+ *
+ * NET_SERVICE_TYPE_VI
+ *	"Interactive Video", low delay tolerant, low-medium loss tolerant,
+ *	elastic flow, constant packet interval, variable rate & size. E.g.
+ *	video telephony.
+ *
+ * NET_SERVICE_TYPE_SIG
+ *	"Signaling", low delay tolerant, low loss tolerant, inelastic flow,
+ *	jitter tolerant, rate is bursty but short, variable size. E.g. SIP.
+ *
+ * NET_SERVICE_TYPE_VO
+ *	"Interactive Voice", very low delay tolerant, very low loss tolerant,
+ *	inelastic flow, constant packet rate, somewhat fixed size.
+ *	E.g. VoIP.
+ */
+#define	SO_NET_SERVICE_TYPE	0x1116	/* Network service type */
+
+#define	NET_SERVICE_TYPE_BE	0 /* Best effort */
+#define	NET_SERVICE_TYPE_BK	1 /* Background system initiated */
+#define	NET_SERVICE_TYPE_SIG	2 /* Signaling */
+#define	NET_SERVICE_TYPE_VI	3 /* Interactive Video */
+#define	NET_SERVICE_TYPE_VO	4 /* Interactive Voice */
+#define	NET_SERVICE_TYPE_RV	5 /* Responsive Multimedia Audio/Video */
+#define	NET_SERVICE_TYPE_AV	6 /* Multimedia Audio/Video Streaming */
+#define	NET_SERVICE_TYPE_OAM	7 /* Operations, Administration, and Management */
+#define	NET_SERVICE_TYPE_RD	8 /* Responsive Data */
+
+
+#define	SO_NETSVC_MARKING_LEVEL	0x1119	/* Get QoS marking in effect for socket */
+
+/*
+ * NETSVC_MRKNG_UNKNOWN
+ *
+ * The outgoing network interface is not known
+ */
+#define	NETSVC_MRKNG_UNKNOWN		0
+/*
+ * NETSVC_MRKNG_LVL_L2
+ *
+ * Default marking at layer 2 (for example Wi=Fi WMM)
+ */
+#define	NETSVC_MRKNG_LVL_L2		1
+/*
+ * NETSVC_MRKNG_LVL_ALL_L3L2
+ *
+ * Layer 3 DSCP marking and layer 2 marking for all Network Service Types
+ */
+#define	NETSVC_MRKNG_LVL_L3L2_ALL	2
+/*
+ * NETSVC_MRKNG_LVL_BK_L3L2
+ *
+ * The system policy limits layer 3 DSCP marking and layer 2 marking
+ * to background Network Service Types
+ */
+#define	NETSVC_MRKNG_LVL_L3L2_BK	3
 
 typedef __uint32_t sae_associd_t;
 #define	SAE_ASSOCID_ANY	0
@@ -189,16 +311,16 @@
 #define	SAE_CONNID_ALL	((sae_connid_t)(-1ULL))
 
 /* connectx() flag parameters */
-#define CONNECT_RESUME_ON_READ_WRITE	0x1 /* resume connect() on read/write */
-#define CONNECT_DATA_IDEMPOTENT		0x2 /* data is idempotent */
+#define	CONNECT_RESUME_ON_READ_WRITE	0x1 /* resume connect() on read/write */
+#define	CONNECT_DATA_IDEMPOTENT		0x2 /* data is idempotent */
 
 /* sockaddr endpoints */
 typedef struct sa_endpoints {
-	unsigned int	sae_srcif;      /* optional source interface */
-	struct sockaddr	*sae_srcaddr;   /* optional source address */
-	socklen_t	sae_srcaddrlen; /* size of source address */
-	struct sockaddr	*sae_dstaddr;   /* destination address */
-	socklen_t	sae_dstaddrlen; /* size of destination address */
+	unsigned int		sae_srcif;	/* optional source interface */
+	const struct sockaddr	*sae_srcaddr;   /* optional source address */
+	socklen_t		sae_srcaddrlen; /* size of source address */
+	const struct sockaddr	*sae_dstaddr;   /* destination address */
+	socklen_t		sae_dstaddrlen; /* size of destination address */
 } sa_endpoints_t;
 #endif	/* (!_POSIX_C_SOURCE || _DARWIN_C_SOURCE) */
 
@@ -221,14 +343,14 @@
 #ifdef __APPLE__
 
 /*
- * Structure to control non-portable Sockets extension to POSIX  
+ * Structure to control non-portable Sockets extension to POSIX
  */
 struct so_np_extensions {
 	u_int32_t	npx_flags;
 	u_int32_t	npx_mask;
 };
 
-#define SONPX_SETOPTSHUT	0x000000001     /* flag for allowing setsockopt after shutdown */
+#define	SONPX_SETOPTSHUT	0x000000001	/* flag for allowing setsockopt after shutdown */
 
 
 
@@ -261,9 +383,9 @@
 #define	AF_DATAKIT	9		/* datakit protocols */
 #define	AF_CCITT	10		/* CCITT protocols, X.25 etc */
 #define	AF_SNA		11		/* IBM SNA */
-#define AF_DECnet	12		/* DECnet */
-#define AF_DLI		13		/* DEC Direct data link interface */
-#define AF_LAT		14		/* LAT */
+#define	AF_DECnet	12		/* DECnet */
+#define	AF_DLI		13		/* DEC Direct data link interface */
+#define	AF_LAT		14		/* LAT */
 #define	AF_HYLINK	15		/* NSC Hyperchannel */
 #define	AF_APPLETALK	16		/* Apple Talk */
 #define	AF_ROUTE	17		/* Internal Routing Protocol */
@@ -271,27 +393,26 @@
 #define	pseudo_AF_XTP	19		/* eXpress Transfer Protocol (no AF) */
 #define	AF_COIP		20		/* connection-oriented IP, aka ST II */
 #define	AF_CNT		21		/* Computer Network Technology */
-#define pseudo_AF_RTIP	22		/* Help Identify RTIP packets */
+#define	pseudo_AF_RTIP	22		/* Help Identify RTIP packets */
 #define	AF_IPX		23		/* Novell Internet Protocol */
 #define	AF_SIP		24		/* Simple Internet Protocol */
-#define pseudo_AF_PIP	25		/* Help Identify PIP packets */
-/*define pseudo_AF_BLUE	26	   Identify packets for Blue Box - Not used */
-#define AF_NDRV		27		/* Network Driver 'raw' access */
-#define	AF_ISDN		28		/* Integrated Services Digital Network*/
+#define	pseudo_AF_PIP	25		/* Help Identify PIP packets */
+#define	AF_NDRV		27		/* Network Driver 'raw' access */
+#define	AF_ISDN		28		/* Integrated Services Digital Network */
 #define	AF_E164		AF_ISDN		/* CCITT E.164 recommendation */
 #define	pseudo_AF_KEY	29		/* Internal key-management function */
 #endif	/* (!_POSIX_C_SOURCE || _DARWIN_C_SOURCE) */
 #define	AF_INET6	30		/* IPv6 */
 #if !defined(_POSIX_C_SOURCE) || defined(_DARWIN_C_SOURCE)
 #define	AF_NATM		31		/* native ATM access */
-#define AF_SYSTEM	32		/* Kernel event messages */
-#define AF_NETBIOS	33		/* NetBIOS */
-#define AF_PPP		34		/* PPP communication protocol */
-#define pseudo_AF_HDRCMPLT 35		/* Used by BPF to not rewrite headers
-					 * in interface output routine */
-#define AF_RESERVED_36	36		/* Reserved for internal usage */
-#define AF_IEEE80211    37              /* IEEE 802.11 protocol */
-#define AF_UTUN		38
+#define	AF_SYSTEM	32		/* Kernel event messages */
+#define	AF_NETBIOS	33		/* NetBIOS */
+#define	AF_PPP		34		/* PPP communication protocol */
+#define	pseudo_AF_HDRCMPLT 35		/* Used by BPF to not rewrite headers
+					in interface output routine */
+#define	AF_RESERVED_36	36		/* Reserved for internal usage */
+#define	AF_IEEE80211	37		/* IEEE 802.11 protocol */
+#define	AF_UTUN		38
 #define	AF_MAX		40
 #endif	/* (!_POSIX_C_SOURCE || _DARWIN_C_SOURCE) */
 
@@ -315,7 +436,7 @@
 	__uint16_t	sp_family;		/* address family */
 	__uint16_t	sp_protocol;		/* protocol */
 };
-#endif	/* (!_POSIX_C_SOURCE || _DARWIN_C_SOURCE)*/
+#endif	/* (!_POSIX_C_SOURCE || _DARWIN_C_SOURCE) */
 
 /*
  * RFC 2553: protocol-independent placeholder for socket addresses
@@ -357,9 +478,9 @@
 #define	PF_DATAKIT	AF_DATAKIT
 #define	PF_CCITT	AF_CCITT
 #define	PF_SNA		AF_SNA
-#define PF_DECnet	AF_DECnet
-#define PF_DLI		AF_DLI
-#define PF_LAT		AF_LAT
+#define	PF_DECnet	AF_DECnet
+#define	PF_DLI		AF_DLI
+#define	PF_LAT		AF_LAT
 #define	PF_HYLINK	AF_HYLINK
 #define	PF_APPLETALK	AF_APPLETALK
 #define	PF_ROUTE	AF_ROUTE
@@ -369,25 +490,25 @@
 #define	PF_CNT		AF_CNT
 #define	PF_SIP		AF_SIP
 #define	PF_IPX		AF_IPX		/* same format as AF_NS */
-#define PF_RTIP		pseudo_AF_RTIP	/* same format as AF_INET */
-#define PF_PIP		pseudo_AF_PIP
-#define PF_NDRV		AF_NDRV
+#define	PF_RTIP		pseudo_AF_RTIP	/* same format as AF_INET */
+#define	PF_PIP		pseudo_AF_PIP
+#define	PF_NDRV		AF_NDRV
 #define	PF_ISDN		AF_ISDN
 #define	PF_KEY		pseudo_AF_KEY
 #define	PF_INET6	AF_INET6
 #define	PF_NATM		AF_NATM
-#define PF_SYSTEM	AF_SYSTEM
-#define PF_NETBIOS	AF_NETBIOS
-#define PF_PPP		AF_PPP
-#define PF_RESERVED_36  AF_RESERVED_36
-#define PF_UTUN		AF_UTUN
+#define	PF_SYSTEM	AF_SYSTEM
+#define	PF_NETBIOS	AF_NETBIOS
+#define	PF_PPP		AF_PPP
+#define	PF_RESERVED_36  AF_RESERVED_36
+#define	PF_UTUN		AF_UTUN
 #define	PF_MAX		AF_MAX
 
 /*
  * These do not have socket-layer support:
  */
 #define	PF_VLAN		((uint32_t)0x766c616e)	/* 'vlan' */
-#define PF_BOND		((uint32_t)0x626f6e64)	/* 'bond' */
+#define	PF_BOND		((uint32_t)0x626f6e64)	/* 'bond' */
 
 /*
  * Definitions for network related sysctl, CTL_NET.
@@ -398,7 +519,7 @@
  * Further levels are defined by the individual families below.
  */
 #if !defined(_POSIX_C_SOURCE) || defined(_DARWIN_C_SOURCE)
-#define NET_MAXID	AF_MAX
+#define	NET_MAXID	AF_MAX
 #endif /* (_POSIX_C_SOURCE && !_DARWIN_C_SOURCE) */
 
 
@@ -411,13 +532,13 @@
  *	Fifth: type of info, defined below
  *	Sixth: flag(s) to mask with for NET_RT_FLAGS
  */
-#define NET_RT_DUMP		1	/* dump; may limit to a.f. */
-#define NET_RT_FLAGS		2	/* by flags, e.g. RESOLVING */
-#define NET_RT_IFLIST		3	/* survey interface list */
-#define NET_RT_STAT		4	/* routing statistics */
-#define NET_RT_TRASH		5	/* routes not in table but not freed */
-#define NET_RT_IFLIST2		6	/* interface list with addresses */
-#define NET_RT_DUMP2		7	/* dump; may limit to a.f. */
+#define	NET_RT_DUMP		1	/* dump; may limit to a.f. */
+#define	NET_RT_FLAGS		2	/* by flags, e.g. RESOLVING */
+#define	NET_RT_IFLIST		3	/* survey interface list */
+#define	NET_RT_STAT		4	/* routing statistics */
+#define	NET_RT_TRASH		5	/* routes not in table but not freed */
+#define	NET_RT_IFLIST2		6	/* interface list with addresses */
+#define	NET_RT_DUMP2		7	/* dump; may limit to a.f. */
 #define	NET_RT_MAXID		10
 #endif /* (_POSIX_C_SOURCE && !_DARWIN_C_SOURCE) */
 
@@ -455,16 +576,16 @@
 #define	MSG_EOF		0x100		/* data completes connection */
 #ifdef __APPLE__
 #ifdef __APPLE_API_OBSOLETE
-#define MSG_WAITSTREAM  0x200           /* wait up to full request.. may return partial */
+#define	MSG_WAITSTREAM	0x200		/* wait up to full request.. may return partial */
 #endif
-#define MSG_FLUSH	0x400		/* Start of 'hold' seq; dump so_temp */
-#define MSG_HOLD	0x800		/* Hold frag in so_temp */
-#define MSG_SEND	0x1000		/* Send the packet in so_temp */
-#define MSG_HAVEMORE	0x2000		/* Data ready to be read */
-#define MSG_RCVMORE	0x4000		/* Data remains in current pkt */
+#define	MSG_FLUSH	0x400		/* Start of 'hold' seq; dump so_temp */
+#define	MSG_HOLD	0x800		/* Hold frag in so_temp */
+#define	MSG_SEND	0x1000		/* Send the packet in so_temp */
+#define	MSG_HAVEMORE	0x2000		/* Data ready to be read */
+#define	MSG_RCVMORE	0x4000		/* Data remains in current pkt */
 #endif
-#define MSG_NEEDSA	0x10000		/* Fail receive if socket address cannot be allocated */
-#define MSG_USEUPCALL	0x80000000 /* Inherit upcall in sock_accept */
+#define	MSG_NEEDSA	0x10000		/* Fail receive if socket address cannot be allocated */
+#define	MSG_USEUPCALL	0x80000000 /* Inherit upcall in sock_accept */
 #endif	/* (!_POSIX_C_SOURCE || _DARWIN_C_SOURCE) */
 
 /*
@@ -486,8 +607,8 @@
  * While we may have more groups than this, the cmsgcred struct must
  * be able to fit in an mbuf, and NGROUPS_MAX is too large to allow
  * this.
-*/
-#define CMGROUP_MAX 16
+ */
+#define	CMGROUP_MAX 16
 
 /*
  * Credentials structure, used to verify the identity of a peer
@@ -509,32 +630,32 @@
 
 /* given pointer to struct cmsghdr, return pointer to data */
 #define	CMSG_DATA(cmsg)		((unsigned char *)(cmsg) + \
-				 __DARWIN_ALIGN32(sizeof(struct cmsghdr)))
+	__DARWIN_ALIGN32(sizeof(struct cmsghdr)))
 
 /*
  * RFC 2292 requires to check msg_controllen, in case that the kernel returns
  * an empty list for some reasons.
  */
-#define CMSG_FIRSTHDR(mhdr) \
-        ((mhdr)->msg_controllen >= sizeof(struct cmsghdr) ? \
-         (struct cmsghdr *)(mhdr)->msg_control : \
-         (struct cmsghdr *)0L)
+#define	CMSG_FIRSTHDR(mhdr) \
+	((mhdr)->msg_controllen >= sizeof(struct cmsghdr) ? \
+	    (struct cmsghdr *)(mhdr)->msg_control : \
+	    (struct cmsghdr *)0L)
 
 
-/* 
+/*
  * Given pointer to struct cmsghdr, return pointer to next cmsghdr
  * RFC 2292 says that CMSG_NXTHDR(mhdr, NULL) is equivalent to CMSG_FIRSTHDR(mhdr)
  */
 #define	CMSG_NXTHDR(mhdr, cmsg)						\
 	((char *)(cmsg) == (char *)0L ? CMSG_FIRSTHDR(mhdr) :		\
-	 ((((unsigned char *)(cmsg) +					\
+	    ((((unsigned char *)(cmsg) +				\
 	    __DARWIN_ALIGN32((__uint32_t)(cmsg)->cmsg_len) +		\
 	    __DARWIN_ALIGN32(sizeof(struct cmsghdr))) >			\
 	    ((unsigned char *)(mhdr)->msg_control +			\
-	     (mhdr)->msg_controllen)) ?					\
-	  (struct cmsghdr *)0L /* NULL */ :				\
-	  (struct cmsghdr *)(void *)((unsigned char *)(cmsg) +		\
-	 		    __DARWIN_ALIGN32((__uint32_t)(cmsg)->cmsg_len))))
+	    (mhdr)->msg_controllen)) ?					\
+		(struct cmsghdr *)0L /* NULL */ :			\
+		(struct cmsghdr *)(void *)((unsigned char *)(cmsg) +	\
+		    __DARWIN_ALIGN32((__uint32_t)(cmsg)->cmsg_len))))
 
 #if !defined(_POSIX_C_SOURCE) || defined(_DARWIN_C_SOURCE)
 /* RFC 2292 additions */
@@ -549,7 +670,7 @@
 #if !defined(_POSIX_C_SOURCE) || defined(_DARWIN_C_SOURCE)
 #define	SCM_TIMESTAMP			0x02	/* timestamp (struct timeval) */
 #define	SCM_CREDS			0x03	/* process creds (struct cmsgcred) */
-#define	SCM_TIMESTAMP_MONOTONIC		0x04	/* timestamp (uint64_t) */ 
+#define	SCM_TIMESTAMP_MONOTONIC		0x04	/* timestamp (uint64_t) */
 
 
 #endif	/* (!_POSIX_C_SOURCE || _DARWIN_C_SOURCE) */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/socketvar.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/socketvar.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/socketvar.h	2016-02-27 07:07:40.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/socketvar.h	2016-06-03 22:55:51.000000000 +0200
@@ -2,7 +2,7 @@
  * Copyright (c) 2000-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
- * 
+ *
  * This file contains Original Code and/or Modifications of Original Code
  * as defined in and that are subject to the Apple Public Source License
  * Version 2.0 (the 'License'). You may not use this file except in
@@ -11,10 +11,10 @@
  * unlawful or unlicensed copies of an Apple operating system, or to
  * circumvent, violate, or enable the circumvention or violation of, any
  * terms of an Apple operating system software license agreement.
- * 
+ *
  * Please obtain a copy of the License at
  * http://www.opensource.apple.com/apsl/ and read it before using this file.
- * 
+ *
  * The Original Code and all software distributed under the License are
  * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
  * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
@@ -22,12 +22,12 @@
  * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
  * Please see the License for the specific language governing rights and
  * limitations under the License.
- * 
+ *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_END@
  */
 /* Copyright (c) 1998, 1999 Apple Computer, Inc. All Rights Reserved */
 /* Copyright (c) 1995 NeXT Computer, Inc. All Rights Reserved */
-/*-
+/*
  * Copyright (c) 1982, 1986, 1990, 1993
  *	The Regents of the University of California.  All rights reserved.
  *
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/sockio.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/sockio.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/sockio.h	2015-08-27 01:55:57.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/sockio.h	2016-06-03 22:55:52.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2000-2015 Apple Inc. All rights reserved.
+ * Copyright (c) 2000-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  * 
@@ -99,7 +99,6 @@
 #define SIOCAUTONETMASK	_IOW('i', 39, struct ifreq)	/* autoconf netmask */
 #define SIOCARPIPLL		_IOWR('i', 40, struct ifreq)	/* arp for IPv4LL address */
 
-
 #define	SIOCADDMULTI	 _IOW('i', 49, struct ifreq)	/* add m'cast addr */
 #define	SIOCDELMULTI	 _IOW('i', 50, struct ifreq)	/* del m'cast addr */
 #define	SIOCGIFMTU	_IOWR('i', 51, struct ifreq)	/* get IF mtu */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/stat.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/stat.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/stat.h	2015-08-27 01:55:57.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/stat.h	2016-06-03 22:55:52.000000000 +0200
@@ -320,7 +320,7 @@
  * in Mac OS X.
  */
 /* #define UF_NOUNLINK	0x00000010 */	/* file may not be removed or renamed */
-#define UF_COMPRESSED	0x00000020	/* file is hfs-compressed */
+#define UF_COMPRESSED	0x00000020	/* file is compressed (some file-systems) */
 
 /* UF_TRACKED is used for dealing with document IDs.  We no longer issue
    notifications for deletes or renames for files which have UF_TRACKED set. */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/syscall.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/syscall.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/syscall.h	2016-02-27 07:07:42.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/syscall.h	2016-06-03 22:55:54.000000000 +0200
@@ -29,7 +29,7 @@
  * System call switch table.
  *
  * DO NOT EDIT-- this file is automatically generated.
- * created from /Library/Caches/com.apple.xbs/Sources/xnu/xnu-3248.40.184/bsd/kern/syscalls.master
+ * created from /Library/Caches/com.apple.xbs/Sources/xnu/xnu-3705.0.0.1.10/bsd/kern/syscalls.master
  */
 
 #ifndef _SYS_SYSCALL_H_
@@ -100,7 +100,7 @@
 #define	SYS_umask          60
 #define	SYS_chroot         61
 			/* 62  old fstat */
-			/* 63  used internally , reserved */
+			/* 63  used internally and reserved */
 			/* 64  old getpagesize */
 #define	SYS_msync          65
 #define	SYS_vfork          66
@@ -214,7 +214,7 @@
 			/* 174  old getdents */
 			/* 175  old gc_control */
 			/* 176  old add_profil */
-			/* 177  */
+#define	SYS_kdebug_typefilter 177
 #define	SYS_kdebug_trace_string 178
 #define	SYS_kdebug_trace64 179
 #define	SYS_kdebug_trace   180
@@ -222,7 +222,7 @@
 #define	SYS_setegid        182
 #define	SYS_seteuid        183
 #define	SYS_sigreturn      184
-#define	SYS_chud           185
+			/* 185  old chud */
 			/* 186  */
 #define	SYS_fdatasync      187
 #define	SYS_stat           188
@@ -230,12 +230,12 @@
 #define	SYS_lstat          190
 #define	SYS_pathconf       191
 #define	SYS_fpathconf      192
-			/* 193  */
+			/* 193  old getfsstat */
 #define	SYS_getrlimit      194
 #define	SYS_setrlimit      195
 #define	SYS_getdirentries  196
 #define	SYS_mmap           197
-			/* 198  __syscall */
+			/* 198  old __syscall */
 #define	SYS_lseek          199
 #define	SYS_truncate       200
 #define	SYS_ftruncate      201
@@ -254,14 +254,14 @@
 			/* 214  */
 			/* 215  */
 #define	SYS_open_dprotected_np 216
-			/* 217  */
-			/* 218  */
-			/* 219  */
+			/* 217  old statv */
+			/* 218  old lstatv */
+			/* 219  old fstatv */
 #define	SYS_getattrlist    220
 #define	SYS_setattrlist    221
 #define	SYS_getdirentriesattr 222
 #define	SYS_exchangedata   223
-			/* 224  old checkuseraccess / fsgetpath ( which moved to 427 ) */
+			/* 224  old checkuseraccess or fsgetpath */
 #define	SYS_searchfs       225
 #define	SYS_delete         226
 #define	SYS_copyfile       227
@@ -294,7 +294,7 @@
 #define	SYS_semctl         254
 #define	SYS_semget         255
 #define	SYS_semop          256
-			/* 257  */
+			/* 257  old semconfig */
 #define	SYS_msgctl         258
 #define	SYS_msgget         259
 #define	SYS_msgsnd         260
@@ -499,7 +499,7 @@
 #define	SYS_coalition_info 459
 #define	SYS_necp_match_policy 460
 #define	SYS_getattrlistbulk 461
-			/* 462  */
+#define	SYS_clonefileat    462
 #define	SYS_openat         463
 #define	SYS_openat_nocancel 464
 #define	SYS_renameat       465
@@ -525,7 +525,7 @@
 #define	SYS_guarded_write_np 485
 #define	SYS_guarded_pwrite_np 486
 #define	SYS_guarded_writev_np 487
-#define	SYS_rename_ext     488
+#define	SYS_renameatx_np   488
 #define	SYS_mremap_encrypted 489
 #define	SYS_netagent_trigger 490
 #define	SYS_stack_snapshot_with_config 491
@@ -537,7 +537,30 @@
 			/* 497  */
 			/* 498  */
 #define	SYS_work_interval_ctl 499
-#define	SYS_MAXSYSCALL	500
+#define	SYS_getentropy     500
+#define	SYS_necp_open      501
+#define	SYS_necp_client_action 502
+#define	SYS___nexus_open   503
+#define	SYS___nexus_register 504
+#define	SYS___nexus_deregister 505
+#define	SYS___nexus_create 506
+#define	SYS___nexus_destroy 507
+#define	SYS___nexus_get_opt 508
+#define	SYS___nexus_set_opt 509
+#define	SYS___channel_open 510
+#define	SYS___channel_get_info 511
+#define	SYS___channel_sync 512
+#define	SYS___channel_get_opt 513
+#define	SYS___channel_set_opt 514
+#define	SYS_ulock_wait     515
+#define	SYS_ulock_wake     516
+#define	SYS_fclonefileat   517
+#define	SYS_fs_snapshot    518
+			/* 519  */
+#define	SYS_terminate_with_payload 520
+#define	SYS_abort_with_payload 521
+#define	SYS_MAXSYSCALL	522
+#define	SYS_invalid	63
 
 #endif /* __APPLE_API_PRIVATE */
 #endif /* !_SYS_SYSCALL_H_ */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/sysctl.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/sysctl.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/sysctl.h	2015-08-27 01:55:57.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/sysctl.h	2016-06-03 22:55:52.000000000 +0200
@@ -270,8 +270,8 @@
 void sysctl_register_oid(struct sysctl_oid *oidp);
 void sysctl_unregister_oid(struct sysctl_oid *oidp);
 
-/* Not exported */
-void sysctl_register_fixed(void);
+/* Deprecated */
+void sysctl_register_fixed(void) __deprecated;
 
 __END_DECLS
 
@@ -397,6 +397,7 @@
 
 
 
+
 #ifdef SYSCTL_DEF_ENABLED
 /*
  * Top-level identifiers
@@ -553,18 +554,16 @@
 #define KERN_KDTHRMAP           12
 /* Don't use 13 as it is overloaded with KERN_VNODE */
 #define KERN_KDPIDEX            14
-#define KERN_KDSETRTCDEC        15
-#define KERN_KDGETENTROPY       16		/* Obsolescent */
+#define KERN_KDSETRTCDEC        15 /* obsolete */
+#define KERN_KDGETENTROPY       16 /* obsolete */
 #define KERN_KDWRITETR		17
 #define KERN_KDWRITEMAP		18
-#define KERN_KDENABLE_BG_TRACE	19
-#define KERN_KDDISABLE_BG_TRACE	20
+/* 19 - 20 unused */
 #define KERN_KDREADCURTHRMAP	21
 #define KERN_KDSET_TYPEFILTER   22
 #define KERN_KDBUFWAIT		23
 #define KERN_KDCPUMAP		24
-#define KERN_KDWAIT_BG_TRACE_RESET 25
-#define KERN_KDSET_BG_TYPEFILTER   26
+/* 25 - 26 unused */
 #define KERN_KDWRITEMAP_V3	27
 #define KERN_KDWRITETR_V3	28
 
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/sysproto.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/sysproto.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/sysproto.h	2016-02-27 07:07:42.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/sysproto.h	2016-06-03 22:55:54.000000000 +0200
@@ -29,7 +29,7 @@
  * System call switch table.
  *
  * DO NOT EDIT-- this file is automatically generated.
- * created from /Library/Caches/com.apple.xbs/Sources/xnu/xnu-3248.40.184/bsd/kern/syscalls.master
+ * created from /Library/Caches/com.apple.xbs/Sources/xnu/xnu-3705.0.0.1.10/bsd/kern/syscalls.master
  */
 
 #ifndef _SYS_SYSPROTO_H_
@@ -588,6 +588,10 @@
 	char infop_l_[PADL_(user_addr_t)]; user_addr_t infop; char infop_r_[PADR_(user_addr_t)];
 	char options_l_[PADL_(int)]; int options; char options_r_[PADR_(int)];
 };
+struct kdebug_typefilter_args {
+	char addr_l_[PADL_(user_addr_t)]; user_addr_t addr; char addr_r_[PADR_(user_addr_t)];
+	char size_l_[PADL_(user_addr_t)]; user_addr_t size; char size_r_[PADR_(user_addr_t)];
+};
 struct kdebug_trace_string_args {
 	char debugid_l_[PADL_(uint32_t)]; uint32_t debugid; char debugid_r_[PADR_(uint32_t)];
 	char str_id_l_[PADL_(uint64_t)]; uint64_t str_id; char str_id_r_[PADR_(uint64_t)];
@@ -620,14 +624,6 @@
 	char uctx_l_[PADL_(user_addr_t)]; user_addr_t uctx; char uctx_r_[PADR_(user_addr_t)];
 	char infostyle_l_[PADL_(int)]; int infostyle; char infostyle_r_[PADR_(int)];
 };
-struct chud_args {
-	char code_l_[PADL_(uint64_t)]; uint64_t code; char code_r_[PADR_(uint64_t)];
-	char arg1_l_[PADL_(uint64_t)]; uint64_t arg1; char arg1_r_[PADR_(uint64_t)];
-	char arg2_l_[PADL_(uint64_t)]; uint64_t arg2; char arg2_r_[PADR_(uint64_t)];
-	char arg3_l_[PADL_(uint64_t)]; uint64_t arg3; char arg3_r_[PADR_(uint64_t)];
-	char arg4_l_[PADL_(uint64_t)]; uint64_t arg4; char arg4_r_[PADR_(uint64_t)];
-	char arg5_l_[PADL_(uint64_t)]; uint64_t arg5; char arg5_r_[PADR_(uint64_t)];
-};
 struct fdatasync_args {
 	char fd_l_[PADL_(int)]; int fd; char fd_r_[PADR_(int)];
 };
@@ -1970,6 +1966,13 @@
 	char bufferSize_l_[PADL_(user_size_t)]; user_size_t bufferSize; char bufferSize_r_[PADR_(user_size_t)];
 	char options_l_[PADL_(uint64_t)]; uint64_t options; char options_r_[PADR_(uint64_t)];
 };
+struct clonefileat_args {
+	char src_dirfd_l_[PADL_(int)]; int src_dirfd; char src_dirfd_r_[PADR_(int)];
+	char src_l_[PADL_(user_addr_t)]; user_addr_t src; char src_r_[PADR_(user_addr_t)];
+	char dst_dirfd_l_[PADL_(int)]; int dst_dirfd; char dst_dirfd_r_[PADR_(int)];
+	char dst_l_[PADL_(user_addr_t)]; user_addr_t dst; char dst_r_[PADR_(user_addr_t)];
+	char flags_l_[PADL_(uint32_t)]; uint32_t flags; char flags_r_[PADR_(uint32_t)];
+};
 struct openat_args {
 	char fd_l_[PADL_(int)]; int fd; char fd_r_[PADR_(int)];
 	char path_l_[PADL_(user_addr_t)]; user_addr_t path; char path_r_[PADR_(user_addr_t)];
@@ -2124,14 +2127,13 @@
 	char iovp_l_[PADL_(user_addr_t)]; user_addr_t iovp; char iovp_r_[PADR_(user_addr_t)];
 	char iovcnt_l_[PADL_(int)]; int iovcnt; char iovcnt_r_[PADR_(int)];
 };
-#if CONFIG_SECLUDED_RENAME
-struct rename_ext_args {
+struct renameatx_np_args {
+	char fromfd_l_[PADL_(int)]; int fromfd; char fromfd_r_[PADR_(int)];
 	char from_l_[PADL_(user_addr_t)]; user_addr_t from; char from_r_[PADR_(user_addr_t)];
+	char tofd_l_[PADL_(int)]; int tofd; char tofd_r_[PADR_(int)];
 	char to_l_[PADL_(user_addr_t)]; user_addr_t to; char to_r_[PADR_(user_addr_t)];
 	char flags_l_[PADL_(u_int)]; u_int flags; char flags_r_[PADR_(u_int)];
 };
-#else
-#endif
 #if CONFIG_CODE_DECRYPTION
 struct mremap_encrypted_args {
 	char addr_l_[PADL_(user_addr_t)]; user_addr_t addr; char addr_r_[PADR_(user_addr_t)];
@@ -2184,6 +2186,66 @@
 	char arg_l_[PADL_(user_addr_t)]; user_addr_t arg; char arg_r_[PADR_(user_addr_t)];
 	char len_l_[PADL_(user_size_t)]; user_size_t len; char len_r_[PADR_(user_size_t)];
 };
+struct getentropy_args {
+	char buffer_l_[PADL_(user_addr_t)]; user_addr_t buffer; char buffer_r_[PADR_(user_addr_t)];
+	char size_l_[PADL_(user_size_t)]; user_size_t size; char size_r_[PADR_(user_size_t)];
+};
+#if NECP
+struct necp_open_args {
+	char flags_l_[PADL_(int)]; int flags; char flags_r_[PADR_(int)];
+};
+struct necp_client_action_args {
+	char necp_fd_l_[PADL_(int)]; int necp_fd; char necp_fd_r_[PADR_(int)];
+	char action_l_[PADL_(uint32_t)]; uint32_t action; char action_r_[PADR_(uint32_t)];
+	char client_id_l_[PADL_(user_addr_t)]; user_addr_t client_id; char client_id_r_[PADR_(user_addr_t)];
+	char client_id_len_l_[PADL_(user_size_t)]; user_size_t client_id_len; char client_id_len_r_[PADR_(user_size_t)];
+	char buffer_l_[PADL_(user_addr_t)]; user_addr_t buffer; char buffer_r_[PADR_(user_addr_t)];
+	char buffer_size_l_[PADL_(user_size_t)]; user_size_t buffer_size; char buffer_size_r_[PADR_(user_size_t)];
+};
+#else
+#endif /* NECP */
+struct ulock_wait_args {
+	char operation_l_[PADL_(uint32_t)]; uint32_t operation; char operation_r_[PADR_(uint32_t)];
+	char addr_l_[PADL_(user_addr_t)]; user_addr_t addr; char addr_r_[PADR_(user_addr_t)];
+	char value_l_[PADL_(uint64_t)]; uint64_t value; char value_r_[PADR_(uint64_t)];
+	char timeout_l_[PADL_(uint32_t)]; uint32_t timeout; char timeout_r_[PADR_(uint32_t)];
+};
+struct ulock_wake_args {
+	char operation_l_[PADL_(uint32_t)]; uint32_t operation; char operation_r_[PADR_(uint32_t)];
+	char addr_l_[PADL_(user_addr_t)]; user_addr_t addr; char addr_r_[PADR_(user_addr_t)];
+	char wake_value_l_[PADL_(uint64_t)]; uint64_t wake_value; char wake_value_r_[PADR_(uint64_t)];
+};
+struct fclonefileat_args {
+	char src_fd_l_[PADL_(int)]; int src_fd; char src_fd_r_[PADR_(int)];
+	char dst_dirfd_l_[PADL_(int)]; int dst_dirfd; char dst_dirfd_r_[PADR_(int)];
+	char dst_l_[PADL_(user_addr_t)]; user_addr_t dst; char dst_r_[PADR_(user_addr_t)];
+	char flags_l_[PADL_(uint32_t)]; uint32_t flags; char flags_r_[PADR_(uint32_t)];
+};
+struct fs_snapshot_args {
+	char op_l_[PADL_(uint32_t)]; uint32_t op; char op_r_[PADR_(uint32_t)];
+	char dirfd_l_[PADL_(int)]; int dirfd; char dirfd_r_[PADR_(int)];
+	char name1_l_[PADL_(user_addr_t)]; user_addr_t name1; char name1_r_[PADR_(user_addr_t)];
+	char name2_l_[PADL_(user_addr_t)]; user_addr_t name2; char name2_r_[PADR_(user_addr_t)];
+	char data_l_[PADL_(user_addr_t)]; user_addr_t data; char data_r_[PADR_(user_addr_t)];
+	char flags_l_[PADL_(uint32_t)]; uint32_t flags; char flags_r_[PADR_(uint32_t)];
+};
+struct terminate_with_payload_args {
+	char pid_l_[PADL_(int)]; int pid; char pid_r_[PADR_(int)];
+	char reason_namespace_l_[PADL_(uint32_t)]; uint32_t reason_namespace; char reason_namespace_r_[PADR_(uint32_t)];
+	char reason_code_l_[PADL_(uint64_t)]; uint64_t reason_code; char reason_code_r_[PADR_(uint64_t)];
+	char payload_l_[PADL_(user_addr_t)]; user_addr_t payload; char payload_r_[PADR_(user_addr_t)];
+	char payload_size_l_[PADL_(uint32_t)]; uint32_t payload_size; char payload_size_r_[PADR_(uint32_t)];
+	char reason_string_l_[PADL_(user_addr_t)]; user_addr_t reason_string; char reason_string_r_[PADR_(user_addr_t)];
+	char reason_flags_l_[PADL_(uint64_t)]; uint64_t reason_flags; char reason_flags_r_[PADR_(uint64_t)];
+};
+struct abort_with_payload_args {
+	char reason_namespace_l_[PADL_(uint32_t)]; uint32_t reason_namespace; char reason_namespace_r_[PADR_(uint32_t)];
+	char reason_code_l_[PADL_(uint64_t)]; uint64_t reason_code; char reason_code_r_[PADR_(uint64_t)];
+	char payload_l_[PADL_(user_addr_t)]; user_addr_t payload; char payload_r_[PADR_(user_addr_t)];
+	char payload_size_l_[PADL_(uint32_t)]; uint32_t payload_size; char payload_size_r_[PADR_(uint32_t)];
+	char reason_string_l_[PADL_(user_addr_t)]; user_addr_t reason_string; char reason_string_r_[PADR_(user_addr_t)];
+	char reason_flags_l_[PADL_(uint64_t)]; uint64_t reason_flags; char reason_flags_r_[PADR_(uint64_t)];
+};
 int nosys(struct proc *, struct nosys_args *, int *);
 void exit(struct proc *, struct exit_args *, int32_t *);
 int fork(struct proc *, struct fork_args *, int *);
@@ -2323,6 +2385,7 @@
 int csops(struct proc *, struct csops_args *, int *);
 int csops_audittoken(struct proc *, struct csops_audittoken_args *, int *);
 int waitid(struct proc *, struct waitid_args *, int *);
+int kdebug_typefilter(struct proc *, struct kdebug_typefilter_args *, int *);
 int kdebug_trace_string(struct proc *, struct kdebug_trace_string_args *, uint64_t *);
 int kdebug_trace64(struct proc *, struct kdebug_trace64_args *, int *);
 int kdebug_trace(struct proc *, struct kdebug_trace_args *, int *);
@@ -2330,7 +2393,6 @@
 int setegid(struct proc *, struct setegid_args *, int *);
 int seteuid(struct proc *, struct seteuid_args *, int *);
 int sigreturn(struct proc *, struct sigreturn_args *, int *);
-int chud(struct proc *, struct chud_args *, int *);
 int fdatasync(struct proc *, struct fdatasync_args *, int *);
 int stat(struct proc *, struct stat_args *, int *);
 int fstat(struct proc *, struct fstat_args *, int *);
@@ -2656,6 +2718,7 @@
 #else
 #endif /* NECP */
 int getattrlistbulk(struct proc *, struct getattrlistbulk_args *, int *);
+int clonefileat(struct proc *, struct clonefileat_args *, int *);
 int openat(struct proc *, struct openat_args *, int *);
 int openat_nocancel(struct proc *, struct openat_nocancel_args *, int *);
 int renameat(struct proc *, struct renameat_args *, int *);
@@ -2687,10 +2750,7 @@
 int guarded_write_np(struct proc *, struct guarded_write_np_args *, user_ssize_t *);
 int guarded_pwrite_np(struct proc *, struct guarded_pwrite_np_args *, user_ssize_t *);
 int guarded_writev_np(struct proc *, struct guarded_writev_np_args *, user_ssize_t *);
-#if CONFIG_SECLUDED_RENAME
-int rename_ext(struct proc *, struct rename_ext_args *, int *);
-#else
-#endif
+int renameatx_np(struct proc *, struct renameatx_np_args *, int *);
 #if CONFIG_CODE_DECRYPTION
 int mremap_encrypted(struct proc *, struct mremap_encrypted_args *, int *);
 #else
@@ -2710,6 +2770,18 @@
 #else
 #endif
 int work_interval_ctl(struct proc *, struct work_interval_ctl_args *, int *);
+int getentropy(struct proc *, struct getentropy_args *, int *);
+#if NECP
+int necp_open(struct proc *, struct necp_open_args *, int *);
+int necp_client_action(struct proc *, struct necp_client_action_args *, int *);
+#else
+#endif /* NECP */
+int ulock_wait(struct proc *, struct ulock_wait_args *, int *);
+int ulock_wake(struct proc *, struct ulock_wake_args *, int *);
+int fclonefileat(struct proc *, struct fclonefileat_args *, int *);
+int fs_snapshot(struct proc *, struct fs_snapshot_args *, int *);
+int terminate_with_payload(struct proc *, struct terminate_with_payload_args *, int *);
+int abort_with_payload(struct proc *, struct abort_with_payload_args *, void *);
 
 __END_DECLS
 #undef PAD_
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/systm.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/systm.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/systm.h	2015-11-11 08:00:28.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/systm.h	2016-06-03 22:55:52.000000000 +0200
@@ -173,6 +173,7 @@
 
 
 
+
 __END_DECLS
 
 #endif /* !_SYS_SYSTM_H_ */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/ttycom.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/ttycom.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/ttycom.h	2015-08-27 01:55:59.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/ttycom.h	2016-06-03 22:55:54.000000000 +0200
@@ -70,7 +70,6 @@
 #define	_SYS_TTYCOM_H_
 
 #include <sys/ioccom.h>
-
 /*
  * Tty ioctl's except for those supported only for backwards compatibility
  * with the old tty driver.
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/ubc.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/ubc.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/ubc.h	2015-08-27 01:55:58.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/ubc.h	2016-06-03 22:55:52.000000000 +0200
@@ -40,6 +40,7 @@
 #include <mach/memory_object_types.h>
 #include <sys/ucred.h>
 
+
 /* defns for ubc_msync() and ubc_msync */
 
 #define	UBC_PUSHDIRTY	0x01	/* clean any dirty pages in the specified range to the backing store */
@@ -113,6 +114,7 @@
 
 errno_t mach_to_bsd_errno(kern_return_t mach_err);
 
+
 __END_DECLS
 
 #endif	/* _SYS_UBC_H_ */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/un.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/un.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/un.h	2015-08-27 01:55:58.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/un.h	2016-06-03 22:55:52.000000000 +0200
@@ -85,7 +85,7 @@
 #define SOL_LOCAL		0
 
 /* Socket options. */
-#define LOCAL_PEERCRED		0x001		/* retrieve peer credentails */
+#define LOCAL_PEERCRED		0x001		/* retrieve peer credentials */
 #define LOCAL_PEERPID		0x002		/* retrieve peer pid */
 #define LOCAL_PEEREPID		0x003		/* retrieve eff. peer pid */
 #define LOCAL_PEERUUID		0x004		/* retrieve peer UUID */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/vnode.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/vnode.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/vnode.h	2015-08-27 01:55:58.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/vnode.h	2016-06-03 22:55:53.000000000 +0200
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2000-2014 Apple Inc. All rights reserved.
+ * Copyright (c) 2000-2016 Apple Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  * 
@@ -106,11 +106,10 @@
 	VT_KERNFS, VT_PROCFS, VT_AFS, VT_ISOFS, VT_MOCKFS,
 	/* 16 - 20 */
 	VT_HFS, VT_ZFS, VT_DEVFS, VT_WEBDAV, VT_UDF, 
-	/* 21 - 24 */
-	VT_AFP, VT_CDDA, VT_CIFS, VT_OTHER
+	/* 21 - 25 */
+	VT_AFP, VT_CDDA, VT_CIFS, VT_OTHER, VT_APFS
 };
 
-
 /*
  * flags for VNOP_BLOCKMAP
  */
@@ -552,7 +551,7 @@
  @param vpp  Pointer to a vnode pointer, to be filled in with newly created vnode.
  @return 0 for success, error code otherwise.
  */
-errno_t	vnode_create(uint32_t, uint32_t, void  *, vnode_t *);
+errno_t	vnode_create(uint32_t flavor, uint32_t size, void  *data, vnode_t *vpp);
 
 
 /*!
@@ -564,7 +563,7 @@
  @param vp The vnode to mark.
  @return Always 0.
  */
-int	vnode_addfsref(vnode_t);
+int	vnode_addfsref(vnode_t vp);
 
 /*!
  @function vnode_removefsref
@@ -573,7 +572,7 @@
  @param vp The vnode to unmark.
  @return Always 0.
  */
-int	vnode_removefsref(vnode_t);
+int	vnode_removefsref(vnode_t vp);
 
 /*!
  @function vnode_hasdirtyblks 
@@ -582,7 +581,7 @@
  @param vp The vnode to test.
  @return Nonzero if there are dirty blocks, 0 otherwise
  */
-int	vnode_hasdirtyblks(vnode_t);
+int	vnode_hasdirtyblks(vnode_t vp);
 
 /*!
  @function vnode_hascleanblks
@@ -591,7 +590,7 @@
  @param vp The vnode to test.
  @return Nonzero if there are clean blocks, 0 otherwise.
  */
-int	vnode_hascleanblks(vnode_t);
+int	vnode_hascleanblks(vnode_t vp);
 
 #define	VNODE_ASYNC_THROTTLE	15
 /*!
@@ -604,24 +603,22 @@
  @param msg String to pass  msleep() .
  @return 0 for success, or an error value from msleep().
  */
-int	vnode_waitforwrites(vnode_t, int, int, int, const char *);
+int	vnode_waitforwrites(vnode_t vp, int output_target, int slpflag, int slptimeout, const char *msg);
 
 /*!
  @function vnode_startwrite
  @abstract Increment the count of pending writes on a vnode.
  @param vp The vnode whose count to increment.
- @return void.
  */
-void	vnode_startwrite(vnode_t);
+void	vnode_startwrite(vnode_t vp);
 
 /*!
  @function vnode_startwrite
  @abstract Decrement the count of pending writes on a vnode .
  @discussion Also wakes up threads waiting for the write count to drop, as in vnode_waitforwrites.
  @param vp The vnode whose count to decrement.
- @return void.
  */
-void	vnode_writedone(vnode_t);
+void	vnode_writedone(vnode_t vp);
 
 /*!
  @function vnode_vtype
@@ -629,7 +626,7 @@
  @param vp The vnode whose type to grab.
  @return The vnode's type.
  */
-enum vtype	vnode_vtype(vnode_t);
+enum vtype	vnode_vtype(vnode_t vp);
 
 /*!
  @function vnode_vid
@@ -637,7 +634,7 @@
  @param vp The vnode whose vid to grab.
  @return The vnode's vid.
  */
-uint32_t	vnode_vid(vnode_t);
+uint32_t	vnode_vid(vnode_t vp);
 
 /*!
  @function vnode_mountedhere
@@ -653,7 +650,7 @@
  @param vp The vnode whose mount to grab.
  @return The mount, directly.
  */
-mount_t	vnode_mount(vnode_t);
+mount_t	vnode_mount(vnode_t vp);
 
 /*!
  @function vnode_specrdev
@@ -661,7 +658,7 @@
  @param vp The vnode whose device id to extract--vnode must be a special file.
  @return The device id.
  */
-dev_t	vnode_specrdev(vnode_t);
+dev_t	vnode_specrdev(vnode_t vp);
 
 /*!
  @function vnode_fsnode
@@ -669,16 +666,15 @@
  @param vp The vnode whose data to grab.
  @return The filesystem-specific data, directly.
  */
-void *	vnode_fsnode(vnode_t);
+void *	vnode_fsnode(vnode_t vp);
 
 /*!
  @function vnode_clearfsnode
  @abstract Sets a vnode's filesystem-specific data to be NULL.
  @discussion This routine should only be called when a vnode is no longer in use, i.e. during a VNOP_RECLAIM.
  @param vp The vnode whose data to clear out.
- @return void.
  */
-void	vnode_clearfsnode(vnode_t);
+void	vnode_clearfsnode(vnode_t vp);
 
 /*!
  @function vnode_isvroot
@@ -686,7 +682,7 @@
  @param vp The vnode to test.
  @return Nonzero if the vnode is the root, 0 if it is not.
  */
-int	vnode_isvroot(vnode_t);
+int	vnode_isvroot(vnode_t vp);
 
 /*!
  @function vnode_issystem
@@ -694,7 +690,7 @@
  @param vp The vnode to test.
  @return Nonzero if the vnode is a system vnode, 0 if it is not.
  */
-int	vnode_issystem(vnode_t);
+int	vnode_issystem(vnode_t vp);
 
 /*!
  @function vnode_ismount
@@ -703,7 +699,7 @@
  @param vp The vnode to test.
  @return Nonzero if there is a mount in progress, 0 otherwise.
  */
-int	vnode_ismount(vnode_t);
+int	vnode_ismount(vnode_t vp);
 
 /*!
  @function vnode_isreg
@@ -711,7 +707,7 @@
  @param vp The vnode to test.
  @return Nonzero if the vnode is of type VREG, 0 otherwise.
  */
-int	vnode_isreg(vnode_t);
+int	vnode_isreg(vnode_t vp);
 
 /*!
  @function vnode_isdir
@@ -719,7 +715,7 @@
  @param vp The vnode to test.
  @return Nonzero if the vnode is of type VDIR, 0 otherwise.
  */
-int	vnode_isdir(vnode_t);
+int	vnode_isdir(vnode_t vp);
 
 /*!
  @function vnode_islnk
@@ -727,7 +723,7 @@
  @param vp The vnode to test.
  @return Nonzero if the vnode is of type VLNK, 0 otherwise.
  */
-int	vnode_islnk(vnode_t);
+int	vnode_islnk(vnode_t vp);
 
 /*!
  @function vnode_isfifo
@@ -735,7 +731,7 @@
  @param vp The vnode to test.
  @return Nonzero if the vnode is of type VFIFO, 0 otherwise.
  */
-int	vnode_isfifo(vnode_t);
+int	vnode_isfifo(vnode_t vp);
 
 /*!
  @function vnode_isblk
@@ -743,7 +739,7 @@
  @param vp The vnode to test.
  @return Nonzero if the vnode is of type VBLK, 0 otherwise.
  */
-int	vnode_isblk(vnode_t);
+int	vnode_isblk(vnode_t vp);
 
 /*!
  @function vnode_ischr
@@ -751,7 +747,7 @@
  @param vp The vnode to test.
  @return Nonzero if the vnode is of type VCHR, 0 otherwise.
  */
-int	vnode_ischr(vnode_t);
+int	vnode_ischr(vnode_t vp);
 
 /*!
  @function vnode_isswap
@@ -768,7 +764,7 @@
  @param vp The vnode to test.
  @return Nonzero if the vnode is a named stream, 0 otherwise.
  */
-int	vnode_isnamedstream(vnode_t);
+int	vnode_isnamedstream(vnode_t vp);
 #endif
 
 /*!
@@ -778,24 +774,22 @@
  @param vp The vnode to test.
  @return Nonzero if the vnode is a block device on which an filesystem is mounted, 0 otherwise.
  */
-int	vnode_ismountedon(vnode_t);
+int	vnode_ismountedon(vnode_t vp);
 
 /*!
  @function vnode_setmountedon
  @abstract Set flags indicating that a block device vnode has been mounted as a filesystem.
  @discussion A block device marked as being mounted on cannot be opened.
  @param vp The vnode to set flags on, a block device.
- @return void.
  */
-void	vnode_setmountedon(vnode_t);
+void	vnode_setmountedon(vnode_t vp);
 
 /*!
  @function vnode_clearmountedon
  @abstract Clear flags indicating that a block device vnode has been mounted as a filesystem.
  @param vp The vnode to clear flags on, a block device.
- @return void.
  */
-void	vnode_clearmountedon(vnode_t);
+void	vnode_clearmountedon(vnode_t vp);
 
 /*!
  @function vnode_isrecycled
@@ -804,7 +798,7 @@
  @param vp The vnode to test.
  @return Nonzero if vnode is dead or being recycled, 0 otherwise.
  */
-int	vnode_isrecycled(vnode_t);
+int	vnode_isrecycled(vnode_t vp);
 
 /*!
  @function vnode_isnocache
@@ -812,7 +806,7 @@
  @param vp The vnode to test.
  @return Nonzero if vnode is set to not have data chached, 0 otherwise.
  */
-int	vnode_isnocache(vnode_t);
+int	vnode_isnocache(vnode_t vp);
 
 /*!
  @function vnode_israge
@@ -820,7 +814,7 @@
  @param vp The vnode to test.
  @return Nonzero if vnode is marked for rapid aging, 0 otherwise
  */
-int	vnode_israge(vnode_t);
+int	vnode_israge(vnode_t vp);
 
 /*!
  @function vnode_needssnapshots
@@ -828,23 +822,21 @@
  @param vp The vnode to test.
  @return Nonzero if vnode needs snapshot events, 0 otherwise
  */
-int	vnode_needssnapshots(vnode_t);
+int	vnode_needssnapshots(vnode_t vp);
 
 /*!
  @function vnode_setnocache
  @abstract Set a vnode to not have its data cached in memory (i.e. we write-through to disk and always read from disk).
  @param vp The vnode whose flags to set.
- @return void.
  */
-void	vnode_setnocache(vnode_t);
+void	vnode_setnocache(vnode_t vp);
 
 /*!
  @function vnode_clearnocache
  @abstract Clear the flag on a vnode indicating that data should not be cached in memory (i.e. we write-through to disk and always read from disk).
  @param vp The vnode whose flags to clear.
- @return void.
  */
-void	vnode_clearnocache(vnode_t);
+void	vnode_clearnocache(vnode_t vp);
 
 /*!
  @function vnode_isnoreadahead
@@ -852,75 +844,67 @@
  @param vp The vnode to test.
  @return Nonzero if readahead is disabled, 0 otherwise.
  */
-int	vnode_isnoreadahead(vnode_t);
+int	vnode_isnoreadahead(vnode_t vp);
 
 /*!
  @function vnode_setnoreadahead
  @abstract Set a vnode to not have data speculatively read in in hopes of hitting in cache.
  @param vp The vnode on which to prevent readahead.
- @return void.
  */
-void	vnode_setnoreadahead(vnode_t);
+void	vnode_setnoreadahead(vnode_t vp);
 
 /*!
  @function vnode_clearnoreadahead
  @abstract Clear the flag indicating that a vnode should not have data speculatively read in.
  @param vp The vnode whose flag to clear.
- @return void.
  */
-void	vnode_clearnoreadahead(vnode_t);
+void	vnode_clearnoreadahead(vnode_t vp);
 
 /*!
  @function vnode_isfastdevicecandidate
  @abstract Check if a vnode is a candidate to store on the fast device of a composite disk system
  @param vp The vnode which you want to test.
  @return Nonzero if the vnode is marked as a fast-device candidate
- @return void.
  */
-int	vnode_isfastdevicecandidate(vnode_t);
+int	vnode_isfastdevicecandidate(vnode_t vp);
 
 /*!
  @function vnode_setfastdevicecandidate
  @abstract Mark a vnode as a candidate to store on the fast device of a composite disk system
- @abstract If the vnode is a directory, all its children will inherit this bit.
+ @discussion If the vnode is a directory, all its children will inherit this bit.
  @param vp The vnode which you want marked.
- @return void.
  */
-void	vnode_setfastdevicecandidate(vnode_t);
+void	vnode_setfastdevicecandidate(vnode_t vp);
 
 /*!
  @function vnode_clearfastdevicecandidate
  @abstract Clear the status of a vnode being a candidate to store on the fast device of a composite disk system.
  @param vp The vnode whose flag to clear.
- @return void.
  */
-void	vnode_clearfastdevicecandidate(vnode_t);
+void	vnode_clearfastdevicecandidate(vnode_t vp);
 
 /*!
  @function vnode_isautocandidate
  @abstract Check if a vnode was automatically selected to be fast-dev candidate (see vnode_setfastdevicecandidate)
  @param vp The vnode which you want to test.
  @return Nonzero if the vnode was automatically marked as a fast-device candidate
- @return void.
  */
-int	vnode_isautocandidate(vnode_t);
+int	vnode_isautocandidate(vnode_t vp);
 
 /*!
  @function vnode_setfastdevicecandidate
  @abstract Mark a vnode as an automatically selected candidate for storing on the fast device of a composite disk system
- @abstract If the vnode is a directory, all its children will inherit this bit.
+ @discussion If the vnode is a directory, all its children will inherit this bit.
  @param vp The vnode which you want marked.
- @return void.
  */
-void	vnode_setautocandidate(vnode_t);
+void	vnode_setautocandidate(vnode_t vp);
 
 /*!
  @function vnode_clearautocandidate
  @abstract Clear the status of a vnode being an automatic candidate (see above)
  @param vp The vnode whose flag to clear.
- @return void.
  */
-void	vnode_clearautocandidate(vnode_t);
+void	vnode_clearautocandidate(vnode_t vp);
 
 /* left only for compat reasons as User code depends on this from getattrlist, for ex */
 
@@ -929,9 +913,8 @@
  @abstract Set a vnode filesystem-specific "tag."
  @discussion Sets a tag indicating which filesystem a vnode belongs to, e.g. VT_HFS, VT_UDF, VT_ZFS.  The kernel never inspects this data, though the filesystem tags are defined in vnode.h; it is for the benefit of user programs via getattrlist.
  @param vp The vnode whose tag to set.
- @return void.
  */
-void	vnode_settag(vnode_t, int);
+void	vnode_settag(vnode_t vp, int tag);
 
 /*!
  @function vnode_tag
@@ -940,7 +923,7 @@
  @param vp The vnode whose tag to grab.
  @return The tag.
  */
-int	vnode_tag(vnode_t);
+int	vnode_tag(vnode_t vp);
 
 /*!
  @function vnode_getattr
@@ -977,7 +960,6 @@
  @abstract Clear out cached credentials on a vnode.
  @discussion When we authorize an action on a vnode, we cache the credential that was authorized and the actions it was authorized for in case a similar request follows.  This function destroys that caching.
  @param vp The vnode whose cache to clear.
- @return void.
  */
 void	vnode_uncache_credentials(vnode_t vp);
 
@@ -986,7 +968,6 @@
  @abstract Mark a vnode as being reachable by multiple paths, i.e. as a hard link.
  @discussion "Multipath" vnodes can be reached through more than one entry in the filesystem, and so must be handled differently for caching and event notification purposes.  A filesystem should mark a vnode with multiple hardlinks this way.
  @param vp The vnode to mark.
- @return void.
  */
 void	vnode_setmultipath(vnode_t vp);
 
@@ -996,7 +977,7 @@
  @param vp The vnode for which to get filesystem symlink size cap.
  @return Max symlink length.
  */
-uint32_t  vnode_vfsmaxsymlen(vnode_t);
+uint32_t  vnode_vfsmaxsymlen(vnode_t vp);
 
 /*!
  @function vnode_vfsisrdonly
@@ -1004,7 +985,7 @@
  @param vp The vnode for which to get filesystem writeability.
  @return Nonzero if the filesystem is read-only, 0 otherwise.
  */
-int	vnode_vfsisrdonly(vnode_t);
+int	vnode_vfsisrdonly(vnode_t vp);
 
 /*!
  @function vnode_vfstypenum
@@ -1013,16 +994,15 @@
  @param vp The vnode whose filesystem to examine.
  @return The type number of the fileystem to which the vnode belongs.
  */
-int	vnode_vfstypenum(vnode_t);
+int	vnode_vfstypenum(vnode_t vp);
 
 /*!
  @function vnode_vfsname
  @abstract Get the name of the filesystem to which a vnode belongs.
  @param vp The vnode whose filesystem to examine.
  @param buf Destination for vfs name: should have size MFSNAMELEN or greater.
- @return The name of the fileystem to which the vnode belongs.
  */
-void	vnode_vfsname(vnode_t, char *);
+void	vnode_vfsname(vnode_t vp, char *buf);
 
 /*!
  @function vnode_vfs64bitready
@@ -1030,7 +1010,7 @@
  @param vp The vnode whose filesystem to examine.
  @return Nonzero if filesystem is marked ready for 64-bit interactions; 0 otherwise.
  */
-int 	vnode_vfs64bitready(vnode_t);
+int 	vnode_vfs64bitready(vnode_t vp);
 
 /* These should move to private ... not documenting for now */
 int	vfs_context_get_special_port(vfs_context_t, int, ipc_port_t *);
@@ -1042,7 +1022,7 @@
  @param ctx Context whose associated process to find.
  @return Process if available, NULL otherwise.
  */
-proc_t	vfs_context_proc(vfs_context_t);
+proc_t	vfs_context_proc(vfs_context_t ctx);
 
 /*!
  @function vfs_context_ucred
@@ -1051,7 +1031,7 @@
  @param ctx Context whose associated process to find.
  @returns credential if process available; NULL otherwise
  */
-kauth_cred_t	vfs_context_ucred(vfs_context_t);
+kauth_cred_t	vfs_context_ucred(vfs_context_t ctx);
 
 /*!
  @function vfs_context_pid
@@ -1059,7 +1039,7 @@
  @param ctx Context whose associated process to find.
  @return Process id.
  */
-int	vfs_context_pid(vfs_context_t);
+int	vfs_context_pid(vfs_context_t ctx);
 
 /*!
  @function vfs_context_issignal
@@ -1068,7 +1048,7 @@
  @param ctx Context whose associated process to find.
  @return Bitfield of pending signals.
  */
-int	vfs_context_issignal(vfs_context_t, sigset_t);
+int	vfs_context_issignal(vfs_context_t ctx, sigset_t mask);
 
 /*!
  @function vfs_context_suser
@@ -1076,7 +1056,7 @@
  @param ctx Context to examine.
  @return Nonzero if context belongs to superuser, 0 otherwise.
  */
-int	vfs_context_suser(vfs_context_t);
+int	vfs_context_suser(vfs_context_t ctx);
 
 /*!
  @function vfs_context_is64bit
@@ -1084,7 +1064,7 @@
  @param ctx Context to examine.
  @return Nonzero if context is of 64-bit process, 0 otherwise.
  */
-int	vfs_context_is64bit(vfs_context_t);
+int	vfs_context_is64bit(vfs_context_t ctx);
 
 /*!
  @function vfs_context_create
@@ -1093,7 +1073,7 @@
  @param ctx Context to copy, or NULL to use information from running thread.
  @return The new context, or NULL in the event of failure.
  */
-vfs_context_t vfs_context_create(vfs_context_t);
+vfs_context_t vfs_context_create(vfs_context_t ctx);
 
 /*!
  @function vfs_context_rele
@@ -1102,7 +1082,7 @@
  @param ctx Context to release.
  @return Always 0.
  */
-int vfs_context_rele(vfs_context_t);
+int vfs_context_rele(vfs_context_t ctx);
 
 /*!
  @function vfs_context_current
@@ -1179,7 +1159,7 @@
  recycled. An iocount is required for any operation on a vnode.
  @return 0 for success, ENOENT if the vnode is dead, in the process of being reclaimed, or has been recycled and reused.
  */
-int	vnode_getwithref(vnode_t);
+int	vnode_getwithref(vnode_t vp);
 
 /*!
  @function vnode_put
@@ -1189,7 +1169,7 @@
  @param vp The vnode whose iocount to drop.
  @return Always 0.
  */
-int 	vnode_put(vnode_t);
+int 	vnode_put(vnode_t vp);
 
 /*!
  @function vnode_ref
@@ -1202,7 +1182,7 @@
  @param vp The vnode on which to obtain a persistent reference.
  @return 0 for success; ENOENT if the vnode is dead or in the process of being recycled AND the calling thread is not the vnode owner.
  */
-int 	vnode_ref(vnode_t);
+int 	vnode_ref(vnode_t vp);
 
 /*!
  @function vnode_rele
@@ -1211,9 +1191,8 @@
  opens the door for a vnode to be reused as a new file; it also triggers a VNOP_INACTIVE call to the filesystem,
  though that will not happen immediately if there are outstanding iocount references.
  @param vp The vnode whose usecount to drop.
- @return void.
  */
-void 	vnode_rele(vnode_t);
+void 	vnode_rele(vnode_t vp);
 
 /*!
  @function vnode_isinuse
@@ -1226,9 +1205,8 @@
  may no longer be correct the very moment that the caller receives it.
  @param vp The vnode whose use-status to check.
  @param refcnt The threshold for saying that a vnode is in use.
- @return void.
  */
-int 	vnode_isinuse(vnode_t, int);
+int 	vnode_isinuse(vnode_t vp, int refcnt);
 
 /*!
  @function vnode_recycle
@@ -1238,7 +1216,7 @@
  @param vp The vnode to recycle.
  @return 1 if the vnode was reclaimed (i.e. there were no existing references), 0 if it was only marked for future reclaim.
  */
-int	vnode_recycle(vnode_t);
+int	vnode_recycle(vnode_t vp);
 
 
 #define	VNODE_UPDATE_PARENT	0x01
@@ -1259,7 +1237,6 @@
  @param name_hashval Hash value of name, if known.  Passing 0 causes the cache to hash the name itself.
  @param flags VNODE_UPDATE_PARENT: set parent.  VNODE_UPDATE_NAME: set name.  VNODE_UPDATE_CACHE: flush cache entries for hard links
  associated with this file.  VNODE_UPDATE_PURGE: flush cache entries for hard links and children of this file.
- @return void.
  */
 void	vnode_update_identity(vnode_t vp, vnode_t dvp, const char *name, int name_len, uint32_t name_hashval, int flags);
 
@@ -1283,7 +1260,7 @@
  @param ctx Context for which to authorize actions.
  @return EACCESS if permission is denied.  0 if operation allowed.  Various errors from lower layers.
  */
-int	vnode_authorize(vnode_t /*vp*/, vnode_t /*dvp*/, kauth_action_t, vfs_context_t);
+int	vnode_authorize(vnode_t vp, vnode_t dvp, kauth_action_t action, vfs_context_t ctx);
 
 /*!
  @function vnode_authattr
@@ -1297,7 +1274,7 @@
  @param ctx Context for which to authorize actions.
  @return 0 (and a result in "actionp" for success.  Otherwise, an error code.
  */
-int	vnode_authattr(vnode_t, struct vnode_attr *, kauth_action_t *, vfs_context_t);
+int	vnode_authattr(vnode_t vp, struct vnode_attr *vap, kauth_action_t *actionp, vfs_context_t ctx);
 
 /*!
  @function vnode_authattr_new
@@ -1310,7 +1287,7 @@
  @param ctx Context for which to authorize actions.
  @return KAUTH_RESULT_ALLOW for success, an error to indicate invalid or disallowed attributes.
  */
-int	vnode_authattr_new(vnode_t /*dvp*/, struct vnode_attr *, int /*noauth*/, vfs_context_t);
+int	vnode_authattr_new(vnode_t dvp, struct vnode_attr *vap, int noauth, vfs_context_t ctx);
 
 /*!
  @function vnode_close
@@ -1322,7 +1299,7 @@
  @param ctx Context against which to validate operation.
  @return 0 for success or an error from the filesystem.
  */
-errno_t vnode_close(vnode_t, int, vfs_context_t);
+errno_t vnode_close(vnode_t vp, int flags, vfs_context_t ctx);
 
 /*!
  @function vn_getpath
@@ -1349,7 +1326,7 @@
  Will not reenter the filesystem.
  @return 0 for success, else an error code.
  */ 
-int 	vnode_notify(vnode_t, uint32_t, struct vnode_attr*);
+int 	vnode_notify(vnode_t vp, uint32_t events, struct vnode_attr *vap);
 
 /*!
  @function vfs_get_notify_attributes
@@ -1375,7 +1352,7 @@
  @param flags VNODE_LOOKUP_NOFOLLOW: do not follow symbolic links.  VNODE_LOOKUP_NOCROSSMOUNT: do not cross mount points.
  @return Results 0 for success or an error code.
  */
-errno_t vnode_lookup(const char *, int, vnode_t *, vfs_context_t);
+errno_t vnode_lookup(const char *path, int flags, vnode_t *vpp, vfs_context_t ctx);
 
 /*!
  @function vnode_open
@@ -1391,7 +1368,7 @@
  @param ctx Context with which to authorize open/creation.
  @return 0 for success or an error code.
  */
-errno_t vnode_open(const char *, int, int, int, vnode_t *, vfs_context_t);
+errno_t vnode_open(const char *path, int fmode, int cmode, int flags, vnode_t *vpp, vfs_context_t ctx);
 
 /*
  * exported vnode operations
@@ -1418,7 +1395,7 @@
  @return Zero for success, else an error code.  Will return 0 immediately if there are no vnodes hooked into the mount.
  @discussion Skips vnodes which are dead, in the process of reclaim, suspended, or of type VNON.
  */
-int	vnode_iterate(struct mount *, int, int (*)(struct vnode *, void *), void *);
+int	vnode_iterate(struct mount *mp, int flags, int (*callout)(struct vnode *, void *), void *arg);
 
 /*
  * flags passed into vnode_iterate
@@ -1453,7 +1430,7 @@
  @param ctx Context against which to validate operation.
  @return 0 always.
  */
-int	vn_revoke(vnode_t vp, int flags, vfs_context_t);
+int	vn_revoke(vnode_t vp, int flags, vfs_context_t ctx);
 
 /* namecache function prototypes */
 /*!
@@ -1479,7 +1456,6 @@
  @param vp File to add to cache. A non-NULL vp is stored for rapid access; a NULL vp indicates 
  that there is no such file in the directory and speeds future failed lookups.
  @param cnp Various data about lookup, e.g. filename and intended operation.
- @return void.  
  */
 void	cache_enter(vnode_t dvp, vnode_t vp, struct componentname *cnp);
 
@@ -1489,7 +1465,6 @@
  @discussion Will flush all hardlinks to the vnode as well as all children (should any exist).  Logical 
  to use when cached data about a vnode becomes invalid, for instance in an unlink.
  @param vp The vnode to purge.
- @return void.  
  */
 void	cache_purge(vnode_t vp);
 
@@ -1499,7 +1474,6 @@
  @discussion Appropriate to use when negative cache information for a directory could have
  become invalid, e.g. after file creation.
  @param vp The vnode whose negative children to purge.
- @return void.  
  */
 void	cache_purge_negatives(vnode_t vp);
 
@@ -1567,7 +1541,7 @@
  @param p Process requesting I/O.
  @return 0 for success; errors from filesystem, and EIO if did not perform all requested I/O and the "aresid" parameter is NULL.
  */
-int 	vn_rdwr(enum uio_rw, vnode_t, caddr_t, int, off_t, enum uio_seg, int, kauth_cred_t, int *, proc_t);
+int 	vn_rdwr(enum uio_rw rw, struct vnode *vp, caddr_t base, int len, off_t offset, enum uio_seg segflg, int ioflg, kauth_cred_t cred, int *aresid, proc_t p);
 
 /*!
  @function vnode_getname
@@ -1584,7 +1558,6 @@
  @abstract Release a reference on a name from the VFS cache.
  @discussion Should be called on a string obtained with vnode_getname().
  @param name String to release.
- @return void.
  */
 void	vnode_putname(const char *name);
 
@@ -1603,19 +1576,19 @@
  @function vnode_setdirty
  @abstract Mark the vnode as having data or metadata that needs to be written out during reclaim
  @discussion The vnode should be marked as dirty anytime a file system defers flushing of data or meta-data associated with it. 
- @param the vnode to mark as dirty
+ @param vp the vnode to mark as dirty
  @return 0 if successful else an error code.
  */
-int	vnode_setdirty(vnode_t);
+int	vnode_setdirty(vnode_t vp);
 
 /*!
  @function vnode_cleardirty
  @abstract Mark the vnode as clean i.e. all its data or metadata has been flushed
  @discussion The vnode should be marked as clean whenever the file system is done flushing data or meta-data associated with it.
- @param the vnode to clear as being dirty
+ @param vp the vnode to clear as being dirty
  @return 0 if successful else an error code.
  */
-int	vnode_cleardirty(vnode_t);
+int	vnode_cleardirty(vnode_t vp);
 
 /*!
  @function vnode_isdirty
@@ -1624,8 +1597,7 @@
  @param vp the vnode to test.
  @return Non-zero if the vnode is dirty, 0 otherwise.
  */
-int	vnode_isdirty(vnode_t);
-
+int	vnode_isdirty(vnode_t vp);
 
 
 
@@ -1641,18 +1613,18 @@
  @param alp Pointer to attribute list structure.
  @param vap Pointer to vnode_attr structure.
  @param obj_vtype Type of object - If VNON is passed, then the type is ignored and common, file and dir attrs are used to initialise the vattrs. If set to VDIR, only common and directory attributes are used. For all other types, only common and file attrbutes are used.
- @param attr_fixed_sizep. Returns the fixed length required in the attrbute buffer for the object. NULL should be passed if it is not required.
+ @param attr_fixed_sizep Returns the fixed length required in the attrbute buffer for the object. NULL should be passed if it is not required.
  @param ctx vfs context of caller.
  @return error.
  */
-errno_t vfs_setup_vattr_from_attrlist(struct attrlist * /* alp */, struct vnode_attr * /* vap */, enum vtype /* obj_vtype */, ssize_t * /* attr_fixed_sizep */, vfs_context_t /* ctx */);
+errno_t vfs_setup_vattr_from_attrlist(struct attrlist *alp, struct vnode_attr *vap, enum vtype obj_vtype, ssize_t *attr_fixed_sizep, vfs_context_t ctx);
 
 /*!
  @function vfs_attr_pack
  @abstract Pack a vnode_attr structure into a buffer in the same format as getattrlist(2).
  @Used by a VNOP_GETATTRLISTBULK implementation to pack data provided into a vnode_attr structure into a buffer the way getattrlist(2) does.
  @param vp If available, the vnode for which the attributes are being given, NULL if vnode is not available (which will usually be the case for a VNOP_GETATTRLISTBULK implementation.
- @param auio - a uio_t initialised with one iovec..
+ @param uio - a uio_t initialised with one iovec..
  @param alp - Pointer to an attrlist structure.
  @param options - options for call (same as options for getattrlistbulk(2)).
  @param vap Pointer to a filled in vnode_attr structure. Data from the vnode_attr structure will be used to copy and lay out the data in the required format for getatrlistbulk(2) by this function.
@@ -1660,7 +1632,8 @@
  @param ctx vfs context of caller.
  @return error.
  */
-errno_t vfs_attr_pack(vnode_t /* vp */, uio_t /* uio */, struct attrlist * /* alp */, uint64_t /* options */, struct vnode_attr * /* vap */, void * /* fndesc */, vfs_context_t /* ctx */);
+errno_t vfs_attr_pack(vnode_t vp, uio_t uio, struct attrlist *alp, uint64_t options, struct vnode_attr *vap, void *fndesc, vfs_context_t ctx);
+
 
 __END_DECLS
 
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/vnode_if.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/vnode_if.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/vnode_if.h	2015-08-27 01:55:58.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/sys/vnode_if.h	2016-06-03 22:55:53.000000000 +0200
@@ -1,6 +1,5 @@
-
 /*
- * Copyright (c) 2000-2014 Apple Computer, Inc. All rights reserved.
+ * Copyright (c) 2000-2016 Apple Computer, Inc. All rights reserved.
  *
  * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
  * 
@@ -108,6 +107,7 @@
 extern struct vnodeop_desc vnop_remove_desc;
 extern struct vnodeop_desc vnop_link_desc;
 extern struct vnodeop_desc vnop_rename_desc;
+extern struct vnodeop_desc vnop_renamex_desc;
 extern struct vnodeop_desc vnop_mkdir_desc;
 extern struct vnodeop_desc vnop_rmdir_desc;
 extern struct vnodeop_desc vnop_symlink_desc;
@@ -126,6 +126,7 @@
 extern struct vnodeop_desc vnop_pageout_desc;
 extern struct vnodeop_desc vnop_searchfs_desc;
 extern struct vnodeop_desc vnop_copyfile_desc;
+extern struct vnodeop_desc vnop_clonefile_desc;
 extern struct vnodeop_desc vnop_blktooff_desc;
 extern struct vnodeop_desc vnop_offtoblk_desc;
 extern struct vnodeop_desc vnop_blockmap_desc;
@@ -361,7 +362,7 @@
  @return 0 for success or a filesystem-specific error.  VNOP_READ() can return success even if less data was 
  read than originally requested; returning an error value should indicate that something actually went wrong.
  */
-extern errno_t VNOP_READ(vnode_t, struct uio *, int, vfs_context_t);
+extern errno_t VNOP_READ(vnode_t vp, struct uio *uio, int, vfs_context_t ctx);
 
 struct vnop_write_args {
 	struct vnodeop_desc *a_desc;
@@ -385,7 +386,7 @@
  @return 0 for success or a filesystem-specific error.  VNOP_WRITE() can return success even if less data was 
  written than originally requested; returning an error value should indicate that something actually went wrong.
  */
-extern errno_t VNOP_WRITE(vnode_t, struct uio *, int, vfs_context_t);
+extern errno_t VNOP_WRITE(vnode_t vp, struct uio *uio, int ioflag, vfs_context_t ctx);
 
 struct vnop_ioctl_args {
 	struct vnodeop_desc *a_desc;
@@ -413,7 +414,7 @@
  @param ctx Context against which to authenticate ioctl request.
  @return 0 for success or a filesystem-specific error.  
  */
-extern errno_t VNOP_IOCTL(vnode_t, u_long, caddr_t, int, vfs_context_t);
+extern errno_t VNOP_IOCTL(vnode_t vp, u_long command, caddr_t data, int fflag, vfs_context_t ctx);
 
 struct vnop_select_args {
 	struct vnodeop_desc *a_desc;
@@ -529,7 +530,7 @@
  @param ctx Context to authenticate for fsync request.
  @return 0 for success, else an error code.
  */
-extern errno_t VNOP_FSYNC(vnode_t, int, vfs_context_t);
+extern errno_t VNOP_FSYNC(vnode_t vp, int waitfor, vfs_context_t ctx);
 
 struct vnop_remove_args {
 	struct vnodeop_desc *a_desc;
@@ -597,6 +598,46 @@
  @return 0 for success, else an error code.
  */
 
+typedef unsigned int vfs_rename_flags_t;
+
+// Must match sys/stdio.h
+enum {
+	VFS_RENAME_SECLUDE	 	= 0x00000001,
+	VFS_RENAME_SWAP			= 0x00000002,
+	VFS_RENAME_EXCL			= 0x00000004,
+
+	VFS_RENAME_FLAGS_MASK	= (VFS_RENAME_SECLUDE | VFS_RENAME_SWAP
+							   | VFS_RENAME_EXCL),
+};
+
+struct vnop_renamex_args {
+	struct vnodeop_desc *a_desc;
+	vnode_t a_fdvp;
+	vnode_t a_fvp;
+	struct componentname *a_fcnp;
+	vnode_t a_tdvp;
+	vnode_t a_tvp;
+	struct componentname *a_tcnp;
+	struct vnode_attr *a_vap;		// Reserved for future use
+	vfs_rename_flags_t a_flags;
+	vfs_context_t a_context;
+};
+
+/*!
+ @function VNOP_RENAMEX
+ @abstract Call down to a filesystem to rename a file.
+ @discussion VNOP_RENAMEX() will only be called with a source and target on the same volume.
+ @param fdvp Directory in which source file resides.
+ @param fvp File being renamed.
+ @param fcnp Name information for source file.
+ @param tdvp Directory file is being moved to.
+ @param tvp Existing file with same name as target, should one exist.
+ @param tcnp Name information for target path.
+ @param flags Control certain rename semantics.
+ @param ctx Context to authenticate for rename request.
+ @return 0 for success, else an error code.
+ */
+
 
 
 struct vnop_mkdir_args {
@@ -1039,6 +1080,33 @@
 };
 
 
+struct vnop_clonefile_args {
+	struct vnodeop_desc *a_desc;
+	vnode_t a_fvp;
+	vnode_t a_dvp;
+	vnode_t *a_vpp;
+	struct componentname *a_cnp;
+	struct vnode_attr *a_vap;
+	uint32_t a_flags;
+	vfs_context_t a_context;
+	/* XXX Add recursive directory cloning authorizer */
+};
+
+/*!
+ @function VNOP_CLONEFILE
+ @abstract Call down to a filesystem to clone a filesystem object (regular file, directory or symbolic link.)
+ @discussion If file creation succeeds, "vpp" should be returned with an iocount to be dropped by the caller.
+ @param dvp Directory in which to clone object.
+ @param vpp Destination for vnode for newly cloned object.
+ @param cnp Description of name of object to clone.
+ @param vap File creation properties, as seen in vnode_getattr().  Manipulated with VATTR_ISACTIVE, VATTR_RETURN,
+ VATTR_SET_SUPPORTED, and so forth. All attributes not set here should either be copied
+ from the source object
+ or set to values which are used for creating new filesystem objects
+ @param ctx Context against which to authenticate file creation.
+ @return 0 for success or a filesystem-specific error.
+ */
+
 struct vnop_getxattr_args {
 	struct vnodeop_desc *a_desc;
 	vnode_t a_vp;
@@ -1061,7 +1129,7 @@
  @param ctx Context to authenticate for getxattr request.
  @return 0 for success, or an error code.
  */
-extern errno_t VNOP_GETXATTR(vnode_t, const char *, uio_t, size_t *, int, vfs_context_t);
+extern errno_t VNOP_GETXATTR(vnode_t vp, const char *name, uio_t uio, size_t *size, int options, vfs_context_t ctx);
 
 struct vnop_setxattr_args {
 	struct vnodeop_desc *a_desc;
@@ -1084,7 +1152,7 @@
  @param ctx Context to authenticate for setxattr request.
  @return 0 for success, or an error code.
  */
-extern errno_t VNOP_SETXATTR(vnode_t, const char *, uio_t, int, vfs_context_t);
+extern errno_t VNOP_SETXATTR(vnode_t vp, const char *name, uio_t uio, int options, vfs_context_t ctx);
 
 struct vnop_removexattr_args {
 	struct vnodeop_desc *a_desc;
@@ -1221,7 +1289,7 @@
  @param bp The buffer to write.
  @return 0 for success, else an error code.
  */
-extern errno_t VNOP_BWRITE(buf_t);
+extern errno_t VNOP_BWRITE(buf_t bp);
 
 struct vnop_kqfilt_add_args {
 	struct vnodeop_desc *a_desc;
@@ -1339,9 +1407,10 @@
  @param ctx Context to authenticate deleting named stream.
  @return 0 for success, else an error code.
  */
-#endif
 
-#endif
+#endif // NAMEDSTREAMS
+
+#endif // defined(__APPLE_API_UNSTABLE)
 
 __END_DECLS
 
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/vecLib/vBasicOps.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/vecLib/vBasicOps.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/vecLib/vBasicOps.h	2016-02-27 07:18:04.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/vecLib/vBasicOps.h	2016-06-03 23:09:20.000000000 +0200
@@ -3,7 +3,7 @@
  
      Contains:   Basic Algebraic Operations for AltiVec
  
-     Version:    vecLib-563.5
+     Version:    vecLib-595.0
  
      Copyright:  Copyright (c) 1999-2016 by Apple Inc. All rights reserved.
  
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/vecLib/vDSP.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/vecLib/vDSP.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/vecLib/vDSP.h	2016-02-27 07:18:04.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/vecLib/vDSP.h	2016-06-03 23:09:20.000000000 +0200
@@ -3,7 +3,7 @@
 
     Contains:   AltiVec DSP Interfaces
 
-    Version:    vecLib-563.5
+    Version:    vecLib-595.0
 
     Copyright:  Copyright (c) 2000-2016 by Apple Inc. All rights reserved.
 
@@ -209,6 +209,22 @@
 #endif
 
 
+/*  The following was reproduced from CFAvailability.h, with CF changed to
+    vDSP, to provide Swift-compatible enum declarations.  CFAvailability.h
+    itself is not included to creating a dependency on it in the kernel version
+    of vDSP.h, which cannot include CoreFoundation headers.
+*/
+#define __vDSP_ENUM_GET_MACRO(_1, _2, NAME, ...) NAME
+#if (__cplusplus && __cplusplus >= 201103L && (__has_extension(cxx_strong_enums) || __has_feature(objc_fixed_enum))) || (!__cplusplus && __has_feature(objc_fixed_enum))
+#define __vDSP_NAMED_ENUM(_type, _name)     enum _name : _type _name; enum _name : _type
+#define __vDSP_ANON_ENUM(_type)             enum : _type
+#else
+#define __vDSP_NAMED_ENUM(_type, _name) _type _name; enum
+#define __vDSP_ANON_ENUM(_type) enum
+#endif
+#define vDSP_ENUM(...) __vDSP_ENUM_GET_MACRO(__VA_ARGS__, __vDSP_NAMED_ENUM, __vDSP_ANON_ENUM)(__VA_ARGS__)
+
+
 #if !defined __has_feature
     #define __has_feature(f)    0
 #endif
@@ -220,22 +236,6 @@
 #endif
 
 
-/*  The following is reproduced from CFAvailability.h to provide
-    Swift-compatibility enum declarations.  CFAvailability.h itself is not
-    included to creating a dependency on it in the kernel version of vDSP.h,
-    which cannot include CoreFoundation headers.
-*/
-#define __CF_ENUM_GET_MACRO(_1, _2, NAME, ...) NAME
-#if (__cplusplus && __cplusplus >= 201103L && (__has_extension(cxx_strong_enums) || __has_feature(objc_fixed_enum))) || (!__cplusplus && __has_feature(objc_fixed_enum))
-#define __CF_NAMED_ENUM(_type, _name)     enum _name : _type _name; enum _name : _type
-#define __CF_ANON_ENUM(_type)             enum : _type
-#else
-#define __CF_NAMED_ENUM(_type, _name) _type _name; enum
-#define __CF_ANON_ENUM(_type) enum
-#endif
-#define CF_ENUM(...) __CF_ENUM_GET_MACRO(__VA_ARGS__, __CF_NAMED_ENUM, __CF_ANON_ENUM)(__VA_ARGS__)
-
-
 #pragma options align=power
 
 
@@ -244,8 +244,8 @@
     vDSP_Version0 is a major version number.
     vDSP_Version1 is a minor version number.
 */
-#define vDSP_Version0   563
-#define vDSP_Version1   5
+#define vDSP_Version0   595
+#define vDSP_Version1   0
 
 
 /*  Define types:
@@ -868,7 +868,7 @@
 extern void vDSP_vfill(
     const float *__A,
     float       *__C,
-    vDSP_Stride  __IA,
+    vDSP_Stride  __IC,
     vDSP_Length  __N)
         __OSX_AVAILABLE_STARTING(__MAC_10_4, __IPHONE_4_0);
     /*  Maps:  The default maps are used.
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/vecLib/vForce.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/vecLib/vForce.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/vecLib/vForce.h	2016-02-27 07:18:04.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/vecLib/vForce.h	2016-06-03 23:09:20.000000000 +0200
@@ -1,5 +1,5 @@
 /*
-vForce.h (from vecLib-563.5)
+vForce.h (from vecLib-595.0)
 Copyright (c) 1999-2016 by Apple Inc. All rights reserved.
 
 @APPLE_LICENSE_HEADER_START@
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/vecLib/vecLib.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/vecLib/vecLib.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/vecLib/vecLib.h	2016-02-27 07:18:04.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/vecLib/vecLib.h	2016-06-03 23:09:20.000000000 +0200
@@ -3,7 +3,7 @@
  
      Contains:   Master include for vecLib framework
  
-     Version:    vecLib-563.5
+     Version:    vecLib-595.0
  
      Copyright:  Copyright (c) 2000-2016 by Apple Inc. All rights reserved.
  
@@ -31,5 +31,4 @@
 #include <vecLib/vForce.h>
 #endif
 
-
 #endif /* __VECLIB__ */
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/vecLib/vecLibTypes.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/vecLib/vecLibTypes.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/vecLib/vecLibTypes.h	2016-02-27 07:18:04.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/vecLib/vecLibTypes.h	2016-06-03 23:09:20.000000000 +0200
@@ -3,7 +3,7 @@
  
      Contains:   Master include for vecLib framework
  
-     Version:    vecLib-563.5
+     Version:    vecLib-595.0
  
      Copyright:  Copyright (c) 2000-2016 by Apple Inc. All rights reserved.
  
@@ -12,6 +12,8 @@
  
                      http://developer.apple.com/bugreporter/
  
+     Various types are defined here to use with vecLib.  For more generally
+     useful vector/SIMD types, please consider the headers in /usr/include/simd.
 */
 #ifndef __VECLIBTYPES__
 #define __VECLIBTYPES__
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/vm/WKdm_new.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/vm/WKdm_new.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/vm/WKdm_new.h	2015-08-27 01:55:28.000000000 +0200
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/vm/WKdm_new.h	2016-06-03 22:55:09.000000000 +0200
@@ -69,7 +69,7 @@
 #include <mach/vm_param.h>
 
 
-#define	WKdm_SCRATCH_BUF_SIZE	PAGE_SIZE
+#define	WKdm_SCRATCH_BUF_SIZE_INTERNAL	PAGE_SIZE
 
 typedef unsigned int WK_word;
 
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/vm/vm_compressor_algorithms.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/vm/vm_compressor_algorithms.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/vm/vm_compressor_algorithms.h	1970-01-01 01:00:00.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/vm/vm_compressor_algorithms.h	2016-06-03 22:55:09.000000000 +0200
@@ -0,0 +1,30 @@
+/*
+ * Copyright (c) 2000-2016 Apple Inc. All rights reserved.
+ *
+ * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
+ * 
+ * This file contains Original Code and/or Modifications of Original Code
+ * as defined in and that are subject to the Apple Public Source License
+ * Version 2.0 (the 'License'). You may not use this file except in
+ * compliance with the License. The rights granted to you under the License
+ * may not be used to create, or enable the creation or redistribution of,
+ * unlawful or unlicensed copies of an Apple operating system, or to
+ * circumvent, violate, or enable the circumvention or violation of, any
+ * terms of an Apple operating system software license agreement.
+ * 
+ * Please obtain a copy of the License at
+ * http://www.opensource.apple.com/apsl/ and read it before using this file.
+ * 
+ * The Original Code and all software distributed under the License are
+ * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
+ * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
+ * INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
+ * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
+ * Please see the License for the specific language governing rights and
+ * limitations under the License.
+ * 
+ * @APPLE_OSREFERENCE_LICENSE_HEADER_END@
+ */
+
+#pragma once
+
diff -ruN /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/voucher/ipc_pthread_priority_types.h /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/voucher/ipc_pthread_priority_types.h
--- /Applications/Xcode73.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/Kernel.framework/Headers/voucher/ipc_pthread_priority_types.h	1970-01-01 01:00:00.000000000 +0100
+++ /Applications/Xcode8-beta1.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/System/Library/Frameworks/Kernel.framework/Headers/voucher/ipc_pthread_priority_types.h	2016-06-03 22:55:01.000000000 +0200
@@ -0,0 +1,42 @@
+/*
+ * Copyright (c) 2012-2016 Apple Inc. All rights reserved.
+ *
+ * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
+ *
+ * This file contains Original Code and/or Modifications of Original Code
+ * as defined in and that are subject to the Apple Public Source License
+ * Version 2.0 (the 'License'). You may not use this file except in
+ * compliance with the License. The rights granted to you under the License
+ * may not be used to create, or enable the creation or redistribution of,
+ * unlawful or unlicensed copies of an Apple operating system, or to
+ * circumvent, violate, or enable the circumvention or violation of, any
+ * terms of an Apple operating system software license agreement.
+ *
+ * Please obtain a copy of the License at
+ * http://www.opensource.apple.com/apsl/ and read it before using this file.
+ *
+ * The Original Code and all software distributed under the License are
+ * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
+ * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
+ * INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
+ * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
+ * Please see the License for the specific language governing rights and
+ * limitations under the License.
+ *
+ * @APPLE_OSREFERENCE_LICENSE_HEADER_END@
+ */
+
+#ifndef _VOUCHER_IPC_PTHREAD_PRIORITY_TYPES_H_
+#define _VOUCHER_IPC_PTHREAD_PRIORITY_TYPES_H_
+
+#include <stdint.h>
+#include <mach/mach_types.h>
+
+#define MACH_VOUCHER_ATTR_PTHPRIORITY_NULL 		((mach_voucher_attr_recipe_command_t)701)
+#define MACH_VOUCHER_ATTR_PTHPRIORITY_CREATE 		((mach_voucher_attr_recipe_command_t)710)
+
+typedef uint32_t ipc_pthread_priority_value_t;
+
+#define MACH_VOUCHER_PTHPRIORITY_CONTENT_SIZE (sizeof(ipc_pthread_priority_value_t))
+
+#endif /* _VOUCHER_IPC_PTHREAD_PRIORITY_TYPES_H_ */

```